// ==UserScript==
// @name         V2EX Next V2Next
// @namespace    http://tampermonkey.net/
// @version      10.9
// @author       zyronon
// @description  V2Next - 一个好用的V2EX脚本！ 已适配移动端
// @license      GPL License
// @icon         https://v2ex-script.vercel.app/favicon.ico
// @homepage     https://github.com/zyronon/web-scripts
// @homepageURL  https://github.com/zyronon/web-scripts
// @supportURL   https://update.greasyfork.org/scripts/458024/V2Next.user.js
// @downloadURL  https://update.greasyfork.org/scripts/458024/V2Next.user.js
// @updateURL    https://update.greasyfork.org/scripts/458024/V2Next.user.js
// @match        https://v2ex.com/
// @match        https://v2ex.com/?tab=*
// @match        https://v2ex.com/t/*
// @match        https://v2ex.com/recent*
// @match        https://v2ex.com/go/*
// @match        https://v2ex.com/member/*
// @match        https://v2ex.com/changes*
// @match        https://*.v2ex.com/
// @match        https://*.v2ex.com/?tab=*
// @match        https://*.v2ex.com/t/*
// @match        https://*.v2ex.com/recent*
// @match        https://*.v2ex.com/go/*
// @match        https://*.v2ex.com/member/*
// @match        https://*.v2ex.com/changes*
// @require      https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js
// @require      https://cdn.jsdelivr.net/npm/vue@3.4.14/vue.runtime.global.prod.min.js
// @grant        GM_addStyle
// @grant        GM_openInTab
// @grant        GM_registerMenuCommand
// ==/UserScript==


(function (vue) {
    'use strict';

    var J=(e=>(e.Home="Home",e.Node="Node",e.Post="Post",e.Member="Member",e.Changes="Changes",e))(J||{}),D=(e=>(e[e.FloorInFloor=0]="FloorInFloor",e[e.FloorInFloorNoCallUser=4]="FloorInFloorNoCallUser",e[e.FloorInFloorNested=5]="FloorInFloorNested",e[e.Like=1]="Like",e[e.V2exOrigin=2]="V2exOrigin",e[e.OnlyOp=3]="OnlyOp",e[e.New=6]="New",e))(D||{});const Kt=400,Mn={name:"Tooltip",props:{title:{type:String,default(){return ""}},disabled:{type:Boolean,default(){return !1}}},data(){return {show:!1}},methods:{showPop(e){if(this.disabled||!this.title)return;e.stopPropagation();let t=e.target.getBoundingClientRect();this.show=!0,vue.nextTick(()=>{var o,r;let n=(r=(o=this.$refs)==null?void 0:o.tip)==null?void 0:r.getBoundingClientRect();if(!n)return;t.top<50?this.$refs.tip.style.top=t.top+t.height+10+"px":this.$refs.tip.style.top=t.top-n.height-10+"px";let s=n.width,i=t.width;this.$refs.tip.style.left=t.left-(s-i)/2+"px";});}},render(){let e=this.$slots.default()[0];return vue.createVNode(vue.Fragment,null,[this.show&&this.title&&vue.createVNode(vue.Teleport,{to:"body"},{default:()=>[vue.createVNode(vue.Transition,{name:"fade"},{default:()=>[vue.createVNode("div",{ref:"tip",className:"tip"},[this.title])]})]}),vue.createVNode(e,{onClick:()=>this.show=!1,onmouseenter:t=>this.showPop(t),onmouseleave:()=>this.show=!1},null)])}};const Q=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n},Ue=Q(Mn,[["__scopeId","data-v-ee672411"]]),Ln=vue.defineComponent({__name:"BaseSwitch",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){return (n,s)=>(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["switch",{active:n.modelValue}]),onClick:s[0]||(s[0]=i=>n.$emit("update:modelValue",!n.modelValue))},null,2))}});const wt=Q(Ln,[["__scopeId","data-v-e7c0fbef"]]);var Nn=(()=>typeof GM_openInTab<"u"?GM_openInTab:void 0)(),Se=(()=>typeof GM_registerMenuCommand<"u"?GM_registerMenuCommand:void 0)();const I={createList(e,t){return e.replyList=t,e.topReplyList=window.clone(t).filter(n=>n.thankCount>=window.config.topReplyLoveMinCount).sort((n,s)=>s.thankCount-n.thankCount).slice(0,window.config.topReplyCount),e.replyCount=t.length,e.allReplyUsers=Array.from(new Set(t.map(n=>n.username))),e.nestedReplies=I.createNestedList(window.clone(t),e.topReplyList),e.nestedRedundReplies=I.createNestedRedundantList(window.clone(t),e.topReplyList),e},getAllReply(e=[]){return e.sort((t,n)=>t.i-n.i).reduce((t,n)=>(t=t.concat(n.replyList),t),[])},findChildren(e,t,n,s){var p;const i=(u,c,d)=>{u.level=d.level+1;let y=n.findIndex(g=>g.floor===u.floor);y>-1&&(n[y].isUse=!0),d.children.push(this.findChildren(u,c,n,s));};e.children=[];let o=[];for(let u=0;u<t.length;u++){let c=t[u];c.isUse||c.replyFloor===e.floor&&(c.replyUsers.length===1&&c.replyUsers[0]===e.username?(c.isUse=!0,o.push({endList:t.slice(u+1),currentItem:c})):c.isWrong=!0);}o.reverse().map(({currentItem:u,endList:c})=>{i(u,c,e);});let r=t.findIndex(u=>{var c;return u.username===e.username&&((c=u.replyUsers)==null?void 0:c[0])!==e.username}),a=r>-1?t.slice(0,r):t;for(let u=0;u<a.length;u++){let c=a[u];if(!c.isUse){if(c.replyUsers.length===1){if(c.replyFloor!==-1&&((p=n[c.replyFloor-1])==null?void 0:p.username)===c.replyUsers[0])continue;let d=t.slice(u+1);if(c.username===e.username){c.replyUsers[0]===e.username&&i(c,d,e);break}else c.replyUsers[0]===e.username&&i(c,d,e);}else if(c.username===e.username)break}}e.children=e.children.sort((u,c)=>u.floor-c.floor),e.replyCount=e.children.reduce((u,c)=>u+(c.children.length?c.replyCount+1:1),0);let h=s.findIndex(u=>u.floor===e.floor);return h>-1&&(s[h].children=e.children,s[h].replyCount=e.replyCount),e},createNestedList(e=[],t){if(!e.length)return [];let n=e,s=[];return n.map((i,o)=>{let r=n.slice(0,o),a=Array.from(new Set(r.map(p=>p.username))),h=n.slice(o+1);if(o===0)s.push(this.findChildren(i,h,n,t));else if(!i.isUse){let p=!1;i.replyUsers.length?i.replyUsers.length>1?p=!0:p=!a.find(u=>u===i.replyUsers[0]):p=!0,p&&(i.level=0,s.push(this.findChildren(i,h,n,t)));}}),s},createNestedRedundantList(e=[],t){if(!e.length)return [];let n=e,s=[];return n.map((i,o)=>{let r=n.slice(0,o),a=Array.from(new Set(r.map(p=>p.username))),h=n.slice(o+1);if(o===0)s.push(this.findChildren(i,h,n,t));else if(i.isUse){let p=window.clone(i);p.children=[],p.level=0,p.isDup=!0,s.push(p);}else {let p=!1;i.replyUsers.length?i.replyUsers.length>1?p=!0:p=!a.find(u=>u===i.replyUsers[0]):p=!0,p&&(i.level=0,s.push(this.findChildren(i,h,n,t)));}}),s},parseA(e){let t=e.href,n;return t.includes("/t/")&&(n=e.pathname.substring(3)),{href:t,id:n,title:e.innerText}},checkPhotoLink2Img(e){if(e){try{[/<a((?!<a).)*href="https?:\/\/((?!<a).)*imgur.com((?!<a).)*>(((?!<a).)*)<\/a>/g,/<a((?!<a).)*href="https?:\/\/((?!<a).)*\.(gif|png|jpg|jpeg|GIF|PNG|JPG|JPEG) ((?!<a).)*>(((?!<a).)*)<\/a>/g].map((n,s)=>{[...e.matchAll(n)].map(r=>{let a=s===0?r[4]:r[5];if(a){let h=a.toLowerCase(),p=a;h.includes(".png")||h.includes(".jpg")||h.includes(".jpeg")||h.includes(".gif")||(p=a+".png"),e=e.replace(r[0],`<img src="${p}" data-originUrl="${a}" data-notice="此img标签由v2ex-超级增强脚本解析" style="max-width: 100%">`);}});});}catch{console.log("正则解析html里面的a标签的图片链接出错了");}return e}},async checkPostReplies(e,t=!0){return new Promise(async n=>{let s=await I.getPostDetailByApi(e);if((s==null?void 0:s.replies)>Kt)return t&&I.openNewTab(`https://${location.origin}/t/${e}?p=1&script=1`),n(!0);n(!1);})},async sleep(e){return new Promise(t=>{setTimeout(t,e);})},openNewTab(e,t=!1){if(/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)){let s="a_blank_"+Date.now(),i=document.createElement("a");i.setAttribute("href",e),i.setAttribute("target","_blank"),i.setAttribute("id",s),i.setAttribute("script","1"),document.getElementById(s)||document.body.appendChild(i),i.click();}else Nn(e,{active:t});},async cbChecker(e,t=0){if(window.cb)window.cb(e);else {for(;!window.cb&&t<30;)await I.sleep(500),t++;window.cb&&window.cb(e);}},initMonkeyMenu(){try{Se("脚本设置",()=>{I.cbChecker({type:"openSetting"});}),Se("仓库地址",()=>{I.openNewTab(window.const.git);}),Se("反馈 & 建议",I.feedback);}catch{console.error("无法使用Tampermonkey");}},clone(e){return JSON.parse(JSON.stringify(e))},feedback(){I.openNewTab(_e.issue);},checkPageType(e){let t=e||window.location,n={pageType:null,pageData:{id:"",pageNo:null},username:""};if(t.pathname==="/")n.pageType=J.Home;else if(t.pathname==="/changes")n.pageType=J.Changes;else if(t.pathname==="/recent")n.pageType=J.Changes;else if(t.href.match(/.com\/?tab=/))n.pageType=J.Home;else if(t.href.match(/.com\/go\//))t.href.includes("/links")||(n.pageType=J.Node);else if(t.href.match(/.com\/member/))n.pageType=J.Member,n.username=t.pathname.replace("/member/","").replace("/replies","").replace("/topics","");else {let s=t.href.match(/.com\/t\/([\d]+)/);if(s&&!t.pathname.includes("review")&&!t.pathname.includes("info")&&(n.pageType=J.Post,n.pageData.id=s[1],t.search)){let i=t.href.match(/\?p=([\d]+)/);i&&(n.pageData.pageNo=Number(i[1]));}}return n},getPostDetailByApi(e){return new Promise(t=>{fetch(`${location.origin}/api/topics/show.json?id=${e}`).then(async n=>{if(n.status===200){let s=await n.json();if(s){let i=s[0];t(i);}}});})},appendPostContent(e,t){let n=document.createElement("a");n.href=e.href,n.classList.add("post-content");let s=document.createElement("div");s.innerHTML=e.content_rendered,n.append(s),t.append(n),(()=>{var o;if(s.clientHeight<300)n.classList.add("show-all");else {let r=document.createElement("div");r.classList.add("show-more"),r.innerHTML="显示更多/收起",r.onclick=function(a){a.stopPropagation(),n.classList.toggle("show-all");},(o=n.parentNode)==null||o.append(r);}})();},initConfig(){let e=localStorage.getItem("v2ex-config"),t={},n={},s=window.user.username||"default";e&&(t=JSON.parse(e),n=t[s],n&&(window.config=I.deepAssign(window.config,n))),t[s]=window.config,localStorage.setItem("v2ex-config",JSON.stringify(t));},deepAssign(...e){let t,n,s,i,o=arguments.length,r=1,a=arguments[0]||{};for(typeof a!="object"&&(a={});r<o;r++)if(n=arguments[r],n!=null)for(t in n)s=a[t],i=n[t],i&&typeof i=="object"?a[t]=this.deepAssign(s,i):i!==void 0&&(a[t]=i);return a}},Yt={allReplyUsers:[],content_rendered:"",createDate:"",createDateAgo:"",lastReplyDate:"",fr:"",replyList:[],topReplyList:[],nestedReplies:[],nestedRedundReplies:[],username:"",url:"",href:"",member:{},node:{title:"",url:""},headerTemplate:"",title:"",id:"",type:"post",once:"",replyCount:0,clickCount:0,thankCount:0,collectCount:0,lastReadFloor:0,isFavorite:!1,isIgnore:!1,isThanked:!1,isReport:!1,inList:!1},Ne=(e={})=>Object.assign(I.clone(Yt),e),Rn={tagPrefix:"--用户标签--",tags:{},tagsId:"",username:"",avatar:"",readPrefix:"--已读楼层--",readNoteItemId:"",readList:{},imgurPrefix:"--imgur图片删除hash--",imgurList:{},imgurNoteId:"",configPrefix:"--config--",configNoteId:""},_e={pageType:void 0,pageData:{pageNo:1},targetUserName:"",currentVersion:2,isNight:!1,cb:null,stopMe:null,postList:[],git:"https://github.com/zyronon/web-scripts",shortGit:"zyronon/web-scripts",issue:"https://github.com/zyronon/web-scripts/issues",pcLog:"https://greasyfork.org/zh-CN/scripts/458024/versions",pcScript:"https://greasyfork.org/zh-CN/scripts/458024",mobileScript:"https://greasyfork.org/zh-CN/scripts/485356",homeUrl:"https://v2ex-script.vercel.app/"},On={showToolbar:!0,autoOpenDetail:!0,openTag:!1,clickPostItemOpenDetail:!0,closePostDetailBySpace:!0,contentAutoCollapse:!0,viewType:"table",commentDisplayType:D.FloorInFloorNoCallUser,newTabOpen:!1,newTabOpenActive:!1,base64:!0,sov2ex:!1,postWidth:"",showTopReply:!0,topReplyLoveMinCount:3,topReplyCount:5,autoJumpLastReadFloor:!1,rememberLastReadFloor:!1,autoSignin:!0,customBgColor:"",version:_e.currentVersion,collectBrowserNotice:!1,fontSizeType:"normal",notice:{uid:"",text:"",ddWebhook:"",takeOverNoticePage:!0,whenNewNoticeGlimmer:!1,loopCheckNotice:!1,loopCheckNoticeInterval:5}};function Pn(){return {...On}}const Re=/^[a-z0-9]+(-[a-z0-9]+)*$/,Ze=(e,t,n,s="")=>{const i=e.split(":");if(e.slice(0,1)==="@"){if(i.length<2||i.length>3)return null;s=i.shift().slice(1);}if(i.length>3||!i.length)return null;if(i.length>1){const a=i.pop(),h=i.pop(),p={provider:i.length>0?i[0]:s,prefix:h,name:a};return t&&!Je(p)?null:p}const o=i[0],r=o.split("-");if(r.length>1){const a={provider:s,prefix:r.shift(),name:r.join("-")};return t&&!Je(a)?null:a}if(n&&s===""){const a={provider:s,prefix:"",name:o};return t&&!Je(a,n)?null:a}return null},Je=(e,t)=>e?!!((e.provider===""||e.provider.match(Re))&&(t&&e.prefix===""||e.prefix.match(Re))&&e.name.match(Re)):!1,Xt=Object.freeze({left:0,top:0,width:16,height:16}),Xe=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),et=Object.freeze({...Xt,...Xe}),at=Object.freeze({...et,body:"",hidden:!1});function En(e,t){const n={};!e.hFlip!=!t.hFlip&&(n.hFlip=!0),!e.vFlip!=!t.vFlip&&(n.vFlip=!0);const s=((e.rotate||0)+(t.rotate||0))%4;return s&&(n.rotate=s),n}function Pt(e,t){const n=En(e,t);for(const s in at)s in Xe?s in e&&!(s in n)&&(n[s]=Xe[s]):s in t?n[s]=t[s]:s in e&&(n[s]=e[s]);return n}function Vn(e,t){const n=e.icons,s=e.aliases||Object.create(null),i=Object.create(null);function o(r){if(n[r])return i[r]=[];if(!(r in i)){i[r]=null;const a=s[r]&&s[r].parent,h=a&&o(a);h&&(i[r]=[a].concat(h));}return i[r]}return (t||Object.keys(n).concat(Object.keys(s))).forEach(o),i}function An(e,t,n){const s=e.icons,i=e.aliases||Object.create(null);let o={};function r(a){o=Pt(s[a]||i[a],o);}return r(t),n.forEach(r),Pt(e,o)}function Qt(e,t){const n=[];if(typeof e!="object"||typeof e.icons!="object")return n;e.not_found instanceof Array&&e.not_found.forEach(i=>{t(i,null),n.push(i);});const s=Vn(e);for(const i in s){const o=s[i];o&&(t(i,An(e,i,o)),n.push(i));}return n}const Dn={provider:"",aliases:{},not_found:{},...Xt};function st(e,t){for(const n in t)if(n in e&&typeof e[n]!=typeof t[n])return !1;return !0}function Zt(e){if(typeof e!="object"||e===null)return null;const t=e;if(typeof t.prefix!="string"||!e.icons||typeof e.icons!="object"||!st(e,Dn))return null;const n=t.icons;for(const i in n){const o=n[i];if(!i.match(Re)||typeof o.body!="string"||!st(o,at))return null}const s=t.aliases||Object.create(null);for(const i in s){const o=s[i],r=o.parent;if(!i.match(Re)||typeof r!="string"||!n[r]&&!s[r]||!st(o,at))return null}return t}const Et=Object.create(null);function $n(e,t){return {provider:e,prefix:t,icons:Object.create(null),missing:new Set}}function Te(e,t){const n=Et[e]||(Et[e]=Object.create(null));return n[t]||(n[t]=$n(e,t))}function _t(e,t){return Zt(t)?Qt(t,(n,s)=>{s?e.icons[n]=s:e.missing.add(n);}):[]}function Un(e,t,n){try{if(typeof n.body=="string")return e.icons[t]={...n},!0}catch{}return !1}let Ve=!1;function en(e){return typeof e=="boolean"&&(Ve=e),Ve}function Hn(e){const t=typeof e=="string"?Ze(e,!0,Ve):e;if(t){const n=Te(t.provider,t.prefix),s=t.name;return n.icons[s]||(n.missing.has(s)?null:void 0)}}function Fn(e,t){const n=Ze(e,!0,Ve);if(!n)return !1;const s=Te(n.provider,n.prefix);return Un(s,n.name,t)}function Bn(e,t){if(typeof e!="object")return !1;if(typeof t!="string"&&(t=e.provider||""),Ve&&!t&&!e.prefix){let i=!1;return Zt(e)&&(e.prefix="",Qt(e,(o,r)=>{r&&Fn(o,r)&&(i=!0);})),i}const n=e.prefix;if(!Je({provider:t,prefix:n,name:"a"}))return !1;const s=Te(t,n);return !!_t(s,e)}const tn=Object.freeze({width:null,height:null}),nn=Object.freeze({...tn,...Xe}),Wn=/(-?[0-9.]*[0-9]+[0-9.]*)/g,jn=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Vt(e,t,n){if(t===1)return e;if(n=n||100,typeof e=="number")return Math.ceil(e*t*n)/n;if(typeof e!="string")return e;const s=e.split(Wn);if(s===null||!s.length)return e;const i=[];let o=s.shift(),r=jn.test(o);for(;;){if(r){const a=parseFloat(o);isNaN(a)?i.push(o):i.push(Math.ceil(a*t*n)/n);}else i.push(o);if(o=s.shift(),o===void 0)return i.join("");r=!r;}}const Gn=e=>e==="unset"||e==="undefined"||e==="none";function qn(e,t){const n={...et,...e},s={...nn,...t},i={left:n.left,top:n.top,width:n.width,height:n.height};let o=n.body;[n,s].forEach(g=>{const w=[],f=g.hFlip,C=g.vFlip;let k=g.rotate;f?C?k+=2:(w.push("translate("+(i.width+i.left).toString()+" "+(0-i.top).toString()+")"),w.push("scale(-1 1)"),i.top=i.left=0):C&&(w.push("translate("+(0-i.left).toString()+" "+(i.height+i.top).toString()+")"),w.push("scale(1 -1)"),i.top=i.left=0);let S;switch(k<0&&(k-=Math.floor(k/4)*4),k=k%4,k){case 1:S=i.height/2+i.top,w.unshift("rotate(90 "+S.toString()+" "+S.toString()+")");break;case 2:w.unshift("rotate(180 "+(i.width/2+i.left).toString()+" "+(i.height/2+i.top).toString()+")");break;case 3:S=i.width/2+i.left,w.unshift("rotate(-90 "+S.toString()+" "+S.toString()+")");break}k%2===1&&(i.left!==i.top&&(S=i.left,i.left=i.top,i.top=S),i.width!==i.height&&(S=i.width,i.width=i.height,i.height=S)),w.length&&(o='<g transform="'+w.join(" ")+'">'+o+"</g>");});const r=s.width,a=s.height,h=i.width,p=i.height;let u,c;r===null?(c=a===null?"1em":a==="auto"?p:a,u=Vt(c,h/p)):(u=r==="auto"?h:r,c=a===null?Vt(u,p/h):a==="auto"?p:a);const d={},y=(g,w)=>{Gn(w)||(d[g]=w.toString());};return y("width",u),y("height",c),d.viewBox=i.left.toString()+" "+i.top.toString()+" "+h.toString()+" "+p.toString(),{attributes:d,body:o}}const zn=/\sid="(\S+)"/g,Jn="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let Kn=0;function Yn(e,t=Jn){const n=[];let s;for(;s=zn.exec(e);)n.push(s[1]);if(!n.length)return e;const i="suffix"+(Math.random()*16777216|Date.now()).toString(16);return n.forEach(o=>{const r=typeof t=="function"?t(o):t+(Kn++).toString(),a=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+r+i+"$3");}),e=e.replace(new RegExp(i,"g"),""),e}const ct=Object.create(null);function Xn(e,t){ct[e]=t;}function dt(e){return ct[e]||ct[""]}function vt(e){let t;if(typeof e.resources=="string")t=[e.resources];else if(t=e.resources,!(t instanceof Array)||!t.length)return null;return {resources:t,path:e.path||"/",maxURL:e.maxURL||500,rotate:e.rotate||750,timeout:e.timeout||5e3,random:e.random===!0,index:e.index||0,dataAfterTimeout:e.dataAfterTimeout!==!1}}const bt=Object.create(null),Le=["https://api.simplesvg.com","https://api.unisvg.com"],Ke=[];for(;Le.length>0;)Le.length===1||Math.random()>.5?Ke.push(Le.shift()):Ke.push(Le.pop());bt[""]=vt({resources:["https://api.iconify.design"].concat(Ke)});function Qn(e,t){const n=vt(t);return n===null?!1:(bt[e]=n,!0)}function kt(e){return bt[e]}const Zn=()=>{let e;try{if(e=fetch,typeof e=="function")return e}catch{}};let At=Zn();function ei(e,t){const n=kt(e);if(!n)return 0;let s;if(!n.maxURL)s=0;else {let i=0;n.resources.forEach(r=>{i=Math.max(i,r.length);});const o=t+".json?icons=";s=n.maxURL-i-n.path.length-o.length;}return s}function ti(e){return e===404}const ni=(e,t,n)=>{const s=[],i=ei(e,t),o="icons";let r={type:o,provider:e,prefix:t,icons:[]},a=0;return n.forEach((h,p)=>{a+=h.length+1,a>=i&&p>0&&(s.push(r),r={type:o,provider:e,prefix:t,icons:[]},a=h.length),r.icons.push(h);}),s.push(r),s};function ii(e){if(typeof e=="string"){const t=kt(e);if(t)return t.path}return "/"}const oi=(e,t,n)=>{if(!At){n("abort",424);return}let s=ii(t.provider);switch(t.type){case"icons":{const o=t.prefix,a=t.icons.join(","),h=new URLSearchParams({icons:a});s+=o+".json?"+h.toString();break}case"custom":{const o=t.uri;s+=o.slice(0,1)==="/"?o.slice(1):o;break}default:n("abort",400);return}let i=503;At(e+s).then(o=>{const r=o.status;if(r!==200){setTimeout(()=>{n(ti(r)?"abort":"next",r);});return}return i=501,o.json()}).then(o=>{if(typeof o!="object"||o===null){setTimeout(()=>{o===404?n("abort",o):n("next",i);});return}setTimeout(()=>{n("success",o);});}).catch(()=>{n("next",i);});},si={prepare:ni,send:oi};function li(e){const t={loaded:[],missing:[],pending:[]},n=Object.create(null);e.sort((i,o)=>i.provider!==o.provider?i.provider.localeCompare(o.provider):i.prefix!==o.prefix?i.prefix.localeCompare(o.prefix):i.name.localeCompare(o.name));let s={provider:"",prefix:"",name:""};return e.forEach(i=>{if(s.name===i.name&&s.prefix===i.prefix&&s.provider===i.provider)return;s=i;const o=i.provider,r=i.prefix,a=i.name,h=n[o]||(n[o]=Object.create(null)),p=h[r]||(h[r]=Te(o,r));let u;a in p.icons?u=t.loaded:r===""||p.missing.has(a)?u=t.missing:u=t.pending;const c={provider:o,prefix:r,name:a};u.push(c);}),t}function on(e,t){e.forEach(n=>{const s=n.loaderCallbacks;s&&(n.loaderCallbacks=s.filter(i=>i.id!==t));});}function ri(e){e.pendingCallbacksFlag||(e.pendingCallbacksFlag=!0,setTimeout(()=>{e.pendingCallbacksFlag=!1;const t=e.loaderCallbacks?e.loaderCallbacks.slice(0):[];if(!t.length)return;let n=!1;const s=e.provider,i=e.prefix;t.forEach(o=>{const r=o.icons,a=r.pending.length;r.pending=r.pending.filter(h=>{if(h.prefix!==i)return !0;const p=h.name;if(e.icons[p])r.loaded.push({provider:s,prefix:i,name:p});else if(e.missing.has(p))r.missing.push({provider:s,prefix:i,name:p});else return n=!0,!0;return !1}),r.pending.length!==a&&(n||on([e],o.id),o.callback(r.loaded.slice(0),r.missing.slice(0),r.pending.slice(0),o.abort));});}));}let ai=0;function ci(e,t,n){const s=ai++,i=on.bind(null,n,s);if(!t.pending.length)return i;const o={id:s,icons:t,callback:e,abort:i};return n.forEach(r=>{(r.loaderCallbacks||(r.loaderCallbacks=[])).push(o);}),i}function di(e,t=!0,n=!1){const s=[];return e.forEach(i=>{const o=typeof i=="string"?Ze(i,t,n):i;o&&s.push(o);}),s}var ui={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function pi(e,t,n,s){const i=e.resources.length,o=e.random?Math.floor(Math.random()*i):e.index;let r;if(e.random){let M=e.resources.slice(0);for(r=[];M.length>1;){const F=Math.floor(Math.random()*M.length);r.push(M[F]),M=M.slice(0,F).concat(M.slice(F+1));}r=r.concat(M);}else r=e.resources.slice(o).concat(e.resources.slice(0,o));const a=Date.now();let h="pending",p=0,u,c=null,d=[],y=[];typeof s=="function"&&y.push(s);function g(){c&&(clearTimeout(c),c=null);}function w(){h==="pending"&&(h="aborted"),g(),d.forEach(M=>{M.status==="pending"&&(M.status="aborted");}),d=[];}function f(M,F){F&&(y=[]),typeof M=="function"&&y.push(M);}function C(){return {startTime:a,payload:t,status:h,queriesSent:p,queriesPending:d.length,subscribe:f,abort:w}}function k(){h="failed",y.forEach(M=>{M(void 0,u);});}function S(){d.forEach(M=>{M.status==="pending"&&(M.status="aborted");}),d=[];}function A(M,F,K){const W=F!=="success";switch(d=d.filter(le=>le!==M),h){case"pending":break;case"failed":if(W||!e.dataAfterTimeout)return;break;default:return}if(F==="abort"){u=K,k();return}if(W){u=K,d.length||(r.length?H():k());return}if(g(),S(),!e.random){const le=e.resources.indexOf(M.resource);le!==-1&&le!==e.index&&(e.index=le);}h="completed",y.forEach(le=>{le(K);});}function H(){if(h!=="pending")return;g();const M=r.shift();if(M===void 0){if(d.length){c=setTimeout(()=>{g(),h==="pending"&&(S(),k());},e.timeout);return}k();return}const F={status:"pending",resource:M,callback:(K,W)=>{A(F,K,W);}};d.push(F),p++,c=setTimeout(H,e.rotate),n(M,t,F.callback);}return setTimeout(H),C}function sn(e){const t={...ui,...e};let n=[];function s(){n=n.filter(a=>a().status==="pending");}function i(a,h,p){const u=pi(t,a,h,(c,d)=>{s(),p&&p(c,d);});return n.push(u),u}function o(a){return n.find(h=>a(h))||null}return {query:i,find:o,setIndex:a=>{t.index=a;},getIndex:()=>t.index,cleanup:s}}function Dt(){}const lt=Object.create(null);function fi(e){if(!lt[e]){const t=kt(e);if(!t)return;const n=sn(t),s={config:t,redundancy:n};lt[e]=s;}return lt[e]}function hi(e,t,n){let s,i;if(typeof e=="string"){const o=dt(e);if(!o)return n(void 0,424),Dt;i=o.send;const r=fi(e);r&&(s=r.redundancy);}else {const o=vt(e);if(o){s=sn(o);const r=e.resources?e.resources[0]:"",a=dt(r);a&&(i=a.send);}}return !s||!i?(n(void 0,424),Dt):s.query(t,i,n)().abort}const $t="iconify2",Ae="iconify",ln=Ae+"-count",Ut=Ae+"-version",rn=36e5,mi=168;function ut(e,t){try{return e.getItem(t)}catch{}}function Ct(e,t,n){try{return e.setItem(t,n),!0}catch{}}function Ht(e,t){try{e.removeItem(t);}catch{}}function pt(e,t){return Ct(e,ln,t.toString())}function ft(e){return parseInt(ut(e,ln))||0}const tt={local:!0,session:!0},an={local:new Set,session:new Set};let xt=!1;function gi(e){xt=e;}let ze=typeof window>"u"?{}:window;function cn(e){const t=e+"Storage";try{if(ze&&ze[t]&&typeof ze[t].length=="number")return ze[t]}catch{}tt[e]=!1;}function dn(e,t){const n=cn(e);if(!n)return;const s=ut(n,Ut);if(s!==$t){if(s){const a=ft(n);for(let h=0;h<a;h++)Ht(n,Ae+h.toString());}Ct(n,Ut,$t),pt(n,0);return}const i=Math.floor(Date.now()/rn)-mi,o=a=>{const h=Ae+a.toString(),p=ut(n,h);if(typeof p=="string"){try{const u=JSON.parse(p);if(typeof u=="object"&&typeof u.cached=="number"&&u.cached>i&&typeof u.provider=="string"&&typeof u.data=="object"&&typeof u.data.prefix=="string"&&t(u,a))return !0}catch{}Ht(n,h);}};let r=ft(n);for(let a=r-1;a>=0;a--)o(a)||(a===r-1?(r--,pt(n,r)):an[e].add(a));}function un(){if(!xt){gi(!0);for(const e in tt)dn(e,t=>{const n=t.data,s=t.provider,i=n.prefix,o=Te(s,i);if(!_t(o,n).length)return !1;const r=n.lastModified||-1;return o.lastModifiedCached=o.lastModifiedCached?Math.min(o.lastModifiedCached,r):r,!0});}}function yi(e,t){const n=e.lastModifiedCached;if(n&&n>=t)return n===t;if(e.lastModifiedCached=t,n)for(const s in tt)dn(s,i=>{const o=i.data;return i.provider!==e.provider||o.prefix!==e.prefix||o.lastModified===t});return !0}function wi(e,t){xt||un();function n(s){let i;if(!tt[s]||!(i=cn(s)))return;const o=an[s];let r;if(o.size)o.delete(r=Array.from(o).shift());else if(r=ft(i),!pt(i,r+1))return;const a={cached:Math.floor(Date.now()/rn),provider:e.provider,data:t};return Ct(i,Ae+r.toString(),JSON.stringify(a))}t.lastModified&&!yi(e,t.lastModified)||Object.keys(t.icons).length&&(t.not_found&&(t=Object.assign({},t),delete t.not_found),n("local")||n("session"));}function Ft(){}function _i(e){e.iconsLoaderFlag||(e.iconsLoaderFlag=!0,setTimeout(()=>{e.iconsLoaderFlag=!1,ri(e);}));}function vi(e,t){e.iconsToLoad?e.iconsToLoad=e.iconsToLoad.concat(t).sort():e.iconsToLoad=t,e.iconsQueueFlag||(e.iconsQueueFlag=!0,setTimeout(()=>{e.iconsQueueFlag=!1;const{provider:n,prefix:s}=e,i=e.iconsToLoad;delete e.iconsToLoad;let o;if(!i||!(o=dt(n)))return;o.prepare(n,s,i).forEach(a=>{hi(n,a,h=>{if(typeof h!="object")a.icons.forEach(p=>{e.missing.add(p);});else try{const p=_t(e,h);if(!p.length)return;const u=e.pendingIcons;u&&p.forEach(c=>{u.delete(c);}),wi(e,h);}catch(p){console.error(p);}_i(e);});});}));}const bi=(e,t)=>{const n=di(e,!0,en()),s=li(n);if(!s.pending.length){let h=!0;return t&&setTimeout(()=>{h&&t(s.loaded,s.missing,s.pending,Ft);}),()=>{h=!1;}}const i=Object.create(null),o=[];let r,a;return s.pending.forEach(h=>{const{provider:p,prefix:u}=h;if(u===a&&p===r)return;r=p,a=u,o.push(Te(p,u));const c=i[p]||(i[p]=Object.create(null));c[u]||(c[u]=[]);}),s.pending.forEach(h=>{const{provider:p,prefix:u,name:c}=h,d=Te(p,u),y=d.pendingIcons||(d.pendingIcons=new Set);y.has(c)||(y.add(c),i[p][u].push(c));}),o.forEach(h=>{const{provider:p,prefix:u}=h;i[p][u].length&&vi(h,i[p][u]);}),t?ci(t,s,o):Ft};function ki(e,t){const n={...e};for(const s in t){const i=t[s],o=typeof i;s in tn?(i===null||i&&(o==="string"||o==="number"))&&(n[s]=i):o===typeof n[s]&&(n[s]=s==="rotate"?i%4:i);}return n}const Ci=/[\s,]+/;function xi(e,t){t.split(Ci).forEach(n=>{switch(n.trim()){case"horizontal":e.hFlip=!0;break;case"vertical":e.vFlip=!0;break}});}function Ti(e,t=0){const n=e.replace(/^-?[0-9.]*/,"");function s(i){for(;i<0;)i+=4;return i%4}if(n===""){const i=parseInt(e);return isNaN(i)?0:s(i)}else if(n!==e){let i=0;switch(n){case"%":i=25;break;case"deg":i=90;}if(i){let o=parseFloat(e.slice(0,e.length-n.length));return isNaN(o)?0:(o=o/i,o%1===0?s(o):0)}}return t}function Si(e,t){let n=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const s in t)n+=" "+s+'="'+t[s]+'"';return '<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+e+"</svg>"}function Ii(e){return e.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function Mi(e){return "data:image/svg+xml,"+Ii(e)}function Li(e){return 'url("'+Mi(e)+'")'}const Bt={...nn,inline:!1},Ni={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},Ri={display:"inline-block"},ht={backgroundColor:"currentColor"},pn={backgroundColor:"transparent"},Wt={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},jt={webkitMask:ht,mask:ht,background:pn};for(const e in jt){const t=jt[e];for(const n in Wt)t[e+n]=Wt[n];}const Ye={};["horizontal","vertical"].forEach(e=>{const t=e.slice(0,1)+"Flip";Ye[e+"-flip"]=t,Ye[e.slice(0,1)+"-flip"]=t,Ye[e+"Flip"]=t;});function Gt(e){return e+(e.match(/^[-0-9.]+$/)?"px":"")}const qt=(e,t)=>{const n=ki(Bt,t),s={...Ni},i=t.mode||"svg",o={},r=t.style,a=typeof r=="object"&&!(r instanceof Array)?r:{};for(let w in t){const f=t[w];if(f!==void 0)switch(w){case"icon":case"style":case"onLoad":case"mode":break;case"inline":case"hFlip":case"vFlip":n[w]=f===!0||f==="true"||f===1;break;case"flip":typeof f=="string"&&xi(n,f);break;case"color":o.color=f;break;case"rotate":typeof f=="string"?n[w]=Ti(f):typeof f=="number"&&(n[w]=f);break;case"ariaHidden":case"aria-hidden":f!==!0&&f!=="true"&&delete s["aria-hidden"];break;default:{const C=Ye[w];C?(f===!0||f==="true"||f===1)&&(n[C]=!0):Bt[w]===void 0&&(s[w]=f);}}}const h=qn(e,n),p=h.attributes;if(n.inline&&(o.verticalAlign="-0.125em"),i==="svg"){s.style={...o,...a},Object.assign(s,p);let w=0,f=t.id;return typeof f=="string"&&(f=f.replace(/-/g,"_")),s.innerHTML=Yn(h.body,f?()=>f+"ID"+w++:"iconifyVue"),vue.h("svg",s)}const{body:u,width:c,height:d}=e,y=i==="mask"||(i==="bg"?!1:u.indexOf("currentColor")!==-1),g=Si(u,{...p,width:c+"",height:d+""});return s.style={...o,"--svg":Li(g),width:Gt(p.width),height:Gt(p.height),...Ri,...y?ht:pn,...a},vue.h("span",s)};en(!0);Xn("",si);if(typeof document<"u"&&typeof window<"u"){un();const e=window;if(e.IconifyPreload!==void 0){const t=e.IconifyPreload,n="Invalid IconifyPreload syntax.";typeof t=="object"&&t!==null&&(t instanceof Array?t:[t]).forEach(s=>{try{(typeof s!="object"||s===null||s instanceof Array||typeof s.icons!="object"||typeof s.prefix!="string"||!Bn(s))&&console.error(n);}catch{console.error(n);}});}if(e.IconifyProviders!==void 0){const t=e.IconifyProviders;if(typeof t=="object"&&t!==null)for(let n in t){const s="IconifyProviders["+n+"] is invalid.";try{const i=t[n];if(typeof i!="object"||!i||i.resources===void 0)continue;Qn(n,i)||console.error(s);}catch{console.error(s);}}}}const Oi={...et,body:""},ne=vue.defineComponent({inheritAttrs:!1,data(){return {iconMounted:!1,counter:0}},mounted(){this._name="",this._loadingIcon=null,this.iconMounted=!0;},unmounted(){this.abortLoading();},methods:{abortLoading(){this._loadingIcon&&(this._loadingIcon.abort(),this._loadingIcon=null);},getIcon(e,t){if(typeof e=="object"&&e!==null&&typeof e.body=="string")return this._name="",this.abortLoading(),{data:e};let n;if(typeof e!="string"||(n=Ze(e,!1,!0))===null)return this.abortLoading(),null;const s=Hn(n);if(!s)return (!this._loadingIcon||this._loadingIcon.name!==e)&&(this.abortLoading(),this._name="",s!==null&&(this._loadingIcon={name:e,abort:bi([n],()=>{this.counter++;})})),null;this.abortLoading(),this._name!==e&&(this._name=e,t&&t(e));const i=["iconify"];return n.prefix!==""&&i.push("iconify--"+n.prefix),n.provider!==""&&i.push("iconify--"+n.provider),{data:s,classes:i}}},render(){this.counter;const e=this.$attrs,t=this.iconMounted?this.getIcon(e.icon,e.onLoad):null;if(!t)return qt(Oi,e);let n=e;return t.classes&&(n={...e,class:(typeof e.class=="string"?e.class+" ":"")+t.classes.join(" ")}),qt({...et,...t.data},n)}}),Pi={class:"display-type"},Ei={style:{position:"relative"}},Vi={key:0,class:"type-list"},Ai=vue.defineComponent({__name:"BaseSelect",props:{displayType:{}},emits:["update:displayType"],setup(e,{emit:t}){const n=e,s=t;let i=vue.reactive({showChangeDisplayType:!1,lastDisplayType:null});function o(h){[D.New,D.Like].includes(n.displayType)||(i.lastDisplayType=n.displayType),s("update:displayType",h),i.showChangeDisplayType=!1;}function r(){if([D.New,D.Like].includes(n.displayType))return o(i.lastDisplayType??D.FloorInFloorNoCallUser);i.showChangeDisplayType=!i.showChangeDisplayType;}const a=vue.computed(()=>{let h=n.displayType;switch([D.New,D.Like].includes(n.displayType)&&(h=i.lastDisplayType),h){case D.FloorInFloorNoCallUser:return "楼中楼";case D.FloorInFloor:return "楼中楼(@)";case D.FloorInFloorNested:return "冗余楼中楼";case D.V2exOrigin:return "V2原版";case D.OnlyOp:return "只看楼主";default:return "楼中楼"}});return (h,p)=>(vue.openBlock(),vue.createElementBlock("div",Pi,[vue.createElementVNode("div",{class:vue.normalizeClass(["type",h.displayType===vue.unref(D).New&&"active"]),onClick:p[0]||(p[0]=u=>o(vue.unref(D).New))},"最新 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["type",h.displayType===vue.unref(D).Like&&"active"]),onClick:p[1]||(p[1]=u=>o(vue.unref(D).Like))},"最热 ",2),vue.createElementVNode("div",Ei,[vue.createElementVNode("div",{class:vue.normalizeClass(["type",![vue.unref(D).New,vue.unref(D).Like].includes(h.displayType)&&"active"]),onClick:r},[vue.createElementVNode("span",null,vue.toDisplayString(a.value),1),vue.createVNode(vue.unref(ne),{icon:"mingcute:down-line"})],2),vue.unref(i).showChangeDisplayType?(vue.openBlock(),vue.createElementBlock("div",Vi,[vue.createElementVNode("div",{class:vue.normalizeClass(["item",h.displayType===vue.unref(D).FloorInFloorNoCallUser&&"active"]),onClick:p[2]||(p[2]=vue.withModifiers(u=>o(vue.unref(D).FloorInFloorNoCallUser),["stop"]))},"楼中楼 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["item",h.displayType===vue.unref(D).FloorInFloor&&"active"]),onClick:p[3]||(p[3]=vue.withModifiers(u=>o(vue.unref(D).FloorInFloor),["stop"]))},"楼中楼(@) ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["item",h.displayType===vue.unref(D).FloorInFloorNested&&"active"]),onClick:p[4]||(p[4]=vue.withModifiers(u=>o(vue.unref(D).FloorInFloorNested),["stop"]))},"冗余楼中楼 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["item",h.displayType===vue.unref(D).OnlyOp&&"active"]),onClick:p[5]||(p[5]=vue.withModifiers(u=>o(vue.unref(D).OnlyOp),["stop"]))},"只看楼主 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["item",h.displayType===vue.unref(D).V2exOrigin&&"active"]),onClick:p[6]||(p[6]=vue.withModifiers(u=>o(vue.unref(D).V2exOrigin),["stop"]))},"V2原版 ",2)])):vue.createCommentVNode("",!0)])]))}});const Tt=Q(Ai,[["__scopeId","data-v-e4f684be"]]),v={eventMap:new Map,on(e,t){let n=this.eventMap.get(e);n?n.push(t):n=[t],this.eventMap.set(e,n);},offOne(e,t){let n=this.eventMap.get(e);if(n){let s=n.findIndex(i=>i===t);s>-1&&n.splice(s,1);}this.eventMap.set(e,n);},emit(e,t){let n=this.eventMap.get(e);n&&n.map(s=>s(t));},off(e){this.eventMap.has(e)&&this.eventMap.delete(e);},clear(){this.eventMap=new Map;}},b={SHOW_TOOLTIP:"SHOW_TOOLTIP",SHOW_MSG:"SHOW_MSG",SET_CALL:"SET_CALL",SHOW_CALL:"SHOW_CALL",REFRESH_ONCE:"REFRESH_ONCE",ADD_REPLY:"ADD_REPLY",IGNORE:"IGNORE",MERGE:"MERGE",REMOVE:"REMOVE",CHANGE_COMMENT_THANK:"CHANGE_COMMENT_THANK",CHANGE_POST_THANK:"CHANGE_POST_THANK",ADD_TAG:"ADD_TAG",REMOVE_TAG:"REMOVE_TAG",RELATION_REPLY:"RELATION_REPLY",JUMP:"JUMP",REFRESH_POST:"REFRESH_POST",SHOW_CONFIRM_MODAL:"SHOW_CONFIRM_MODAL",SHOW_CONFIRM_MODAL_CONFIRM:"SHOW_CONFIRM_MODAL_CONFIRM"},Di={name:"PopConfirm",props:{title:{type:String,default(){return ""}},disabled:{type:Boolean,default(){return !1}}},data(){return {id:""}},created(){},methods:{cb(e){e===this.id&&(this.$emit("confirm"),this.id="");},showPop(e){if(this.disabled)return;let t=e.target.getBoundingClientRect();this.id=Date.now(),v.emit(b.SHOW_CONFIRM_MODAL,{title:this.title,rect:t,id:this.id}),v.offOne(b.SHOW_CONFIRM_MODAL_CONFIRM,this.cb),v.on(b.SHOW_CONFIRM_MODAL_CONFIRM,this.cb);}},unmounted(){v.offOne(b.SHOW_CONFIRM_MODAL_CONFIRM,this.cb);}};function $i(e,t,n,s,i,o){return vue.openBlock(),vue.createElementBlock("span",{onClick:t[0]||(t[0]=vue.withModifiers((...r)=>o.showPop&&o.showPop(...r),["stop"]))},[vue.renderSlot(e.$slots,"default")])}const He=Q(Di,[["render",$i]]),Ui=vue.defineComponent({__name:"BaseLoading",props:{size:{default:"normal"}},setup(e){return (t,n)=>(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["loading",[t.size]])},null,2))}});const Fe=Q(Ui,[["__scopeId","data-v-2697baa2"]]),Hi={key:1,class:"key-notice"},Fi={class:"key"},Bi=vue.defineComponent({__name:"BaseButton",props:{keyboard:{},active:{type:Boolean},disabled:{type:Boolean},loading:{type:Boolean},size:{default:"normal"},type:{default:"primary"}},emits:["click"],setup(e){return (t,n)=>(vue.openBlock(),vue.createBlock(Ue,{disabled:!t.keyboard,title:`快捷键: ${t.keyboard}`},{default:vue.withCtx(()=>[vue.createElementVNode("div",vue.mergeProps({class:"base-button"},t.$attrs,{onClick:n[0]||(n[0]=s=>!t.disabled&&!t.loading&&t.$emit("click",s)),class:[t.active&&"active",t.size,t.type,(t.disabled||t.loading)&&"disabled",!t.disabled&&"hvr-grow"]}),[vue.createElementVNode("span",{style:vue.normalizeStyle({opacity:t.loading?0:1})},[vue.renderSlot(t.$slots,"default",{},void 0,!0)],4),t.loading?(vue.openBlock(),vue.createBlock(Fe,{key:0,size:"small"})):vue.createCommentVNode("",!0),t.keyboard?(vue.openBlock(),vue.createElementBlock("div",Hi,[vue.createElementVNode("span",Fi,vue.toDisplayString(t.keyboard),1)])):vue.createCommentVNode("",!0)],16)]),_:3},8,["disabled","title"]))}});const ve=Q(Bi,[["__scopeId","data-v-5a7d79ba"]]);const Wi={name:"Setting",components:{BaseButton:ve,PopConfirm:He,Icon:ne,BaseSelect:Tt,BaseSwitch:wt,Tooltip:Ue},inject:["isNight"],props:{show:{type:Boolean,default(){return !1}}},data(){return {tabIndex:0}},methods:{confirm(){this.close(),this.$emit("confirm");},close(){this.$emit("update:show",!1);}}},fn=e=>(vue.pushScopeId("data-v-386b43d0"),e=e(),vue.popScopeId(),e),ji={key:0,class:"setting-modal modal"},Gi={class:"modal-root"},qi={class:"modal-header"},zi=fn(()=>vue.createElementVNode("div",{class:"title"}," 使用需知 ",-1)),Ji={class:"body"},Ki=fn(()=>vue.createElementVNode("div",{class:"modal-content"},[vue.createElementVNode("div",null,"开启此功能会带来以下影响"),vue.createElementVNode("div",null,"缺点"),vue.createElementVNode("div",{style:{color:"red"}},[vue.createElementVNode("div",null,"1、你的IP可能会被封禁"),vue.createElementVNode("div",null,"2、消耗更多流量，给服务器带来更大的负担"),vue.createElementVNode("div",null,"3、你的V站浏览进度条会变快")]),vue.createElementVNode("div",null,"优点"),vue.createElementVNode("div",null,"1、卡片模式，无需打开主题即可查看内容"),vue.createElementVNode("div",null,"2、打开主题时提前预览正文内容，无需等待加载"),vue.createElementVNode("div",null,"原理"),vue.createElementVNode("div",null,"1、解析列表所有主题ID，批量调用show.json接口，获取对应主题的正文"),vue.createElementVNode("div",null,"2、请求的主题数据会缓存到本地，不会重复请求，超过3天的数据会删除"),vue.createElementVNode("div",null,"3、前面4条会并发请求，4条以后的一秒请求一条")],-1)),Yi={class:"btns"};function Xi(e,t,n,s,i,o){const r=vue.resolveComponent("Icon"),a=vue.resolveComponent("BaseButton");return vue.openBlock(),vue.createBlock(vue.Transition,null,{default:vue.withCtx(()=>[n.show?(vue.openBlock(),vue.createElementBlock("div",ji,[vue.createElementVNode("div",{class:"mask",onClick:t[0]||(t[0]=(...h)=>o.close&&o.close(...h))}),vue.createElementVNode("div",Gi,[vue.createElementVNode("div",qi,[zi,vue.createVNode(r,{icon:"ic:round-close",onClick:o.close},null,8,["onClick"])]),vue.createElementVNode("div",Ji,[Ki,vue.createElementVNode("div",Yi,[vue.createVNode(a,{type:"link",onClick:o.close},{default:vue.withCtx(()=>[vue.createTextVNode("不同意")]),_:1},8,["onClick"]),vue.createVNode(a,{onClick:o.confirm},{default:vue.withCtx(()=>[vue.createTextVNode("同意")]),_:1},8,["onClick"])])])])])):vue.createCommentVNode("",!0)]),_:1})}const Qi=Q(Wi,[["render",Xi],["__scopeId","data-v-386b43d0"]]);const Zi={name:"Setting",components:{NoticeModal:Qi,PopConfirm:He,Icon:ne,BaseSelect:Tt,BaseSwitch:wt,Tooltip:Ue},inject:["isNight"],props:{modelValue:{type:Object,default(){return {}}},show:{type:Boolean,default(){return !1}}},data(){return {tabIndex:0,config:window.clone(this.modelValue),showNotice:!1}},computed:{DefaultVal(){return _e},CommentDisplayType(){return D},isNew(){return this.config.version<_e.currentVersion}},watch:{config:{handler(e){e.topReplyLoveMinCount=Math.trunc(e.topReplyLoveMinCount),e.topReplyLoveMinCount<0&&(e.topReplyLoveMinCount=1),this.$emit("update:modelValue",e);},deep:!0},"config.loopCheckNotice"(e){e?(this.config.loopCheckNoticeInterval=5,this.config.whenNewNoticeGlimmer=!1):(this.config.loopCheckNoticeInterval=0,this.config.whenNewNoticeGlimmer=!1,this.config.ddWebhook="");},show(e){e?document.body.style.overflow="hidden":document.body.style.overflow="unset";}},methods:{close(){this.config.version<_e.currentVersion&&(this.config.version=_e.currentVersion),this.$emit("update:show",!1);}}},O=e=>(vue.pushScopeId("data-v-9e40bff6"),e=e(),vue.popScopeId(),e),eo={key:0,class:"setting-modal modal"},to={class:"modal-root"},no={class:"modal-header"},io={class:"title"},oo={class:"small"},so=["href"],lo={class:"body"},ro={class:"left"},ao={class:"tabs"},co=O(()=>vue.createElementVNode("span",null,"列表设置",-1)),uo=[co],po=O(()=>vue.createElementVNode("span",null,"主题设置",-1)),fo=[po],ho=O(()=>vue.createElementVNode("span",null,"其他设置",-1)),mo=[ho],go=O(()=>vue.createElementVNode("span",null,"关于脚本",-1)),yo=[go],wo={class:"icons"},_o=["href"],vo=["href"],bo={class:"modal-content"},ko={class:"scroll"},Co={key:0},xo={class:"row"},To=O(()=>vue.createElementVNode("label",{class:"item-title"},"列表展示方式",-1)),So={class:"wrapper"},Io={class:"radio-group2"},Mo=O(()=>vue.createElementVNode("div",{class:"desc danger"}," 提示：此项需要刷新页面才能生效 ",-1)),Lo={class:"row"},No=O(()=>vue.createElementVNode("label",{class:"item-title"},"主题弹框显示",-1)),Ro={class:"wrapper"},Oo=O(()=>vue.createElementVNode("div",{class:"desc"},[vue.createTextVNode(" 开启此选项后，主题会"),vue.createElementVNode("span",{class:"danger"},"始终"),vue.createTextVNode("以弹框的方式显示。优先级大于“新标签页打开链接” ")],-1)),Po={class:"row"},Eo=O(()=>vue.createElementVNode("label",{class:"item-title"},"新标签页打开链接",-1)),Vo={class:"wrapper"},Ao=O(()=>vue.createElementVNode("div",{class:"desc"}," 网页上所有链接通过新标签页打开 ",-1)),Do={class:"row"},$o=O(()=>vue.createElementVNode("label",{class:"item-title"},"打开新标签页时立即切换过去",-1)),Uo={class:"wrapper"},Ho={key:1},Fo={class:"row"},Bo=O(()=>vue.createElementVNode("label",{class:"item-title"},"显示回复展示方式",-1)),Wo={class:"wrapper"},jo={class:"row"},Go=O(()=>vue.createElementVNode("label",{class:"item-title"},"回复展示方式",-1)),qo={class:"wrapper"},zo={class:"row"},Jo=O(()=>vue.createElementVNode("label",{class:"item-title"},"单独打开主题时默认显示楼中楼",-1)),Ko={class:"wrapper"},Yo=O(()=>vue.createElementVNode("div",{class:"desc"}," 单独打开这种地址 https://v2ex.com/t/xxxx 时，是否默认显示楼中楼 ",-1)),Xo={class:"row"},Qo=O(()=>vue.createElementVNode("label",{class:"item-title"},"点击左右两侧透明处关闭主题详情弹框",-1)),Zo={class:"wrapper"},es={class:"row"},ts=O(()=>vue.createElementVNode("label",{class:"item-title"},"正文超长自动折叠",-1)),ns={class:"wrapper"},is={class:"row"},os=O(()=>vue.createElementVNode("label",{class:"item-title"},"主题宽度",-1)),ss={class:"wrapper"},ls=O(()=>vue.createElementVNode("div",{class:"desc"},[vue.createTextVNode(" 未设定此值时，则默认宽度为77rem。接受合法的width值： "),vue.createElementVNode("a",{href:"https://vue3js.cn/interview/css/em_px_rem_vh_vw.html#%E4%BA%8C%E3%80%81%E5%8D%95%E4%BD%8D",target:"_blank"},"rem、px、vw、vh(点此查看)"),vue.createTextVNode("。 vw代表屏幕百分比，如想要屏幕的66%，请填写66vw ")],-1)),rs=O(()=>vue.createElementVNode("div",{class:"desc"}," 提示：此项设置以后，单独打开详情页时会出现主题突然变宽（窄）的问题，暂时无解 ",-1)),as=O(()=>vue.createElementVNode("div",{class:"desc danger"}," 提示：此项需要刷新页面才能生效 ",-1)),cs=O(()=>vue.createElementVNode("div",{class:"row"},[vue.createElementVNode("label",{class:"main-title"},"高赞回复")],-1)),ds={class:"row"},us=O(()=>vue.createElementVNode("label",{class:"item-title"},"显示高赞回复",-1)),ps={class:"wrapper"},fs={class:"row"},hs=O(()=>vue.createElementVNode("label",{class:"item-title"},"最多显示多少个高赞回复",-1)),ms={class:"wrapper"},gs={class:"row"},ys=O(()=>vue.createElementVNode("label",{class:"item-title"},"最少需要多少赞才能被判定为高赞",-1)),ws={class:"wrapper"},_s={key:2},vs={class:"row"},bs=O(()=>vue.createElementVNode("label",{class:"item-title"},"用户打标签(跨平台，数据保存在自己的记事本)：",-1)),ks={class:"wrapper"},Cs={class:"row"},xs=O(()=>vue.createElementVNode("label",{class:"item-title"},"划词显示Base64解码框",-1)),Ts={class:"wrapper"},Ss={class:"row"},Is=O(()=>vue.createElementVNode("label",{class:"item-title"},"自动签到",-1)),Ms={class:"wrapper"},Ls={class:"row"},Ns=O(()=>vue.createElementVNode("label",{class:"item-title"},"自定义背景",-1)),Rs={class:"wrapper"},Os=O(()=>vue.createElementVNode("div",{class:"desc"},[vue.createTextVNode(" 未设定此值时，则脚本就什么都不做，V站大部分页面背景颜色默认为 #e2e2e2，少部分页面有特定背景。接受一个合法的css color值：例如"),vue.createElementVNode("a",{href:"https://developer.mozilla.org/zh-CN/docs/Web/CSS/color_value",target:"_blank"},"red、#ffffff、rgb(222,222,22)(点此查看)"),vue.createTextVNode("等等。 ")],-1)),Ps=O(()=>vue.createElementVNode("div",{class:"desc danger"}," 提示：此项需要刷新页面才能生效 ",-1)),Es={class:"row"},Vs=O(()=>vue.createElementVNode("label",{class:"item-title"},"收藏时提醒添加到书签",-1)),As={class:"wrapper"},Ds=O(()=>vue.createElementVNode("div",{class:"desc"}," V站帐号一旦被封禁，则无法登录，无法查看账号收藏了 ",-1)),$s=O(()=>vue.createElementVNode("div",{class:"row"},[vue.createElementVNode("label",{class:"main-title"},"消息通知")],-1)),Us={class:"row"},Hs=O(()=>vue.createElementVNode("label",{class:"item-title"},"接管未读提醒页面",-1)),Fs={class:"wrapper"},Bs={class:"row"},Ws=O(()=>vue.createElementVNode("label",{class:"item-title"},"定时查询未读提醒",-1)),js={class:"wrapper"},Gs=O(()=>vue.createElementVNode("div",{class:"desc"}," 开启此功能会带来以下影响： 1、你的IP可能会被封禁 2、消耗更多流量，给服务器带来更大的负担 3、你的V站浏览进度条会变快 ",-1)),qs={key:0,class:"sub-content"},zs={class:"row"},Js=O(()=>vue.createElementVNode("label",{class:"item-title"},"查询间隔",-1)),Ks={class:"wrapper"},Ys=["value"],Xs=O(()=>vue.createElementVNode("div",{class:"desc"}," 设置值太小，会导致频繁请求，你的IP可能会被封禁，建议设置为5，即每次5分钟查询一次 ",-1)),Qs={class:"row"},Zs=O(()=>vue.createElementVNode("label",{class:"item-title"},"当有新未读提醒时，网页标题闪烁",-1)),el={class:"wrapper"},tl=O(()=>vue.createElementVNode("div",{class:"row"},[vue.createElementVNode("label",{class:"item-title"},"钉钉Webhook地址")],-1)),nl={class:"desc"},il=["value"],ol=O(()=>vue.createElementVNode("div",{class:"desc danger"}," 提示：此项需要刷新页面才能生效 ",-1)),sl={key:3},ll=O(()=>vue.createElementVNode("h1",null,"V2EX Next",-1)),rl={class:"project-desc"},al={style:{"line-height":"2"}},cl=["href"],dl=["href"],ul=["href"],pl=["href"],fl=["href"],hl=["href"];function ml(e,t,n,s,i,o){const r=vue.resolveComponent("Icon"),a=vue.resolveComponent("BaseSwitch"),h=vue.resolveComponent("BaseSelect"),p=vue.resolveComponent("NoticeModal");return vue.openBlock(),vue.createBlock(vue.Transition,null,{default:vue.withCtx(()=>[n.show?(vue.openBlock(),vue.createElementBlock("div",eo,[vue.createElementVNode("div",{class:"mask",onClick:t[0]||(t[0]=(...u)=>o.close&&o.close(...u))}),vue.createElementVNode("div",to,[vue.createElementVNode("div",no,[vue.createElementVNode("div",io,[vue.createTextVNode(" 脚本设置 "),vue.createElementVNode("div",oo,[vue.createElementVNode("a",{href:o.DefaultVal.mobileScript,target:"_blank"},"(脚本现已支持移动端！)",8,so)])]),vue.createVNode(r,{icon:"ic:round-close",onClick:o.close},null,8,["onClick"])]),vue.createElementVNode("div",lo,[vue.createElementVNode("div",ro,[vue.createElementVNode("div",ao,[vue.createElementVNode("div",{class:vue.normalizeClass(["tab",i.tabIndex===0&&"active"]),onClick:t[1]||(t[1]=u=>i.tabIndex=0)},uo,2),vue.createElementVNode("div",{class:vue.normalizeClass(["tab",i.tabIndex===1&&"active"]),onClick:t[2]||(t[2]=u=>i.tabIndex=1)},fo,2),vue.createElementVNode("div",{class:vue.normalizeClass(["tab",i.tabIndex===2&&"active"]),onClick:t[3]||(t[3]=u=>i.tabIndex=2)},mo,2),vue.createElementVNode("div",{class:vue.normalizeClass(["tab",i.tabIndex===3&&"active"]),onClick:t[4]||(t[4]=u=>i.tabIndex=3)},yo,2)]),vue.createElementVNode("div",wo,[vue.createElementVNode("a",{href:o.DefaultVal.git,target:"_blank"},[vue.createVNode(r,{icon:"mdi:github"})],8,_o),vue.createElementVNode("a",{href:o.DefaultVal.homeUrl,target:"_blank"},[vue.createVNode(r,{icon:"iconamoon:home-light"})],8,vo)])]),vue.createElementVNode("div",bo,[vue.createElementVNode("div",ko,[i.tabIndex===0?(vue.openBlock(),vue.createElementBlock("div",Co,[vue.createElementVNode("div",xo,[To,vue.createElementVNode("div",So,[vue.createElementVNode("div",Io,[vue.createElementVNode("div",{class:vue.normalizeClass(["radio",i.config.viewType==="simple"?"active":""]),onClick:t[5]||(t[5]=u=>i.config.viewType="simple")},"简洁 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["radio",i.config.viewType==="table"?"active":""]),onClick:t[6]||(t[6]=u=>i.config.viewType="table")},"表格 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["radio",i.config.viewType==="card"?"active":""]),onClick:t[7]||(t[7]=u=>i.showNotice=!0)},"卡片 ",2)])])]),Mo,vue.createElementVNode("div",Lo,[No,vue.createElementVNode("div",Ro,[vue.createVNode(a,{modelValue:i.config.clickPostItemOpenDetail,"onUpdate:modelValue":t[8]||(t[8]=u=>i.config.clickPostItemOpenDetail=u)},null,8,["modelValue"])])]),Oo,vue.createElementVNode("div",Po,[Eo,vue.createElementVNode("div",Vo,[vue.createVNode(a,{modelValue:i.config.newTabOpen,"onUpdate:modelValue":t[9]||(t[9]=u=>i.config.newTabOpen=u)},null,8,["modelValue"])])]),Ao,vue.createElementVNode("div",Do,[$o,vue.createElementVNode("div",Uo,[vue.createVNode(a,{modelValue:i.config.newTabOpenActive,"onUpdate:modelValue":t[10]||(t[10]=u=>i.config.newTabOpenActive=u)},null,8,["modelValue"])])])])):vue.createCommentVNode("",!0),i.tabIndex===1?(vue.openBlock(),vue.createElementBlock("div",Ho,[vue.createElementVNode("div",Fo,[Bo,vue.createElementVNode("div",Wo,[vue.createVNode(a,{modelValue:i.config.showToolbar,"onUpdate:modelValue":t[11]||(t[11]=u=>i.config.showToolbar=u)},null,8,["modelValue"])])]),vue.createElementVNode("div",jo,[Go,vue.createElementVNode("div",qo,[vue.createVNode(h,{"display-type":i.config.commentDisplayType,"onUpdate:displayType":t[12]||(t[12]=u=>i.config.commentDisplayType=u)},null,8,["display-type"])])]),vue.createElementVNode("div",zo,[Jo,vue.createElementVNode("div",Ko,[vue.createVNode(a,{modelValue:i.config.autoOpenDetail,"onUpdate:modelValue":t[13]||(t[13]=u=>i.config.autoOpenDetail=u)},null,8,["modelValue"])])]),Yo,vue.createElementVNode("div",Xo,[Qo,vue.createElementVNode("div",Zo,[vue.createVNode(a,{modelValue:i.config.closePostDetailBySpace,"onUpdate:modelValue":t[14]||(t[14]=u=>i.config.closePostDetailBySpace=u)},null,8,["modelValue"])])]),vue.createElementVNode("div",es,[ts,vue.createElementVNode("div",ns,[vue.createVNode(a,{modelValue:i.config.contentAutoCollapse,"onUpdate:modelValue":t[15]||(t[15]=u=>i.config.contentAutoCollapse=u)},null,8,["modelValue"])])]),vue.createElementVNode("div",is,[os,vue.createElementVNode("div",ss,[vue.withDirectives(vue.createElementVNode("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=u=>i.config.postWidth=u)},null,512),[[vue.vModelText,i.config.postWidth]])])]),ls,rs,as,cs,vue.createElementVNode("div",ds,[us,vue.createElementVNode("div",ps,[vue.createVNode(a,{modelValue:i.config.showTopReply,"onUpdate:modelValue":t[17]||(t[17]=u=>i.config.showTopReply=u)},null,8,["modelValue"])])]),vue.createElementVNode("div",fs,[hs,vue.createElementVNode("div",ms,[vue.withDirectives(vue.createElementVNode("input",{type:"number",min:"1","onUpdate:modelValue":t[18]||(t[18]=u=>i.config.topReplyCount=u)},null,512),[[vue.vModelText,i.config.topReplyCount]])])]),vue.createElementVNode("div",gs,[ys,vue.createElementVNode("div",ws,[vue.withDirectives(vue.createElementVNode("input",{type:"number",min:"1","onUpdate:modelValue":t[19]||(t[19]=u=>i.config.topReplyLoveMinCount=u)},null,512),[[vue.vModelText,i.config.topReplyLoveMinCount]])])])])):vue.createCommentVNode("",!0),i.tabIndex===2?(vue.openBlock(),vue.createElementBlock("div",_s,[vue.createElementVNode("div",vs,[bs,vue.createElementVNode("div",ks,[vue.createVNode(a,{modelValue:i.config.openTag,"onUpdate:modelValue":t[20]||(t[20]=u=>i.config.openTag=u)},null,8,["modelValue"])])]),vue.createElementVNode("div",Cs,[xs,vue.createElementVNode("div",Ts,[vue.createVNode(a,{modelValue:i.config.base64,"onUpdate:modelValue":t[21]||(t[21]=u=>i.config.base64=u)},null,8,["modelValue"])])]),vue.createElementVNode("div",Ss,[Is,vue.createElementVNode("div",Ms,[vue.createVNode(a,{modelValue:i.config.autoSignin,"onUpdate:modelValue":t[22]||(t[22]=u=>i.config.autoSignin=u)},null,8,["modelValue"])])]),vue.createElementVNode("div",Ls,[Ns,vue.createElementVNode("div",Rs,[vue.withDirectives(vue.createElementVNode("input",{type:"text","onUpdate:modelValue":t[23]||(t[23]=u=>i.config.customBgColor=u)},null,512),[[vue.vModelText,i.config.customBgColor]])])]),Os,Ps,vue.createElementVNode("div",Es,[Vs,vue.createElementVNode("div",As,[vue.createVNode(a,{modelValue:i.config.collectBrowserNotice,"onUpdate:modelValue":t[24]||(t[24]=u=>i.config.collectBrowserNotice=u)},null,8,["modelValue"])])]),Ds,$s,vue.createElementVNode("div",Us,[Hs,vue.createElementVNode("div",Fs,[vue.createVNode(a,{modelValue:i.config.notice.takeOverNoticePage,"onUpdate:modelValue":t[25]||(t[25]=u=>i.config.notice.takeOverNoticePage=u)},null,8,["modelValue"])])]),vue.createElementVNode("div",Bs,[Ws,vue.createElementVNode("div",js,[vue.createVNode(a,{modelValue:i.config.notice.loopCheckNotice,"onUpdate:modelValue":t[26]||(t[26]=u=>i.config.notice.loopCheckNotice=u)},null,8,["modelValue"])])]),Gs,i.config.notice.loopCheckNotice?(vue.openBlock(),vue.createElementBlock("div",qs,[vue.createElementVNode("div",zs,[Js,vue.createElementVNode("div",Ks,[vue.createElementVNode("input",{type:"number",value:i.config.notice.loopCheckNoticeInterval,onBlur:t[27]||(t[27]=u=>i.config.notice.loopCheckNoticeInterval=u.target.value),style:{"margin-right":"1rem"}},null,40,Ys),vue.createTextVNode("分钟 ")])]),Xs,vue.createElementVNode("div",Qs,[Zs,vue.createElementVNode("div",el,[vue.createVNode(a,{modelValue:i.config.notice.whenNewNoticeGlimmer,"onUpdate:modelValue":t[28]||(t[28]=u=>i.config.notice.whenNewNoticeGlimmer=u)},null,8,["modelValue"])])]),tl,vue.createElementVNode("div",nl,[vue.createElementVNode("input",{type:"text",value:i.config.notice.ddWebhook,onBlur:t[29]||(t[29]=u=>i.config.notice.ddWebhook=u.target.value),style:{width:"100%"}},null,40,il)])])):vue.createCommentVNode("",!0),ol])):vue.createCommentVNode("",!0),i.tabIndex===3?(vue.openBlock(),vue.createElementBlock("div",sl,[ll,vue.createElementVNode("div",rl,[vue.createElementVNode("div",al,[vue.createElementVNode("div",null,[vue.createTextVNode("官网："),vue.createElementVNode("a",{href:o.DefaultVal.homeUrl,target:"_blank"},vue.toDisplayString(o.DefaultVal.homeUrl),9,cl)]),vue.createElementVNode("div",null,[vue.createTextVNode("GitHub地址："),vue.createElementVNode("a",{href:o.DefaultVal.git,target:"_blank"},vue.toDisplayString(o.DefaultVal.git),9,dl)]),vue.createElementVNode("div",null,[vue.createTextVNode("PC脚本地址："),vue.createElementVNode("a",{href:o.DefaultVal.pcScript,target:"_blank"},vue.toDisplayString(o.DefaultVal.pcScript),9,ul)]),vue.createElementVNode("div",null,[vue.createTextVNode("移动端脚本地址："),vue.createElementVNode("a",{href:o.DefaultVal.mobileScript,target:"_blank"},vue.toDisplayString(o.DefaultVal.mobileScript),9,pl)]),vue.createElementVNode("div",null,[vue.createTextVNode("反馈: "),vue.createElementVNode("a",{href:o.DefaultVal.issue,target:"_blank"},vue.toDisplayString(o.DefaultVal.issue),9,fl)]),vue.createElementVNode("div",null,[vue.createTextVNode("更新日志："),vue.createElementVNode("a",{href:o.DefaultVal.pcLog,target:"_blank"},vue.toDisplayString(o.DefaultVal.pcLog),9,hl)])])])])):vue.createCommentVNode("",!0)])])])]),vue.createVNode(p,{show:i.showNotice,"onUpdate:show":t[30]||(t[30]=u=>i.showNotice=u),onConfirm:t[31]||(t[31]=u=>i.config.viewType="card")},null,8,["show"])])):vue.createCommentVNode("",!0)]),_:1})}const gl=Q(Zi,[["render",ml],["__scopeId","data-v-9e40bff6"]]),yl={name:"Point",components:{PopConfirm:He,Icon:ne},inject:["post","isLogin"],props:{item:{type:Object,default(){return {}}},apiUrl:""},computed:{disabled(){return this.item.username===window.user.username||this.item.isThanked||!this.isLogin}},methods:{thankError(){if(!this.isLogin)return v.emit(b.SHOW_MSG,{type:"warning",text:"请先登录！"});if(this.item.username===window.user.username)return v.emit(b.SHOW_MSG,{type:"warning",text:"不能感谢自己"});if(this.item.isThanked)return v.emit(b.SHOW_MSG,{type:"warning",text:"已经感谢过了"})},async thank(){this.$emit("addThank");let e=`${location.origin}/thank/${this.apiUrl}?once=${this.post.once}`;$.post(e).then(t=>{t.success||(this.$emit("recallThank"),v.emit(b.SHOW_MSG,{type:"error",text:t.message})),v.emit(b.REFRESH_ONCE,t.once);},t=>{this.$emit("recallThank"),v.emit(b.SHOW_MSG,{type:"error",text:"感谢失败"}),v.emit(b.REFRESH_ONCE);});}}},wl={key:2,class:"link-num"},_l={key:3};function vl(e,t,n,s,i,o){const r=vue.resolveComponent("Icon"),a=vue.resolveComponent("PopConfirm");return vue.openBlock(),vue.createBlock(a,{disabled:o.disabled,title:`确认花费 10 个铜币向 @${n.item.username} 的这条回复发送感谢？`,onConfirm:o.thank},{default:vue.withCtx(()=>[vue.createElementVNode("div",{class:vue.normalizeClass(["tool",[o.disabled&&"disabled"]]),onClick:t[0]||(t[0]=(...h)=>o.thankError&&o.thankError(...h))},[n.item.isThanked?(vue.openBlock(),vue.createBlock(r,{key:0,color:"rgb(224,42,42)",icon:"icon-park-solid:like"})):(vue.openBlock(),vue.createBlock(r,{key:1,color:n.item.thankCount?"rgb(224,42,42)":null,icon:"icon-park-outline:like"},null,8,["color"])),n.item.thankCount?(vue.openBlock(),vue.createElementBlock("span",wl,vue.toDisplayString(n.item.thankCount),1)):(vue.openBlock(),vue.createElementBlock("span",_l,"感谢"))],2)]),_:1},8,["disabled","title","onConfirm"])}const nt=Q(yl,[["render",vl]]);const bl={name:"Author",components:{PopConfirm:He,Point:nt,Icon:ne},inject:["isLogin","tags","config","isNight"],props:{modelValue:!1,comment:{type:Object,default(){return {}}},type:{type:String,default(){return "list"}}},computed:{isDev(){return !1},pointInfo(){return {isThanked:this.comment.isThanked,thankCount:this.comment.thankCount,username:this.comment.username}},myTags(){return this.tags[this.comment.username]??[]},context(){return this.comment.replyUsers.length}},methods:{jump(){v.emit(b.JUMP,this.comment.floor);},showRelationReply(){if(!this.comment.replyUsers.length){v.emit(b.SHOW_MSG,{type:"warning",text:"该回复无上下文"});return}v.emit(b.RELATION_REPLY,{left:this.comment.replyUsers,right:this.comment.username,rightFloor:this.comment.floor});},addTag(){v.emit(b.ADD_TAG,this.comment.username);},removeTag(e){v.emit(b.REMOVE_TAG,{username:this.comment.username,tag:e});},checkIsLogin(e=""){return this.isLogin?(this.$emit(e),!0):(v.emit(b.SHOW_MSG,{type:"warning",text:"请先登录！"}),!1)},addThank(){v.emit(b.CHANGE_COMMENT_THANK,{id:this.comment.id,type:"add"});},recallThank(){v.emit(b.CHANGE_COMMENT_THANK,{id:this.comment.id,type:"recall"});}}},Be=e=>(vue.pushScopeId("data-v-64aa1930"),e=e(),vue.popScopeId(),e),kl={class:"Author-left"},Cl=["href"],xl=["src"],Tl={class:"texts"},Sl=["href"],Il={key:0,class:"owner"},Ml={key:1,class:"dup"},Ll={key:2,class:"mod"},Nl={class:"ago"},Rl={class:"my-tag"},Ol=Be(()=>vue.createElementVNode("i",{class:"fa fa-tag"},null,-1)),Pl=["onClick"],El={class:"Author-right"},Vl={key:0,class:"toolbar"},Al={class:"tool"},Dl=Be(()=>vue.createElementVNode("span",null,"隐藏",-1)),$l=Be(()=>vue.createElementVNode("span",null,"上下文",-1)),Ul=Be(()=>vue.createElementVNode("span",null,"跳转",-1)),Hl=Be(()=>vue.createElementVNode("span",null,"回复",-1));function Fl(e,t,n,s,i,o){const r=vue.resolveComponent("Icon"),a=vue.resolveComponent("PopConfirm"),h=vue.resolveComponent("Point");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["Author",{expand:!n.modelValue}])},[vue.createElementVNode("div",kl,[n.modelValue?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createBlock(r,{key:0,onClick:t[0]||(t[0]=vue.withModifiers(p=>e.$emit("update:modelValue",!0),["stop"])),color:"#177EC9",class:"expand-icon",icon:"gravity-ui:chevrons-expand-up-right"})),o.config.viewType!=="simple"?(vue.openBlock(),vue.createElementBlock("a",{key:1,class:"avatar",href:`/member/${n.comment.username}`},[vue.createElementVNode("img",{src:n.comment.avatar,alt:""},null,8,xl)],8,Cl)):vue.createCommentVNode("",!0),vue.createElementVNode("span",Tl,[vue.createElementVNode("strong",null,[vue.createElementVNode("a",{href:`/member/${n.comment.username}`,class:vue.normalizeClass(["username",{dark:o.isNight}])},vue.toDisplayString(n.comment.username),11,Sl)]),n.comment.isOp?(vue.openBlock(),vue.createElementBlock("div",Il,"OP")):vue.createCommentVNode("",!0),n.comment.isDup?(vue.openBlock(),vue.createElementBlock("div",Ml,"DUP")):vue.createCommentVNode("",!0),n.comment.isMod?(vue.openBlock(),vue.createElementBlock("div",Ll,"MOD")):vue.createCommentVNode("",!0),vue.createElementVNode("span",Nl,vue.toDisplayString(n.comment.date),1),o.isLogin&&o.config.openTag?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:3},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.myTags,p=>(vue.openBlock(),vue.createElementBlock("span",Rl,[Ol,vue.createElementVNode("span",null,vue.toDisplayString(p),1),vue.createElementVNode("i",{class:"fa fa-trash-o remove",onClick:vue.withModifiers(u=>o.removeTag(p),["stop"])},null,8,Pl)]))),256)),vue.createElementVNode("span",{class:"add-tag ago",onClick:t[1]||(t[1]=vue.withModifiers((...p)=>o.addTag&&o.addTag(...p),["stop"])),title:"添加标签"},"+")],64)):vue.createCommentVNode("",!0)])]),vue.createElementVNode("div",El,[o.isLogin?(vue.openBlock(),vue.createElementBlock("div",Vl,[vue.createVNode(a,{title:"确认隐藏这条回复?",onConfirm:t[2]||(t[2]=p=>e.$emit("hide"))},{default:vue.withCtx(()=>[vue.createElementVNode("div",Al,[vue.createVNode(r,{icon:"fluent:eye-hide-24-regular"}),Dl])]),_:1}),o.context?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"tool",onClick:t[3]||(t[3]=vue.withModifiers((...p)=>o.showRelationReply&&o.showRelationReply(...p),["stop"]))},[vue.createVNode(r,{icon:"iconoir:page-search"}),$l])):vue.createCommentVNode("",!0),n.type==="top"?(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"tool",onClick:t[4]||(t[4]=vue.withModifiers((...p)=>o.jump&&o.jump(...p),["stop"]))},[vue.createVNode(r,{icon:"icon-park-outline:to-bottom"}),Ul])):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"tool",onClick:t[5]||(t[5]=vue.withModifiers(p=>o.checkIsLogin("reply"),["stop"]))},[vue.createVNode(r,{icon:"mynaui:message"}),Hl]),vue.withDirectives(vue.createVNode(h,{item:o.pointInfo,onAddThank:o.addThank,onRecallThank:o.recallThank,"api-url":"reply/"+n.comment.id},null,8,["item","onAddThank","onRecallThank","api-url"]),[[vue.vShow,!n.comment.thankCount]])])):vue.createCommentVNode("",!0),vue.withDirectives(vue.createVNode(h,{item:o.pointInfo,onAddThank:o.addThank,onRecallThank:o.recallThank,"api-url":"reply/"+n.comment.id},null,8,["item","onAddThank","onRecallThank","api-url"]),[[vue.vShow,n.comment.thankCount]]),vue.createElementVNode("div",{class:vue.normalizeClass(["floor",{isDev:o.isDev}])},vue.toDisplayString(n.comment.floor),3)])],2)}const hn=Q(bl,[["render",Fl],["__scopeId","data-v-64aa1930"]]);const Bl=e=>(vue.pushScopeId("data-v-180caef6"),e=e(),vue.popScopeId(),e),Wl={class:"get-cursor"},jl=["innerHTML"],Gl={class:"toolbar"},ql={class:"left"},zl={class:"upload"},Jl={key:0,style:{color:"black","font-size":"1.4rem"}},Kl={class:"right"},Yl=Bl(()=>vue.createElementVNode("div",{class:"title"},"经典",-1)),Xl={class:"list"},Ql=["src","onClick"],Zl={class:"emoji"},er={class:"title"},tr={class:"list"},nr=["onClick"],ir={__name:"PostEditor",props:{replyUser:null,replyFloor:null,useType:{type:String,default(){return "reply-comment"}}},emits:["close"],setup(e,{expose:t,emit:n}){const s=e,{replyUser:i,replyFloor:o,useType:r}=s,a=i?`@${i} #${o} `:"",h=n,p=vue.inject("post"),u=vue.inject("show"),c=vue.inject("isNight");vue.inject("pageType");const d=vue.inject("allReplyUsers");let y=vue.ref(!1);const g=vue.ref(!1),w=vue.ref(!1),f=vue.ref(!1),C=vue.ref("editorId_"+Date.now()),k=vue.ref(a),S=vue.ref(null),A=vue.ref(null),H=vue.ref(null),M=vue.ref('<span style="white-space:pre-wrap;"> </span>'),F=[{title:"常用",list:["😅","😭","😂","🥰","😰","🤡","👀","🐴","🐶","❓","❤️","💔","⭐","🔥","💩","🔞","⚠️","🎁","🎉"]},{title:"小黄脸",list:["😀","😁","😂","🤣","😅","😊","😋","😘","🥰","😗","🤩","🤔","🤨","😐","😑","🙄","😏","😪","😫","🥱","😜","😒","😔","😨","😰","😱","🥵","😡","🥳","🥺","🤭","🧐","😎","🤓","😭","🤑","🤮"]},{title:"手势",list:["🤏","👉","✌️","👌","👍","👎","🤝","🙏","👏"]},{title:"其他",list:["🔞","👻","🤡","🐔","👀","💩","🐴","🦄","🐧","🐶"]}],K=[{name:"[狗头]",low:"https://i.imgur.com/io2SM1h.png",high:"https://i.imgur.com/0icl60r.png"},{name:"[doge]",low:"https://i.imgur.com/duWRpIu.png",high:"https://i.imgur.com/HyphI6d.png"},{name:"[受虐滑稽]",low:"https://i.imgur.com/Iy0taMy.png",high:"https://i.imgur.com/PS1pxd9.png"},{name:"[马]",low:"https://i.imgur.com/8EKZv7I.png",high:"https://i.imgur.com/ANFUX52.png"},{name:"[二哈]",low:"https://i.imgur.com/XKj1Tkx.png",high:"https://i.imgur.com/dOeP4XD.png"},{name:"[舔屏]",low:"https://i.imgur.com/Cvl7dyN.png",high:"https://i.imgur.com/LmETy9N.png"},{name:"[辣眼睛]",low:"https://i.imgur.com/cPNPYD5.png",high:"https://i.imgur.com/3fSUmi8.png"},{name:"[吃瓜]",low:"https://i.imgur.com/ee8Lq7H.png",high:"https://i.imgur.com/0L26og9.png"},{name:"[不高兴]",low:"https://i.imgur.com/huX6coX.png",high:"https://i.imgur.com/N7JEuvc.png"},{name:"[真棒]",low:"https://i.imgur.com/xr1UOz1.png",high:"https://i.imgur.com/w8YEw9Q.png"},{name:"[鄙视]",low:"https://i.imgur.com/u6jlqVq.png",high:"https://i.imgur.com/8JFNANq.png"},{name:"[疑问]",low:"https://i.imgur.com/F29pmQ6.png",high:"https://i.imgur.com/EbbTQAR.png"},{name:"[吐舌]",low:"https://i.imgur.com/InmIzl9.png",high:"https://i.imgur.com/Ovj56Cd.png"},{name:"[笑眼]",low:"https://i.imgur.com/ZveiiGy.png",high:"https://i.imgur.com/PI1CfEr.png"},{name:"[大哭]",low:"https://i.imgur.com/hu4oR6C.png",high:"https://i.imgur.com/b4X9XLE.png"},{name:"[喷]",low:"https://i.imgur.com/bkw3VRr.png",high:"https://i.imgur.com/wnZL13L.png"},{name:"[苦笑]",low:"https://i.imgur.com/VUWFktU.png",high:"https://i.imgur.com/NAfspZ1.png"},{name:"[喝酒]",low:"https://i.imgur.com/2ZZSapE.png",high:"https://i.imgur.com/rVbSVak.png"},{name:"[捂脸]",low:"https://i.imgur.com/krir4IG.png",high:"https://i.imgur.com/qqBqgVm.png"},{name:"[阴险]",low:"https://i.imgur.com/MA8YqTP.png",high:"https://i.imgur.com/e94jbaT.png"},{name:"[怒]",low:"https://i.imgur.com/n4kWfGB.png",high:"https://i.imgur.com/iMXxNxh.png"}],W=["3107b9ef8b316f3","442b04f26eefc8a","59cfebe717c09e4","60605aad4a62882","6c65ab1d3f5452a","83e123737849aa9","9311f6be1c10160","c4a4a563f698595","81be04b9e4a08ce"];t({content:k,isFocus:()=>y.value});const le=vue.computed(()=>[r,y.value?"isFocus":"",c.value?"isNight":""]),pe=vue.computed(()=>{var P;if(!S.value||!k.value)return "";let G=((P=S.value)==null?void 0:P.selectionStart)||0;return k.value.substring(0,G).replace(/</g,"<").replace(/>/g,">").replace(/\n/g,"<br/>").replace(/\s/g,M.value)}),re=vue.computed(()=>k.value?k.value===a:!0);function he(G){G.preventDefault(),me(G.dataTransfer.files[0]);}async function me(G){if(!G||w.value)return;w.value=!0;const P=new FormData;P.append("image",G);const B=Math.floor(Math.random()*W.length),X=W[B],Z=await fetch("https://api.imgur.com/3/upload",{method:"POST",headers:{Authorization:`Client-ID ${X}`},body:P});if(w.value=!1,Z.ok){const z=await Z.json();if(z.success)return ot(" "+z.data.link+" ")}v.emit(b.SHOW_MSG,{type:"error",text:"上传失败"});}async function We(){if(re.value||g.value)return;g.value=!0;let G=k.value.replace(/\[((?!\[).)+\]/g,function(z){let ie=K.find(ke=>ke.name===z);return ie?ie.low+" ":z}),P=k.value.replace(/https?:\/\/(i\.)?imgur\.com\/((?!http).)+\.(gif|png|jpg|jpeg|GIF|PNG|JPG|JPEG)/g,function(z){return `<img src="${z}" data-originUrl="${z}" data-notice="这个img标签由v2ex-超级增强脚本解析" style="max-width: 100%">`});P=P.replace(/\[((?!\[).)+\]/g,function(z){let ie=K.find(ke=>ke.name===z);return ie?`<a target="_blank" href="${ie.low}" rel="nofollow noopener"><img src="${ie.low}" class="embedded_image" rel="noreferrer"></a> `:z});let B=P.match(/@([\w]+?[\s])/g);B&&B.map(z=>{let ie=z.replace("@","").replace(" ","");P=P.replace(ie,`<a href="/member/${ie}">${ie}</a>`);}),P=P.replaceAll(`
`,"<br/>");let X={thankCount:0,isThanked:!1,isOp:p.value.username===window.user.username,isDup:!1,id:Date.now(),username:window.user.username,avatar:window.user.avatar,date:"几秒前",floor:p.value.replyCount+1,reply_content:P??"",children:[],replyUsers:i?[i]:[],replyFloor:o||-1,level:r==="reply-comment"?1:0};X.hideCallUserReplyContent=X.reply_content,X.replyUsers.length===1&&(X.hideCallUserReplyContent=X.reply_content.replace(/@<a href="\/member\/[\s\S]+?<\/a>(\s#[\d]+)?\s(<br>)?/,()=>""));let Z=`${location.origin}/t/${p.value.id}`;$.post(Z,{content:G,once:p.value.once}).then(z=>{g.value=!1;let ie=z.search("你上一条回复的内容和这条相同");if(ie>-1)return v.emit(b.SHOW_MSG,{type:"error",text:"你上一条回复的内容和这条相同"});if(ie=z.search("请不要在每一个回复中都包括外链，这看起来像是在 spamming"),ie>-1)return v.emit(b.SHOW_MSG,{type:"error",text:"请不要在每一个回复中都包括外链，这看起来像是在 spamming"});if(z.search("创建新回复")>-1){v.emit(b.REFRESH_ONCE,z),v.emit(b.SHOW_MSG,{type:"error",text:"回复出现了问题，请使用原版进行回复"});let Ge=window.document.body.clientWidth,qe=1200,kn=Ge/2-qe/2,Rt=window.open("创建新回复","",`width=${qe},height=600,left=${kn},top=100`);Rt.document.write(z);let Cn=setInterval(function(){Rt.closed&&(clearInterval(Cn),v.emit(b.REFRESH_POST));},1e3);return}k.value=a,h("close"),v.emit(b.REFRESH_ONCE,z),v.emit(b.SHOW_MSG,{type:"success",text:"回复成功"}),v.emit(b.ADD_REPLY,X);},z=>{console.log("err",z),g.value=!1,v.emit(b.SHOW_MSG,{type:"error",text:"回复失败"});}).catch(z=>{console.log("catch",z);});}function je(G){if(f.value)return f.value=!1;let P=G.currentTarget.getBoundingClientRect();H.value.style.left=P.left+30+"px",H.value.style.bottom=window.innerHeight-P.top-20+"px",f.value=!0;}function fe(){v.emit(b.SHOW_CALL,{show:!1}),v.off(b.SET_CALL);}function ge(){S.value.style.height=0,S.value.style.height=S.value.scrollHeight+"px";}function ot(G){let P=S.value.selectionStart,B=k.value.slice(0,P),X=k.value.slice(P,k.value.length);k.value=B+G+X;let Z=B.length+G.length;setTimeout(()=>{S.value.focus(),S.value.setSelectionRange(Z,Z),ge();});}function Me(G){let P=A.value.getBoundingClientRect();v.emit(b.SHOW_CALL,{show:!0,top:P.top,left:P.left,text:G}),v.off(b.SET_CALL),v.on(b.SET_CALL,B=>{let X=S.value.selectionStart,Z=k.value.slice(0,X),z=k.value.slice(X,k.value.length),ie=Z.lastIndexOf("@");Z=k.value.slice(0,ie+1),B==="管理员"&&(B="Livid @Kai @Olivia @GordianZ @sparanoid @drymonfidelia"),B==="所有人"&&(B=d.value.map((Ge,qe)=>qe?"@"+Ge:Ge).join(" ")),k.value=Z+B+" "+z;let ke=Z.length+B.length+1;setTimeout(()=>{S.value.setSelectionRange(ke,ke),ge();}),v.off(b.SET_CALL);});}function _n(G){switch(G.keyCode){case 8:k.value==="@"&&fe();break;case 37:case 38:case 39:case 40:setTimeout(()=>Lt({data:""}),100);break;case 27:return G.preventDefault(),G.stopPropagation(),G.stopImmediatePropagation(),!1;case 13:G.ctrlKey&&We(),G.metaKey&&We();break}}function Lt(G){let P=S.value.selectionStart;if(k.value){if(G.data===" ")return fe();if(G.data==="@"){if(k.value.length!==1){if(k.value[P-2]===" "||k.value[P-2]===`
`)return Me("")}else return Me("");fe();}else {ge();let B=k.value.slice(0,P),X=B.lastIndexOf("@");if(X===-1)return fe();let Z=B.slice(X,P);if(Z.includes(" "))fe();else {if(X===0)return Me(Z.replace("@",""));if(k.value.length!==1){if(k.value[X-1]===" "||k.value[X-1]===`
`)return Me(Z.replace("@",""))}else return Me(Z.replace("@",""));fe();}}}}function Nt(G){const P=G.clipboardData.items,B=[].slice.call(P).filter(function(z){return z.type.indexOf("image")!==-1});if(B.length===0)return;const Z=B[0].getAsFile();me(Z);}function vn(){document.removeEventListener("paste",Nt),y.value=!1;}function bn(){document.addEventListener("paste",Nt);}return vue.watch(()=>u,G=>{G.value&&(f.value=!1);},{deep:!0}),vue.onMounted(()=>{$(`.${C.value}`).each(function(){this.setAttribute("style","height:"+this.scrollHeight+"px;overflow-y:hidden;");}).on("input",function(){this.style.height=0,this.style.height=this.scrollHeight+"px";}),r==="reply-comment"&&S.value&&S.value.focus();}),vue.onBeforeUnmount(()=>{$(`.${C.value}`).off();}),(G,P)=>(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["post-editor-wrapper",le.value])},[vue.withDirectives(vue.createElementVNode("textarea",{class:vue.normalizeClass(["post-editor",C.value]),ref_key:"txtRef",ref:S,onFocus:P[0]||(P[0]=B=>vue.isRef(y)?y.value=!0:y=!0),onBlur:vn,onFocusin:bn,placeholder:"请尽量让自己的回复能够对别人有帮助",onInput:Lt,onKeydown:_n,onDrop:he,"onUpdate:modelValue":P[1]||(P[1]=B=>k.value=B)},null,34),[[vue.vModelText,k.value]]),vue.createElementVNode("div",Wl,[vue.createElementVNode("span",{innerHTML:pe.value},null,8,jl),vue.createElementVNode("span",{class:"cursor",ref_key:"cursorRef",ref:A},"|",512)]),vue.createElementVNode("div",Gl,[vue.createElementVNode("div",ql,[vue.createVNode(vue.unref(ne),{onClick:vue.withModifiers(je,["stop"]),icon:"streamline:smiley-happy"}),vue.createElementVNode("div",zl,[vue.createElementVNode("input",{type:"file",accept:"image/*",onChange:P[2]||(P[2]=B=>me(B.currentTarget.files[0]))},null,32),vue.createVNode(vue.unref(ne),{icon:"lets-icons:img-load-box-fill"})]),w.value?(vue.openBlock(),vue.createElementBlock("span",Jl,"上传中.....")):vue.createCommentVNode("",!0)]),vue.createElementVNode("div",Kl,[vue.unref(r)==="reply-comment"?(vue.openBlock(),vue.createBlock(ve,{key:0,type:"link",size:"small",style:{"margin-right":"1rem",cursor:"pointer"},onClick:P[3]||(P[3]=vue.withModifiers(B=>h("close"),["stop"]))},{default:vue.withCtx(()=>[vue.createTextVNode(" 关闭 ")]),_:1})):vue.createCommentVNode("",!0),vue.createVNode(ve,{size:"small",disabled:re.value,loading:g.value,onClick:vue.withModifiers(We,["stop"])},{default:vue.withCtx(()=>[vue.createTextVNode("回复 ")]),_:1},8,["disabled","loading"])])]),vue.withDirectives(vue.createElementVNode("div",{class:"emoticon-pack",ref_key:"emoticonsRef",ref:H},[vue.createVNode(vue.unref(ne),{icon:"ic:round-close",onClick:P[4]||(P[4]=vue.withModifiers(B=>f.value=!1,["stop"]))}),Yl,vue.createElementVNode("div",Xl,[(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,vue.renderList(K,B=>vue.createElementVNode("img",{src:B.high,onClick:vue.withModifiers(X=>{ot(B.name),f.value=!1;},["stop"])},null,8,Ql)),64))]),vue.createElementVNode("div",Zl,[(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,vue.renderList(F,B=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createElementVNode("div",er,vue.toDisplayString(B.title),1),vue.createElementVNode("div",tr,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(B.list,X=>(vue.openBlock(),vue.createElementBlock("span",{onClick:vue.withModifiers(Z=>{ot(X),f.value=!1;},["stop"])},vue.toDisplayString(X),9,nr))),256))])],64))),64))])],512),[[vue.vShow,f.value]])],2))}},St=Q(ir,[["__scopeId","data-v-180caef6"]]);const or={key:0,class:"html-wrapper"},sr=["innerHTML"],lr=900,rr={__name:"BaseHtmlRender",props:["html"],setup(e){const t=vue.inject("config"),n=e,s=vue.ref(null),i=vue.ref(!1),o=vue.ref(!1);function r(h){if(!t.value.base64)return;let p=window.win().getSelection().toString();if(p){let u=p.match(/([A-Za-z0-9+/=]+)/g);if(u){if(u[0].length<4)return;v.emit(b.SHOW_TOOLTIP,{text:u[0],e:h});}}}vue.watch(t.value,h=>{h.contentAutoCollapse||(i.value=!1);}),vue.watch([()=>s.value,()=>n.html],()=>{!s.value||!n.html||t.value.contentAutoCollapse&&(s.value.querySelectorAll("img").forEach(h=>{h.removeEventListener("load",a),h.addEventListener("load",a);}),a());},{immediate:!0,flush:"post"});function a(){if(o.value||!s.value)return;let h=s.value.getBoundingClientRect();i.value=h.height>=lr;}return (h,p)=>n.html?(vue.openBlock(),vue.createElementBlock("div",or,[vue.createElementVNode("div",{class:vue.normalizeClass({mask:i.value})},[vue.createElementVNode("div",{ref_key:"contentRef",ref:s,innerHTML:n.html,onMouseup:r},null,40,sr)],2),i.value?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"expand",onClick:p[0]||(p[0]=u=>{i.value=!1,o.value=!0;})},"展开")):vue.createCommentVNode("",!0)])):vue.createCommentVNode("",!0)}},it=Q(rr,[["__scopeId","data-v-727ada32"]]);const ar={name:"TopSubComment",components:{BaseHtmlRender:it,Author:hn,PostEditor:St,Point:nt,Icon:ne},inject:["post","postDetailWidth","show","isNight","isLogin","tags","config"],props:{modelValue:{reply_content:""},level:-1},data(){return {expand:!0,edit:!1,replyInfo:`@${this.modelValue.username} #${this.modelValue.floor} `,floor:this.modelValue.floor}},watch:{show(e){e&&(this.edit=!1);}},computed:{myTags(){return this.tags[this.modelValue.username]??[]}},methods:{jump(){v.emit(b.JUMP,this.modelValue.floor);}}},cr=e=>(vue.pushScopeId("data-v-d3f8c94b"),e=e(),vue.popScopeId(),e),dr=["data-floor"],ur=cr(()=>vue.createElementVNode("div",{class:"left expand-line"},null,-1)),pr={class:"right"},fr={class:"simple-wrapper"};function hr(e,t,n,s,i,o){const r=vue.resolveComponent("Author"),a=vue.resolveComponent("BaseHtmlRender"),h=vue.resolveComponent("PostEditor"),p=vue.resolveComponent("TopSubComment",!0);return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["top-sub-comment",n.level===1&&"top-sub-reply"]),ref:"comment","data-floor":i.floor},[ur,vue.createElementVNode("div",pr,[vue.createVNode(r,{modelValue:i.expand,"onUpdate:modelValue":t[0]||(t[0]=u=>i.expand=u),comment:n.modelValue,onReply:t[1]||(t[1]=u=>i.edit=!i.edit),type:"top"},null,8,["modelValue","comment"]),vue.createVNode(a,{class:"top-reply_content reply_content",html:n.modelValue.hideCallUserReplyContent},null,8,["html"]),i.edit?(vue.openBlock(),vue.createBlock(h,{key:0,onClose:t[2]||(t[2]=u=>i.edit=!1),replyInfo:i.replyInfo,replyUser:n.modelValue.username,replyFloor:n.modelValue.floor},null,8,["replyInfo","replyUser","replyFloor"])):vue.createCommentVNode("",!0),vue.createElementVNode("div",fr,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(n.modelValue.children,(u,c)=>(vue.openBlock(),vue.createBlock(p,{modelValue:n.modelValue.children[c],"onUpdate:modelValue":d=>n.modelValue.children[c]=d,key:c},null,8,["modelValue","onUpdate:modelValue"]))),128))])])],10,dr)}const mr=Q(ar,[["render",hr],["__scopeId","data-v-d3f8c94b"]]);const gr={name:"Comment",components:{BaseHtmlRender:it,Author:hn,PostEditor:St,Point:nt,Icon:ne,TopSubComment:mr},inject:["post","postDetailWidth","show","isNight","config"],props:{modelValue:{reply_content:""},type:{type:String,default(){return "list"}}},data(){return {edit:!1,ding:!1,expand:!0,expandTopReply:!0,expandWrong:!1,replyInfo:`@${this.modelValue.username} #${this.modelValue.floor} `,cssStyle:null,floor:this.modelValue.floor}},watch:{show(e){e&&(this.edit=!1);},postDetailWidth(e,t){this.checkIsTooLong(e);}},computed:{CommentDisplayType(){return D},myClass(){return {isOp:this.modelValue.isOp,isSimple:this.config.viewType==="simple",ding:this.ding,isLevelOne:this.type==="top"?!0:this.modelValue.level===0,["c_"+this.floor]:this.type!=="top"}}},mounted(){this.checkIsTooLong(this.postDetailWidth);},methods:{checkIsTooLong(e){if(e!==0){let t=this.$refs.comment.getBoundingClientRect(),n=e*.6;if(n<t.width&&t.width<n+25&&this.modelValue.children.length){this.expand=!1;let s=2;this.cssStyle={padding:"1rem 0",width:`calc(${e}px - ${s}rem)`,transform:`translateX(calc(${t.width-e}px + ${s}rem))`,background:this.isNight?"#18222d":"white"};}}},showDing(){this.ding=!0,setTimeout(()=>{this.ding=!1;},2e3);},hide(){let e=`${location.origin}/ignore/reply/${this.modelValue.id}?once=${this.post.once}`;v.emit(b.REMOVE,this.modelValue.floor),$.post(e).then(t=>{v.emit(b.REFRESH_ONCE),v.emit(b.SHOW_MSG,{type:"success",text:"隐藏成功"});},t=>{v.emit(b.SHOW_MSG,{type:"warning",text:"隐藏成功,仅本次有效（接口调用失败！）"});});},toggle(){this.expand=!this.expand;},jump(){v.emit(b.JUMP,this.modelValue.floor);}}},be=e=>(vue.pushScopeId("data-v-67fa2f3f"),e=e(),vue.popScopeId(),e),yr=["data-floor"],wr={class:"comment-content"},_r={class:"right"},vr={class:"w"},br={key:0,class:"wrong-wrapper"},kr=["href"],Cr={class:"del-line"},xr=be(()=>vue.createElementVNode("i",{class:"fa fa-question-circle-o wrong-icon","aria-hidden":"true"},null,-1)),Tr={key:0,class:"warning"},Sr=be(()=>vue.createElementVNode("br",null,null,-1)),Ir=be(()=>vue.createElementVNode("br",null,null,-1)),Mr=be(()=>vue.createElementVNode("br",null,null,-1)),Lr=be(()=>vue.createElementVNode("br",null,null,-1)),Nr=be(()=>vue.createElementVNode("br",null,null,-1)),Rr=be(()=>vue.createElementVNode("a",{href:"https://github.com/zyronon/web-scripts/issues",target:"_blank"},"这里",-1)),Or=be(()=>vue.createElementVNode("div",{class:"gang"},null,-1)),Pr={class:"simple-wrapper"},Er={key:0,class:"top-reply-wrap"};function Vr(e,t,n,s,i,o){const r=vue.resolveComponent("Author"),a=vue.resolveComponent("BaseHtmlRender"),h=vue.resolveComponent("PostEditor"),p=vue.resolveComponent("Icon"),u=vue.resolveComponent("TopSubComment"),c=vue.resolveComponent("Comment",!0);return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["comment",o.myClass]),ref:"comment","data-floor":i.floor},[vue.createVNode(r,{modelValue:i.expand,"onUpdate:modelValue":t[0]||(t[0]=d=>i.expand=d),comment:n.modelValue,onReply:t[1]||(t[1]=d=>i.edit=!i.edit),type:n.type,onHide:o.hide},null,8,["modelValue","comment","type","onHide"]),i.cssStyle&&!i.expand?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"more ago",onClick:t[2]||(t[2]=d=>i.expand=!i.expand)}," 由于嵌套回复层级太深，自动将后续回复隐藏 ")):vue.createCommentVNode("",!0),i.expand?(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"comment-content-w",style:vue.normalizeStyle(i.cssStyle)},[i.cssStyle?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"more ago",onClick:t[3]||(t[3]=d=>i.expand=!i.expand)}," 由于嵌套回复层级太深，自动将以下回复移至可见范围 ")):vue.createCommentVNode("",!0),vue.createElementVNode("div",wr,[vue.createElementVNode("div",{class:"left expand-line",onClick:t[4]||(t[4]=(...d)=>o.toggle&&o.toggle(...d))}),vue.createElementVNode("div",_r,[vue.createElementVNode("div",vr,[n.modelValue.isWrong?(vue.openBlock(),vue.createElementBlock("div",br,[vue.createElementVNode("span",{onClick:t[5]||(t[5]=d=>i.expandWrong=!i.expandWrong),title:"点击楼层号查看提示"},[vue.createElementVNode("a",{href:"/member/"+n.modelValue.replyUsers[0]},"@"+vue.toDisplayString(n.modelValue.replyUsers[0])+"  ",9,kr),vue.createElementVNode("span",Cr,"#"+vue.toDisplayString(n.modelValue.replyFloor),1),xr]),i.expandWrong?(vue.openBlock(),vue.createElementBlock("div",Tr,[vue.createTextVNode(" 这条回复似乎有点问题，指定的楼层号与@的人对应不上 "),Sr,vue.createTextVNode(" 原因可能有下面几种： "),Ir,vue.createTextVNode(" 一、屏蔽用户导致楼层塌陷：你屏蔽了A，自A以后的回复的楼层号都会减1 "),Mr,vue.createTextVNode(" 二、忽略回复导致楼层塌陷：原理同上 "),Lr,vue.createTextVNode(" 三、层主回复时指定错了楼层号（同一，层主屏蔽了别人，导致楼层塌陷） "),Nr,vue.createTextVNode(" 四、脚本解析错误，请在 "),Rr,vue.createTextVNode("反馈 ")])):vue.createCommentVNode("",!0)])):vue.createCommentVNode("",!0),o.config.commentDisplayType===o.CommentDisplayType.FloorInFloorNoCallUser&&n.type!=="top"?(vue.openBlock(),vue.createBlock(a,{key:1,class:"reply_content",html:n.modelValue.hideCallUserReplyContent},null,8,["html"])):(vue.openBlock(),vue.createBlock(a,{key:2,class:"reply_content",html:n.modelValue.reply_content},null,8,["html"])),i.edit?(vue.openBlock(),vue.createBlock(h,{key:3,onClose:t[6]||(t[6]=d=>i.edit=!1),replyInfo:i.replyInfo,replyUser:n.modelValue.username,replyFloor:n.modelValue.floor},null,8,["replyInfo","replyUser","replyFloor"])):vue.createCommentVNode("",!0),n.type==="top"&&n.modelValue.replyCount?(vue.openBlock(),vue.createElementBlock("div",{key:4,class:"reply-count",onClick:t[7]||(t[7]=d=>i.expandTopReply=!i.expandTopReply)},[Or,vue.createElementVNode("span",null," 共有"+vue.toDisplayString(n.modelValue.replyCount)+" 条回复 ",1),i.expandTopReply?(vue.openBlock(),vue.createBlock(p,{key:0,icon:"ep:arrow-up-bold"})):(vue.openBlock(),vue.createBlock(p,{key:1,icon:"ep:arrow-down-bold"}))])):vue.createCommentVNode("",!0)]),vue.createElementVNode("div",Pr,[n.type==="top"?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[i.expandTopReply&&n.modelValue.replyCount?(vue.openBlock(),vue.createElementBlock("div",Er,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(n.modelValue.children,(d,y)=>(vue.openBlock(),vue.createBlock(u,{level:1,modelValue:n.modelValue.children[y],"onUpdate:modelValue":g=>n.modelValue.children[y]=g,key:y},null,8,["modelValue","onUpdate:modelValue"]))),128))])):vue.createCommentVNode("",!0)],64)):(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:1},vue.renderList(n.modelValue.children,(d,y)=>(vue.openBlock(),vue.createBlock(c,{modelValue:n.modelValue.children[y],"onUpdate:modelValue":g=>n.modelValue.children[y]=g,key:y},null,8,["modelValue","onUpdate:modelValue"]))),128))])])]),i.cssStyle?(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"more ago",onClick:t[8]||(t[8]=d=>i.expand=!i.expand)}," 由于嵌套回复层级太深，自动将以上回复移至可见范围 ")):vue.createCommentVNode("",!0)],4)):vue.createCommentVNode("",!0)],10,yr)}const Ar=Q(gr,[["render",Vr],["__scopeId","data-v-67fa2f3f"]]);const Dr={name:"Toolbar",components:{Icon:ne,BaseLoading:Fe},inject:["isLogin","post","pageType"],data(){return {timer:null,loading:!1,loading2:!1,loading3:!1}},methods:{checkIsLogin(e=""){return this.isLogin?(this.$emit(e),!0):(v.emit(b.SHOW_MSG,{type:"warning",text:"请先登录！"}),!1)},tweet(){var n;let e=((n=window.user)==null?void 0:n.username)??"",t=`https://twitter.com/intent/tweet?url=${location.origin}/t/${this.post.id}?r=${e}&related=v2ex&text=${this.post.title}`;window.open(t,"_blank","width=550,height=370");},async report(){if(!this.checkIsLogin()||this.loading3)return;let e=this.post.isReport;if(e){v.emit(b.SHOW_MSG,{type:"success",text:"你已对本主题进行了报告"});return}let t=`${location.origin}/report/topic/${this.post.id}?once=${this.post.once}`;this.loading3=!0;let n=await fetch(t);if(this.loading3=!1,n.redirected){let s=await n.text();if(s.search("你已对本主题进行了报告")){v.emit(b.SHOW_MSG,{type:"success",text:"你已对本主题进行了报告"}),v.emit(b.REFRESH_ONCE,s),v.emit(b.MERGE,{isReport:!e});return}}v.emit(b.REFRESH_ONCE),v.emit(b.SHOW_MSG,{type:"error",text:"操作失败，请重试"});},async toggleIgnore(){if(!this.checkIsLogin())return;let e=`${location.origin}/${this.post.isIgnore?"unignore":"ignore"}/topic/${this.post.id}?once=${this.post.once}`;this.pageType===J.Post?(this.loading2=!0,(await window.win().fetch(e)).redirected?(this.post.isIgnore||(window.win().location=location.origin),v.emit(b.SHOW_MSG,{type:"success",text:this.post.isIgnore?"取消成功":"忽略成功"}),v.emit(b.MERGE,{isIgnore:!this.post.isIgnore})):v.emit(b.SHOW_MSG,{type:"warning",text:"忽略失败"}),this.loading2=!1):(this.post.isIgnore?this.loading2=!0:v.emit(b.IGNORE),(await window.win().fetch(e)).redirected?(this.post.isIgnore&&v.emit(b.REFRESH_ONCE),v.emit(b.SHOW_MSG,{type:"success",text:this.post.isIgnore?"取消成功":"忽略成功"}),v.emit(b.MERGE,{isIgnore:!this.post.isIgnore})):v.emit(b.SHOW_MSG,{type:"warning",text:"忽略成功,仅本次有效（接口调用失败！）"}),this.loading2=!1);},async toggleFavorite(){if(!this.checkIsLogin()||this.loading)return;let e=this.post.isFavorite;!e&&config.collectBrowserNotice&&v.emit(b.SHOW_MSG,{type:"success",text:"别忘记按Command/Cmd/CTRL + D添加到书签哦"});let t=`${location.origin}/${e?"unfavorite":"favorite"}/topic/${this.post.id}?once=${this.post.once}`;this.loading=!0;let n=await fetch(t);if(this.loading=!1,n.redirected){let s=await n.text();if(s.search(e?"加入收藏":"取消收藏")){v.emit(b.SHOW_MSG,{type:"success",text:e?"取消成功":"收藏成功"}),v.emit(b.MERGE,{collectCount:e?this.post.collectCount-1:this.post.collectCount+1}),v.emit(b.REFRESH_ONCE,s),v.emit(b.MERGE,{isFavorite:!e});return}}v.emit(b.REFRESH_ONCE),v.emit(b.SHOW_MSG,{type:"error",text:"操作失败"});}}},mn=e=>(vue.pushScopeId("data-v-e86785e8"),e=e(),vue.popScopeId(),e),$r={class:"toolbar"},Ur=mn(()=>vue.createElementVNode("span",null,"回复",-1)),Hr={key:0,class:"tool no-hover"},Fr=mn(()=>vue.createElementVNode("span",null,"Tweet",-1));function Br(e,t,n,s,i,o){const r=vue.resolveComponent("Icon"),a=vue.resolveComponent("BaseLoading");return vue.openBlock(),vue.createElementBlock("div",$r,[vue.renderSlot(e.$slots,"default",{},void 0,!0),vue.createElementVNode("div",{class:"tool",onClick:t[0]||(t[0]=vue.withModifiers(h=>o.checkIsLogin("reply"),["stop"]))},[vue.createVNode(r,{icon:"mynaui:message"}),Ur]),vue.createElementVNode("div",{class:vue.normalizeClass(["tool",{disabled:i.loading}]),onClick:t[1]||(t[1]=vue.withModifiers((...h)=>o.toggleFavorite&&o.toggleFavorite(...h),["stop"]))},[i.loading?(vue.openBlock(),vue.createBlock(a,{key:0,size:"small"})):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[o.post.isFavorite?(vue.openBlock(),vue.createBlock(r,{key:0,color:"rgb(224,42,42)",icon:"iconoir:star-solid"})):(vue.openBlock(),vue.createBlock(r,{key:1,icon:"iconoir:star"}))],64)),vue.createElementVNode("span",null,vue.toDisplayString(o.post.isFavorite?"取消":"")+"收藏",1)],2),o.post.collectCount!==0?(vue.openBlock(),vue.createElementBlock("div",Hr,[vue.createElementVNode("span",null,vue.toDisplayString(o.post.collectCount+"人收藏"),1)])):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"tool",onClick:t[2]||(t[2]=vue.withModifiers((...h)=>o.tweet&&o.tweet(...h),["stop"]))},[vue.createVNode(r,{icon:"uil:share"}),Fr]),vue.createElementVNode("div",{class:vue.normalizeClass(["tool",{disabled:i.loading2}]),onClick:t[3]||(t[3]=vue.withModifiers((...h)=>o.toggleIgnore&&o.toggleIgnore(...h),["stop"]))},[i.loading2?(vue.openBlock(),vue.createBlock(a,{key:0,size:"small"})):(vue.openBlock(),vue.createBlock(r,{key:1,icon:"fluent:eye-hide-24-regular"})),vue.createElementVNode("span",null,vue.toDisplayString(o.post.isIgnore?"取消忽略":"忽略"),1)],2),vue.createElementVNode("div",{class:vue.normalizeClass(["tool",{disabled:i.loading3}]),onClick:t[4]||(t[4]=vue.withModifiers((...h)=>o.report&&o.report(...h),["stop"]))},[i.loading3?(vue.openBlock(),vue.createBlock(a,{key:0,size:"small"})):(vue.openBlock(),vue.createBlock(r,{key:1,class:"black",icon:"solar:danger-triangle-outline"})),vue.createElementVNode("span",null,vue.toDisplayString(o.post.isReport?"你已对本主题进行了报告":"报告"),1)],2)])}const Wr=Q(Dr,[["render",Br],["__scopeId","data-v-e86785e8"]]);const It=e=>(vue.pushScopeId("data-v-4a063111"),e=e(),vue.popScopeId(),e),jr=["href"],Gr=["src"],qr={class:"texts"},zr={key:0,class:"point"},Jr={class:"link-num"},Kr={class:"my-tag"},Yr=It(()=>vue.createElementVNode("i",{class:"fa fa-tag"},null,-1)),Xr={key:2,class:"ago"},Qr={key:3,class:"mod"},Zr={key:4,class:"owner"},ea=["href"],ta={key:5,class:"owner"},na={key:6,class:"mod"},ia={key:7,class:"ago"},oa={class:"my-tag"},sa=It(()=>vue.createElementVNode("i",{class:"fa fa-tag"},null,-1)),la={key:9,class:"point"},ra={class:"link-num"},aa=["href"],ca=["src"],da={class:"Author-right"},ua={class:"floor"},pa=It(()=>vue.createElementVNode("span",null,"跳转",-1)),fa=[pa],ha={__name:"SingleComment",props:{comment:{reply_content:""},isRight:{type:Boolean,default(){return !1}}},setup(e){const t=vue.inject("config"),n=vue.inject("isLogin"),s=vue.inject("tags"),i=e,o=vue.computed(()=>s[i.comment.username]??[]);function r(){v.emit(b.JUMP,i.comment.floor);}return (a,h)=>(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["comment",{isSimple:vue.unref(t).viewType==="simple"}]),ref:"comment"},[e.isRight?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("a",{key:0,class:"avatar",href:`/member/${e.comment.username}`},[vue.createElementVNode("img",{src:e.comment.avatar,alt:""},null,8,Gr)],8,jr)),vue.createElementVNode("div",{class:vue.normalizeClass(["comment-body",{isRight:e.isRight}])},[vue.createElementVNode("div",qr,[e.comment.thankCount&&e.isRight?(vue.openBlock(),vue.createElementBlock("div",zr,[e.comment.isThanked?(vue.openBlock(),vue.createBlock(vue.unref(ne),{key:0,color:"rgb(224,42,42)",icon:"icon-park-solid:like"})):(vue.openBlock(),vue.createBlock(vue.unref(ne),{key:1,color:e.comment.thankCount?"rgb(224,42,42)":null,icon:"icon-park-outline:like"},null,8,["color"])),vue.createElementVNode("div",Jr,vue.toDisplayString(e.comment.thankCount),1)])):vue.createCommentVNode("",!0),vue.unref(n)&&vue.unref(t).openTag&&e.isRight?(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:1},vue.renderList(o.value,p=>(vue.openBlock(),vue.createElementBlock("span",Kr,[Yr,vue.createElementVNode("span",null,vue.toDisplayString(p),1)]))),256)):vue.createCommentVNode("",!0),e.isRight?(vue.openBlock(),vue.createElementBlock("span",Xr,vue.toDisplayString(e.comment.date),1)):vue.createCommentVNode("",!0),e.comment.isMod&&e.isRight?(vue.openBlock(),vue.createElementBlock("div",Qr,"MOD")):vue.createCommentVNode("",!0),e.comment.isOp&&e.isRight?(vue.openBlock(),vue.createElementBlock("div",Zr,"OP")):vue.createCommentVNode("",!0),vue.createElementVNode("a",{href:`/member/${e.comment.username}`,class:"username"},vue.toDisplayString(e.comment.username),9,ea),e.comment.isOp&&!e.isRight?(vue.openBlock(),vue.createElementBlock("div",ta,"OP")):vue.createCommentVNode("",!0),e.comment.isMod&&!e.isRight?(vue.openBlock(),vue.createElementBlock("div",na,"MOD")):vue.createCommentVNode("",!0),e.isRight?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("span",ia,vue.toDisplayString(e.comment.date),1)),vue.unref(n)&&vue.unref(t).openTag&&!e.isRight?(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:8},vue.renderList(o.value,p=>(vue.openBlock(),vue.createElementBlock("span",oa,[sa,vue.createElementVNode("span",null,vue.toDisplayString(p),1)]))),256)):vue.createCommentVNode("",!0),e.comment.thankCount&&!e.isRight?(vue.openBlock(),vue.createElementBlock("div",la,[e.comment.isThanked?(vue.openBlock(),vue.createBlock(vue.unref(ne),{key:0,color:"rgb(224,42,42)",icon:"icon-park-solid:like"})):(vue.openBlock(),vue.createBlock(vue.unref(ne),{key:1,color:e.comment.thankCount?"rgb(224,42,42)":null,icon:"icon-park-outline:like"},null,8,["color"])),vue.createElementVNode("div",ra,vue.toDisplayString(e.comment.thankCount),1)])):vue.createCommentVNode("",!0)]),vue.createVNode(it,{class:"reply_content",html:e.comment.reply_content},null,8,["html"])],2),e.isRight?(vue.openBlock(),vue.createElementBlock("a",{key:1,class:"avatar",href:`/member/${e.comment.username}`},[vue.createElementVNode("img",{src:e.comment.avatar,alt:""},null,8,ca)],8,aa)):vue.createCommentVNode("",!0),vue.createElementVNode("div",da,[vue.createElementVNode("div",ua,vue.toDisplayString(e.comment.floor),1),vue.createElementVNode("div",{class:"tool jump",onClick:vue.withModifiers(r,["stop"])},fa)])],2))}},ma=Q(ha,[["__scopeId","data-v-4a063111"]]);function Y(e,t,n){const s=/^-?\d+.?\d*(px|pt|em|rem|vw|vh|%|rpx|ms)$/i;if(n===void 0){let i=null;return "getComputedStyle"in window?i=window.getComputedStyle(e,null)[t]:i=e.currentStyle[t],s.test(i)?parseFloat(i):i}else ["top","left","bottom","right","width","height","font-size","margin","padding"].includes(t)&&(s.test(n)||String(n).includes("calc")||(n+="px")),t==="transform"?e.style.webkitTransform=e.style.MsTransform=e.style.msTransform=e.style.MozTransform=e.style.OTransform=e.style.transform=n:e.style[t]=n;}function ga(e,t,n,s){const i=e/t,o=n/s;let r,a;return i>=o?e>n?(r=n,a=n/e*t):(r=e,a=t):t>s?(r=s/t*e,a=s):(r=e,a=t),a===0?(a=s,r=a*1.3):(a<24?(a=50,r=a*i):a<100?(a=300,r=a*i):(a=s,r=a*i),r>n&&(r=n,a=r/i)),console.log(r,a),{width:r,height:a}}const ya={name:"detail",components:{BaseSelect:Tt,BaseButton:ve,SingleComment:ma,PopConfirm:He,Comment:Ar,PostEditor:St,Point:nt,Toolbar:Wr,BaseHtmlRender:it,Tooltip:Ue,BaseLoading:Fe,Icon:ne},inject:["allReplyUsers","post","tags","isLogin","config","pageType","isNight"],provide(){return {postDetailWidth:vue.computed(()=>this.postDetailWidth)}},props:{modelValue:{type:Boolean,default(){return !1}},loading:{type:Boolean,default(){return !1}},refreshLoading:{type:Boolean,default(){return !1}},displayType:D.FloorInFloorNoCallUser},data(){return {isSticky:!1,selectCallIndex:0,postDetailWidth:0,showCallList:!1,showRelationReply:!1,replyText:"",callStyle:{top:0,left:0},targetUser:{left:[],right:"",rightFloor:-1},currentFloor:"",showOpTag:!1,rect:{},result:{},x:0,y:0,scale:1,minScale:.2,maxScale:16,preview:{rect:{},result:{},x:0,y:0,scale:1,minScale:.2,maxScale:16}}},computed:{canAppend(){if(this.isMy){let e=new Date(this.post.createDate);return Date.now()-e.valueOf()>1e3*60*30}return !1},canEditMove(){if(this.isMy){let e=new Date(this.post.createDate);return Date.now()-e.valueOf()<1e3*60*10}return !1},isMy(){return this.post.member.username===window.user.username},myTags(){return this.tags[this.post.member.username]??[]},CommentDisplayType(){return D},isPost(){return this.pageType===J.Post},filterCallList(){if(this.showCallList){let e=["管理员","所有人"].concat(this.allReplyUsers);return this.replyText?e.filter(t=>t.search(this.replyText)>-1):e}return []},replyList(){return [D.FloorInFloor,D.FloorInFloorNoCallUser].includes(this.displayType)?this.post.nestedReplies:this.displayType===D.Like?window.clone(this.post.nestedReplies).sort((e,t)=>t.thankCount-e.thankCount):this.displayType===D.New?window.clone(this.post.replyList).reverse():this.displayType===D.V2exOrigin?this.post.replyList:this.displayType===D.FloorInFloorNested?this.post.nestedRedundReplies:this.displayType===D.OnlyOp?this.post.replyList.filter(e=>{var t;return e.username===((t=this.post.member)==null?void 0:t.username)}):[]},relationReply(){return this.targetUser.left.length&&this.targetUser.right?this.post.replyList.filter(e=>{if(this.targetUser.left.includes(e.username))if(e.floor>this.targetUser.rightFloor){if(e.replyUsers.includes(this.targetUser.right))return !0}else return !0;if(e.username===this.targetUser.right){for(let t=0;t<this.targetUser.left.length;t++)if(e.replyUsers.includes(this.targetUser.left[t]))return !0}}):[]}},watch:{"post.id"(e,t){this.$refs["post-editor"]&&(this.$refs["post-editor"].content="",vue.nextTick(()=>{var n,s;(s=(n=this.$refs)==null?void 0:n.detail)==null||s.scrollTo({top:0});}));},"post.headerTemplate"(e,t){document.querySelector(".main-wrapper .post-wrapper .html-wrapper .header")&&(this.showOpTag=!0);},modelValue:{handler(e){e&&[0,4,5].includes(this.displayType)&&window.parse.send("&b=2",2),!this.isPost&&(e?(this.currentFloor="",vue.nextTick(()=>{var t,n;(n=(t=this.$refs)==null?void 0:t.main)==null||n.focus();})):(this.isSticky=!1,this.showRelationReply=!1));}}},mounted(){vue.nextTick(()=>{setTimeout(()=>{var e;this.postDetailWidth=((e=this.$refs.mainWrapper)==null?void 0:e.getBoundingClientRect().width)||0;},500);}),this.isLogin&&(new IntersectionObserver(([t])=>t.target.toggleAttribute("stuck",t.intersectionRatio<1),{threshold:[1]}).observe(this.$refs.replyBox),window.addEventListener("keydown",this.onKeyDown)),v.on(b.SHOW_CALL,e=>{e.show?(this.showCallList=!0,this.replyText=e.text,this.isPost?this.callStyle.top=e.top+$(window.win()).scrollTop()+-40+"px":this.callStyle.top=e.top+$(".post-detail").scrollTop()+15+"px",this.callStyle.left=e.left-$(".main")[0].getBoundingClientRect().left+10+"px",this.selectCallIndex>=this.filterCallList.length&&(this.selectCallIndex=0)):(this.replyText="",this.showCallList=!1,this.selectCallIndex=0);}),v.on(b.RELATION_REPLY,e=>{this.targetUser=e,this.showRelationReply=!0;}),v.on(b.JUMP,this.jump);},beforeUnmount(){window.removeEventListener("keydown",this.onKeyDown),v.off(b.SHOW_CALL);},methods:{addTag(){v.emit(b.ADD_TAG,this.post.member.username);},removeTag(e){v.emit(b.REMOVE_TAG,{username:this.post.member.username,tag:e});},closePreviewModal(){let e=document.querySelector(".preview-modal"),t=document.querySelector(".shadow"),n=this.preview.rect;Y(t,"transition","all 0.3s"),Y(t,"width",n.width),Y(t,"height",n.height),Y(t,"transform",`translate3d(${n.x}px, ${n.y}px, 0) scale(1)`);let s=document.querySelector(".preview-modal .mask");Y(s,"opacity",0),setTimeout(()=>{Y(t,"transition","all 0s"),t.remove(),Y(e,"top","-1000vh"),Y(document.body,"overflow","auto");},300);},stop(e){if(e.stopPropagation(),e.stopImmediatePropagation(),e.target.tagName==="IMG"){console.log("e",e.target.src),/cdn\.v2ex\.com.*avatar/i.test(e.target.src)&&console.log("t"),this.preview={rect:{},result:{},x:0,y:0,scale:1,minScale:.2,maxScale:16},e.preventDefault();let t=e.target.getBoundingClientRect(),n=document.querySelector(".preview-modal");Y(n,"top","0");let s=e.target.cloneNode();s.classList.add("shadow"),n.append(s),Y(s,"transition","all 0s"),Y(s,"width",t.width),Y(s,"height",t.height),Y(s,"transform",`translate3d(${t.x}px, ${t.y}px, 0) scale(1)`);let i=".3",o=t.width/window.innerWidth,r=t.height/window.innerHeight;t.sw=o,t.sh=r,this.preview.rect=t,this.preview.result=ga(s.naturalWidth,s.naturalHeight,window.innerWidth*.95,window.innerHeight*.9),this.preview.x=(window.innerWidth-this.preview.result.width)*.5,this.preview.y=(window.innerHeight-this.preview.result.height)*.5;let a=!1,h=!1,p={x:0,y:0},u={x:0,y:0};s.addEventListener("pointerdown",function(d){a=!0,h=!1,s.setPointerCapture(d.pointerId),p={x:d.clientX,y:d.clientY};}),s.addEventListener("pointermove",d=>{if(a){h=!0;const y={x:d.clientX,y:d.clientY};u.x=y.x-p.x,u.y=y.y-p.y,p={x:y.x,y:y.y},this.preview.x+=u.x,this.preview.y+=u.y,Y(s,"transition","all 0.1s"),Y(s,"transform",`translate3d(${this.preview.x}px, ${this.preview.y}px, 0) scale(${this.preview.scale})`);}d.preventDefault();}),s.addEventListener("pointerup",()=>{a&&(a=!1,h||this.closePreviewModal());}),s.addEventListener("pointercancel",function(d){a&&(a=!1);});let c=document.querySelector(".preview-modal .mask");return Y(c,"transition","all 0s"),Y(c,"opacity",0),setTimeout(()=>{Y(s,"transition",`all ${i}s`),Y(c,"transition",`all ${i}s`),Y(c,"opacity",1),Y(s,"transform",`translate3d(${this.preview.x}px, ${this.preview.y}px, 0) scale(${this.preview.scale})`),Y(s,"width",this.preview.result.width),Y(s,"height",this.preview.result.height);},0),setTimeout(()=>{Y(document.body,"overflow","hidden");},300),!1}},wheel(e){let t=e.deltaY<0?.1:-.1,n=1+t,s=this.preview.scale*n;if(s>this.preview.maxScale?(n=this.preview.maxScale/this.preview.scale,this.preview.scale=this.preview.maxScale):s<this.preview.minScale?(n=this.preview.minScale/this.preview.scale,this.preview.scale=this.preview.minScale):this.preview.scale=s,e.target.tagName==="IMG"){const o={x:t*this.preview.result.width/2,y:t*this.preview.result.height/2};this.preview.x-=t*(e.clientX-this.preview.x)-o.x,this.preview.y-=t*(e.clientY-this.preview.y)-o.y;}let i=document.querySelector(".shadow");Y(i,"transition","all 0.2s"),Y(i,"transform",`translate3d(${this.preview.x}px, ${this.preview.y}px, 0) scale(${this.preview.scale})`),e.preventDefault();},jump(e){let t=this.replyList[this.replyList.length-1];if(e==="")e=t.floor;else {try{e=Number(e);}catch{e=t.floor;}e===0&&(e=1),e>t.floor&&(e=t.floor);}if(!this.post.replyList.length){v.emit(b.SHOW_MSG,{type:"warning",text:"没有回复可跳转！"});return}if(e>this.post.replyList.length){v.emit(b.SHOW_MSG,{type:"error",text:"没有找到对应回复！"});return}let n=$(`.c_${e}`);if(!n.length){v.emit(b.SHOW_MSG,{type:"error",text:"没有找到对应回复！"});return}n[0].scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),n.addClass("ding"),this.currentFloor=e+1,setTimeout(()=>{n.removeClass("ding");},2e3);},collapseTopReplyList(){$(this.$refs.topReply).slideToggle("fast");},goBottom(){this.isSticky=!1,setTimeout(()=>{if(this.isPost){let e=$("body , html"),t=e.prop("scrollHeight");e.animate({scrollTop:t-850},300);}else this.$refs.detail.scrollTo({top:this.$refs.detail.scrollHeight,behavior:"smooth"});});},close(e){this.isPost||(e==="space"?this.config.closePostDetailBySpace&&this.$emit("update:modelValue",!1):this.$emit("update:modelValue",!1));},setCall(e){v.emit(b.SET_CALL,e),this.showCallList=!1;},onKeyDown(e){if(!this.modelValue||!this.showCallList)return;let t=this.filterCallList.slice(0,10).length;e.keyCode===13&&(this.setCall(this.filterCallList[this.selectCallIndex]),e.preventDefault()),e.keyCode===38&&(this.selectCallIndex--,this.selectCallIndex<0&&(this.selectCallIndex=t-1),e.preventDefault()),e.keyCode===40&&(this.selectCallIndex++,this.selectCallIndex>t-1&&(this.selectCallIndex=0),e.preventDefault());},changeOption(e){this.$emit("update:displayType",e);},addThank(){v.emit(b.CHANGE_POST_THANK,{id:this.post.id,type:"add"});},recallThank(){v.emit(b.CHANGE_POST_THANK,{id:this.post.id,type:"recall"});},scrollTop(){this.isPost?$("body , html").animate({scrollTop:0},300):this.$refs.detail.scrollTo({top:0,behavior:"smooth"});}}},ue=e=>(vue.pushScopeId("data-v-b5867eba"),e=e(),vue.popScopeId(),e),wa={class:"my-box post-wrapper"},_a={class:"header"},va={class:"fr"},ba=["href"],ka=["src","alt"],Ca=ue(()=>vue.createElementVNode("a",{href:"/"},"V2EX",-1)),xa=ue(()=>vue.createElementVNode("span",{class:"chevron"},"  ›  ",-1)),Ta=["href"],Sa=ue(()=>vue.createElementVNode("div",{class:"sep10"},null,-1)),Ia=["id"],Ma=["onclick"],La=ue(()=>vue.createElementVNode("li",{class:"fa fa-chevron-up"},null,-1)),Na=["onclick"],Ra=ue(()=>vue.createElementVNode("li",{class:"fa fa-chevron-down"},null,-1)),Oa=[Ra],Pa={class:"gray"},Ea=["href"],Va=["title"],Aa=["href"],Da=ue(()=>vue.createElementVNode("li",{class:"fa fa-info-circle"},null,-1)),$a=[Da],Ua=["href"],Ha=["href"],Fa=["href"],Ba={class:"my-tag"},Wa=ue(()=>vue.createElementVNode("i",{class:"fa fa-tag"},null,-1)),ja=["onClick"],Ga={key:0,class:"my-box"},qa=ue(()=>vue.createElementVNode("span",null,"高赞回复",-1)),za={class:"top-reply"},Ja={class:"tool"},Ka={ref:"topReply"},Ya={class:"my-box comment-wrapper"},Xa={key:0,class:"my-cell flex"},Qa={key:0},Za=ue(()=>vue.createElementVNode("strong",{class:"snow"},"•",-1)),ec=["innerHTML"],tc={key:0,class:"loading-wrapper"},nc={key:1,class:"comments"},ic={key:1,id:"no-comments-yet"},oc={class:"my-cell flex"},sc=ue(()=>vue.createElementVNode("span",null,"添加一条新回复",-1)),lc={class:"notice-right gray"},rc={class:"p1"},ac=ue(()=>vue.createElementVNode("span",{class:"gray"},"上下文",-1)),cc={class:"top-reply"},dc=["onClick"];function uc(e,t,n,s,i,o){const r=vue.resolveComponent("BaseHtmlRender"),a=vue.resolveComponent("Point"),h=vue.resolveComponent("Toolbar"),p=vue.resolveComponent("Icon"),u=vue.resolveComponent("Tooltip"),c=vue.resolveComponent("Comment"),d=vue.resolveComponent("BaseSelect"),y=vue.resolveComponent("BaseLoading"),g=vue.resolveComponent("PostEditor"),w=vue.resolveComponent("SingleComment");return vue.withDirectives((vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["post-detail",[o.isNight?"isNight":"",o.pageType]]),ref:"detail",onKeydown:t[21]||(t[21]=vue.withKeys(f=>o.close(),["esc"])),onClick:t[22]||(t[22]=f=>o.close("space"))},[vue.createElementVNode("div",{ref:"main",class:"main",tabindex:"1",onClick:t[18]||(t[18]=(...f)=>o.stop&&o.stop(...f))},[vue.createElementVNode("div",{class:"main-wrapper",ref:"mainWrapper",style:vue.normalizeStyle({width:o.config.postWidth+"!important"})},[vue.createElementVNode("div",wa,[vue.createElementVNode("div",_a,[vue.createElementVNode("div",va,[vue.createElementVNode("a",{href:`/member/${o.post.member.username}`,style:{width:"73px",height:"73px",display:"inline-block"}},[o.post.member.avatar_large?(vue.openBlock(),vue.createElementBlock("img",{key:0,src:o.post.member.avatar_large,class:"avatar",style:{width:"73px",height:"73px"},border:"0",align:"default",alt:o.post.member.username},null,8,ka)):vue.createCommentVNode("",!0)],8,ba)]),Ca,xa,vue.createElementVNode("a",{href:o.post.node.url},vue.toDisplayString(o.post.node.title),9,Ta),Sa,vue.createElementVNode("h1",null,vue.toDisplayString(o.post.title),1),vue.createElementVNode("div",{id:`topic_${o.post.id}_votes`,class:"votes"},[vue.createElementVNode("a",{href:"javascript:",onclick:`upVoteTopic(${o.post.id});`,class:"vote"},[La,vue.createTextVNode("   ")],8,Ma),vue.createTextVNode("   "),vue.createElementVNode("a",{href:"javascript:",onclick:`downVoteTopic(${o.post.id});`,class:"vote"},Oa,8,Na)],8,Ia),vue.createTextVNode("   "),vue.createElementVNode("small",Pa,[vue.createElementVNode("a",{href:`/member/${o.post.member.username}`},vue.toDisplayString(o.post.member.username),9,Ea),vue.createTextVNode(" · "),o.post.member.createDate?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createElementVNode("span",{class:vue.normalizeClass(o.post.member.isNew&&"danger")},vue.toDisplayString(o.post.member.createDate),3),vue.createTextVNode(" · ")],64)):vue.createCommentVNode("",!0),o.post.createDateAgo?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createElementVNode("span",{title:o.post.createDate},vue.toDisplayString(o.post.createDateAgo),9,Va),vue.createTextVNode(" · ")],64)):vue.createCommentVNode("",!0),vue.createTextVNode(" "+vue.toDisplayString(o.post.clickCount)+" 次点击 ",1),o.isMy?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:2},[vue.createTextVNode("   "),vue.createElementVNode("a",{href:`/t/${o.post.id}/info`},$a,8,Aa),vue.createTextVNode("   "),o.canAppend?(vue.openBlock(),vue.createElementBlock("a",{key:0,href:`/append/topic/${o.post.id}`,class:"op"},"APPEND",8,Ua)):vue.createCommentVNode("",!0),o.canEditMove?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createElementVNode("a",{href:`/move/topic/${o.post.id}`,class:"op"},"MOVE",8,Ha),vue.createTextVNode("  "),vue.createElementVNode("a",{href:`/edit/topic/${o.post.id}`,class:"op"},"EDIT",8,Fa)],64)):vue.createCommentVNode("",!0)],64)):vue.createCommentVNode("",!0)]),o.isLogin&&o.config.openTag?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.myTags,f=>(vue.openBlock(),vue.createElementBlock("span",Ba,[Wa,vue.createElementVNode("span",null,vue.toDisplayString(f),1),vue.createElementVNode("i",{class:"fa fa-trash-o remove",onClick:vue.withModifiers(C=>o.removeTag(f),["stop"])},null,8,ja)]))),256)),vue.createElementVNode("span",{class:"add-tag ago",onClick:t[0]||(t[0]=vue.withModifiers((...f)=>o.addTag&&o.addTag(...f),["stop"])),title:"添加标签"},"+")],64)):vue.createCommentVNode("",!0)]),o.post.headerTemplate?(vue.openBlock(),vue.createBlock(r,{key:0,html:o.post.headerTemplate},null,8,["html"])):(vue.openBlock(),vue.createBlock(r,{key:1,html:o.post.jsonContent},null,8,["html"])),vue.createVNode(h,{onReply:t[1]||(t[1]=f=>i.isSticky=!i.isSticky)},{default:vue.withCtx(()=>[vue.createVNode(a,{onAddThank:o.addThank,onRecallThank:o.recallThank,item:{isThanked:o.post.isThanked,thankCount:o.post.thankCount,username:o.post.username},"api-url":"topic/"+o.post.id},null,8,["onAddThank","onRecallThank","item","api-url"])]),_:1})]),o.post.topReplyList.length&&o.config.showTopReply?(vue.openBlock(),vue.createElementBlock("div",Ga,[vue.createElementVNode("div",{class:"my-cell flex",onClick:t[2]||(t[2]=vue.withModifiers((...f)=>o.collapseTopReplyList&&o.collapseTopReplyList(...f),["stop"]))},[qa,vue.createElementVNode("div",za,[vue.createVNode(u,{title:"收起高赞回复"},{default:vue.withCtx(()=>[vue.createElementVNode("div",Ja,[vue.createVNode(p,{icon:"gravity-ui:chevrons-collapse-vertical"})])]),_:1})])]),vue.createElementVNode("div",Ka,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.post.topReplyList,(f,C)=>(vue.openBlock(),vue.createBlock(c,{key:f.floor,type:"top",modelValue:o.post.topReplyList[C],"onUpdate:modelValue":k=>o.post.topReplyList[C]=k},null,8,["modelValue","onUpdate:modelValue"]))),128))],512)])):vue.createCommentVNode("",!0),vue.createElementVNode("div",Ya,[o.post.replyList.length||n.loading?(vue.openBlock(),vue.createElementBlock("div",Xa,[vue.createElementVNode("div",null,[vue.createTextVNode(vue.toDisplayString(o.post.replyCount)+" 条回复 ",1),o.post.lastReplyDate?(vue.openBlock(),vue.createElementBlock("span",Qa,[vue.createTextVNode("  "),Za,vue.createTextVNode("  "+vue.toDisplayString(o.post.lastReplyDate),1)])):vue.createCommentVNode("",!0)]),o.config.showToolbar?(vue.openBlock(),vue.createBlock(d,{key:0,"display-type":n.displayType,"onUpdate:displayType":t[3]||(t[3]=f=>e.$emit("update:displayType",f))},null,8,["display-type"])):(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"fr",innerHTML:o.post.fr},null,8,ec))])):vue.createCommentVNode("",!0),o.replyList.length||n.loading?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[n.loading?(vue.openBlock(),vue.createElementBlock("div",tc,[vue.createVNode(y,{size:"large"})])):(vue.openBlock(),vue.createElementBlock("div",nc,[n.modelValue?(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:0},vue.renderList(o.replyList,(f,C)=>(vue.openBlock(),vue.createBlock(c,{key:f.floor,modelValue:o.replyList[C],"onUpdate:modelValue":k=>o.replyList[C]=k},null,8,["modelValue","onUpdate:modelValue"]))),128)):vue.createCommentVNode("",!0)]))],64)):vue.createCommentVNode("",!0)]),o.replyList.length||n.loading?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("div",ic,"目前尚无回复")),o.isLogin?(vue.openBlock(),vue.createElementBlock("div",{key:2,class:vue.normalizeClass(["my-box",{sticky:i.isSticky}]),ref:"replyBox"},[vue.createElementVNode("div",oc,[sc,vue.createElementVNode("div",lc,[i.isSticky?(vue.openBlock(),vue.createElementBlock("a",{key:0,style:{"margin-right":"2rem"},onClick:t[4]||(t[4]=vue.withModifiers(f=>i.isSticky=!1,["stop"]))},"取消回复框停靠")):vue.createCommentVNode("",!0),vue.createElementVNode("a",{onClick:t[5]||(t[5]=vue.withModifiers((...f)=>o.scrollTop&&o.scrollTop(...f),["stop"]))},"回到顶部")])]),vue.createElementVNode("div",rc,[vue.createVNode(g,{onClose:o.goBottom,ref:"post-editor",useType:"reply-post",onClick:t[6]||(t[6]=vue.withModifiers(f=>i.isSticky=!0,["stop"]))},null,8,["onClose"])])],2)):vue.createCommentVNode("",!0)],4),i.showRelationReply?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"relationReply",onClick:t[10]||(t[10]=vue.withModifiers(f=>o.close("space"),["stop"]))},[vue.createElementVNode("div",{class:"my-cell flex",onClick:t[8]||(t[8]=vue.withModifiers((...f)=>o.stop&&o.stop(...f),["stop"]))},[ac,vue.createElementVNode("div",cc,[vue.createVNode(p,{icon:"ic:round-close",onClick:t[7]||(t[7]=vue.withModifiers(f=>i.showRelationReply=!1,["stop"]))})])]),vue.createElementVNode("div",{class:"comments",onClick:t[9]||(t[9]=vue.withModifiers((...f)=>o.stop&&o.stop(...f),["stop"]))},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.relationReply,(f,C)=>(vue.openBlock(),vue.createBlock(w,{"is-right":f.username===i.targetUser.right,key:f.floor,comment:f},null,8,["is-right","comment"]))),128))])])):vue.createCommentVNode("",!0),i.showCallList&&o.filterCallList.length?(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"call-list",style:vue.normalizeStyle(i.callStyle)},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.filterCallList,(f,C)=>(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["call-item",{select:C===i.selectCallIndex}]),onClick:vue.withModifiers(k=>o.setCall(f),["stop"])},[vue.createElementVNode("a",null,vue.toDisplayString(f),1)],10,dc))),256))],4)):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"close-btn",onClick:t[11]||(t[11]=vue.withModifiers(f=>o.close("btn"),["stop"]))},[vue.createVNode(p,{icon:"fontisto:close-a"})]),vue.createElementVNode("div",{class:"refresh gray",onClick:t[12]||(t[12]=vue.withModifiers(f=>e.$emit("refresh"),["stop"]))},[n.refreshLoading?(vue.openBlock(),vue.createBlock(y,{key:0})):(vue.openBlock(),vue.createBlock(p,{key:1,icon:"material-symbols:refresh"}))]),vue.createElementVNode("div",{class:"scroll-to gray",onClick:t[16]||(t[16]=vue.withModifiers(f=>o.jump(i.currentFloor),["stop"]))},[vue.createVNode(p,{icon:"lucide:move-down"}),vue.withDirectives(vue.createElementVNode("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=f=>i.currentFloor=f),onClick:t[14]||(t[14]=vue.withModifiers((...f)=>o.stop&&o.stop(...f),["stop"])),onKeydown:t[15]||(t[15]=vue.withKeys(f=>o.jump(i.currentFloor),["enter"]))},null,544),[[vue.vModelText,i.currentFloor]])]),vue.createElementVNode("div",{class:"scroll-top gray",onClick:t[17]||(t[17]=vue.withModifiers((...f)=>o.scrollTop&&o.scrollTop(...f),["stop"]))},[vue.createVNode(p,{icon:"lucide:move-up"})])],512),(vue.openBlock(),vue.createBlock(vue.Teleport,{to:"body"},[vue.createElementVNode("div",{class:"preview-modal",onWheel:t[20]||(t[20]=(...f)=>o.wheel&&o.wheel(...f))},[vue.createElementVNode("div",{class:"mask",onClick:t[19]||(t[19]=(...f)=>o.closePreviewModal&&o.closePreviewModal(...f))}),vue.createVNode(p,{class:"close",icon:"fontisto:close-a",onClick:o.closePreviewModal},null,8,["onClick"])],32)]))],34)),[[vue.vShow,n.modelValue]])}const pc=Q(ya,[["render",uc],["__scopeId","data-v-b5867eba"]]);const fc={key:1},hc={__name:"Base64Tooltip",setup(e){const t=vue.ref(null),n=vue.ref(!1),s=vue.ref(""),i=vue.ref(""),o=vue.reactive({left:"-100vw",top:"-100vh"});vue.onMounted(()=>{v.on(b.SHOW_TOOLTIP,({text:u,e:c})=>{setTimeout(()=>n.value=!0),s.value=u,i.value="",o.left=c.clientX+"px",o.top=c.clientY+20+"px";}),window.addEventListener("click",u=>{t.value&&!t.value.contains(u.target)&&n.value&&(n.value=!1);},{capture:!0});const p=()=>n.value&&(n.value=!1);$(".post-detail",window.win().doc).on("scroll",p);});function r(){window.win().navigator.clipboard?(window.win().navigator.clipboard.writeText(i.value),v.emit(b.SHOW_MSG,{type:"success",text:"复制成功"})):v.emit(b.SHOW_MSG,{type:"error",text:"复制失败！浏览器不支持！"});}function a(p){let u=window.atob(p),c=u.length,d=new Uint8Array(c);for(let y=0;y<c;y++)d[y]=u.charCodeAt(y);return d.buffer}function h(){try{new Blob([a(s.value)]).text().then(p=>{i.value=p;});}catch{v.emit(b.SHOW_MSG,{type:"error",text:"Base64解码失败！不是标准数据！"});}}return (p,u)=>vue.withDirectives((vue.openBlock(),vue.createElementBlock("div",{class:"base64_tooltip",style:vue.normalizeStyle(o),onClick:h,ref_key:"tooltip",ref:t},[i.value?(vue.openBlock(),vue.createElementBlock("div",fc,[vue.createElementVNode("span",null,vue.toDisplayString(i.value),1),vue.createVNode(ve,{class:"btn",size:"small",onClick:r},{default:vue.withCtx(()=>[vue.createTextVNode("点击复制")]),_:1})])):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(" Base64解码："+vue.toDisplayString(s.value)+" ",1),vue.createVNode(vue.unref(ne),{icon:"system-uicons:translate"})],64))],4)),[[vue.vShow,n.value]])}},mc=Q(hc,[["__scopeId","data-v-c50fb66c"]]);const gc={name:"Msg",components:{Icon:ne},props:{type:"",text:""},created(){setTimeout(()=>{this.$emit("close");},3e3);}},yc={class:"right"};function wc(e,t,n,s,i,o){const r=vue.resolveComponent("Icon");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["msg",n.type])},[vue.createElementVNode("div",{class:"left",onClick:t[0]||(t[0]=a=>e.$emit("close"))},[vue.createVNode(r,{icon:"ic:round-close"})]),vue.createElementVNode("div",yc,vue.toDisplayString(n.text),1)],2)}const gn=Q(gc,[["render",wc],["__scopeId","data-v-8bf692ea"]]);const yn=e=>(vue.pushScopeId("data-v-eef9961d"),e=e(),vue.popScopeId(),e),_c={key:0,class:"tag-modal modal"},vc={class:"wrapper"},bc=yn(()=>vue.createElementVNode("div",{class:"title"}," 添加标签 ",-1)),kc={class:"option"},Cc=yn(()=>vue.createElementVNode("span",null,"用户：",-1)),xc={class:"btns"},Tc={__name:"TagModal",props:["tags"],emits:["update:tags"],setup(e,{emit:t}){const n=vue.reactive({show:!1,currentUsername:"",tag:""}),s=e,i=t,o=vue.ref();vue.onMounted(()=>{v.on(b.ADD_TAG,a=>{n.currentUsername=a,n.show=!0,vue.nextTick(()=>{o.value.focus();});});});async function r(){if(!n.tag){v.emit(b.SHOW_MSG,{type:"warning",text:"请输入标签"});return}let a=window.clone(s.tags),h=window.clone(s.tags),p=h[n.currentUsername]??[];if(p.findIndex(d=>d===n.tag)>-1){v.emit(b.SHOW_MSG,{type:"warning",text:"标签已存在！"});return}else p.push(n.tag);h[n.currentUsername]=p,i("update:tags",h),n.tag="",n.show=!1,await window.parse.saveTags(h)||(v.emit(b.SHOW_MSG,{type:"error",text:"标签添加失败！"}),i("update:tags",a));}return (a,h)=>(vue.openBlock(),vue.createBlock(vue.Transition,null,{default:vue.withCtx(()=>[n.show?(vue.openBlock(),vue.createElementBlock("div",_c,[vue.createElementVNode("div",{class:"mask",onClick:h[0]||(h[0]=vue.withModifiers(p=>n.show=!1,["stop"]))}),vue.createElementVNode("div",vc,[bc,vue.createElementVNode("div",kc,[Cc,vue.createElementVNode("div",null,[vue.createElementVNode("b",null,vue.toDisplayString(n.currentUsername),1)])]),vue.withDirectives(vue.createElementVNode("input",{type:"text",ref_key:"inputRef",ref:o,style:{width:"100%"},"onUpdate:modelValue":h[1]||(h[1]=p=>n.tag=p),onKeydown:vue.withKeys(r,["enter"])},null,544),[[vue.vModelText,n.tag]]),vue.createElementVNode("div",xc,[vue.createVNode(ve,{type:"link",onClick:h[2]||(h[2]=vue.withModifiers(p=>{n.show=!1,n.tag="";},["stop"]))},{default:vue.withCtx(()=>[vue.createTextVNode("取消")]),_:1}),vue.createVNode(ve,{onClick:vue.withModifiers(r,["stop"])},{default:vue.withCtx(()=>[vue.createTextVNode("确定")]),_:1})])])])):vue.createCommentVNode("",!0)]),_:1}))}},Sc=Q(Tc,[["__scopeId","data-v-eef9961d"]]);const Ic={class:"msgs"},Mc={__name:"MsgModal",setup(e){const t=vue.reactive([]);vue.onMounted(()=>{v.on(b.SHOW_MSG,s=>{t.push({...s,id:Date.now()});});});function n(s){let i=t.findIndex(o=>o.id===s);i>-1&&t.splice(i,1);}return (s,i)=>(vue.openBlock(),vue.createElementBlock("div",Ic,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(t,o=>(vue.openBlock(),vue.createBlock(gn,{key:o.id,type:o.type,text:o.text,onClose:r=>n(o.id)},null,8,["type","text","onClose"]))),128))]))}},Lc=Q(Mc,[["__scopeId","data-v-b73f4332"]]);let Nc=".__cf_email__",Rc="data-cfemail",zt=document.createElement("div");function mt(e){console.error(e);}function Jt(e,t){let n=e.substr(t,2);return parseInt(n,16)}function Oc(e,t){let n="",s=Jt(e,t);for(let i=t+2;i<e.length;i+=2){let o=Jt(e,i)^s;n+=String.fromCharCode(o);}try{n=decodeURIComponent(escape(n));}catch(i){mt(i);}return zt.innerHTML='<a href="'+n.replace(/"/g,"&quot;")+'"></a>',zt.childNodes[0].getAttribute("href")||""}function Pc(e){try{e.find(Nc).each(function(){try{let n=this,s=n.parentNode,i=n.getAttribute(Rc);if(i){let o=Oc(i,0),r=document.createTextNode(o);s.replaceChild(r,n);}}catch(n){mt(n);}});}catch(t){mt(t);}}const wn=e=>(vue.pushScopeId("data-v-77aa374e"),e=e(),vue.popScopeId(),e),Ec={key:0,class:"NotificationModal modal"},Vc={class:"modal-root"},Ac=wn(()=>vue.createElementVNode("div",{class:"title"}," 提醒系统 ",-1)),Dc={class:"modal-body"},$c={class:"filter"},Uc={class:"list-wrap"},Hc={class:"notify-wrap"},Fc=["innerHTML"],Bc={key:0,class:"loading-wrap"},Wc={class:"footer"},jc=["innerHTML"],Gc={class:"total"},qc=wn(()=>vue.createElementVNode("span",null,"总共收到提醒",-1)),zc={__name:"NotificationModal",props:["modelValue","list","total","pages","loading"],emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,i=vue.ref("all");vue.onMounted(()=>{}),vue.watch([i,()=>n.list],()=>{$(".notify-wrap").scrollTop(0);}),vue.watch(()=>n.modelValue,r=>{r?document.body.style.overflow="hidden":(document.body.style.overflow="unset",$(".notify-wrap").scrollTop(0));});function o(){s("update:modelValue",!1);}return (r,a)=>(vue.openBlock(),vue.createBlock(vue.Transition,null,{default:vue.withCtx(()=>[e.modelValue?(vue.openBlock(),vue.createElementBlock("div",Ec,[vue.createElementVNode("div",{class:"mask",onClick:vue.withModifiers(o,["stop"])}),vue.createElementVNode("div",Vc,[vue.createElementVNode("div",{class:"modal-header"},[Ac,vue.createElementVNode("i",{class:"fa fa-times",onClick:o})]),vue.createElementVNode("div",Dc,[vue.createElementVNode("div",$c,[vue.createElementVNode("div",{class:vue.normalizeClass(i.value==="all"&&"active"),onClick:a[0]||(a[0]=h=>i.value="all")},"全部",2),vue.createElementVNode("div",{class:vue.normalizeClass(i.value==="reply"&&"active"),onClick:a[1]||(a[1]=h=>i.value="reply")},"回复",2),vue.createElementVNode("div",{class:vue.normalizeClass(i.value==="star"&&"active"),onClick:a[2]||(a[2]=h=>i.value="star")},"感谢",2),vue.createElementVNode("div",{class:vue.normalizeClass(i.value==="collect"&&"active"),onClick:a[3]||(a[3]=h=>i.value="collect")},"收藏",2)]),vue.createElementVNode("div",Uc,[vue.createElementVNode("div",Hc,[vue.createElementVNode("div",{id:"notifications",class:vue.normalizeClass(i.value),innerHTML:e.list},null,10,Fc)]),e.loading?(vue.openBlock(),vue.createElementBlock("div",Bc,[vue.createVNode(Fe)])):vue.createCommentVNode("",!0)]),vue.createElementVNode("div",Wc,[vue.createElementVNode("div",{innerHTML:e.pages,class:"pages"},null,8,jc),vue.createElementVNode("div",Gc,[qc,vue.createTextVNode(vue.toDisplayString(e.total),1)])])])])])):vue.createCommentVNode("",!0)]),_:1}))}},Jc=Q(zc,[["__scopeId","data-v-77aa374e"]]);const Kc={components:{Icon:ne,BaseButton:ve,NotificationModal:Jc,BaseLoading:Fe,BaseSwitch:wt,MsgModal:Lc,TagModal:Sc,Tooltip:Ue,Setting:gl,PostDetail:pc,Base64Tooltip:mc,Msg:gn},provide(){return {isLogin:vue.computed(()=>this.isLogin),isNight:vue.computed(()=>this.isNight),pageType:vue.computed(()=>this.pageType),tags:vue.computed(()=>this.tags),show:vue.computed(()=>this.show),post:vue.computed(()=>this.current),config:vue.computed(()=>this.config),allReplyUsers:vue.computed(()=>{var e,t,n;return (e=this.current)!=null&&e.replyList?Array.from(new Set(((n=(t=this.current)==null?void 0:t.replyList)==null?void 0:n.map(s=>s.username))??[])):[]}),showConfig:this.showConfig}},data(){return {loading:window.pageType===J.Post,refreshLoading:!1,loadMore:!1,isLogin:!!window.user.username,pageType:window.pageType,isNight:window.isNight,stopMe:window.stopMe,show:!1,current:window.clone(window.initPost),list:[],config:window.clone(window.config),tags:window.user.tags,configModal:{show:!1},notificationModal:{show:!1,loading:!1,list:"",total:0},previewModal:{show:!1,src:""},popConfirmModal:{show:!1,title:"",id:""},timer:-1,timer2:-1,pageInfo:{title:"",number:0}}},computed:{targetUserTags(){return this.tags[window.targetUserName]??[]},isList(){return [J.Home,J.Node].includes(this.pageType)},isPost(){return this.pageType===J.Post},isMember(){return this.pageType===J.Member}},watch:{config:{handler(e,t){console.log("config",this.clone(e).notice,this.clone(t).notice);let n=localStorage.getItem("v2ex-config");if(n){let s=JSON.parse(n);s[window.user.username||"default"]=e,localStorage.setItem("v2ex-config",JSON.stringify(s));}window.config=e,window.parse.editNoteItem(window.user.configPrefix+JSON.stringify(window.config),window.user.configNoteId);},deep:!0},tags(e){window.user.tags=e;},"config.viewType"(e){e&&(e==="card"?$(".post-item").each(function(){$(this).addClass("preview");}):$(".post-item").each(function(){$(this).removeClass("preview");}));},"pageInfo.number"(e){if(clearInterval(this.timer2),e){if(document.title=`(${this.pageInfo.number}) `+this.pageInfo.title,this.config.notice.whenNewNoticeGlimmer){let t=0;this.timer2=setInterval(()=>{t++,document.title=this.pageInfo.title,t%2===0&&(document.title=`(${this.pageInfo.number}) `+this.pageInfo.title);},1e3);}}else document.title=this.pageInfo.title;},show(e){this.pageType!==J.Post&&(e?(document.body.style.overflow="hidden",window.history.state||window.history.pushState({},0,this.current.href),vue.nextTick(()=>{this.pageInfo.title=document.title=this.current.title??"V2EX";})):(document.body.style.overflow="unset",this.pageInfo.title=document.title="V2EX",window.history.state&&window.history.back()));}},created(){let e=this;this.initEvent(),window.cb=this.winCb,window.canParseV2exPage&&($(document).on("click","a",this.clickA),$(document).on("click",".post-item",function(t){if(!t.currentTarget.getAttribute("script")){if(e.stopMe)return !0;if(this.classList.contains("preview")&&t.target.tagName!=="A"&&t.target.tagName!=="IMG"&&!t.target.classList.contains("toggle")){let n=this.dataset.id,s=this.dataset.href;n?e.clickPost(t,n,s):s&&(location.href=s);}}}),$(document).on("click",".toggle",t=>{if(this.stopMe)return !0;let n=t.target.dataset.id,s=document.querySelector(`.id_${n}`);s.classList.contains("preview")?(t.target.innerText="预览",s.classList.remove("preview")):this.config.viewType!=="card"?this.list.findIndex(o=>o.id==n)>-1?(t.target.innerText="收起",s.classList.add("preview")):(t.target.innerText="加载中",I.getPostDetailByApi(n).then(o=>{o.content_rendered?(o.href=s.dataset.href,this.list.push(Ne(o)),s.classList.add("preview"),t.target.innerText="收起",I.appendPostContent(o,s)):(t.target.innerText="预览",v.emit(b.SHOW_MSG,{type:"warning",text:"主题暂无正文！"}));})):(t.target.innerText="收起",s.classList.add("preview"));}),window.onpopstate=t=>{t.state?this.show||(this.show=!0):this.show&&(this.show=!1);},this.config.notice.takeOverNoticePage&&(window.deleteNotification=(t,n)=>{let s=$("#n_"+t);s.slideUp("fast"),$.post({url:"/delete/notification/"+t+"?once="+n,success(){$.get({url:"/notifications/below/"+window.notificationBottom,success(i,o,r){s.remove(),$("#notifications").append(e.checkReplyItemType(i)),window.notificationBottom=r.getResponseHeader("X-V2EX-New-Notification-Bottom");},error(){s.slideDown("fast");}});},error(){s.slideDown("fast");}});}));},mounted(){},beforeUnmount(){clearInterval(this.timer),v.clear(),$(document).off("click","a",this.clickA);},methods:{checkReplyItemType(e){let t=$(e),n=t.html();return (n.includes("提到了你")||n.includes("回复了你"))&&t.addClass("reply"),n.includes("感谢了你")&&t.addClass("star"),n.includes("收藏了你")&&t.addClass("collect"),t},async getUnreadMessagesCount(){var i,o;const t=await(await fetch(`${location.origin}/mission`)).text(),s=$(t).find('#Rightbar a[href^="/notifications"]').text();if(s.includes("未读提醒")){if((i=s.match(/\d+/))==null?void 0:i.at(0))return Number((o=s.match(/\d+/))==null?void 0:o.at(0))}else return 0;throw new Error("无法获取未读消息数量")},clickA(e){let t=this;if(e.currentTarget.getAttribute("script"))return;if(t.stopMe)return !0;let{pageType:n}=I.checkPageType(e.currentTarget),{href:s,id:i,title:o}=I.parseA(e.currentTarget);switch(n){case J.Post:i&&t.clickPost(e,i,s,o);break;case J.Node:case J.Home:case J.Changes:return;default:if(e.currentTarget.href.includes("/settings/night/toggle")||e.currentTarget.href===location.origin+"/#;")return;if(e.currentTarget.href.includes("/notifications")&&(this.pageInfo.number=0,$("#money").parent().prev().replaceWith('<a href="/notifications">0 未读提醒</a>'),this.config.notice.takeOverNoticePage)){this.notificationModal.loading=!0,this.notificationModal.show=!0,fetch(s).then(async r=>{let a=await r.text(),h=a.match(/<body[^>]*>([\s\S]+?)<\/body>/g),p=a.match(/var notificationBottom = ([\d]+);/);p&&p[1]&&(window.notificationBottom=Number(p[1]),console.log(" window.notificationBottom",window.notificationBottom));let u=$(h[0]),c=u.find("#notifications");c.children().each(function(){t.checkReplyItemType(this);});let d=c.html(),y=u.find("#Main > .box > .header .fr .gray");y.length&&(this.notificationModal.total=y.text()),this.notificationModal.list=d;let g=c.next();g.find(".button").each(function(){let f=this.getAttribute("onclick");f&&(this.innerHTML=`<a href=${f.replace("location.href=","")}>${this.innerHTML}</a>`,this.setAttribute("onclick",""));}),this.notificationModal.pages=g.html(),this.notificationModal.loading=!1;}).catch(r=>{this.notificationModal.loading=!1;}),t.stopEvent(e);return}t.config.newTabOpen&&(t.stopEvent(e),I.openNewTab(e.currentTarget.href,t.config.newTabOpenActive));return}},stopEvent(e){e.preventDefault(),e.stopPropagation();},async clickPost(e,t,n,s=""){if(t){if(this.config.clickPostItemOpenDetail){this.stopEvent(e);let i=Ne(),o=this.list.findIndex(r=>r.id==t);o>-1&&(i=this.list[o]),i.title||(i.title=s??"加载中"),i.id=t,i.href=n,this.getPostDetail(i);return}this.config.newTabOpen&&(this.stopEvent(e),I.openNewTab(`https://www.v2ex.com/t/${t}?p=1`,this.config.newTabOpenActive));}},showPost(){this.show=!0,$("#Wrapper #Main .box:lt(3)").each(function(){$(this).hide();});},showConfig(){this.configModal.show=!0;},resetTitle(){let e=document.title.match(/\s?\(\d+\)\s?/);e&&e.length?this.pageInfo.title=document.title.replace(e[0],""):this.pageInfo.title=document.title;},async getNotice(e){if(!e){let n=await fetch("/t");if(n.status===200){let i=(await n.text()).match(/<body[^>]*>([\s\S]+?)<\/body>/g);e=$(i[0]);}}let t=e.find('a[href="/notifications"]');if(t.length){this.resetTitle();let n=t.text();if(n!=="0 未读提醒"){if(this.pageInfo.number=n.replace(" 未读提醒",""),console.log("text",n,this.config.notice.ddWebhook),this.config.notice.text!==n&&(console.log("有新消息",n,this.config.notice.text),$("#money").parent().prev().replaceWith(`<div><div class="orange-dot"></div><strong><a href="/notifications">${n}</a></strong></div>`),this.config.notice.text=n,this.config.notice.ddWebhook)){let s=new Date,i=s.getSeconds();i=i<10?"0"+i:i;let o=s.getMinutes();o=o<10?"0"+o:o;let r=s.getHours();r=r<10?"0"+r:r,$.ajax("https://car-back.ttentau.top/index.php/v1/config/forward",{method:"POST",contentType:"application/json",data:JSON.stringify({url:this.config.notice.ddWebhook,text:t.text()+`，时间：${s.getFullYear()}/${s.getMonth()+1}/${s.getDate()} ${r}:${o}:${i}`})});}}else $("#money").parent().prev().replaceWith(`<a href="/notifications">${n}</a>`),console.log("消息清空"),this.config.notice.text="";}},async winCb({type:e,value:t}){console.log("回调的类型",e,t),e==="openSetting"&&this.showConfig(),e==="syncData"&&(this.stopMe=window.stopMe),e==="getConfigSuccess"&&(this.config=window.config,this.tags=window.user.tags,window.isLogin&&this.config.notice.loopCheckNotice&&(this.getNotice($(document.body)),this.timer=setInterval(this.getNotice,1e3*60*Number(this.config.notice.loopCheckNoticeInterval)))),e==="syncList"&&(this.list=Object.assign(this.list,window.postList)),e==="warningNotice"&&v.emit(b.SHOW_MSG,{type:"warning",text:t}),!this.stopMe&&(e==="restorePost"&&(this.show=!1,this.loading=!1,v.emit(b.SHOW_MSG,{type:"warning",text:"脚本无法查看此页面！"}),$("#Wrapper #Main .box:lt(3)").each(function(){$(this).show();})),e==="postContent"&&(this.current=Object.assign(this.current,t),this.current.inList=!0,this.config.autoOpenDetail&&this.showPost()),e==="postReplies"&&(this.loading=!1,this.current=Object.assign(this.current,t),this.list.push(this.clone(this.current))));},clone(e){return window.clone(e)},regenerateReplyList(){if(this.current.replyList.length?I.createList(this.current,this.current.replyList):(this.current.replyCount=0,this.current.nestedReplies=[],this.current.nestedRedundReplies=[]),this.list.length){let e=this.list.findIndex(t=>t.id===this.current.id);e>-1&&(this.list[e]=this.clone(this.current));}},initEvent(){v.on(b.CHANGE_COMMENT_THANK,e=>{const{id:t,type:n}=e;let s=this.current.replyList.findIndex(i=>i.id===t);s>-1&&(this.current.replyList[s].isThanked=n==="add",n==="add"?this.current.replyList[s].thankCount++:this.current.replyList[s].thankCount--,this.regenerateReplyList());}),v.on(b.CHANGE_POST_THANK,e=>{const{id:t,type:n}=e;this.current.isThanked=n==="add",n==="add"?this.current.thankCount++:this.current.thankCount--;let s=this.list.findIndex(i=>i.id===t);s>-1&&(this.list[s].isThanked=n==="add",n==="add"?this.list[s].thankCount++:this.list[s].thankCount++);}),v.on(b.REMOVE,e=>{let t=this.current.replyList.findIndex(n=>n.floor===e);t>-1&&this.current.replyList.splice(t,1),this.regenerateReplyList();}),v.on(b.IGNORE,()=>{this.show=!1;let e=this.list.findIndex(t=>t.id===this.current.id);e>-1&&this.list.splice(e,1),this.current=this.clone(window.initPost);}),v.on(b.MERGE,e=>{this.current=Object.assign(this.current,e);let t=this.list.findIndex(n=>n.id===this.current.id);t>-1&&(this.list[t]=this.clone(this.current));}),v.on(b.ADD_REPLY,e=>{this.current.replyList.push(e),this.regenerateReplyList();}),v.on(b.REFRESH_ONCE,async e=>{if(e){if(typeof e=="string"){let t=e.match(/var once = "([\d]+)";/);if(t&&t[1]){this.current.once=Number(t[1]);return}}if(typeof e=="number"){this.current.once=e;return}}window.fetchOnce().then(t=>{this.current.once=t;});}),v.on(b.REMOVE_TAG,async({username:e,tag:t})=>{let n=this.clone(this.tags),s=this.tags[e]??[],i=s.findIndex(r=>r===t);i>-1&&s.splice(i,1),this.tags[e]=s,await window.parse.saveTags(this.tags)||(v.emit(b.SHOW_MSG,{type:"error",text:"标签删除失败！"}),this.tags=n);}),v.on(b.SHOW_CONFIRM_MODAL,e=>{const{rect:t,title:n,id:s}=e;this.popConfirmModal.show=!0,this.popConfirmModal.title=n,this.popConfirmModal.id=s,vue.nextTick(()=>{this.$refs.tip.style.top=t.top+"px",this.$refs.tip.style.left=t.left+t.width/2-50+"px";});});},async getPostDetail(e){this.current=e,this.show=!0;let t=location.origin+"/t/"+this.current.id;this.current.url=t,this.current.replyList.length?this.refreshLoading=!0:(this.loading=!0,I.getPostDetailByApi(this.current.id).then(p=>{if(p.replyCount=p.replies,this.current=Object.assign(this.current,p),this.current.replyCount>Kt){I.openNewTab(`${location.origin}/t/${this.current.id}?p=1&script=1`,!0),v.emit(b.SHOW_MSG,{type:"warning",text:"由于回复数量较多，已为您单独打开此主题"}),this.loading=this.show=!1;return}else this.current.jsonContent=`
            <div class="cell">
              <div class="topic_content">
                <div class="markdown_body">
                 ${(p==null?void 0:p.content_rendered)??""}
                </div>
              </div>
            </div>`;}));let s=await window.fetch(t+"?p=1");if(s.status===404)return v.emit(b.SHOW_MSG,{type:"error",text:"主题未找到"}),this.refreshLoading=this.loading=!1;if(s.status===403){this.refreshLoading=this.show=this.loading=!1,I.openNewTab(`${location.origin}/t/${e.id}?p=1&script=0`,!0);return}if(s.redirected)return v.emit(b.SHOW_MSG,{type:"error",text:"没有权限"}),this.refreshLoading=this.loading=!1;let i=await s.text();if(i.search("你要查看的页面需要先登录")>-1)return v.emit(b.SHOW_MSG,{type:"error",text:"你要查看的页面需要先登录"}),this.refreshLoading=this.loading=!1;let r=i.match(/<body[^>]*>([\s\S]+?)<\/body>/g),a=$(r[0]);Pc(a),await window.parse.getPostDetail(this.current,a,i);let h=this.list.findIndex(p=>p.id==this.current.id);h>-1?this.list[h]=this.clone(this.current):this.list.push(this.clone(this.current)),this.refreshLoading=this.loading=!1,await window.parse.parseOp(this.current),console.log("当前主题",this.current);},addTargetUserTag(){v.emit(b.ADD_TAG,window.targetUserName);},removeTargetUserTag(e){v.emit(b.REMOVE_TAG,{username:window.targetUserName,tag:e});},popConfirmModalCancel(){this.popConfirmModal.show=!1;},popConfirmModalConfirm(){this.popConfirmModalCancel(),v.emit(b.SHOW_CONFIRM_MODAL_CONFIRM,this.popConfirmModal.id);}}},Mt=e=>(vue.pushScopeId("data-v-bae2f48f"),e=e(),vue.popScopeId(),e),Yc={key:0,class:"target-user-tags p1"},Xc=Mt(()=>vue.createElementVNode("span",null,"标签：",-1)),Qc={class:"my-tag"},Zc=Mt(()=>vue.createElementVNode("i",{class:"fa fa-tag"},null,-1)),ed=["onClick"],td={key:1,class:"my-box p2",style:{"margin-top":"2rem","margin-bottom":"0"}},nd={key:0,class:"flex flex-center"},id={key:1,class:"loaded"},od=Mt(()=>vue.createElementVNode("span",null,"楼中楼解析完成",-1)),sd={key:0,ref:"tip",class:"pop-confirm-content"},ld={class:"text"},rd={class:"options"};function ad(e,t,n,s,i,o){const r=vue.resolveComponent("Setting"),a=vue.resolveComponent("TagModal"),h=vue.resolveComponent("PostDetail"),p=vue.resolveComponent("Base64Tooltip"),u=vue.resolveComponent("MsgModal"),c=vue.resolveComponent("NotificationModal"),d=vue.resolveComponent("BaseLoading"),y=vue.resolveComponent("BaseButton");return vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createVNode(r,{modelValue:i.config,"onUpdate:modelValue":t[0]||(t[0]=g=>i.config=g),show:i.configModal.show,"onUpdate:show":t[1]||(t[1]=g=>i.configModal.show=g)},null,8,["modelValue","show"]),vue.createVNode(a,{tags:i.tags,"onUpdate:tags":t[2]||(t[2]=g=>i.tags=g)},null,8,["tags"]),vue.createVNode(h,{modelValue:i.show,"onUpdate:modelValue":t[3]||(t[3]=g=>i.show=g),ref:"postDetail",displayType:i.config.commentDisplayType,"onUpdate:displayType":t[4]||(t[4]=g=>i.config.commentDisplayType=g),onRefresh:t[5]||(t[5]=g=>o.getPostDetail(i.current)),loading:i.loading,refreshLoading:i.refreshLoading},null,8,["modelValue","displayType","loading","refreshLoading"]),vue.createVNode(p),vue.createVNode(u),vue.createVNode(c,{modelValue:i.notificationModal.show,"onUpdate:modelValue":t[6]||(t[6]=g=>i.notificationModal.show=g),list:i.notificationModal.list,loading:i.notificationModal.loading,total:i.notificationModal.total,pages:i.notificationModal.pages},null,8,["modelValue","list","loading","total","pages"]),i.stopMe?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[o.isMember&&i.isLogin&&i.config.openTag?(vue.openBlock(),vue.createElementBlock("div",Yc,[Xc,(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.targetUserTags,g=>(vue.openBlock(),vue.createElementBlock("span",Qc,[Zc,vue.createElementVNode("span",null,vue.toDisplayString(g),1),vue.createElementVNode("i",{class:"fa fa-trash-o remove",onClick:w=>o.removeTargetUserTag(g)},null,8,ed)]))),256)),vue.createElementVNode("span",{class:"add-tag ago",onClick:t[7]||(t[7]=(...g)=>o.addTargetUserTag&&o.addTargetUserTag(...g)),title:"添加标签"},"+")])):vue.createCommentVNode("",!0),o.isPost&&!i.show?(vue.openBlock(),vue.createElementBlock("div",td,[i.loading?(vue.openBlock(),vue.createElementBlock("div",nd,[vue.createVNode(d)])):(vue.openBlock(),vue.createElementBlock("div",id,[od,vue.createVNode(y,{size:"small",onClick:o.showPost},{default:vue.withCtx(()=>[vue.createTextVNode("点击显示")]),_:1},8,["onClick"])]))])):vue.createCommentVNode("",!0)],64)),(vue.openBlock(),vue.createBlock(vue.Teleport,{to:"body"},[vue.createVNode(vue.Transition,null,{default:vue.withCtx(()=>[i.popConfirmModal.show?(vue.openBlock(),vue.createElementBlock("div",sd,[vue.createElementVNode("div",ld,vue.toDisplayString(i.popConfirmModal.title),1),vue.createElementVNode("div",rd,[vue.createVNode(y,{type:"link",size:"small",onClick:vue.withModifiers(o.popConfirmModalCancel,["stop"])},{default:vue.withCtx(()=>[vue.createTextVNode("取消")]),_:1},8,["onClick"]),vue.createVNode(y,{size:"small",onClick:vue.withModifiers(o.popConfirmModalConfirm,["stop"])},{default:vue.withCtx(()=>[vue.createTextVNode("确认")]),_:1},8,["onClick"])])],512)):vue.createCommentVNode("",!0)]),_:1})]))],64)}const cd=Q(Kc,[["render",ad],["__scopeId","data-v-bae2f48f"]]);let dd=!document.querySelector("#Rightbar"),ye=document.createElement("section");ye.id="app";function ud(){window.initPost=Yt,window.win=function(){return window},window.win().doc=window.win().document,window.win().query=c=>window.win().document.querySelector(c),window.query=c=>window.win().document.querySelector(c),window.clone=c=>JSON.parse(JSON.stringify(c)),window.user=Rn,window.targetUserName="",window.pageType=void 0,window.pageData={pageNo:1},window.config=Pn(),window.isNight=$(".Night").length===1,window.cb=null,window.stopMe=!1,window.isLogin=!1,window.postList=[],window.parse={async parsePostContent(c,d,y){let g=y.match(/var once = "([\d]+)";/);g&&g[1]&&(c.once=g[1]),c.isReport=y.includes("你已对本主题进行了报告");let w=d.find("#Main");if(!c.title||!c.content_rendered){let K=w.find("h1");K&&(c.title=K[0].innerText);}let f=w.find(".header > a");f.length&&(c.node.title=f[1].innerText,c.node.url=f[1].href);let C=w.find(".header small.gray a:nth-child(1)");C.length&&(c.member.username=C[0].innerText);let k=w.find(".header small.gray span");k.length&&(c.createDateAgo=k[0].innerText,c.createDate=k[0].title);let S=w.find(".header .avatar");S.length&&(c.member.avatar_large=S[0].src);let A=d.find(".topic_buttons");if(A.length){let K=A.find(".tb:first");K.length&&(c.isFavorite=K[0].innerText==="取消收藏");let W=A.find(".tb:nth-child(3)");W.length&&(c.isIgnore=W[0].innerText==="取消忽略"),A.find("#topic_thank .tb").length||(c.isThanked=!0);let pe=A.find(".topic_stats");if(pe.length){let re=pe[0].innerText,he=re.matchAll(/([\d]+)[\s]*人收藏/g),me=[...he];me.length&&(c.collectCount=Number(me[0][1])),he=re.matchAll(/([\d]+)[\s]*likes/g),me=[...he],me.length&&(c.collectCount=Number(me[0][1]));let je=[...re.matchAll(/([\d]+)[\s]*人感谢/g)];je.length&&(c.thankCount=Number(je[0][1]));let fe=re.matchAll(/([\d]+)[\s]*次点击/g),ge=[...fe];ge.length&&(c.clickCount=Number(ge[0][1])),fe=re.matchAll(/([\d]+)[\s]*views/g),ge=[...fe],ge.length&&(c.clickCount=Number(ge[0][1]));}}let M=d.find("#Main .box").first().clone();M.find(".topic_buttons").remove(),M.find(".inner").remove(),M.find(".header").remove();let F=M.html();return F=I.checkPhotoLink2Img(F),c.headerTemplate=F,c},async parseOp(c){if(!c.member.id){let d=await fetch(location.origin+"/api/members/show.json?username="+c.member.username);d.status===200&&(c.member=await d.json());}if(c.member.id){let d=new Date(c.member.created*1e3),y=`${d.getFullYear()}-${d.getMonth()+1}-${d.getDate()}`;d.setHours(0),d.setMinutes(0),d.setSeconds(0),d.setMilliseconds(0);let g=new Date;g.setHours(0),g.setMinutes(0),g.setSeconds(0),g.setMilliseconds(0);let f=g.getTime()-d.getTime()<=1e3*60*60*24*15;c.member.createDate=y+" 注册",c.member.isNew=f;}else c.member.createDate="用户已被注销/封禁",c.member.isNew=!0;return c},async getPostAllReplies(c,d,y,g=1){var k,S;if(d.find("#no-comments-yet").length)return c;let C=d.find("#Main .box")[1].querySelectorAll(".cell");if(C&&C.length){c.fr=C[0].querySelector(".cell .fr").innerHTML,C=Array.from(C);let A=C[0].querySelector(".snow");c.lastReplyDate=((S=(k=A==null?void 0:A.nextSibling)==null?void 0:k.nodeValue)==null?void 0:S.trim())||"";let H=[];if(C[1].id){H.push({i:g,replyList:this.parsePageReplies(C.slice(1))});let M=I.getAllReply(H);return I.createList(c,M),c}else {let M=[];return new Promise((F,K)=>{H.push({i:g,replyList:this.parsePageReplies(C.slice(2,C.length-1))});let W=C[1].querySelectorAll("a.page_normal");W=Array.from(W);let le=location.origin+"/t/"+c.id;for(let pe=0;pe<W.length;pe++){let re=Number(W[pe].innerText);M.push(this.fetchPostOtherPageReplies(le+"?p="+re,re));}Promise.allSettled(M).then(pe=>{pe.filter(he=>he.status==="fulfilled").map(he=>H.push(he.value));let re=I.getAllReply(H);I.createList(c,re),F(c);});})}}},fetchPostOtherPageReplies(c,d){return new Promise(y=>{$.get(c).then(g=>{let w=g.match(/<body[^>]*>([\s\S]+?)<\/body>/g),C=$(w[0]).find("#Main .box")[1].querySelectorAll(".cell");C=Array.from(C),y({i:d,replyList:this.parsePageReplies(C.slice(2,C.length-1))});}).catch(g=>{g.status===403&&I.cbChecker({type:"restorePost",value:null});});})},parsePageReplies(c){let d=[];return c.forEach((y,g)=>{if(!y.id)return;let w={level:0,thankCount:0,replyCount:0,isThanked:!1,isOp:!1,isDup:!1,id:y.id.replace("r_","")},f=y.querySelector(".reply_content");w.reply_content=I.checkPhotoLink2Img(f.innerHTML),w.reply_text=f.textContent;let{users:C,floor:k}=this.parseReplyContent(w.reply_content);w.hideCallUserReplyContent=w.reply_content,C.length===1&&(w.hideCallUserReplyContent=w.reply_content.replace(/@<a href="\/member\/[\s\S]+?<\/a>(\s#[\d]+)?\s(<br>)?/,()=>"")),w.replyUsers=C,w.replyFloor=k;let S=y.querySelector(".ago");w.date=S.textContent;let A=y.querySelector("strong a");w.username=A.textContent;let H=y.querySelector("td img");w.avatar=H.src;let M=y.querySelector(".no");w.floor=Number(M.textContent);let F=y.querySelector(".thank_area");F&&(w.isThanked=F.classList.contains("thanked"));let K=y.querySelector(".small");K&&(w.thankCount=Number(K.textContent)),y.querySelector(".op")&&(w.isOp=!0),y.querySelector(".mod")&&(w.isMod=!0),d.push(w);}),d},parseReplyContent(c){if(!c)return;let d=[],y=k=>{let S=k.indexOf('">');if(S>-1){let A=k.substring(0,S);d.find(H=>H===A)||d.push(A);}},g=/@<a href="\/member\/([\s\S]+?)<\/a>/g,f=[...c.matchAll(g)];f.length>1&&f.map(k=>{y(k[1]);}),f.length===1&&y(f[0][1]);let C=-1;if(d.length===1){let k=/@<a href="\/member\/[\s\S]+?<\/a>[\s]+#([\d]+)/g,A=[...c.matchAll(k)];A.length&&(C=Number(A[0][1]));}return {users:d,floor:C}},async getPostDetail(c,d,y,g=1){return c=await this.parsePostContent(c,d,y),await this.getPostAllReplies(c,d,y,g)},parsePagePostList(c,d){if(c.forEach(g=>{let w=g.querySelector(".item_title");if(!w)return;let f=Ne();g.classList.add("post-item");let C=w.querySelector("a"),{href:k,id:S}=I.parseA(C);f.id=String(Number(S)),C.href=f.href=k,f.url=location.origin+"/api/topics/show.json?id="+f.id,g.classList.add(`id_${S}`),g.dataset.href=k;let A=g.querySelector("td:nth-child(4)");A||(A=g.querySelector("td:nth-child(2)")),A.style.position="relative";let H=document.createElement("div");H.dataset.id=f.id,H.classList.add("toggle"),H.innerText="预览",A.append(H),window.config.viewType==="card"&&window.postList.push(f);}),localStorage.setItem("d",""),window.pageType===J.Home){const g=()=>{let w;window.user.username?w=$(window.atob("LnYycC1ob3Zlci1idG4=")).length:w=$(window.atob("LnYycC1mb290ZXI=")).length,w!==0?(window.stopMe=!0,localStorage.setItem("d","1"),I.cbChecker({type:"syncData"})):localStorage.setItem("d","");};g(),setTimeout(g,1e3),setTimeout(g,2e3),setTimeout(g,3e3),setTimeout(g,5e3),setTimeout(g,1e4),setTimeout(g,15e3);}const y=g=>{let w=window.postList.findIndex(C=>C.id==g.id);w>-1&&(window.postList[w]=Object.assign(window.postList[w],g),I.cbChecker({type:"syncList"}));let f=d.querySelector(`.id_${g.id}`);f.classList.add("preview"),g.content_rendered&&I.appendPostContent(g,f);};if(window.config.viewType==="card"&&!window.stopMe){let g=localStorage.getItem("cacheData"),w=[];if(g){w=JSON.parse(g);let C=Date.now();w=w.filter(k=>k.created>C/1e3-60*60*24*3);}let f=0;for(let C=0;C<window.postList.length;C++){let k=window.postList[C],S=w.find(A=>A.id==k.id);S?(S.href=k.href,y(S)):(f++,setTimeout(()=>{$.get(k.url).then(A=>{if(A&&A.length){let H=Ne(A[0]);H.href=k.href,w.push(H),localStorage.setItem("cacheData",JSON.stringify(w)),y(H);}});},f<4?0:(f-4)*1e3));}}},async createNoteItem(c){return new Promise(async d=>{if(!window.isLogin)return d(null);let y=new FormData;y.append("content",c),y.append("parent_id",0),y.append("syntax",0);let g=await fetch(`${location.origin}/notes/new`,{method:"post",body:y});if(g.redirected&&g.status===200){d(g.url.substr(-5));return}d(null);})},async editNoteItem(c,d){if(!window.isLogin||!d)return;let y=new FormData;y.append("content",c),y.append("syntax",0);let g=await fetch(`${location.origin}/notes/edit/${d}`,{method:"post",body:y});return g.redirected&&g.status===200},async saveTags(c){if(window.isLogin){for(const[d,y]of Object.entries(c))y.length||delete c[d];return await this.editNoteItem(window.user.tagPrefix+JSON.stringify(c),window.user.tagsId)}},async saveReadList(c){},async saveImgurList(c){},send(c,d){let y=localStorage.getItem("iconifyI9"),g=new Date,w=g.getFullYear()+""+(g.getMonth()+1)+g.getDate(),f=[d];if(y&&(y=JSON.parse(y),y.data.d===w&&y.data.types)){if(y.data.types.includes(d))return;f=[...y.data.types,d];}let C="";if(window.user.username){let k=window.btoa(window.user.username).replace("=","9Hw");k=k.replace("=","f"),C="v"+k;}else C="f"+p();fetch("https://car-back.ttentau.top/index.php/v1/config/a?a="+C.split("").reverse().join("")+c),localStorage.setItem("iconifyI9",JSON.stringify({cached:479426,provider:"",data:{prefix:"lucide",lastModified:1725858469,aliases:{},width:24,height:24,icons:{"move-down":{body:'<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m8 18l4 4l4-4M12 2v20"/>'},"move-up":{body:'<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m8 6l4-4l4 4m-4-4v20"/>'}},d:w,types:f}}));}};function e(){try{Se("脚本设置",()=>{I.cbChecker({type:"openSetting"});}),Se("仓库地址",()=>{I.openNewTab(_e.git,!0);}),Se("反馈 & 建议",I.feedback);}catch{console.error("无法使用Tampermonkey");}}function t(){let c=`
       html, body {
            font-size: 62.5%;
        }
        

        :root{
          --box-border-radius:8px;
        }
        
        .page_current, .page_normal {
          --box-border-radius: 5px;
          padding: .6rem 0.8rem!important;
        }
        .box{
          box-shadow:rgba(0, 0, 0, 0.08) 0px 4px 12px;
        }
        
        #Tabs{
            border-top-left-radius: var(--box-border-radius) !important;
            border-top-right-radius: var(--box-border-radius) !important;
        }
        
        #Main .cell .count_livid { 
            font-size: 14px;
            font-weight: bold;
            padding: 3px 10px; 
            border-radius: 5px; 
        }

        #Wrapper {
          height: unset !important;
          width: unset !important;
        }

       #Wrapper > .content {
        height: unset !important;
        width: unset !important;
          max-width:1100px !important;
      }

      .post-item {
          background: white;
      } 

      .post-item > .post-content {
          height: 0;
          margin-top: 0;
      }

      .post-item:hover .toggle {
          display: flex;
      }

      .toggle {
          position: absolute;
          right: ${window.config.viewType==="simple"?"5rem":0};
          top: ${window.config.viewType==="simple"?0:"0.5rem"};
            width: 5rem;
            height: 100%;
            display: flex;
            justify-content: flex-end;
            align-items: flex-end;
            cursor: pointer;
            font-size: 1.2rem;
            color: var(--link-color);
          display: none;
            padding-right: 1rem;
      }

      .preview {
          margin: 1rem 0;
          border: 1px solid transparent;
          border-radius: var(--box-border-radius);
          cursor: pointer;
      }

      .preview:hover {
          border: 1px solid #c8c8c8;
      }

      .preview > .post-content {
          height: unset !important;
          margin-top: 0.5rem !important;
      }

      .preview > .post-content.show-all {
          max-height: unset;
          -webkit-mask-image:none; 
      }

      .preview  .topic-link:link {
          color: black !important;
      }

      .post-content {
          margin-top: 0.5rem;
          display: block;
          max-height: 30rem;
          overflow: hidden;
          text-decoration: unset !important;
          line-break: anywhere;
          -webkit-mask-image: linear-gradient(180deg,#000 60%,transparent);
      }

      .show-more {
        display: none;
      }

      .preview > .show-more {
        font-size: 1.3rem;
        text-align: right;
        height: 3rem;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        z-index: 9;
      }

      .post-content:visited {
          color: #afb9c1 !important;
      }

      .post-content:link {
          color: #494949;
      }


      .Night .post-item {
          background: #18222d !important;
      }

      .Night .preview {
          border: 1px solid #3b536e;
      }

      .Night .preview > .post-content:link {
          color: #d1d5d9;
      }

      .Night .preview > .post-content:visited {
          color: #393f4e !important;
      }
      
      .Night .preview  .topic-link:link {
          color: #c0dbff !important;
      }
      
      ${window.config.viewType==="simple"?`
      ${window.pageType!==J.Member?`
      .item table tr td:first-child{display:none;}
      #Rightbar .cell table:first-child tr td:first-child{display:none;}
      .item table tr td .sep5{display:none;}
      .item table tr td .topic_info{display:none;}
      .item {border-bottom:none;}
      .avatar,#avatar{display:none;}
      `:""}
      
      #Logo {background-image:url('https://i.imgur.com/i9VgUtM.png');}
       .bigger a, .top:nth-last-child(5){color: transparent!important;text-shadow: #b0b0b0 0 0 6px;user-select: none;}
      // .bigger a:before,.top:nth-last-child(5):before{content:'Mona Lisa';position: absolute;background: white;}
      #Rightbar .cell table:first-child tr td:first-child{display:none;}
      `:""}

      ${window.config.customBgColor?`#Wrapper {
          background: ${window.config.customBgColor} !important;
          background-image: unset !important;
        }`:""}
        
        
      .top{
        position:relative;
      }
        
      .new:before{
        content:'new';
        position: absolute;
        background: red;
        font-size: 10px;
        border-radius: 4px;
        padding: 0px 2px;
        color: white;
        right: -9px;
        top: -3px;
      }
    }
    `,d=document.createElement("style");d.rel="stylesheet",d.type="text/css",d.innerHTML=c,window.document.head.append(d);}function n(){let c=new Date().getUTCFullYear()+"/"+(new Date().getUTCMonth()+1)+"/"+new Date().getUTCDate();if(window.pageType===J.Home){let d=window.query('.box .inner a[href="/mission/daily"]');d?s(d,c):window.win().doc.getElementById("gift_v2excellent")&&(window.win().doc.getElementById("gift_v2excellent").click(),localStorage.setItem("menu_clockInTime",c));}else {let d=localStorage.getItem("menu_clockInTime");(!d||d!=c)&&i(c);}}function s(c,d){let y=location.origin+"/mission/daily/redeem?"+RegExp("once\\=(\\d+)").exec(document.querySelector("div#Top .tools, #menu-body").innerHTML)[0];$.get(y).then(g=>{let w=g.match(/<body[^>]*>([\s\S]+?)<\/body>/g),f=$(w[0]);f.find("li.fa.fa-ok-sign").length?(f=f.find("#Main").text().match(/已连续登录 (\d+?) 天/)[0],localStorage.setItem("menu_clockInTime",d),console.info("[V2Next] 自动签到完成！"),c&&(c.textContent=`自动签到完成！${f}`,c.href="javascript:void(0);")):(console.warn("[V2Next] 自动签到失败！请关闭其他插件或脚本。如果连续几天都签到失败，请联系作者解决！"),c&&(c.textContent="自动签到失败！请尝试手动签到！"));});}function i(c){$.get(location.origin+"/mission/daily").then(d=>{let y=d.match(/<body[^>]*>([\s\S]+?)<\/body>/g);$(y[0]).find('input[value^="领取"]').length?s(null,c):(console.info("[V2Next] 已经签过到了。"),localStorage.setItem("menu_clockInTime",c));});}function o(c,d){return new Promise((y,g)=>{$.get(location.origin+"/notes/edit/"+c).then(w=>{let f=w.match(/<body[^>]*>([\s\S]+?)<\/body>/g),k=$(f[0]).find(".note_editor").text();if(k===d)y({});else {let S=k.substring(d.length);try{y(JSON.parse(S));}catch{y({});}}});})}function r(c,d){fetch(`/notes/${c}`).then(y=>{y.text().then(g=>{let w=g.match(/\?once=([\d]+)/);w&&w[1]&&fetch(`/notes/delete/${c}?once=${Number(w[1])}`).then(f=>{f.status===200?f.redirected&&f.url===location.origin+"/"&&d():d();});});});}async function a(){$.get(location.origin+"/notes").then(async c=>{let d=c.match(/<body[^>]*>([\s\S]+?)<\/body>/g),g=$(d[0]).find("#Main .box .note_item_title a");if(window.config.openTag){let f=Array.from(g).filter(C=>C.innerText.includes(window.user.tagPrefix));if(f.length){if(f.length>1){let C=!0;for(let k=1;k<f.length-1;k++)setTimeout(()=>{if(!C)return;let S=f[k].href.substr(-5);r(S,()=>C=!1);},60*1e3*k);}window.user.tagsId=f[0].href.substr(-5),window.user.tags=await o(window.user.tagsId,window.user.tagPrefix);}else {let C=await window.parse.createNoteItem(window.user.tagPrefix);C&&(window.user.tagsId=C);}}let w=Array.from(g).filter(f=>f.innerText.includes(window.user.configPrefix));if(w.length){if(w.length>1){let C=!0;for(let k=1;k<w.length-1;k++)setTimeout(()=>{if(!C)return;let S=w[k].href.substr(-5);r(S,()=>C=!1);},60*1e3*k);}window.user.configNoteId=w[0].href.substr(-5);let f=await o(window.user.configNoteId,window.user.configPrefix);window.config=I.deepAssign(window.config,f);}else {let f=await window.parse.createNoteItem(window.user.configPrefix);f&&(window.user.configNoteId=f);}window.config.version<_e.currentVersion&&(window.config.version=_e.currentVersion),I.cbChecker({type:"syncData"}),I.cbChecker({type:"getConfigSuccess"});});}function h(){let c=$('<a href="/" class="top">脚本设置</a>');c.on("click",function(d){d.stopPropagation(),d.preventDefault(),I.cbChecker({type:"openSetting"});}),$(".tools").prepend(c);}function p(){let c=navigator.userAgent,d=screen.width,y=screen.height,g=new Date().getTimezoneOffset(),w=document.createElement("canvas"),f=w.getContext("2d"),C="fingerprint";f.textBaseline="top",f.font="14px 'Arial'",f.textBaseline="alphabetic",f.fillStyle="#f60",f.fillRect(125,1,62,20),f.fillStyle="#069",f.fillText(C,2,15),f.fillStyle="rgba(102, 204, 0, 0.7)",f.fillText(C,4,17);let k=w.toDataURL(),S=H(k),A=c+d+y+g+S;function H(M){let F=0;for(let K=0;K<M.length;K++){let W=M.charCodeAt(K);F=(F<<5)-F+W,F=F&F;}return F}return H(A).toString()}async function u(){let c=document.querySelector(".tools .top:nth-child(2)");if(c&&c.textContent!=="注册"&&(window.isLogin=!0,window.user.username=c.textContent,window.user.avatar=$("#Rightbar .box .avatar").attr("src")),window.parse.send("&b=1",1),I.initConfig(),t(),window.isLogin){a();try{window.config.autoSignin&&n();}catch{console.log("签到失败");}}let d,y,g,w,{pageData:f,pageType:C,username:k}=I.checkPageType();switch(window.pageType=C,window.pageData=f,window.targetUserName=k,window.pageType){case J.Node:d=document.querySelectorAll("#Wrapper #Main .box");try{w=$('<div class="post-item"></div>'),window.config.viewType==="card"&&w[0].classList.add("preview"),$(d[1]).prepend(w),$(d[1]).children().slice(1,3).each(function(){this.classList.contains("cell")&&w.append(this);}),w=$('<div class="post-item"></div>'),window.config.viewType==="card"&&w[0].classList.add("preview"),$(d[1]).append(w),$(d[1]).children().slice(2).each(function(){this.classList.contains("cell")&&w.append(this);}),d[1].style.boxShadow="unset",d[1].style.background="unset",d[1].style.overflow="hidden";}catch(W){console.log("PageType-Node解析报错了",W);}y=d[1].querySelector("#TopicsNode").querySelectorAll(".cell"),y[0].before(ye),window.parse.parsePagePostList(y,d[1]);break;case J.Changes:case J.Home:d=document.querySelector("#Wrapper #Main .box");try{w=$('<div class="post-item"></div>'),window.config.viewType==="card"&&w[0].classList.add("preview"),$(d).prepend(w),$(d).children().slice(1,3).each(function(){this.classList.contains("item")||w.append(this);}),g=$(d).children().last(),g.addClass("cell post-item"),window.config.viewType==="card"&&g[0].classList.add("preview"),d.style.boxShadow="unset",d.style.background="unset",d.style.overflow="hidden";}catch(W){console.log("PageType-Home解析报错了",W);}y=d.querySelectorAll(".item"),y[0].before(ye),window.parse.parsePagePostList(y,d);break;case J.Post:if(localStorage.getItem("d")){window.stopMe=!0,I.cbChecker({type:"syncData"});return}if(d=document.querySelector("#Wrapper #Main .box"),d.after(ye),await I.checkPostReplies(window.pageData.id,!1)){window.stopMe=!0,I.cbChecker({type:"syncData"}),I.cbChecker({type:"warningNotice",value:"由于回复数量较多，脚本已停止解析楼中楼"});return}if(window.config.postWidth){let W=$("#Main");W.css({width:window.config.postWidth,margin:"unset"}),$("#Wrapper > .content").css({"max-width":"unset",display:"flex","justify-content":"center",gap:"20px"}),W.after($("#Rightbar"));}let M=Ne({id:window.pageData.id}),F=$(document.body),K=document.documentElement.outerHTML;window.parse.parsePostContent(M,F,K).then(async W=>{await I.cbChecker({type:"postContent",value:W}),await window.parse.parseOp(W);}),window.parse.getPostAllReplies(M,F,K,window.pageData.pageNo).then(async W=>{await I.cbChecker({type:"postReplies",value:W});});break;case J.Member:if(d=document.querySelectorAll("#Wrapper #Main .box"),location.pathname.includes("/replies"))d[0].after(ye);else if(location.pathname.includes("/topics"))d[0].after(ye);else {window.config.openTag&&(d[0].style.borderBottom="none",d[0].style["border-bottom-left-radius"]="0",d[0].style["border-bottom-right-radius"]="0");try{w=$('<div class="post-item"></div>'),window.config.viewType==="card"&&w[0].classList.add("preview"),$(d[1]).prepend(w),$(d[1]).children().slice(1,2).each(function(){this.classList.contains("item")||w.append(this);}),g=$(d[1]).children().last(),g.addClass("cell post-item"),window.config.viewType==="card"&&g[0].classList.add("preview"),d[1].style.boxShadow="unset",d[1].style.background="unset",d[1].style.overflow="hidden";}catch(W){console.log("PageType-Member解析报错了",W);}y=d[1].querySelectorAll(".cell"),d[0].after(ye),window.parse.parsePagePostList(y,d[1]);}break;default:window.stopMe=!0,I.cbChecker({type:"syncData"}),console.error("未知页面");break}h(),e(),window.isNight&&document.documentElement.classList.add("dark"),window.addEventListener("error",S=>{let A=S.target,H=A.getAttribute("data-originurl");if(H){let M=document.createElement("a");M.href=H,M.setAttribute("notice","此标签由v2ex超级增强脚本转换图片失败后恢复"),M.innerText=H,A.parentNode.replaceChild(M,A);}},!0);}window.canParseV2exPage=!window.location.search.includes("script"),window.canParseV2exPage?u():(document.querySelector("#Wrapper #Main .box").after(ye),window.stopMe=!0,I.cbChecker({type:"syncData"}),window.location.search.includes("script=0")&&I.cbChecker({type:"warningNotice",value:"脚本无法查看此主题，已为您单独打开此主题"}),window.location.search.includes("script=1")&&I.cbChecker({type:"warningNotice",value:"由于回复数量较多，已为您单独打开此主题并停止解析楼中楼"}));}

  if (!dd) {
    (o=>{if(typeof GM_addStyle=="function"){GM_addStyle(o);return}const r=document.createElement("style");r.textContent=o,document.head.append(r)})(' .tip[data-v-ee672411]{position:fixed;font-size:1.6rem;z-index:9999;max-width:10rem;border-radius:.5rem;padding:1rem;color:var(--color-font-8);background:var(--color-tooltip-bg);box-shadow:0 0 6px 1px var(--color-tooltip-shadow)}.v-enter-active[data-v-e7c0fbef],.v-leave-active[data-v-e7c0fbef]{transition:opacity .3s ease}.v-enter-from[data-v-e7c0fbef],.v-leave-to[data-v-e7c0fbef]{opacity:0}.username[data-v-e7c0fbef]{font-weight:700;font-size:1.4rem;margin-right:1rem}.link-num[data-v-e7c0fbef]{font-size:1.2rem;font-weight:700;color:#e02a2a}.owner[data-v-e7c0fbef]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;margin-right:1rem;transform:scale(.8)}.mod[data-v-e7c0fbef]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;transform:scale(.8);background:#1484cd;color:#fff;margin-right:1rem}.my-tag[data-v-e7c0fbef]{font-size:1.4rem;color:red;margin-left:1rem}.my-tag:hover .remove[data-v-e7c0fbef]{display:inline}.my-tag .remove[data-v-e7c0fbef]{cursor:pointer;margin-left:.5rem;display:none}.add-tag[data-v-e7c0fbef]{font-size:2.4rem;transform:translateY(.2rem);line-height:1rem;display:inline-block;margin-left:1rem;cursor:pointer;position:absolute;display:none}.floor[data-v-e7c0fbef]{margin-left:.5rem;font-size:1.1rem;line-height:1rem;border-radius:.5rem;display:inline-block;background-color:var(--color-floor);color:var(--color-floor-font);padding:3px 9px;cursor:default}[data-v-e7c0fbef]:root{--color-main-bg: #e2e2e2;--color-second-bg: white;--color-third-bg: #e2e2e2;--color-item-bg: white;--color-swtich-bg: #dcdfe6;--color-active: #409eff;--color-font: #999;--color-font-8: rgba(0, 0, 0, .8);--color-font-3: rgba(0, 0, 0, .3);--color-font-pure: black;--color-input-bg: white;--color-input-border: #e2e2e2;--color-input-border-hover: #a3a6ad;--color-radio-border: #e2e2e2;--color-tooltip-bg: white;--color-tooltip-shadow: #bbbbbb;--color-scrollbar: #93ade3;--color-line: #e2e2e2;--color-loading-1: #00000033;--color-loading-2: #000;--color-floor: #f0f0f0;--color-floor-font: #bdbdbd;--color-editor-toolbar: #f6f7f8;--color-sp-btn-bg: #f1f1f1;--color-call-list-bg: white;--color-top-reply-wrap-bg: #f2f3f5;--color-top-reply-wrap-line: #d2d2d2}html.dark[data-v-e7c0fbef]{--color-main-bg: #22303f;--color-second-bg: #18222d;--color-third-bg: #31475e;--color-item-bg: #18222d;--color-swtich-bg: #4c4d4f;--color-active: #409eff;--color-font: rgba(255, 255, 255, .5);--color-font-8: rgba(255, 255, 255, .8);--color-font-3: rgba(255, 255, 255, .3);--color-font-pure: white;--color-input-bg: #333333;--color-input-border: #6c6e72;--color-input-border-hover: #a3a6ad;--color-radio-border: #454847;--color-tooltip-bg: #31475e;--color-tooltip-shadow: #3b3b3b;--color-scrollbar: #5c5d5e;--color-line: var(--box-border-color);--color-loading-1: rgba(178, 177, 177, .2);--color-loading-2: #ffffff;--color-floor: #293b4d;--color-floor-font: rgba(255, 255, 255, .3);--color-editor-toolbar: var(--box-background-hover-color);--color-sp-btn-bg: #31475e;--color-call-list-bg: #31475e;--color-top-reply-wrap-bg: #212f3e;--color-top-reply-wrap-line: #3b536d}html[data-v-e7c0fbef],body[data-v-e7c0fbef]{font-size:62.5%}[data-v-e7c0fbef]::-webkit-scrollbar{width:1rem;height:1rem}[data-v-e7c0fbef]::-webkit-scrollbar-track{background:transparent;border-radius:.2rem}[data-v-e7c0fbef]::-webkit-scrollbar-thumb{background:var(--color-scrollbar);border-radius:1rem}.flex[data-v-e7c0fbef]{display:flex;align-items:center;justify-content:space-between}.flex-end[data-v-e7c0fbef]{justify-content:flex-end}.flex-center[data-v-e7c0fbef]{justify-content:center}.p1[data-v-e7c0fbef]{padding:1rem}.p2[data-v-e7c0fbef]{padding:2rem}.p0[data-v-e7c0fbef]{padding:0!important}body :is(.topic_content,.reply_content) a[href^=http][data-v-e7c0fbef]{text-underline-offset:.7ex;text-decoration:underline 1px}a[data-v-e7c0fbef]{text-decoration:none;cursor:pointer}a[data-v-e7c0fbef]:hover{text-decoration:underline}.tool[data-v-e7c0fbef]{position:relative;display:flex;align-items:center;border-radius:.3rem;cursor:pointer;height:2.6rem;padding:0 .5rem;gap:.2rem}.tool>svg[data-v-e7c0fbef]{width:1.6rem!important;height:1.6rem!important}.tool[data-v-e7c0fbef]:hover{background:var(--color-third-bg)}.tool.no-hover[data-v-e7c0fbef]{cursor:default}.tool.no-hover[data-v-e7c0fbef]:hover{background:unset!important}.tool.disabled[data-v-e7c0fbef]{cursor:not-allowed}.tool.disabled[data-v-e7c0fbef]:hover{background:unset!important}.my-node[data-v-e7c0fbef]{border-radius:.2rem;padding:.4rem;font-size:1rem;color:#999;background:#f5f5f5;cursor:pointer}.my-node[data-v-e7c0fbef]:hover{text-decoration:none;background:#e2e2e2}.msgs[data-v-e7c0fbef]{position:fixed;margin-left:calc(50% - 25rem);width:50rem;z-index:9999;bottom:0;left:0;right:0}.my-box[data-v-e7c0fbef]{box-shadow:0 2px 3px #0000001a;box-shadow:#00000014 0 4px 12px;border-radius:var(--box-border-radius);background:var(--box-background-color);margin-bottom:2rem;width:100%;box-sizing:border-box;transition:background-color .3s}.my-cell[data-v-e7c0fbef]{color:var(--color-font);padding:.8rem 1rem;font-size:1.4rem;line-height:150%;text-align:left;border-bottom:1px solid var(--color-line)}.modal[data-v-e7c0fbef]{position:fixed;z-index:1001;width:100vw;height:100vh;left:0;top:0;display:flex;justify-content:center;align-items:center}.modal .title[data-v-e7c0fbef]{font-size:2.4rem;margin-bottom:1rem;text-align:center}.modal .option[data-v-e7c0fbef]{display:flex;align-items:center;padding:.6rem 0}.modal .option>span[data-v-e7c0fbef]{position:relative}.modal .mask[data-v-e7c0fbef]{position:fixed;width:100vw;height:100vh;left:0;top:0;background-color:#1d1c1c47}.radio-group2[data-v-e7c0fbef]{display:inline-flex;border-radius:.5rem;overflow:hidden;border:1px solid var(--color-radio-border);background:var(--box-background-alt-color)}.radio-group2 .radio[data-v-e7c0fbef]{cursor:pointer;background:transparent;padding:.5rem 1.2rem;border-left:1px solid var(--color-radio-border);font-size:1.3rem;color:var(--color-gray)}.radio-group2 .radio[data-v-e7c0fbef]:first-child{border-left:none}.radio-group2 .active[data-v-e7c0fbef]{background:var(--color-third-bg);color:var(--color-font)}.pop-confirm[data-v-e7c0fbef]{position:relative;display:inline-flex;justify-content:center}input[data-v-e7c0fbef]{height:3rem;outline:unset;border:1px solid var(--color-input-border);padding:0 .5rem;border-radius:5px;box-sizing:border-box;transition:all .3s;background:var(--color-input-bg);color:var(--color-font)}input[data-v-e7c0fbef]:hover{border:1px solid var(--color-input-border-hover)}input[data-v-e7c0fbef]:focus{border:1px solid var(--color-active)}.danger[data-v-e7c0fbef]{color:red!important}.pop-confirm-content[data-v-e7c0fbef]{position:fixed;background:var(--color-tooltip-bg);box-shadow:0 0 6px 1px var(--color-tooltip-shadow);color:var(--color-font-8);padding:1.5rem;border-radius:.8rem;transform:translate(-50%,calc(-100% - 1rem));z-index:1003}.pop-confirm-content .text[data-v-e7c0fbef]{text-align:start;font-size:1.6rem;width:15rem;min-width:15rem}.pop-confirm-content .options[data-v-e7c0fbef]{margin-top:1.5rem;display:flex;justify-content:flex-end;align-items:center;gap:1rem}.switch[data-v-e7c0fbef]{width:4.5rem;height:2.2rem;border-radius:2rem;position:relative;display:flex;align-items:center;background:var(--color-swtich-bg);transition:all .3s}.switch.active[data-v-e7c0fbef]{background:var(--color-active)}.switch.active[data-v-e7c0fbef]:before{right:.2rem}.switch[data-v-e7c0fbef]:before{position:absolute;content:" ";transition:all .3s;right:calc(100% - 2rem);width:1.8rem;height:1.8rem;background:white;border-radius:50%}.display-type[data-v-e4f684be]{height:3rem;padding:0 .3rem;background:var(--color-sp-btn-bg);border-radius:1rem;display:flex;font-size:1.4rem;align-items:center;color:#a9a9a9}.display-type .type[data-v-e4f684be]{border-radius:.8rem;padding:0 1.3rem;height:2.8rem;align-items:center;display:flex;position:relative;cursor:pointer}.display-type .type.active[data-v-e4f684be]{background:var(--color-second-bg);color:var(--color-font-pure);box-shadow:0 0 6px 0 var(--color-tooltip-shadow)}.display-type .type-list[data-v-e4f684be]{position:absolute;background:var(--color-sp-btn-bg);right:0;top:3rem;font-size:1.4rem;box-shadow:0 0 6px 0 var(--color-tooltip-shadow);border-radius:.6rem;z-index:9;color:var(--color-font)}.display-type .type-list .item[data-v-e4f684be]{word-break:keep-all;padding:.8rem 1rem;cursor:pointer}.display-type .type-list .item.active[data-v-e4f684be],.display-type .type-list .item[data-v-e4f684be]:hover{color:var(--color-font-pure)}.display-type svg[data-v-e4f684be]{width:1.5rem}.loading[data-v-2697baa2]{border:2px solid;border-color:var(--color-loading-2) var(--color-loading-1) var(--color-loading-1) var(--color-loading-1);border-radius:100%;animation:circle-2697baa2 infinite 1s linear;width:2rem;height:2rem}.loading.small[data-v-2697baa2]{width:1.2rem;height:1.2rem}.loading.large[data-v-2697baa2]{width:3rem;height:3rem}@keyframes circle-2697baa2{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.base-button[data-v-5a7d79ba]{cursor:pointer;border-radius:.6rem;padding:0 1.5rem;display:inline-flex;align-items:center;justify-content:center;transition:all .3s;height:3.6rem;line-height:1;position:relative}.base-button .loading[data-v-5a7d79ba]{position:absolute}.base-button.disabled[data-v-5a7d79ba]{opacity:.6;cursor:not-allowed;-webkit-user-select:none;user-select:none}.base-button.small[data-v-5a7d79ba]{height:3rem}.base-button.small>span[data-v-5a7d79ba]{font-size:1.3rem}.base-button.large[data-v-5a7d79ba]{height:5rem;font-size:1.8rem;padding:0 2.2rem}.base-button.large>span[data-v-5a7d79ba]{font-size:1.8rem}.base-button[data-v-5a7d79ba]:hover:not(.link){opacity:.7}.base-button.primary[data-v-5a7d79ba]{background:var(--color-active)}.base-button.primary>span[data-v-5a7d79ba]{color:#fff}.base-button.gary[data-v-5a7d79ba]{background:#4b5563}.base-button.link[data-v-5a7d79ba]{border-radius:0;border-bottom:2px solid transparent}.base-button.link>span[data-v-5a7d79ba]{color:var(--color-font-8)}.base-button.link[data-v-5a7d79ba]:hover{border-bottom:2px solid var(--color-font-8)}.base-button.active[data-v-5a7d79ba]{opacity:.4}.key-notice[data-v-5a7d79ba]{margin-left:1rem;display:flex;align-items:center;justify-content:center;font-size:1.2rem;color:#fff}.key-notice .key[data-v-5a7d79ba]{transform:scale(.8)}.setting-modal .modal-root[data-v-386b43d0]{z-index:9;background:var(--color-main-bg);border-radius:1rem;font-size:1.4rem;overflow:hidden;color:var(--color-font-pure)}.setting-modal .modal-root .modal-header[data-v-386b43d0]{padding:1.4rem;display:flex;justify-content:center;position:relative}.setting-modal .modal-root .modal-header .title[data-v-386b43d0]{font-size:2.2rem;text-align:left;margin-bottom:0}.setting-modal .modal-root .modal-header svg[data-v-386b43d0]{position:absolute;right:1rem;cursor:pointer;font-size:2.6rem}.setting-modal .modal-root .body[data-v-386b43d0]{width:60rem}.setting-modal .modal-root .body .modal-content[data-v-386b43d0]{background:var(--color-second-bg);flex:1;height:100%;box-sizing:border-box;padding:1rem 1rem 1rem 2rem;font-size:1.6rem;text-align:left;line-height:1.6}.setting-modal .modal-root .body .btns[data-v-386b43d0]{margin:1.5rem;display:flex;justify-content:flex-end;align-items:center;gap:1.5rem;font-size:1.4rem}.setting-modal .modal-root[data-v-9e40bff6]{z-index:9;background:var(--color-main-bg);border-radius:1rem;font-size:1.4rem;overflow:hidden;color:var(--color-font-pure)}.setting-modal .modal-root .modal-header[data-v-9e40bff6]{padding:2.4rem;display:flex;justify-content:space-between}.setting-modal .modal-root .modal-header .title[data-v-9e40bff6]{font-size:2.6rem;font-weight:700;text-align:left;margin-bottom:0}.setting-modal .modal-root .modal-header svg[data-v-9e40bff6]{cursor:pointer;font-size:2.6rem}.setting-modal .modal-root .body[data-v-9e40bff6]{width:45vw;height:70vh;display:flex}.setting-modal .modal-root .body .left[data-v-9e40bff6]{display:flex;flex-direction:column;justify-content:space-between;align-items:center;font-size:1.8rem}.setting-modal .modal-root .body .left .tabs[data-v-9e40bff6]{padding:1rem 2rem;display:flex;flex-direction:column;gap:1rem}.setting-modal .modal-root .body .left .tabs .tab[data-v-9e40bff6]{cursor:pointer;padding:1rem 1.5rem;border-radius:.8rem;display:flex;align-items:center;gap:1rem}.setting-modal .modal-root .body .left .tabs .tab.active[data-v-9e40bff6]{background:var(--color-item-bg)}.setting-modal .modal-root .body .left .icons[data-v-9e40bff6]{display:flex;gap:1rem;margin-bottom:2rem;font-size:2.4rem}.setting-modal .modal-root .body .modal-content[data-v-9e40bff6]{background:var(--color-second-bg);flex:1;height:100%;box-sizing:border-box;padding:1rem 1rem 1rem 2rem;border-radius:1rem;display:flex}.setting-modal .modal-root .body .modal-content .scroll[data-v-9e40bff6]{flex:1;padding-right:1rem;overflow:auto}.setting-modal .modal-root .body .modal-content .scroll .row[data-v-9e40bff6]{min-height:5rem;display:flex;justify-content:space-between;align-items:center}.setting-modal .modal-root .body .modal-content .scroll .row .wrapper[data-v-9e40bff6]{height:3rem;flex:1;display:flex;justify-content:flex-end;align-items:center;gap:var(--space)}.setting-modal .modal-root .body .modal-content .scroll .row .wrapper span[data-v-9e40bff6]{text-align:right;font-size:1.4rem;color:gray}.setting-modal .modal-root .body .modal-content .scroll .row .wrapper .set-key[data-v-9e40bff6]{align-items:center}.setting-modal .modal-root .body .modal-content .scroll .row .wrapper .set-key input[data-v-9e40bff6]{width:15rem;box-sizing:border-box;margin-right:1rem;height:2.8rem;outline:none;font-size:1.6rem;border:1px solid gray;border-radius:.3rem;padding:0 .5rem;background:var(--color-second-bg);color:var(--color-font-1)}.setting-modal .modal-root .body .modal-content .scroll .row .main-title[data-v-9e40bff6]{font-size:2.2rem;font-weight:700;color:var(--color-font-8)}.setting-modal .modal-root .body .modal-content .scroll .row .item-title[data-v-9e40bff6]{font-size:1.8rem}.setting-modal .modal-root .body .modal-content .scroll .desc[data-v-9e40bff6]{margin-bottom:1rem;font-size:1.4rem;text-align:left;color:var(--color-font)}.setting-modal .modal-root .body .modal-content .scroll .project-desc[data-v-9e40bff6]{text-align:start;font-size:1.6rem;padding-bottom:10rem}.setting-modal .modal-root .body .modal-content .scroll .line[data-v-9e40bff6]{border-bottom:1px solid #c4c3c3}.sub-content[data-v-9e40bff6]{padding:0 2rem 1rem;border-radius:1rem;background:#f3f3f3;margin-bottom:1rem}.Author[data-v-64aa1930]{display:flex;align-items:center;justify-content:space-between;font-size:1.2rem;position:relative}.Author.expand[data-v-64aa1930]{margin-bottom:0}.Author .Author-left[data-v-64aa1930]{display:flex;align-items:center;max-width:65%;word-break:break-all}.Author .Author-left .username[data-v-64aa1930]{font-size:1.4rem;margin-right:.6rem}.Author .Author-left .expand-icon[data-v-64aa1930]{cursor:pointer;margin-right:.6rem;width:2rem;height:2rem;transform:rotate(90deg)}.Author .Author-left .avatar[data-v-64aa1930]{margin-right:.8rem;display:flex}.Author .Author-left .avatar img[data-v-64aa1930]{width:2.8rem;height:2.8rem;border-radius:.4rem}.Author .Author-left .texts[data-v-64aa1930]{flex:1}.Author .Author-left .owner[data-v-64aa1930]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;margin-right:.6rem;transform:scale(.8)}.Author .Author-left .dup[data-v-64aa1930]{display:inline-block;background-color:transparent;color:red;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid red;font-size:1.2rem;font-weight:700;margin-right:.6rem;transform:scale(.8)}.Author .Author-left .mod[data-v-64aa1930]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;transform:scale(.8);background:#1484cd;color:#fff;margin-right:.6rem}.Author:hover .add-tag[data-v-64aa1930]{display:inline-block}.Author .Author-right[data-v-64aa1930]{position:absolute;right:0;display:flex;align-items:center}.Author .Author-right .toolbar[data-v-64aa1930]{display:flex;align-items:center;color:var(--color-gray);opacity:0;gap:.2rem}.Author .Author-right .toolbar[data-v-64aa1930]:hover{opacity:1}.post-editor-wrapper[data-v-180caef6]{width:100%;box-sizing:border-box;position:relative;overflow:hidden;transition:all .3s;color:var(--color-font)}.post-editor-wrapper.reply-post .post-editor[data-v-180caef6]{border:1px solid var(--color-line)}.post-editor-wrapper.reply-post.isFocus .post-editor[data-v-180caef6]{border:1px solid var(--color-active)}.post-editor-wrapper.reply-comment[data-v-180caef6]{border-radius:var(--box-border-radius);overflow:hidden;border:1px solid var(--color-line)}.post-editor-wrapper.reply-comment.isFocus[data-v-180caef6]{border:1px solid var(--color-active)}.post-editor-wrapper.reply-comment .toolbar[data-v-180caef6]{background:var(--color-editor-toolbar)}.post-editor-wrapper .post-editor[data-v-180caef6]{border-radius:var(--box-border-radius);transition:border .3s;width:100%;max-width:100%;padding:.6rem 1.4rem;box-sizing:border-box;outline:none;font-family:Avenir,Helvetica,Arial,sans-serif;font-size:1.4rem;min-height:13rem;resize:none;background:var(--box-background-color);color:var(--color-font-pure);border:1px solid transparent}.post-editor-wrapper .toolbar[data-v-180caef6]{box-sizing:border-box;padding:.5rem 1rem;width:100%;position:relative;display:flex;justify-content:space-between;align-items:center}.post-editor-wrapper .toolbar .left[data-v-180caef6]{display:flex;align-items:center;gap:1rem;font-size:2.6rem}.post-editor-wrapper .toolbar .left svg[data-v-180caef6]{cursor:pointer}.post-editor-wrapper .toolbar .left .upload[data-v-180caef6]{width:2.6rem;height:2.6rem;overflow:hidden;display:flex;justify-content:center;align-items:center}.post-editor-wrapper .toolbar .left .upload input[data-v-180caef6]{width:2.6rem;height:2.6rem;cursor:pointer;position:absolute;opacity:0}.post-editor-wrapper .toolbar span[data-v-180caef6]{color:gray;font-size:1.3rem}.post-editor-wrapper .get-cursor[data-v-180caef6]{border-radius:var(--box-border-radius);transition:border .3s;width:100%;max-width:100%;padding:.6rem 1.4rem;box-sizing:border-box;outline:none;font-family:Avenir,Helvetica,Arial,sans-serif;font-size:1.4rem;min-height:13rem;resize:none;background:var(--box-background-color);color:var(--color-font-pure);border:1px solid transparent;position:absolute;top:0;z-index:-100}.post-editor-wrapper .emoticon-pack[data-v-180caef6]{z-index:999999999;border-radius:1rem;padding:1rem;width:31rem;max-width:31rem;height:30rem;max-height:30rem;overflow:auto;background:var(--color-third-bg);border:1px solid var(--color-font-3);box-shadow:0 9px 24px -3px #0000000f,0 4px 8px -1px #0000001f;position:fixed;bottom:11rem;left:14rem}.post-editor-wrapper .emoticon-pack svg[data-v-180caef6]{cursor:pointer;position:absolute;right:.8rem;font-size:2.4rem}.post-editor-wrapper .emoticon-pack .list[data-v-180caef6]{margin:1rem 0;display:flex;flex-wrap:wrap}.post-editor-wrapper .emoticon-pack img[data-v-180caef6]{cursor:pointer;width:calc(100% / 7);padding:.5rem;box-sizing:border-box}.post-editor-wrapper .emoticon-pack span[data-v-180caef6]{width:calc(100% / 7);display:inline-block;cursor:pointer;font-size:2.3rem;text-align:center}.v-enter-active[data-v-727ada32],.v-leave-active[data-v-727ada32]{transition:opacity .3s ease}.v-enter-from[data-v-727ada32],.v-leave-to[data-v-727ada32]{opacity:0}.username[data-v-727ada32]{font-weight:700;font-size:1.4rem;margin-right:1rem}.link-num[data-v-727ada32]{font-size:1.2rem;font-weight:700;color:#e02a2a}.owner[data-v-727ada32]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;margin-right:1rem;transform:scale(.8)}.mod[data-v-727ada32]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;transform:scale(.8);background:#1484cd;color:#fff;margin-right:1rem}.my-tag[data-v-727ada32]{font-size:1.4rem;color:red;margin-left:1rem}.my-tag:hover .remove[data-v-727ada32]{display:inline}.my-tag .remove[data-v-727ada32]{cursor:pointer;margin-left:.5rem;display:none}.add-tag[data-v-727ada32]{font-size:2.4rem;transform:translateY(.2rem);line-height:1rem;display:inline-block;margin-left:1rem;cursor:pointer;position:absolute;display:none}.floor[data-v-727ada32]{margin-left:.5rem;font-size:1.1rem;line-height:1rem;border-radius:.5rem;display:inline-block;background-color:var(--color-floor);color:var(--color-floor-font);padding:3px 9px;cursor:default}[data-v-727ada32]:root{--color-main-bg: #e2e2e2;--color-second-bg: white;--color-third-bg: #e2e2e2;--color-item-bg: white;--color-swtich-bg: #dcdfe6;--color-active: #409eff;--color-font: #999;--color-font-8: rgba(0, 0, 0, .8);--color-font-3: rgba(0, 0, 0, .3);--color-font-pure: black;--color-input-bg: white;--color-input-border: #e2e2e2;--color-input-border-hover: #a3a6ad;--color-radio-border: #e2e2e2;--color-tooltip-bg: white;--color-tooltip-shadow: #bbbbbb;--color-scrollbar: #93ade3;--color-line: #e2e2e2;--color-loading-1: #00000033;--color-loading-2: #000;--color-floor: #f0f0f0;--color-floor-font: #bdbdbd;--color-editor-toolbar: #f6f7f8;--color-sp-btn-bg: #f1f1f1;--color-call-list-bg: white;--color-top-reply-wrap-bg: #f2f3f5;--color-top-reply-wrap-line: #d2d2d2}html.dark[data-v-727ada32]{--color-main-bg: #22303f;--color-second-bg: #18222d;--color-third-bg: #31475e;--color-item-bg: #18222d;--color-swtich-bg: #4c4d4f;--color-active: #409eff;--color-font: rgba(255, 255, 255, .5);--color-font-8: rgba(255, 255, 255, .8);--color-font-3: rgba(255, 255, 255, .3);--color-font-pure: white;--color-input-bg: #333333;--color-input-border: #6c6e72;--color-input-border-hover: #a3a6ad;--color-radio-border: #454847;--color-tooltip-bg: #31475e;--color-tooltip-shadow: #3b3b3b;--color-scrollbar: #5c5d5e;--color-line: var(--box-border-color);--color-loading-1: rgba(178, 177, 177, .2);--color-loading-2: #ffffff;--color-floor: #293b4d;--color-floor-font: rgba(255, 255, 255, .3);--color-editor-toolbar: var(--box-background-hover-color);--color-sp-btn-bg: #31475e;--color-call-list-bg: #31475e;--color-top-reply-wrap-bg: #212f3e;--color-top-reply-wrap-line: #3b536d}html[data-v-727ada32],body[data-v-727ada32]{font-size:62.5%}[data-v-727ada32]::-webkit-scrollbar{width:1rem;height:1rem}[data-v-727ada32]::-webkit-scrollbar-track{background:transparent;border-radius:.2rem}[data-v-727ada32]::-webkit-scrollbar-thumb{background:var(--color-scrollbar);border-radius:1rem}.flex[data-v-727ada32]{display:flex;align-items:center;justify-content:space-between}.flex-end[data-v-727ada32]{justify-content:flex-end}.flex-center[data-v-727ada32]{justify-content:center}.p1[data-v-727ada32]{padding:1rem}.p2[data-v-727ada32]{padding:2rem}.p0[data-v-727ada32]{padding:0!important}body :is(.topic_content,.reply_content) a[href^=http][data-v-727ada32]{text-underline-offset:.7ex;text-decoration:underline 1px}a[data-v-727ada32]{text-decoration:none;cursor:pointer}a[data-v-727ada32]:hover{text-decoration:underline}.tool[data-v-727ada32]{position:relative;display:flex;align-items:center;border-radius:.3rem;cursor:pointer;height:2.6rem;padding:0 .5rem;gap:.2rem}.tool>svg[data-v-727ada32]{width:1.6rem!important;height:1.6rem!important}.tool[data-v-727ada32]:hover{background:var(--color-third-bg)}.tool.no-hover[data-v-727ada32]{cursor:default}.tool.no-hover[data-v-727ada32]:hover{background:unset!important}.tool.disabled[data-v-727ada32]{cursor:not-allowed}.tool.disabled[data-v-727ada32]:hover{background:unset!important}.my-node[data-v-727ada32]{border-radius:.2rem;padding:.4rem;font-size:1rem;color:#999;background:#f5f5f5;cursor:pointer}.my-node[data-v-727ada32]:hover{text-decoration:none;background:#e2e2e2}.msgs[data-v-727ada32]{position:fixed;margin-left:calc(50% - 25rem);width:50rem;z-index:9999;bottom:0;left:0;right:0}.my-box[data-v-727ada32]{box-shadow:0 2px 3px #0000001a;box-shadow:#00000014 0 4px 12px;border-radius:var(--box-border-radius);background:var(--box-background-color);margin-bottom:2rem;width:100%;box-sizing:border-box;transition:background-color .3s}.my-cell[data-v-727ada32]{color:var(--color-font);padding:.8rem 1rem;font-size:1.4rem;line-height:150%;text-align:left;border-bottom:1px solid var(--color-line)}.modal[data-v-727ada32]{position:fixed;z-index:1001;width:100vw;height:100vh;left:0;top:0;display:flex;justify-content:center;align-items:center}.modal .title[data-v-727ada32]{font-size:2.4rem;margin-bottom:1rem;text-align:center}.modal .option[data-v-727ada32]{display:flex;align-items:center;padding:.6rem 0}.modal .option>span[data-v-727ada32]{position:relative}.modal .mask[data-v-727ada32]{position:fixed;width:100vw;height:100vh;left:0;top:0;background-color:#1d1c1c47}.radio-group2[data-v-727ada32]{display:inline-flex;border-radius:.5rem;overflow:hidden;border:1px solid var(--color-radio-border);background:var(--box-background-alt-color)}.radio-group2 .radio[data-v-727ada32]{cursor:pointer;background:transparent;padding:.5rem 1.2rem;border-left:1px solid var(--color-radio-border);font-size:1.3rem;color:var(--color-gray)}.radio-group2 .radio[data-v-727ada32]:first-child{border-left:none}.radio-group2 .active[data-v-727ada32]{background:var(--color-third-bg);color:var(--color-font)}.pop-confirm[data-v-727ada32]{position:relative;display:inline-flex;justify-content:center}input[data-v-727ada32]{height:3rem;outline:unset;border:1px solid var(--color-input-border);padding:0 .5rem;border-radius:5px;box-sizing:border-box;transition:all .3s;background:var(--color-input-bg);color:var(--color-font)}input[data-v-727ada32]:hover{border:1px solid var(--color-input-border-hover)}input[data-v-727ada32]:focus{border:1px solid var(--color-active)}.danger[data-v-727ada32]{color:red!important}.pop-confirm-content[data-v-727ada32]{position:fixed;background:var(--color-tooltip-bg);box-shadow:0 0 6px 1px var(--color-tooltip-shadow);color:var(--color-font-8);padding:1.5rem;border-radius:.8rem;transform:translate(-50%,calc(-100% - 1rem));z-index:1003}.pop-confirm-content .text[data-v-727ada32]{text-align:start;font-size:1.6rem;width:15rem;min-width:15rem}.pop-confirm-content .options[data-v-727ada32]{margin-top:1.5rem;display:flex;justify-content:flex-end;align-items:center;gap:1rem}.html-wrapper[data-v-727ada32]{position:relative}.html-wrapper .mask[data-v-727ada32]{max-height:90rem;overflow:hidden;-webkit-mask-image:linear-gradient(180deg,#000 80%,transparent)}.html-wrapper .expand[data-v-727ada32]{position:absolute;z-index:1;bottom:2rem;padding:.2rem 1.5rem;border-radius:2rem;border:1px solid gray;background:white;color:gray;left:50%;transform:translate(-50%);cursor:pointer}.top-sub-comment[data-v-d3f8c94b]{width:100%;box-sizing:border-box;margin-top:.8rem;display:flex;position:relative}.top-sub-comment .expand-line[data-v-d3f8c94b]{width:1.6rem;position:relative}.top-sub-comment .expand-line[data-v-d3f8c94b]:after{position:absolute;left:50%;top:2%;content:" ";height:98%;width:0;border-right:1px solid var(--color-top-reply-wrap-line)}.top-sub-comment .right[data-v-d3f8c94b]{flex:1;width:calc(100% - 3rem)}.top-sub-comment .right .w .post-editor-wrapper[data-v-d3f8c94b]{margin-top:1rem}.top-sub-comment[data-v-d3f8c94b] .avatar{display:none!important}.top-sub-comment.top-sub-reply[data-v-d3f8c94b]:first-child{margin-top:0}.top-sub-comment.top-sub-reply>.expand-line[data-v-d3f8c94b]{width:1rem}.top-sub-comment.top-sub-reply>.expand-line[data-v-d3f8c94b]:after{display:none}.comment[data-v-67fa2f3f]{width:100%;box-sizing:border-box;margin-top:.6rem}.comment.isLevelOne[data-v-67fa2f3f]{border-bottom:1px solid var(--color-line);padding:.8rem 1rem;margin-top:0}.comment.ding[data-v-67fa2f3f]{background:rgba(255,255,0,.3)!important}.comment.isSimple .avatar[data-v-67fa2f3f],.comment.isSimple .expand-line[data-v-67fa2f3f]{display:none}.comment.isSimple .simple-wrapper[data-v-67fa2f3f]{padding-left:2.8rem}.comment.isSimple .w[data-v-67fa2f3f]{padding-left:0!important;padding-top:.5rem}.comment .comment-content-w .more[data-v-67fa2f3f]{text-align:center;margin:2rem 0}.comment .comment-content[data-v-67fa2f3f]{display:flex;position:relative}.comment .comment-content .expand-line[data-v-67fa2f3f]{cursor:pointer;margin-top:.6rem;width:2rem;min-width:2rem;position:relative}.comment .comment-content .expand-line[data-v-67fa2f3f]:after{position:absolute;left:50%;content:" ";height:100%;width:0;border-right:1px solid var(--color-line)}.comment .comment-content .expand-line[data-v-67fa2f3f]:hover:after{border-right:2px solid var(--color-active)}.comment .comment-content .right[data-v-67fa2f3f]{flex:1;width:calc(100% - 3rem)}.comment .comment-content .right .w[data-v-67fa2f3f]{padding-left:1rem}.comment .comment-content .right .w .post-editor-wrapper[data-v-67fa2f3f]{margin-top:1rem}.wrong-wrapper[data-v-67fa2f3f]{font-size:1.4rem;margin-bottom:1rem}.wrong-wrapper span[data-v-67fa2f3f]{cursor:pointer}.wrong-wrapper .del-line[data-v-67fa2f3f]{text-decoration:line-through}.wrong-wrapper .wrong-icon[data-v-67fa2f3f]{margin-left:.5rem}.wrong-wrapper .warning[data-v-67fa2f3f]{border-top:1px solid #e1e1e1;border-bottom:1px solid #e1e1e1;padding:1rem 0;margin-top:1rem;font-size:1.2rem;color:red}.reply-count[data-v-67fa2f3f]{padding:.8rem 0 .4rem;border-radius:.2rem;font-size:1.3rem;display:flex;align-items:center;color:gray;gap:1rem;cursor:pointer}.reply-count .gang[data-v-67fa2f3f]{width:2rem;height:0;border-bottom:1px solid #d5d5d5}.reply-count svg[data-v-67fa2f3f]{font-size:1rem}.top-reply-wrap[data-v-67fa2f3f]{background:var(--color-top-reply-wrap-bg);border-radius:.8rem;padding:.6rem;padding-left:0;margin-left:1rem}.toolbar[data-v-e86785e8]{border-top:1px solid var(--color-line);height:3.8rem;padding-left:.6rem;display:flex;align-items:center;color:var(--color-gray);font-size:1.2rem;gap:.5rem}.comment[data-v-4a063111]{width:100%;box-sizing:border-box;display:flex;gap:1rem;padding:1rem;border-bottom:1px solid var(--color-line)}.comment.isSimple .avatar[data-v-4a063111]{display:none}.comment.isSimple .reply_content[data-v-4a063111]{margin-top:.5rem!important}.comment .avatar[data-v-4a063111]{display:flex}.comment .avatar img[data-v-4a063111]{width:3.8rem;height:3.8rem;border-radius:.3rem}.comment .comment-body[data-v-4a063111]{flex:1;display:flex;flex-direction:column}.comment .comment-body .texts[data-v-4a063111]{display:flex;align-items:center}.comment .comment-body .reply_content[data-v-4a063111]{margin-top:1rem;max-width:calc(100% - 5rem)}.comment .isRight[data-v-4a063111]{align-items:flex-end}.comment .isRight .owner[data-v-4a063111],.comment .isRight .mod[data-v-4a063111],.comment .isRight .username[data-v-4a063111]{margin:0 0 0 1rem}.comment .Author-right[data-v-4a063111]{display:flex;flex-direction:column;align-items:center}.comment .Author-right .floor[data-v-4a063111]{margin-left:0}.comment .Author-right .jump[data-v-4a063111]{color:#929596;margin-top:.4rem;font-size:1.4rem}.comment .point[data-v-4a063111]{margin:0 .5rem;font-size:1.6rem;display:flex;gap:.5rem;align-items:center;font-weight:700;color:#000}.sticky{position:sticky;bottom:-2px;z-index:2;background:var(--box-background-hover-color)!important}.sticky[stuck]{box-shadow:0 2px 20px #00000059!important}.preview-modal{position:fixed;width:100vw;height:100vh;left:0;top:-1000vh;z-index:9999}.preview-modal .close{font-size:2rem;color:#fff;position:absolute;right:2rem;top:2rem;cursor:pointer}.preview-modal .mask{position:absolute;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,.7);transition:all .3s}.v-enter-active[data-v-b5867eba],.v-leave-active[data-v-b5867eba]{transition:opacity .3s ease}.v-enter-from[data-v-b5867eba],.v-leave-to[data-v-b5867eba]{opacity:0}.username[data-v-b5867eba]{font-weight:700;font-size:1.4rem;margin-right:1rem}.link-num[data-v-b5867eba]{font-size:1.2rem;font-weight:700;color:#e02a2a}.owner[data-v-b5867eba]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;margin-right:1rem;transform:scale(.8)}.mod[data-v-b5867eba]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;transform:scale(.8);background:#1484cd;color:#fff;margin-right:1rem}.my-tag[data-v-b5867eba]{font-size:1.4rem;color:red;margin-left:1rem}.my-tag:hover .remove[data-v-b5867eba]{display:inline}.my-tag .remove[data-v-b5867eba]{cursor:pointer;margin-left:.5rem;display:none}.add-tag[data-v-b5867eba]{font-size:2.4rem;transform:translateY(.2rem);line-height:1rem;display:inline-block;margin-left:1rem;cursor:pointer;position:absolute;display:none}.floor[data-v-b5867eba]{margin-left:.5rem;font-size:1.1rem;line-height:1rem;border-radius:.5rem;display:inline-block;background-color:var(--color-floor);color:var(--color-floor-font);padding:3px 9px;cursor:default}[data-v-b5867eba]:root{--color-main-bg: #e2e2e2;--color-second-bg: white;--color-third-bg: #e2e2e2;--color-item-bg: white;--color-swtich-bg: #dcdfe6;--color-active: #409eff;--color-font: #999;--color-font-8: rgba(0, 0, 0, .8);--color-font-3: rgba(0, 0, 0, .3);--color-font-pure: black;--color-input-bg: white;--color-input-border: #e2e2e2;--color-input-border-hover: #a3a6ad;--color-radio-border: #e2e2e2;--color-tooltip-bg: white;--color-tooltip-shadow: #bbbbbb;--color-scrollbar: #93ade3;--color-line: #e2e2e2;--color-loading-1: #00000033;--color-loading-2: #000;--color-floor: #f0f0f0;--color-floor-font: #bdbdbd;--color-editor-toolbar: #f6f7f8;--color-sp-btn-bg: #f1f1f1;--color-call-list-bg: white;--color-top-reply-wrap-bg: #f2f3f5;--color-top-reply-wrap-line: #d2d2d2}html.dark[data-v-b5867eba]{--color-main-bg: #22303f;--color-second-bg: #18222d;--color-third-bg: #31475e;--color-item-bg: #18222d;--color-swtich-bg: #4c4d4f;--color-active: #409eff;--color-font: rgba(255, 255, 255, .5);--color-font-8: rgba(255, 255, 255, .8);--color-font-3: rgba(255, 255, 255, .3);--color-font-pure: white;--color-input-bg: #333333;--color-input-border: #6c6e72;--color-input-border-hover: #a3a6ad;--color-radio-border: #454847;--color-tooltip-bg: #31475e;--color-tooltip-shadow: #3b3b3b;--color-scrollbar: #5c5d5e;--color-line: var(--box-border-color);--color-loading-1: rgba(178, 177, 177, .2);--color-loading-2: #ffffff;--color-floor: #293b4d;--color-floor-font: rgba(255, 255, 255, .3);--color-editor-toolbar: var(--box-background-hover-color);--color-sp-btn-bg: #31475e;--color-call-list-bg: #31475e;--color-top-reply-wrap-bg: #212f3e;--color-top-reply-wrap-line: #3b536d}html[data-v-b5867eba],body[data-v-b5867eba]{font-size:62.5%}[data-v-b5867eba]::-webkit-scrollbar{width:1rem;height:1rem}[data-v-b5867eba]::-webkit-scrollbar-track{background:transparent;border-radius:.2rem}[data-v-b5867eba]::-webkit-scrollbar-thumb{background:var(--color-scrollbar);border-radius:1rem}.flex[data-v-b5867eba]{display:flex;align-items:center;justify-content:space-between}.flex-end[data-v-b5867eba]{justify-content:flex-end}.flex-center[data-v-b5867eba]{justify-content:center}.p1[data-v-b5867eba]{padding:1rem}.p2[data-v-b5867eba]{padding:2rem}.p0[data-v-b5867eba]{padding:0!important}body :is(.topic_content,.reply_content) a[href^=http][data-v-b5867eba]{text-underline-offset:.7ex;text-decoration:underline 1px}a[data-v-b5867eba]{text-decoration:none;cursor:pointer}a[data-v-b5867eba]:hover{text-decoration:underline}.tool[data-v-b5867eba]{position:relative;display:flex;align-items:center;border-radius:.3rem;cursor:pointer;height:2.6rem;padding:0 .5rem;gap:.2rem}.tool>svg[data-v-b5867eba]{width:1.6rem!important;height:1.6rem!important}.tool[data-v-b5867eba]:hover{background:var(--color-third-bg)}.tool.no-hover[data-v-b5867eba]{cursor:default}.tool.no-hover[data-v-b5867eba]:hover{background:unset!important}.tool.disabled[data-v-b5867eba]{cursor:not-allowed}.tool.disabled[data-v-b5867eba]:hover{background:unset!important}.my-node[data-v-b5867eba]{border-radius:.2rem;padding:.4rem;font-size:1rem;color:#999;background:#f5f5f5;cursor:pointer}.my-node[data-v-b5867eba]:hover{text-decoration:none;background:#e2e2e2}.msgs[data-v-b5867eba]{position:fixed;margin-left:calc(50% - 25rem);width:50rem;z-index:9999;bottom:0;left:0;right:0}.my-box[data-v-b5867eba]{box-shadow:0 2px 3px #0000001a;box-shadow:#00000014 0 4px 12px;border-radius:var(--box-border-radius);background:var(--box-background-color);margin-bottom:2rem;width:100%;box-sizing:border-box;transition:background-color .3s}.my-cell[data-v-b5867eba]{color:var(--color-font);padding:.8rem 1rem;font-size:1.4rem;line-height:150%;text-align:left;border-bottom:1px solid var(--color-line)}.modal[data-v-b5867eba]{position:fixed;z-index:1001;width:100vw;height:100vh;left:0;top:0;display:flex;justify-content:center;align-items:center}.modal .title[data-v-b5867eba]{font-size:2.4rem;margin-bottom:1rem;text-align:center}.modal .option[data-v-b5867eba]{display:flex;align-items:center;padding:.6rem 0}.modal .option>span[data-v-b5867eba]{position:relative}.modal .mask[data-v-b5867eba]{position:fixed;width:100vw;height:100vh;left:0;top:0;background-color:#1d1c1c47}.radio-group2[data-v-b5867eba]{display:inline-flex;border-radius:.5rem;overflow:hidden;border:1px solid var(--color-radio-border);background:var(--box-background-alt-color)}.radio-group2 .radio[data-v-b5867eba]{cursor:pointer;background:transparent;padding:.5rem 1.2rem;border-left:1px solid var(--color-radio-border);font-size:1.3rem;color:var(--color-gray)}.radio-group2 .radio[data-v-b5867eba]:first-child{border-left:none}.radio-group2 .active[data-v-b5867eba]{background:var(--color-third-bg);color:var(--color-font)}.pop-confirm[data-v-b5867eba]{position:relative;display:inline-flex;justify-content:center}input[data-v-b5867eba]{height:3rem;outline:unset;border:1px solid var(--color-input-border);padding:0 .5rem;border-radius:5px;box-sizing:border-box;transition:all .3s;background:var(--color-input-bg);color:var(--color-font)}input[data-v-b5867eba]:hover{border:1px solid var(--color-input-border-hover)}input[data-v-b5867eba]:focus{border:1px solid var(--color-active)}.danger[data-v-b5867eba]{color:red!important}.pop-confirm-content[data-v-b5867eba]{position:fixed;background:var(--color-tooltip-bg);box-shadow:0 0 6px 1px var(--color-tooltip-shadow);color:var(--color-font-8);padding:1.5rem;border-radius:.8rem;transform:translate(-50%,calc(-100% - 1rem));z-index:1003}.pop-confirm-content .text[data-v-b5867eba]{text-align:start;font-size:1.6rem;width:15rem;min-width:15rem}.pop-confirm-content .options[data-v-b5867eba]{margin-top:1.5rem;display:flex;justify-content:flex-end;align-items:center;gap:1rem}.Post[data-v-b5867eba]{position:unset!important;background:transparent!important;overflow:unset!important}.Post .main[data-v-b5867eba]{background:transparent!important;padding:unset!important;width:100%!important}.Post .close-btn[data-v-b5867eba]{display:none}.post-detail[data-v-b5867eba]{text-align:start;position:fixed;z-index:1002;left:0;right:0;bottom:0;top:0;background:rgba(46,47,48,.8);overflow:auto;font-size:1.4rem;display:flex;justify-content:center;flex-wrap:wrap}.post-detail[data-v-b5867eba] .subtle{background-color:#ecfdf5e6;border-left:4px solid #a7f3d0}.post-detail.isNight[data-v-b5867eba] .subtle{background-color:#1a3332;border-left:4px solid #047857}.post-detail .main[data-v-b5867eba]{display:flex;justify-content:flex-end;padding:3rem 8rem 15rem;background:var(--color-main-bg);position:relative;outline:none}.post-detail .main .main-wrapper[data-v-b5867eba]{width:77rem;padding-bottom:2rem;display:flex;flex-direction:column;align-items:center;position:relative}.post-detail .main .main-wrapper .post-wrapper .header:hover .add-tag[data-v-b5867eba]{display:inline-block}.post-detail .main .main-wrapper .loading-wrapper[data-v-b5867eba]{height:20rem;display:flex;justify-content:center;align-items:center}.post-detail .main .main-wrapper #no-comments-yet[data-v-b5867eba]{color:#a9a9a9;font-weight:700;text-align:center;width:100%;margin-bottom:2rem;box-sizing:border-box}.post-detail .main .relationReply[data-v-b5867eba]{position:fixed;width:25vw;top:6.5rem;bottom:15rem;z-index:100;transform:translate(calc(100% + 2rem));font-size:2rem;overflow:hidden}.post-detail .main .relationReply .my-cell[data-v-b5867eba]{background:var(--color-second-bg);border-radius:var(--box-border-radius) var(--box-border-radius) 0 0}.post-detail .main .relationReply .comments[data-v-b5867eba]{max-height:calc(100% - 4.2rem);overflow:auto;background:var(--color-second-bg);border-radius:0 0 var(--box-border-radius) var(--box-border-radius)}.post-detail .main .call-list[data-v-b5867eba]{z-index:9;position:absolute;top:12rem;border:1px solid var(--color-main-bg);background:var(--color-call-list-bg);box-shadow:0 5px 15px #0000001a;overflow:auto;max-height:30rem;border-radius:var(--box-border-radius);min-width:8rem;box-sizing:content-box}.post-detail .main .call-list .call-item[data-v-b5867eba]{border-top:1px solid var(--color-main-bg);height:3rem;display:flex;padding:0 1rem;align-items:center;cursor:pointer;font-size:14px;box-sizing:border-box}.post-detail .main .call-list .call-item .select[data-v-b5867eba],.post-detail .main .call-list .call-item[data-v-b5867eba]:hover,.post-detail .main .call-list .call-item.select[data-v-b5867eba]{background:var(--color-main-bg);text-decoration:none}.post-detail .main .call-list .call-item[data-v-b5867eba]:nth-child(1){border-top:1px solid transparent}@media screen and (max-width: 1500px){.post-detail .main-wrapper[data-v-b5867eba]{width:65vw!important}}@media screen and (max-width: 1280px){.post-detail .main-wrapper[data-v-b5867eba]{width:75vw!important}}@media screen and (max-width: 960px){.post-detail .main-wrapper[data-v-b5867eba]{width:100vw!important}}.post-detail .scroll-top[data-v-b5867eba]{cursor:pointer;position:fixed;border-radius:.6rem;display:flex;align-items:center;justify-content:center;bottom:10rem;z-index:99;padding:.8rem 0;gap:1rem;width:4.2rem;transform:translate(6rem);font-size:2rem;background:var(--color-sp-btn-bg);color:var(--color-font-3)}.post-detail .scroll-top svg[data-v-b5867eba]{font-size:2.4rem}.post-detail .refresh[data-v-b5867eba]{cursor:pointer;position:fixed;border-radius:.6rem;display:flex;align-items:center;justify-content:center;bottom:10rem;z-index:99;padding:.8rem 0;gap:1rem;width:4.2rem;transform:translate(6rem);font-size:2rem;background:var(--color-sp-btn-bg);color:var(--color-font-3);bottom:23.5rem}.post-detail .refresh svg[data-v-b5867eba]{font-size:2.4rem}.post-detail .scroll-to[data-v-b5867eba]{cursor:pointer;position:fixed;border-radius:.6rem;align-items:center;justify-content:center;bottom:10rem;z-index:99;padding:.8rem 0;gap:1rem;width:4.2rem;transform:translate(6rem);font-size:2rem;background:var(--color-sp-btn-bg);color:var(--color-font-3);bottom:15rem;display:flex;flex-direction:column}.post-detail .scroll-to svg[data-v-b5867eba]{font-size:2.4rem}.post-detail .scroll-to input[data-v-b5867eba]{height:2.6rem;width:3.6rem;font-size:1.4rem;text-align:center;color:gray}.post-detail .msg[data-v-b5867eba]{cursor:pointer;position:fixed;border-radius:.6rem;display:flex;align-items:center;justify-content:center;bottom:10rem;z-index:99;padding:.8rem 0;gap:1rem;width:4.2rem;transform:translate(6rem);font-size:2rem;background:var(--color-sp-btn-bg);color:var(--color-font-3);bottom:5rem}.post-detail .msg svg[data-v-b5867eba]{font-size:2.4rem}.post-detail .close-btn[data-v-b5867eba]{color:var(--color-font-3);cursor:pointer;position:fixed;top:3rem;transform:translate(4rem);font-size:1.6rem}.post-detail .top-reply[data-v-b5867eba]{color:var(--color-font-3);cursor:pointer;font-size:2rem;display:flex}.base64_tooltip[data-v-c50fb66c]{box-shadow:0 3px 6px -4px #0000001f,0 6px 16px #00000014,0 9px 28px 8px #0000000d;background:var(--color-third-bg);min-height:2.2rem;max-width:20rem;padding:1rem;position:fixed;z-index:9998;display:flex;align-items:center;border-radius:.5rem;cursor:pointer;line-break:anywhere;font-size:1.4rem;color:var(--color-font-8)}.base64_tooltip svg[data-v-c50fb66c]{margin-left:1rem;font-size:3rem;color:var(--color-gray)}.base64_tooltip[data-v-c50fb66c] .base-button{margin-left:1rem;margin-top:1rem}.msg[data-v-8bf692ea]{cursor:default;margin-bottom:2rem;display:flex;font-size:1.4rem;box-sizing:border-box;border-radius:var(--box-border-radius);color:var(--color-font-8);background:var(--color-tooltip-bg);box-shadow:0 0 6px 1px var(--color-tooltip-shadow)}.msg.success .left[data-v-8bf692ea]{background:var(--color-active)}.msg.warning .left[data-v-8bf692ea]{background:#c8c002}.msg.error .left[data-v-8bf692ea]{background:red}.msg .left[data-v-8bf692ea]{border-radius:var(--box-border-radius) 0 0 var(--box-border-radius);display:flex;align-items:center;background:var(--color-active);color:#fff;width:3.6rem;font-size:2.4rem;justify-content:center}.msg .left svg[data-v-8bf692ea]{cursor:pointer}.msg .right[data-v-8bf692ea]{flex:1;padding:1rem 2rem;display:flex;justify-content:space-between;align-items:center}.tag-modal[data-v-eef9961d]{z-index:1003}.tag-modal .wrapper[data-v-eef9961d]{z-index:9;background:var(--color-main-bg);color:var(--color-font-8);border-radius:1rem;font-size:1.4rem;padding:2rem 4rem;width:25rem}.tag-modal .wrapper .title[data-v-eef9961d]{font-weight:700}.tag-modal .wrapper .btns[data-v-eef9961d]{margin-top:1.5rem;display:flex;justify-content:flex-end;align-items:center;gap:1.5rem;font-size:1.4rem}.msgs[data-v-b73f4332]{position:fixed;margin-left:calc(50% - 25rem);width:50rem;z-index:9999;bottom:0;left:0;right:0}.NotificationModal .modal-root[data-v-77aa374e]{z-index:9;background:var(--color-second-bg);color:var(--color-font-8);border-radius:1rem;font-size:1.4rem;width:50vw;height:80vh;display:flex;flex-direction:column;padding:1.4rem;gap:1rem}.NotificationModal .modal-root .modal-header[data-v-77aa374e]{display:flex;justify-content:space-between}.NotificationModal .modal-root .modal-header .title[data-v-77aa374e]{font-size:2.6rem;font-weight:700;text-align:left;margin-bottom:0}.NotificationModal .modal-root .modal-header i[data-v-77aa374e]{cursor:pointer;font-size:2.2rem}.NotificationModal .modal-root .modal-body[data-v-77aa374e]{padding-top:0;flex:1;gap:1rem;display:flex;flex-direction:column;overflow:hidden}.NotificationModal .modal-root .modal-body .filter[data-v-77aa374e]{display:flex;gap:1rem}.NotificationModal .modal-root .modal-body .filter div[data-v-77aa374e]{border-radius:.4rem;padding:.4rem 1rem;background:gainsboro;cursor:pointer}.NotificationModal .modal-root .modal-body .filter div.active[data-v-77aa374e]{background:#445;color:#fff}.NotificationModal .modal-root .modal-body .list-wrap[data-v-77aa374e]{flex:1;position:relative;overflow:hidden}.NotificationModal .modal-root .modal-body .list-wrap .loading-wrap[data-v-77aa374e]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(255,255,255,.7)}.NotificationModal .modal-root .modal-body .list-wrap .notify-wrap[data-v-77aa374e]{overflow:auto;height:100%}.NotificationModal .modal-root .modal-body .list-wrap #notifications[data-v-77aa374e] .cell{display:none;padding:1.2rem 0}.NotificationModal .modal-root .modal-body .list-wrap #notifications[data-v-77aa374e] .cell a.node{padding:.6rem 1rem;border-radius:.4rem}.NotificationModal .modal-root .modal-body .list-wrap #notifications[data-v-77aa374e] .cell .payload{margin-top:.4rem;font-size:1.7rem}.NotificationModal .modal-root .modal-body #notifications.all[data-v-77aa374e] .cell,.NotificationModal .modal-root .modal-body #notifications.reply[data-v-77aa374e] .reply,.NotificationModal .modal-root .modal-body #notifications.star[data-v-77aa374e] .star,.NotificationModal .modal-root .modal-body #notifications.collect[data-v-77aa374e] .collect{display:block}.NotificationModal .modal-root .modal-body .footer[data-v-77aa374e]{width:100%;display:flex;align-items:center;gap:2rem}.NotificationModal .modal-root .modal-body .footer .pages[data-v-77aa374e]{flex:1}.NotificationModal .modal-root .modal-body .footer .total[data-v-77aa374e]{font-weight:700}.NotificationModal .modal-root .modal-body .footer .total span[data-v-77aa374e]{color:#d3d3d3;font-weight:400;margin-right:.4rem}.NotificationModal .modal-root .modal-body[data-v-77aa374e] .super.button{padding:0;background:unset;height:26px;width:37px}.NotificationModal .modal-root .modal-body[data-v-77aa374e] .super.button a{display:block}.NotificationModal .modal-root .modal-body[data-v-77aa374e] .super.button a:hover{text-decoration:none}.v-enter-active,.v-leave-active{transition:opacity .3s ease}.v-enter-from,.v-leave-to{opacity:0}.username{font-weight:700;font-size:1.4rem;margin-right:1rem}.link-num{font-size:1.2rem;font-weight:700;color:#e02a2a}.owner{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;margin-right:1rem;transform:scale(.8)}.mod{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;transform:scale(.8);background:#1484cd;color:#fff;margin-right:1rem}.my-tag{font-size:1.4rem;color:red;margin-left:1rem}.my-tag:hover .remove{display:inline}.my-tag .remove{cursor:pointer;margin-left:.5rem;display:none}.add-tag{font-size:2.4rem;transform:translateY(.2rem);line-height:1rem;display:inline-block;margin-left:1rem;cursor:pointer;position:absolute;display:none}.floor{margin-left:.5rem;font-size:1.1rem;line-height:1rem;border-radius:.5rem;display:inline-block;background-color:var(--color-floor);color:var(--color-floor-font);padding:3px 9px;cursor:default}:root{--color-main-bg: #e2e2e2;--color-second-bg: white;--color-third-bg: #e2e2e2;--color-item-bg: white;--color-swtich-bg: #dcdfe6;--color-active: #409eff;--color-font: #999;--color-font-8: rgba(0, 0, 0, .8);--color-font-3: rgba(0, 0, 0, .3);--color-font-pure: black;--color-input-bg: white;--color-input-border: #e2e2e2;--color-input-border-hover: #a3a6ad;--color-radio-border: #e2e2e2;--color-tooltip-bg: white;--color-tooltip-shadow: #bbbbbb;--color-scrollbar: #93ade3;--color-line: #e2e2e2;--color-loading-1: #00000033;--color-loading-2: #000;--color-floor: #f0f0f0;--color-floor-font: #bdbdbd;--color-editor-toolbar: #f6f7f8;--color-sp-btn-bg: #f1f1f1;--color-call-list-bg: white;--color-top-reply-wrap-bg: #f2f3f5;--color-top-reply-wrap-line: #d2d2d2}html.dark{--color-main-bg: #22303f;--color-second-bg: #18222d;--color-third-bg: #31475e;--color-item-bg: #18222d;--color-swtich-bg: #4c4d4f;--color-active: #409eff;--color-font: rgba(255, 255, 255, .5);--color-font-8: rgba(255, 255, 255, .8);--color-font-3: rgba(255, 255, 255, .3);--color-font-pure: white;--color-input-bg: #333333;--color-input-border: #6c6e72;--color-input-border-hover: #a3a6ad;--color-radio-border: #454847;--color-tooltip-bg: #31475e;--color-tooltip-shadow: #3b3b3b;--color-scrollbar: #5c5d5e;--color-line: var(--box-border-color);--color-loading-1: rgba(178, 177, 177, .2);--color-loading-2: #ffffff;--color-floor: #293b4d;--color-floor-font: rgba(255, 255, 255, .3);--color-editor-toolbar: var(--box-background-hover-color);--color-sp-btn-bg: #31475e;--color-call-list-bg: #31475e;--color-top-reply-wrap-bg: #212f3e;--color-top-reply-wrap-line: #3b536d}html,body{font-size:62.5%}::-webkit-scrollbar{width:1rem;height:1rem}::-webkit-scrollbar-track{background:transparent;border-radius:.2rem}::-webkit-scrollbar-thumb{background:var(--color-scrollbar);border-radius:1rem}.flex{display:flex;align-items:center;justify-content:space-between}.flex-end{justify-content:flex-end}.flex-center{justify-content:center}.p1{padding:1rem}.p2{padding:2rem}.p0{padding:0!important}body :is(.topic_content,.reply_content) a[href^=http]{text-underline-offset:.7ex;text-decoration:underline 1px}a{text-decoration:none;cursor:pointer}a:hover{text-decoration:underline}.tool{position:relative;display:flex;align-items:center;border-radius:.3rem;cursor:pointer;height:2.6rem;padding:0 .5rem;gap:.2rem}.tool>svg{width:1.6rem!important;height:1.6rem!important}.tool:hover{background:var(--color-third-bg)}.tool.no-hover{cursor:default}.tool.no-hover:hover{background:unset!important}.tool.disabled{cursor:not-allowed}.tool.disabled:hover{background:unset!important}.my-node{border-radius:.2rem;padding:.4rem;font-size:1rem;color:#999;background:#f5f5f5;cursor:pointer}.my-node:hover{text-decoration:none;background:#e2e2e2}.msgs{position:fixed;margin-left:calc(50% - 25rem);width:50rem;z-index:9999;bottom:0;left:0;right:0}.my-box{box-shadow:0 2px 3px #0000001a;box-shadow:#00000014 0 4px 12px;border-radius:var(--box-border-radius);background:var(--box-background-color);margin-bottom:2rem;width:100%;box-sizing:border-box;transition:background-color .3s}.my-cell{color:var(--color-font);padding:.8rem 1rem;font-size:1.4rem;line-height:150%;text-align:left;border-bottom:1px solid var(--color-line)}.modal{position:fixed;z-index:1001;width:100vw;height:100vh;left:0;top:0;display:flex;justify-content:center;align-items:center}.modal .title{font-size:2.4rem;margin-bottom:1rem;text-align:center}.modal .option{display:flex;align-items:center;padding:.6rem 0}.modal .option>span{position:relative}.modal .mask{position:fixed;width:100vw;height:100vh;left:0;top:0;background-color:#1d1c1c47}.radio-group2{display:inline-flex;border-radius:.5rem;overflow:hidden;border:1px solid var(--color-radio-border);background:var(--box-background-alt-color)}.radio-group2 .radio{cursor:pointer;background:transparent;padding:.5rem 1.2rem;border-left:1px solid var(--color-radio-border);font-size:1.3rem;color:var(--color-gray)}.radio-group2 .radio:first-child{border-left:none}.radio-group2 .active{background:var(--color-third-bg);color:var(--color-font)}.pop-confirm{position:relative;display:inline-flex;justify-content:center}input{height:3rem;outline:unset;border:1px solid var(--color-input-border);padding:0 .5rem;border-radius:5px;box-sizing:border-box;transition:all .3s;background:var(--color-input-bg);color:var(--color-font)}input:hover{border:1px solid var(--color-input-border-hover)}input:focus{border:1px solid var(--color-active)}.danger{color:red!important}.pop-confirm-content{position:fixed;background:var(--color-tooltip-bg);box-shadow:0 0 6px 1px var(--color-tooltip-shadow);color:var(--color-font-8);padding:1.5rem;border-radius:.8rem;transform:translate(-50%,calc(-100% - 1rem));z-index:1003}.pop-confirm-content .text{text-align:start;font-size:1.6rem;width:15rem;min-width:15rem}.pop-confirm-content .options{margin-top:1.5rem;display:flex;justify-content:flex-end;align-items:center;gap:1rem}.target-user-tags[data-v-bae2f48f]{background:var(--color-second-bg);color:var(--color-font);word-break:break-all;text-align:start;font-size:1.4rem;box-shadow:0 2px 3px #0000001a;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.target-user-tags .add-tag[data-v-bae2f48f]{display:inline-block}.loaded[data-v-bae2f48f]{font-size:1.4rem;display:flex;align-items:center;gap:1rem;color:var(--color-font-pure)} ');

    console.log("V2EX PC端"), ud();
    let e = vue.createApp(cd);
    e.config.unwrapInjectedRef = !0, e.mount(ye);
  }

})(Vue);
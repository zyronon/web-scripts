// ==UserScript==
// @name         V2Next
// @namespace    http://tampermonkey.net/
// @version      10.1
// @author       zyronon
// @description  V2Next - 一个好用的V2EX脚本！ 已适配移动端
// @license      GPL License
// @icon         https://www.v2ex.com/static/favicon.ico
// @homepage     https://github.com/zyronon/web-scripts
// @homepageURL  https://github.com/zyronon/web-scripts
// @supportURL   https://update.greasyfork.org/scripts/458024/V2Next.user.js
// @downloadURL  https://update.greasyfork.org/scripts/458024/V2Next.user.js
// @updateURL    https://update.greasyfork.org/scripts/458024/V2Next.user.js
// @match        https://v2ex.com/
// @match        https://v2ex.com/?tab=*
// @match        https://v2ex.com/t/*
// @match        https://v2ex.com/recent*
// @match        https://v2ex.com/go/*
// @match        https://v2ex.com/member/*
// @match        https://v2ex.com/changes*
// @match        https://*.v2ex.com/
// @match        https://*.v2ex.com/?tab=*
// @match        https://*.v2ex.com/t/*
// @match        https://*.v2ex.com/recent*
// @match        https://*.v2ex.com/go/*
// @match        https://*.v2ex.com/member/*
// @match        https://*.v2ex.com/changes*
// @require      https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.min.js
// @require      https://lib.baomitu.com/vue/3.4.14/vue.runtime.global.prod.min.js
// @grant        GM_addStyle
// @grant        GM_notification
// @grant        GM_openInTab
// @grant        GM_registerMenuCommand
// ==/UserScript==


(function (vue) {
    'use strict';

    var j=(e=>(e.Home="Home",e.Node="Node",e.Post="Post",e.Member="Member",e.Changes="Changes",e))(j||{}),P=(e=>(e[e.FloorInFloor=0]="FloorInFloor",e[e.FloorInFloorNoCallUser=4]="FloorInFloorNoCallUser",e[e.FloorInFloorNested=5]="FloorInFloorNested",e[e.Like=1]="Like",e[e.V2exOrigin=2]="V2exOrigin",e[e.OnlyOp=3]="OnlyOp",e[e.New=6]="New",e))(P||{});const zt=400,xn={name:"Tooltip",props:{title:{type:String,default(){return ""}},disabled:{type:Boolean,default(){return !1}}},data(){return {show:!1}},methods:{showPop(e){if(this.disabled||!this.title)return;e.stopPropagation();let t=e.target.getBoundingClientRect();this.show=!0,vue.nextTick(()=>{var i,a;let n=(a=(i=this.$refs)==null?void 0:i.tip)==null?void 0:a.getBoundingClientRect();if(!n)return;t.top<50?this.$refs.tip.style.top=t.top+t.height+10+"px":this.$refs.tip.style.top=t.top-n.height-10+"px";let l=n.width,o=t.width;this.$refs.tip.style.left=t.left-(l-o)/2+"px";});}},render(){let e=this.$slots.default()[0];return vue.createVNode(vue.Fragment,null,[this.show&&this.title&&vue.createVNode(vue.Teleport,{to:"body"},{default:()=>[vue.createVNode(vue.Transition,{name:"fade"},{default:()=>[vue.createVNode("div",{ref:"tip",className:"tip"},[this.title])]})]}),vue.createVNode(e,{onClick:()=>this.show=!1,onmouseenter:t=>this.showPop(t),onmouseleave:()=>this.show=!1},null)])}};const J=(e,t)=>{const n=e.__vccOpts||e;for(const[l,o]of t)n[l]=o;return n},Ae=J(xn,[["__scopeId","data-v-ee672411"]]),Sn=vue.defineComponent({__name:"BaseSwitch",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){return (n,l)=>(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["switch",{active:n.modelValue}]),onClick:l[0]||(l[0]=o=>n.$emit("update:modelValue",!n.modelValue))},null,2))}});const ht=J(Sn,[["__scopeId","data-v-e7c0fbef"]]);var In=(()=>typeof GM_notification<"u"?GM_notification:void 0)(),Mn=(()=>typeof GM_openInTab<"u"?GM_openInTab:void 0)(),Te=(()=>typeof GM_registerMenuCommand<"u"?GM_registerMenuCommand:void 0)();const I={createList(e,t){return e.replyList=t,e.topReplyList=window.clone(t).filter(n=>n.thankCount>=window.config.topReplyLoveMinCount).sort((n,l)=>l.thankCount-n.thankCount).slice(0,window.config.topReplyCount),e.replyCount=t.length,e.allReplyUsers=Array.from(new Set(t.map(n=>n.username))),e.nestedReplies=I.createNestedList(window.clone(t),e.topReplyList),e.nestedRedundReplies=I.createNestedRedundantList(window.clone(t),e.topReplyList),e},getAllReply(e=[]){return e.sort((t,n)=>t.i-n.i).reduce((t,n)=>(t=t.concat(n.replyList),t),[])},findChildren(e,t,n,l){var c;const o=(r,u,v)=>{r.level=v.level+1;let y=n.findIndex(w=>w.floor===r.floor);y>-1&&(n[y].isUse=!0),v.children.push(this.findChildren(r,u,n,l));};e.children=[];let i=[];for(let r=0;r<t.length;r++){let u=t[r];u.isUse||u.replyFloor===e.floor&&(u.replyUsers.length===1&&u.replyUsers[0]===e.username?(u.isUse=!0,i.push({endList:t.slice(r+1),currentItem:u})):u.isWrong=!0);}i.reverse().map(({currentItem:r,endList:u})=>{o(r,u,e);});let a=t.findIndex(r=>{var u;return r.username===e.username&&((u=r.replyUsers)==null?void 0:u[0])!==e.username}),p=a>-1?t.slice(0,a):t;for(let r=0;r<p.length;r++){let u=p[r];if(!u.isUse){if(u.replyUsers.length===1){if(u.replyFloor!==-1&&((c=n[u.replyFloor-1])==null?void 0:c.username)===u.replyUsers[0])continue;let v=t.slice(r+1);if(u.username===e.username){u.replyUsers[0]===e.username&&o(u,v,e);break}else u.replyUsers[0]===e.username&&o(u,v,e);}else if(u.username===e.username)break}}e.children=e.children.sort((r,u)=>r.floor-u.floor),e.replyCount=e.children.reduce((r,u)=>r+(u.children.length?u.replyCount+1:1),0);let f=l.findIndex(r=>r.floor===e.floor);return f>-1&&(l[f].children=e.children,l[f].replyCount=e.replyCount),e},createNestedList(e=[],t){if(!e.length)return [];let n=e,l=[];return n.map((o,i)=>{let a=n.slice(0,i),p=Array.from(new Set(a.map(c=>c.username))),f=n.slice(i+1);if(i===0)l.push(this.findChildren(o,f,n,t));else if(!o.isUse){let c=!1;o.replyUsers.length?o.replyUsers.length>1?c=!0:c=!p.find(r=>r===o.replyUsers[0]):c=!0,c&&(o.level=0,l.push(this.findChildren(o,f,n,t)));}}),l},createNestedRedundantList(e=[],t){if(!e.length)return [];let n=e,l=[];return n.map((o,i)=>{let a=n.slice(0,i),p=Array.from(new Set(a.map(c=>c.username))),f=n.slice(i+1);if(i===0)l.push(this.findChildren(o,f,n,t));else if(o.isUse){let c=window.clone(o);c.children=[],c.level=0,c.isDup=!0,l.push(c);}else {let c=!1;o.replyUsers.length?o.replyUsers.length>1?c=!0:c=!p.find(r=>r===o.replyUsers[0]):c=!0,c&&(o.level=0,l.push(this.findChildren(o,f,n,t)));}}),l},parseA(e){let t=e.href,n;return t.includes("/t/")&&(n=e.pathname.substring(3)),{href:t,id:n,title:e.innerText}},checkPhotoLink2Img(e){if(e){try{[/<a((?!<a).)*href="https?:\/\/((?!<a).)*imgur.com((?!<a).)*>(((?!<a).)*)<\/a>/g,/<a((?!<a).)*href="https?:\/\/((?!<a).)*\.(gif|png|jpg|jpeg|GIF|PNG|JPG|JPEG) ((?!<a).)*>(((?!<a).)*)<\/a>/g].map((n,l)=>{[...e.matchAll(n)].map(a=>{let p=l===0?a[4]:a[5];if(p){let f=p.toLowerCase(),c=p;f.includes(".png")||f.includes(".jpg")||f.includes(".jpeg")||f.includes(".gif")||(c=p+".png"),e=e.replace(a[0],`<img src="${c}" data-originUrl="${p}" data-notice="此img标签由v2ex-超级增强脚本解析" style="max-width: 100%">`);}});});}catch{}return e}},async checkPostReplies(e,t=!0){return new Promise(async n=>{let l=await I.getPostDetailByApi(e);if((l==null?void 0:l.replies)>zt)return t&&I.openNewTab(`https://${location.origin}/t/${e}?p=1&script=1`),n(!0);n(!1);})},async sleep(e){return new Promise(t=>{setTimeout(t,e);})},openNewTab(e,t=!1){Mn(e,{active:t});},async cbChecker(e,t=0){if(window.cb)window.cb(e);else {for(;!window.cb&&t<30;)await I.sleep(500),t++;window.cb&&window.cb(e);}},initMonkeyMenu(){try{Te("脚本设置",()=>{I.cbChecker({type:"openSetting"});}),Te("仓库地址",()=>{I.openNewTab(window.const.git);}),Te("反馈 & 建议",I.feedback);}catch{}},clone(e){return JSON.parse(JSON.stringify(e))},feedback(){I.openNewTab(he.issue);},checkPageType(e){let t=e||window.location,n={pageType:null,pageData:{id:"",pageNo:null},username:""};if(t.pathname==="/")n.pageType=j.Home;else if(t.pathname==="/changes")n.pageType=j.Changes;else if(t.pathname==="/recent")n.pageType=j.Changes;else if(t.href.match(/.com\/?tab=/))n.pageType=j.Home;else if(t.href.match(/.com\/go\//))t.href.includes("/links")||(n.pageType=j.Node);else if(t.href.match(/.com\/member/))n.pageType=j.Member,n.username=t.pathname.replace("/member/","").replace("/replies","");else {let l=t.href.match(/.com\/t\/([\d]+)/);if(l&&!t.pathname.includes("review")&&!t.pathname.includes("info")&&(n.pageType=j.Post,n.pageData.id=l[1],t.search)){let o=t.href.match(/\?p=([\d]+)/);o&&(n.pageData.pageNo=Number(o[1]));}}return n},getPostDetailByApi(e){return new Promise(t=>{fetch(`${location.origin}/api/topics/show.json?id=${e}`).then(async n=>{if(n.status===200){let l=await n.json();if(l){let o=l[0];t(o);}}});})},appendPostContent(e,t){let n=document.createElement("a");n.href=e.href,n.classList.add("post-content");let l=document.createElement("div");l.innerHTML=e.content_rendered,n.append(l),t.append(n),(()=>{var i;if(l.clientHeight<300)n.classList.add("show-all");else {let a=document.createElement("div");a.classList.add("show-more"),a.innerHTML="显示更多/收起",a.onclick=function(p){p.stopPropagation(),n.classList.toggle("show-all");},(i=n.parentNode)==null||i.append(a);}})();},initConfig(){return new Promise(e=>{let t=localStorage.getItem("v2ex-config");if(t){let n=JSON.parse(t);n=n[window.user.username??"default"],n&&(window.config=Object.assign(window.config,n));}e(window.config);})}},Jt={allReplyUsers:[],content_rendered:"",createDate:"",createDateAgo:"",lastReplyDate:"",fr:"",replyList:[],topReplyList:[],nestedReplies:[],nestedRedundReplies:[],username:"",url:"",href:"",member:{},node:{title:"",url:""},headerTemplate:"",title:"",id:"",type:"post",once:"",replyCount:0,clickCount:0,thankCount:0,collectCount:0,lastReadFloor:0,isFavorite:!1,isIgnore:!1,isThanked:!1,isReport:!1,inList:!1},Le=(e={})=>Object.assign(I.clone(Jt),e),Ln={tagPrefix:"--用户标签--",tags:{},tagsId:"",username:"",avatar:"",readPrefix:"--已读楼层--",readNoteItemId:"",readList:{},imgurPrefix:"--imgur图片删除hash--",imgurList:{},imgurNoteId:"",configPrefix:"--config--",configNoteId:""},he={pageType:void 0,pageData:{pageNo:1},targetUserName:"",currentVersion:2,isNight:!1,cb:null,stopMe:null,postList:[],git:"https://github.com/zyronon/web-scripts",shortGit:"zyronon/web-scripts",issue:"https://github.com/zyronon/web-scripts/issues",pcLog:"https://greasyfork.org/zh-CN/scripts/458024/versions",pcScript:"https://greasyfork.org/zh-CN/scripts/458024",mobileScript:"https://greasyfork.org/zh-CN/scripts/485356",homeUrl:"https://v2next.netlify.app/"},Rn={showToolbar:!0,autoOpenDetail:!0,openTag:!1,clickPostItemOpenDetail:!0,closePostDetailBySpace:!0,contentAutoCollapse:!0,viewType:"table",commentDisplayType:P.FloorInFloorNoCallUser,newTabOpen:!1,newTabOpenActive:!1,base64:!0,sov2ex:!1,postWidth:"",showTopReply:!0,topReplyLoveMinCount:3,topReplyCount:5,autoJumpLastReadFloor:!1,rememberLastReadFloor:!1,autoSignin:!0,customBgColor:"",version:he.currentVersion,collectBrowserNotice:!1,fontSizeType:"normal"},Re=/^[a-z0-9]+(-[a-z0-9]+)*$/,Ke=(e,t,n,l="")=>{const o=e.split(":");if(e.slice(0,1)==="@"){if(o.length<2||o.length>3)return null;l=o.shift().slice(1);}if(o.length>3||!o.length)return null;if(o.length>1){const p=o.pop(),f=o.pop(),c={provider:o.length>0?o[0]:l,prefix:f,name:p};return t&&!We(c)?null:c}const i=o[0],a=i.split("-");if(a.length>1){const p={provider:l,prefix:a.shift(),name:a.join("-")};return t&&!We(p)?null:p}if(n&&l===""){const p={provider:l,prefix:"",name:i};return t&&!We(p,n)?null:p}return null},We=(e,t)=>e?!!((e.provider===""||e.provider.match(Re))&&(t&&e.prefix===""||e.prefix.match(Re))&&e.name.match(Re)):!1,Kt=Object.freeze({left:0,top:0,width:16,height:16}),ze=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),Xe=Object.freeze({...Kt,...ze}),lt=Object.freeze({...Xe,body:"",hidden:!1});function On(e,t){const n={};!e.hFlip!=!t.hFlip&&(n.hFlip=!0),!e.vFlip!=!t.vFlip&&(n.vFlip=!0);const l=((e.rotate||0)+(t.rotate||0))%4;return l&&(n.rotate=l),n}function Rt(e,t){const n=On(e,t);for(const l in lt)l in ze?l in e&&!(l in n)&&(n[l]=ze[l]):l in t?n[l]=t[l]:l in e&&(n[l]=e[l]);return n}function Nn(e,t){const n=e.icons,l=e.aliases||Object.create(null),o=Object.create(null);function i(a){if(n[a])return o[a]=[];if(!(a in o)){o[a]=null;const p=l[a]&&l[a].parent,f=p&&i(p);f&&(o[a]=[p].concat(f));}return o[a]}return (t||Object.keys(n).concat(Object.keys(l))).forEach(i),o}function Pn(e,t,n){const l=e.icons,o=e.aliases||Object.create(null);let i={};function a(p){i=Rt(l[p]||o[p],i);}return a(t),n.forEach(a),Rt(e,i)}function Xt(e,t){const n=[];if(typeof e!="object"||typeof e.icons!="object")return n;e.not_found instanceof Array&&e.not_found.forEach(o=>{t(o,null),n.push(o);});const l=Nn(e);for(const o in l){const i=l[o];i&&(t(o,Pn(e,o,i)),n.push(o));}return n}const En={provider:"",aliases:{},not_found:{},...Kt};function nt(e,t){for(const n in t)if(n in e&&typeof e[n]!=typeof t[n])return !1;return !0}function Yt(e){if(typeof e!="object"||e===null)return null;const t=e;if(typeof t.prefix!="string"||!e.icons||typeof e.icons!="object"||!nt(e,En))return null;const n=t.icons;for(const o in n){const i=n[o];if(!o.match(Re)||typeof i.body!="string"||!nt(i,lt))return null}const l=t.aliases||Object.create(null);for(const o in l){const i=l[o],a=i.parent;if(!o.match(Re)||typeof a!="string"||!n[a]&&!l[a]||!nt(i,lt))return null}return t}const Ot=Object.create(null);function Vn(e,t){return {provider:e,prefix:t,icons:Object.create(null),missing:new Set}}function be(e,t){const n=Ot[e]||(Ot[e]=Object.create(null));return n[t]||(n[t]=Vn(e,t))}function mt(e,t){return Yt(t)?Xt(t,(n,l)=>{l?e.icons[n]=l:e.missing.add(n);}):[]}function Dn(e,t,n){try{if(typeof n.body=="string")return e.icons[t]={...n},!0}catch{}return !1}let Pe=!1;function Zt(e){return typeof e=="boolean"&&(Pe=e),Pe}function An(e){const t=typeof e=="string"?Ke(e,!0,Pe):e;if(t){const n=be(t.provider,t.prefix),l=t.name;return n.icons[l]||(n.missing.has(l)?null:void 0)}}function Un(e,t){const n=Ke(e,!0,Pe);if(!n)return !1;const l=be(n.provider,n.prefix);return Dn(l,n.name,t)}function Hn(e,t){if(typeof e!="object")return !1;if(typeof t!="string"&&(t=e.provider||""),Pe&&!t&&!e.prefix){let o=!1;return Yt(e)&&(e.prefix="",Xt(e,(i,a)=>{a&&Un(i,a)&&(o=!0);})),o}const n=e.prefix;if(!We({provider:t,prefix:n,name:"a"}))return !1;const l=be(t,n);return !!mt(l,e)}const Qt=Object.freeze({width:null,height:null}),en=Object.freeze({...Qt,...ze}),Fn=/(-?[0-9.]*[0-9]+[0-9.]*)/g,$n=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Nt(e,t,n){if(t===1)return e;if(n=n||100,typeof e=="number")return Math.ceil(e*t*n)/n;if(typeof e!="string")return e;const l=e.split(Fn);if(l===null||!l.length)return e;const o=[];let i=l.shift(),a=$n.test(i);for(;;){if(a){const p=parseFloat(i);isNaN(p)?o.push(i):o.push(Math.ceil(p*t*n)/n);}else o.push(i);if(i=l.shift(),i===void 0)return o.join("");a=!a;}}const Bn=e=>e==="unset"||e==="undefined"||e==="none";function Gn(e,t){const n={...Xe,...e},l={...en,...t},o={left:n.left,top:n.top,width:n.width,height:n.height};let i=n.body;[n,l].forEach(w=>{const m=[],h=w.hFlip,C=w.vFlip;let k=w.rotate;h?C?k+=2:(m.push("translate("+(o.width+o.left).toString()+" "+(0-o.top).toString()+")"),m.push("scale(-1 1)"),o.top=o.left=0):C&&(m.push("translate("+(0-o.left).toString()+" "+(o.height+o.top).toString()+")"),m.push("scale(1 -1)"),o.top=o.left=0);let S;switch(k<0&&(k-=Math.floor(k/4)*4),k=k%4,k){case 1:S=o.height/2+o.top,m.unshift("rotate(90 "+S.toString()+" "+S.toString()+")");break;case 2:m.unshift("rotate(180 "+(o.width/2+o.left).toString()+" "+(o.height/2+o.top).toString()+")");break;case 3:S=o.width/2+o.left,m.unshift("rotate(-90 "+S.toString()+" "+S.toString()+")");break}k%2===1&&(o.left!==o.top&&(S=o.left,o.left=o.top,o.top=S),o.width!==o.height&&(S=o.width,o.width=o.height,o.height=S)),m.length&&(i='<g transform="'+m.join(" ")+'">'+i+"</g>");});const a=l.width,p=l.height,f=o.width,c=o.height;let r,u;a===null?(u=p===null?"1em":p==="auto"?c:p,r=Nt(u,f/c)):(r=a==="auto"?f:a,u=p===null?Nt(r,c/f):p==="auto"?c:p);const v={},y=(w,m)=>{Bn(m)||(v[w]=m.toString());};return y("width",r),y("height",u),v.viewBox=o.left.toString()+" "+o.top.toString()+" "+f.toString()+" "+c.toString(),{attributes:v,body:i}}const Wn=/\sid="(\S+)"/g,jn="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let qn=0;function zn(e,t=jn){const n=[];let l;for(;l=Wn.exec(e);)n.push(l[1]);if(!n.length)return e;const o="suffix"+(Math.random()*16777216|Date.now()).toString(16);return n.forEach(i=>{const a=typeof t=="function"?t(i):t+(qn++).toString(),p=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+p+')([")]|\\.[a-z])',"g"),"$1"+a+o+"$3");}),e=e.replace(new RegExp(o,"g"),""),e}const rt=Object.create(null);function Jn(e,t){rt[e]=t;}function at(e){return rt[e]||rt[""]}function gt(e){let t;if(typeof e.resources=="string")t=[e.resources];else if(t=e.resources,!(t instanceof Array)||!t.length)return null;return {resources:t,path:e.path||"/",maxURL:e.maxURL||500,rotate:e.rotate||750,timeout:e.timeout||5e3,random:e.random===!0,index:e.index||0,dataAfterTimeout:e.dataAfterTimeout!==!1}}const yt=Object.create(null),Me=["https://api.simplesvg.com","https://api.unisvg.com"],je=[];for(;Me.length>0;)Me.length===1||Math.random()>.5?je.push(Me.shift()):je.push(Me.pop());yt[""]=gt({resources:["https://api.iconify.design"].concat(je)});function Kn(e,t){const n=gt(t);return n===null?!1:(yt[e]=n,!0)}function wt(e){return yt[e]}const Xn=()=>{let e;try{if(e=fetch,typeof e=="function")return e}catch{}};let Pt=Xn();function Yn(e,t){const n=wt(e);if(!n)return 0;let l;if(!n.maxURL)l=0;else {let o=0;n.resources.forEach(a=>{o=Math.max(o,a.length);});const i=t+".json?icons=";l=n.maxURL-o-n.path.length-i.length;}return l}function Zn(e){return e===404}const Qn=(e,t,n)=>{const l=[],o=Yn(e,t),i="icons";let a={type:i,provider:e,prefix:t,icons:[]},p=0;return n.forEach((f,c)=>{p+=f.length+1,p>=o&&c>0&&(l.push(a),a={type:i,provider:e,prefix:t,icons:[]},p=f.length),a.icons.push(f);}),l.push(a),l};function eo(e){if(typeof e=="string"){const t=wt(e);if(t)return t.path}return "/"}const to=(e,t,n)=>{if(!Pt){n("abort",424);return}let l=eo(t.provider);switch(t.type){case"icons":{const i=t.prefix,p=t.icons.join(","),f=new URLSearchParams({icons:p});l+=i+".json?"+f.toString();break}case"custom":{const i=t.uri;l+=i.slice(0,1)==="/"?i.slice(1):i;break}default:n("abort",400);return}let o=503;Pt(e+l).then(i=>{const a=i.status;if(a!==200){setTimeout(()=>{n(Zn(a)?"abort":"next",a);});return}return o=501,i.json()}).then(i=>{if(typeof i!="object"||i===null){setTimeout(()=>{i===404?n("abort",i):n("next",o);});return}setTimeout(()=>{n("success",i);});}).catch(()=>{n("next",o);});},no={prepare:Qn,send:to};function oo(e){const t={loaded:[],missing:[],pending:[]},n=Object.create(null);e.sort((o,i)=>o.provider!==i.provider?o.provider.localeCompare(i.provider):o.prefix!==i.prefix?o.prefix.localeCompare(i.prefix):o.name.localeCompare(i.name));let l={provider:"",prefix:"",name:""};return e.forEach(o=>{if(l.name===o.name&&l.prefix===o.prefix&&l.provider===o.provider)return;l=o;const i=o.provider,a=o.prefix,p=o.name,f=n[i]||(n[i]=Object.create(null)),c=f[a]||(f[a]=be(i,a));let r;p in c.icons?r=t.loaded:a===""||c.missing.has(p)?r=t.missing:r=t.pending;const u={provider:i,prefix:a,name:p};r.push(u);}),t}function tn(e,t){e.forEach(n=>{const l=n.loaderCallbacks;l&&(n.loaderCallbacks=l.filter(o=>o.id!==t));});}function io(e){e.pendingCallbacksFlag||(e.pendingCallbacksFlag=!0,setTimeout(()=>{e.pendingCallbacksFlag=!1;const t=e.loaderCallbacks?e.loaderCallbacks.slice(0):[];if(!t.length)return;let n=!1;const l=e.provider,o=e.prefix;t.forEach(i=>{const a=i.icons,p=a.pending.length;a.pending=a.pending.filter(f=>{if(f.prefix!==o)return !0;const c=f.name;if(e.icons[c])a.loaded.push({provider:l,prefix:o,name:c});else if(e.missing.has(c))a.missing.push({provider:l,prefix:o,name:c});else return n=!0,!0;return !1}),a.pending.length!==p&&(n||tn([e],i.id),i.callback(a.loaded.slice(0),a.missing.slice(0),a.pending.slice(0),i.abort));});}));}let so=0;function lo(e,t,n){const l=so++,o=tn.bind(null,n,l);if(!t.pending.length)return o;const i={id:l,icons:t,callback:e,abort:o};return n.forEach(a=>{(a.loaderCallbacks||(a.loaderCallbacks=[])).push(i);}),o}function ro(e,t=!0,n=!1){const l=[];return e.forEach(o=>{const i=typeof o=="string"?Ke(o,t,n):o;i&&l.push(i);}),l}var ao={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function co(e,t,n,l){const o=e.resources.length,i=e.random?Math.floor(Math.random()*o):e.index;let a;if(e.random){let E=e.resources.slice(0);for(a=[];E.length>1;){const G=Math.floor(Math.random()*E.length);a.push(E[G]),E=E.slice(0,G).concat(E.slice(G+1));}a=a.concat(E);}else a=e.resources.slice(i).concat(e.resources.slice(0,i));const p=Date.now();let f="pending",c=0,r,u=null,v=[],y=[];typeof l=="function"&&y.push(l);function w(){u&&(clearTimeout(u),u=null);}function m(){f==="pending"&&(f="aborted"),w(),v.forEach(E=>{E.status==="pending"&&(E.status="aborted");}),v=[];}function h(E,G){G&&(y=[]),typeof E=="function"&&y.push(E);}function C(){return {startTime:p,payload:t,status:f,queriesSent:c,queriesPending:v.length,subscribe:h,abort:m}}function k(){f="failed",y.forEach(E=>{E(void 0,r);});}function S(){v.forEach(E=>{E.status==="pending"&&(E.status="aborted");}),v=[];}function q(E,G,X){const K=G!=="success";switch(v=v.filter(te=>te!==E),f){case"pending":break;case"failed":if(K||!e.dataAfterTimeout)return;break;default:return}if(G==="abort"){r=X,k();return}if(K){r=X,v.length||(a.length?Y():k());return}if(w(),S(),!e.random){const te=e.resources.indexOf(E.resource);te!==-1&&te!==e.index&&(e.index=te);}f="completed",y.forEach(te=>{te(X);});}function Y(){if(f!=="pending")return;w();const E=a.shift();if(E===void 0){if(v.length){u=setTimeout(()=>{w(),f==="pending"&&(S(),k());},e.timeout);return}k();return}const G={status:"pending",resource:E,callback:(X,K)=>{q(G,X,K);}};v.push(G),c++,u=setTimeout(Y,e.rotate),n(E,t,G.callback);}return setTimeout(Y),C}function nn(e){const t={...ao,...e};let n=[];function l(){n=n.filter(p=>p().status==="pending");}function o(p,f,c){const r=co(t,p,f,(u,v)=>{l(),c&&c(u,v);});return n.push(r),r}function i(p){return n.find(f=>p(f))||null}return {query:o,find:i,setIndex:p=>{t.index=p;},getIndex:()=>t.index,cleanup:l}}function Et(){}const ot=Object.create(null);function uo(e){if(!ot[e]){const t=wt(e);if(!t)return;const n=nn(t),l={config:t,redundancy:n};ot[e]=l;}return ot[e]}function po(e,t,n){let l,o;if(typeof e=="string"){const i=at(e);if(!i)return n(void 0,424),Et;o=i.send;const a=uo(e);a&&(l=a.redundancy);}else {const i=gt(e);if(i){l=nn(i);const a=e.resources?e.resources[0]:"",p=at(a);p&&(o=p.send);}}return !l||!o?(n(void 0,424),Et):l.query(t,o,n)().abort}const Vt="iconify2",Ee="iconify",on=Ee+"-count",Dt=Ee+"-version",sn=36e5,fo=168;function ct(e,t){try{return e.getItem(t)}catch{}}function _t(e,t,n){try{return e.setItem(t,n),!0}catch{}}function At(e,t){try{e.removeItem(t);}catch{}}function dt(e,t){return _t(e,on,t.toString())}function ut(e){return parseInt(ct(e,on))||0}const Ye={local:!0,session:!0},ln={local:new Set,session:new Set};let vt=!1;function ho(e){vt=e;}let Ge=typeof window>"u"?{}:window;function rn(e){const t=e+"Storage";try{if(Ge&&Ge[t]&&typeof Ge[t].length=="number")return Ge[t]}catch{}Ye[e]=!1;}function an(e,t){const n=rn(e);if(!n)return;const l=ct(n,Dt);if(l!==Vt){if(l){const p=ut(n);for(let f=0;f<p;f++)At(n,Ee+f.toString());}_t(n,Dt,Vt),dt(n,0);return}const o=Math.floor(Date.now()/sn)-fo,i=p=>{const f=Ee+p.toString(),c=ct(n,f);if(typeof c=="string"){try{const r=JSON.parse(c);if(typeof r=="object"&&typeof r.cached=="number"&&r.cached>o&&typeof r.provider=="string"&&typeof r.data=="object"&&typeof r.data.prefix=="string"&&t(r,p))return !0}catch{}At(n,f);}};let a=ut(n);for(let p=a-1;p>=0;p--)i(p)||(p===a-1?(a--,dt(n,a)):ln[e].add(p));}function cn(){if(!vt){ho(!0);for(const e in Ye)an(e,t=>{const n=t.data,l=t.provider,o=n.prefix,i=be(l,o);if(!mt(i,n).length)return !1;const a=n.lastModified||-1;return i.lastModifiedCached=i.lastModifiedCached?Math.min(i.lastModifiedCached,a):a,!0});}}function mo(e,t){const n=e.lastModifiedCached;if(n&&n>=t)return n===t;if(e.lastModifiedCached=t,n)for(const l in Ye)an(l,o=>{const i=o.data;return o.provider!==e.provider||i.prefix!==e.prefix||i.lastModified===t});return !0}function go(e,t){vt||cn();function n(l){let o;if(!Ye[l]||!(o=rn(l)))return;const i=ln[l];let a;if(i.size)i.delete(a=Array.from(i).shift());else if(a=ut(o),!dt(o,a+1))return;const p={cached:Math.floor(Date.now()/sn),provider:e.provider,data:t};return _t(o,Ee+a.toString(),JSON.stringify(p))}t.lastModified&&!mo(e,t.lastModified)||Object.keys(t.icons).length&&(t.not_found&&(t=Object.assign({},t),delete t.not_found),n("local")||n("session"));}function Ut(){}function yo(e){e.iconsLoaderFlag||(e.iconsLoaderFlag=!0,setTimeout(()=>{e.iconsLoaderFlag=!1,io(e);}));}function wo(e,t){e.iconsToLoad?e.iconsToLoad=e.iconsToLoad.concat(t).sort():e.iconsToLoad=t,e.iconsQueueFlag||(e.iconsQueueFlag=!0,setTimeout(()=>{e.iconsQueueFlag=!1;const{provider:n,prefix:l}=e,o=e.iconsToLoad;delete e.iconsToLoad;let i;if(!o||!(i=at(n)))return;i.prepare(n,l,o).forEach(p=>{po(n,p,f=>{if(typeof f!="object")p.icons.forEach(c=>{e.missing.add(c);});else try{const c=mt(e,f);if(!c.length)return;const r=e.pendingIcons;r&&c.forEach(u=>{r.delete(u);}),go(e,f);}catch{}yo(e);});});}));}const _o=(e,t)=>{const n=ro(e,!0,Zt()),l=oo(n);if(!l.pending.length){let f=!0;return t&&setTimeout(()=>{f&&t(l.loaded,l.missing,l.pending,Ut);}),()=>{f=!1;}}const o=Object.create(null),i=[];let a,p;return l.pending.forEach(f=>{const{provider:c,prefix:r}=f;if(r===p&&c===a)return;a=c,p=r,i.push(be(c,r));const u=o[c]||(o[c]=Object.create(null));u[r]||(u[r]=[]);}),l.pending.forEach(f=>{const{provider:c,prefix:r,name:u}=f,v=be(c,r),y=v.pendingIcons||(v.pendingIcons=new Set);y.has(u)||(y.add(u),o[c][r].push(u));}),i.forEach(f=>{const{provider:c,prefix:r}=f;o[c][r].length&&wo(f,o[c][r]);}),t?lo(t,l,i):Ut};function vo(e,t){const n={...e};for(const l in t){const o=t[l],i=typeof o;l in Qt?(o===null||o&&(i==="string"||i==="number"))&&(n[l]=o):i===typeof n[l]&&(n[l]=l==="rotate"?o%4:o);}return n}const bo=/[\s,]+/;function ko(e,t){t.split(bo).forEach(n=>{switch(n.trim()){case"horizontal":e.hFlip=!0;break;case"vertical":e.vFlip=!0;break}});}function Co(e,t=0){const n=e.replace(/^-?[0-9.]*/,"");function l(o){for(;o<0;)o+=4;return o%4}if(n===""){const o=parseInt(e);return isNaN(o)?0:l(o)}else if(n!==e){let o=0;switch(n){case"%":o=25;break;case"deg":o=90;}if(o){let i=parseFloat(e.slice(0,e.length-n.length));return isNaN(i)?0:(i=i/o,i%1===0?l(i):0)}}return t}function To(e,t){let n=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const l in t)n+=" "+l+'="'+t[l]+'"';return '<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+e+"</svg>"}function xo(e){return e.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function So(e){return "data:image/svg+xml,"+xo(e)}function Io(e){return 'url("'+So(e)+'")'}const Ht={...en,inline:!1},Mo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},Lo={display:"inline-block"},pt={backgroundColor:"currentColor"},dn={backgroundColor:"transparent"},Ft={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},$t={webkitMask:pt,mask:pt,background:dn};for(const e in $t){const t=$t[e];for(const n in Ft)t[e+n]=Ft[n];}const qe={};["horizontal","vertical"].forEach(e=>{const t=e.slice(0,1)+"Flip";qe[e+"-flip"]=t,qe[e.slice(0,1)+"-flip"]=t,qe[e+"Flip"]=t;});function Bt(e){return e+(e.match(/^[-0-9.]+$/)?"px":"")}const Gt=(e,t)=>{const n=vo(Ht,t),l={...Mo},o=t.mode||"svg",i={},a=t.style,p=typeof a=="object"&&!(a instanceof Array)?a:{};for(let m in t){const h=t[m];if(h!==void 0)switch(m){case"icon":case"style":case"onLoad":case"mode":break;case"inline":case"hFlip":case"vFlip":n[m]=h===!0||h==="true"||h===1;break;case"flip":typeof h=="string"&&ko(n,h);break;case"color":i.color=h;break;case"rotate":typeof h=="string"?n[m]=Co(h):typeof h=="number"&&(n[m]=h);break;case"ariaHidden":case"aria-hidden":h!==!0&&h!=="true"&&delete l["aria-hidden"];break;default:{const C=qe[m];C?(h===!0||h==="true"||h===1)&&(n[C]=!0):Ht[m]===void 0&&(l[m]=h);}}}const f=Gn(e,n),c=f.attributes;if(n.inline&&(i.verticalAlign="-0.125em"),o==="svg"){l.style={...i,...p},Object.assign(l,c);let m=0,h=t.id;return typeof h=="string"&&(h=h.replace(/-/g,"_")),l.innerHTML=zn(f.body,h?()=>h+"ID"+m++:"iconifyVue"),vue.h("svg",l)}const{body:r,width:u,height:v}=e,y=o==="mask"||(o==="bg"?!1:r.indexOf("currentColor")!==-1),w=To(r,{...c,width:u+"",height:v+""});return l.style={...i,"--svg":Io(w),width:Bt(c.width),height:Bt(c.height),...Lo,...y?pt:dn,...p},vue.h("span",l)};Zt(!0);Jn("",no);if(typeof document<"u"&&typeof window<"u"){cn();const e=window;if(e.IconifyPreload!==void 0){const t=e.IconifyPreload;typeof t=="object"&&t!==null&&(t instanceof Array?t:[t]).forEach(l=>{try{typeof l!="object"||l===null||l instanceof Array||typeof l.icons!="object"||typeof l.prefix!="string"||Hn(l);}catch{}});}if(e.IconifyProviders!==void 0){const t=e.IconifyProviders;if(typeof t=="object"&&t!==null)for(let n in t){try{const o=t[n];if(typeof o!="object"||!o||o.resources===void 0)continue;Kn(n,o);}catch{}}}}const Ro={...Xe,body:""},ee=vue.defineComponent({inheritAttrs:!1,data(){return {iconMounted:!1,counter:0}},mounted(){this._name="",this._loadingIcon=null,this.iconMounted=!0;},unmounted(){this.abortLoading();},methods:{abortLoading(){this._loadingIcon&&(this._loadingIcon.abort(),this._loadingIcon=null);},getIcon(e,t){if(typeof e=="object"&&e!==null&&typeof e.body=="string")return this._name="",this.abortLoading(),{data:e};let n;if(typeof e!="string"||(n=Ke(e,!1,!0))===null)return this.abortLoading(),null;const l=An(n);if(!l)return (!this._loadingIcon||this._loadingIcon.name!==e)&&(this.abortLoading(),this._name="",l!==null&&(this._loadingIcon={name:e,abort:_o([n],()=>{this.counter++;})})),null;this.abortLoading(),this._name!==e&&(this._name=e,t&&t(e));const o=["iconify"];return n.prefix!==""&&o.push("iconify--"+n.prefix),n.provider!==""&&o.push("iconify--"+n.provider),{data:l,classes:o}}},render(){this.counter;const e=this.$attrs,t=this.iconMounted?this.getIcon(e.icon,e.onLoad):null;if(!t)return Gt(Ro,e);let n=e;return t.classes&&(n={...e,class:(typeof e.class=="string"?e.class+" ":"")+t.classes.join(" ")}),Gt({...Xe,...t.data},n)}}),Oo={class:"display-type"},No={style:{position:"relative"}},Po={key:0,class:"type-list"},Eo=vue.defineComponent({__name:"BaseSelect",props:{displayType:{}},emits:["update:displayType"],setup(e,{emit:t}){const n=e,l=t;let o=vue.reactive({showChangeDisplayType:!1,lastDisplayType:null});function i(f){[P.New,P.Like].includes(n.displayType)||(o.lastDisplayType=n.displayType),l("update:displayType",f),o.showChangeDisplayType=!1;}function a(){if([P.New,P.Like].includes(n.displayType))return i(o.lastDisplayType??P.FloorInFloorNoCallUser);o.showChangeDisplayType=!o.showChangeDisplayType;}const p=vue.computed(()=>{let f=n.displayType;switch([P.New,P.Like].includes(n.displayType)&&(f=o.lastDisplayType),f){case P.FloorInFloorNoCallUser:return "楼中楼";case P.FloorInFloor:return "楼中楼(@)";case P.FloorInFloorNested:return "冗余楼中楼";case P.V2exOrigin:return "V2原版";case P.OnlyOp:return "只看楼主";default:return "楼中楼"}});return (f,c)=>(vue.openBlock(),vue.createElementBlock("div",Oo,[vue.createElementVNode("div",{class:vue.normalizeClass(["type",f.displayType===vue.unref(P).New&&"active"]),onClick:c[0]||(c[0]=r=>i(vue.unref(P).New))},"最新 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["type",f.displayType===vue.unref(P).Like&&"active"]),onClick:c[1]||(c[1]=r=>i(vue.unref(P).Like))},"最热 ",2),vue.createElementVNode("div",No,[vue.createElementVNode("div",{class:vue.normalizeClass(["type",![vue.unref(P).New,vue.unref(P).Like].includes(f.displayType)&&"active"]),onClick:a},[vue.createElementVNode("span",null,vue.toDisplayString(p.value),1),vue.createVNode(vue.unref(ee),{icon:"mingcute:down-line"})],2),vue.unref(o).showChangeDisplayType?(vue.openBlock(),vue.createElementBlock("div",Po,[vue.createElementVNode("div",{class:vue.normalizeClass(["item",f.displayType===vue.unref(P).FloorInFloorNoCallUser&&"active"]),onClick:c[2]||(c[2]=vue.withModifiers(r=>i(vue.unref(P).FloorInFloorNoCallUser),["stop"]))},"楼中楼 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["item",f.displayType===vue.unref(P).FloorInFloor&&"active"]),onClick:c[3]||(c[3]=vue.withModifiers(r=>i(vue.unref(P).FloorInFloor),["stop"]))},"楼中楼(@) ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["item",f.displayType===vue.unref(P).FloorInFloorNested&&"active"]),onClick:c[4]||(c[4]=vue.withModifiers(r=>i(vue.unref(P).FloorInFloorNested),["stop"]))},"冗余楼中楼 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["item",f.displayType===vue.unref(P).OnlyOp&&"active"]),onClick:c[5]||(c[5]=vue.withModifiers(r=>i(vue.unref(P).OnlyOp),["stop"]))},"只看楼主 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["item",f.displayType===vue.unref(P).V2exOrigin&&"active"]),onClick:c[6]||(c[6]=vue.withModifiers(r=>i(vue.unref(P).V2exOrigin),["stop"]))},"V2原版 ",2)])):vue.createCommentVNode("",!0)])]))}});const bt=J(Eo,[["__scopeId","data-v-e4f684be"]]),_={eventMap:new Map,on(e,t){let n=this.eventMap.get(e);n?n.push(t):n=[t],this.eventMap.set(e,n);},offOne(e,t){let n=this.eventMap.get(e);if(n){let l=n.findIndex(o=>o===t);l>-1&&n.splice(l,1);}this.eventMap.set(e,n);},emit(e,t){let n=this.eventMap.get(e);n&&n.map(l=>l(t));},off(e){this.eventMap.has(e)&&this.eventMap.delete(e);},clear(){this.eventMap=new Map;}},b={SHOW_TOOLTIP:"SHOW_TOOLTIP",SHOW_MSG:"SHOW_MSG",SET_CALL:"SET_CALL",SHOW_CALL:"SHOW_CALL",REFRESH_ONCE:"REFRESH_ONCE",ADD_REPLY:"ADD_REPLY",IGNORE:"IGNORE",MERGE:"MERGE",REMOVE:"REMOVE",CHANGE_COMMENT_THANK:"CHANGE_COMMENT_THANK",CHANGE_POST_THANK:"CHANGE_POST_THANK",ADD_TAG:"ADD_TAG",REMOVE_TAG:"REMOVE_TAG",RELATION_REPLY:"RELATION_REPLY",JUMP:"JUMP",REFRESH_POST:"REFRESH_POST",SHOW_CONFIRM_MODAL:"SHOW_CONFIRM_MODAL",SHOW_CONFIRM_MODAL_CONFIRM:"SHOW_CONFIRM_MODAL_CONFIRM"},Vo={name:"PopConfirm",props:{title:{type:String,default(){return ""}},disabled:{type:Boolean,default(){return !1}}},data(){return {id:""}},created(){},methods:{cb(e){e===this.id&&(this.$emit("confirm"),this.id="");},showPop(e){if(this.disabled)return;let t=e.target.getBoundingClientRect();this.id=Date.now(),_.emit(b.SHOW_CONFIRM_MODAL,{title:this.title,rect:t,id:this.id}),_.offOne(b.SHOW_CONFIRM_MODAL_CONFIRM,this.cb),_.on(b.SHOW_CONFIRM_MODAL_CONFIRM,this.cb);}},unmounted(){_.offOne(b.SHOW_CONFIRM_MODAL_CONFIRM,this.cb);}};function Do(e,t,n,l,o,i){return vue.openBlock(),vue.createElementBlock("span",{onClick:t[0]||(t[0]=vue.withModifiers((...a)=>i.showPop&&i.showPop(...a),["stop"]))},[vue.renderSlot(e.$slots,"default")])}const Ue=J(Vo,[["render",Do]]),Ao=vue.defineComponent({__name:"BaseLoading",props:{size:{default:"normal"}},setup(e){return (t,n)=>(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["loading",[t.size]])},null,2))}});const Ze=J(Ao,[["__scopeId","data-v-2697baa2"]]),Uo={key:1,class:"key-notice"},Ho={class:"key"},Fo=vue.defineComponent({__name:"BaseButton",props:{keyboard:{},active:{type:Boolean},disabled:{type:Boolean},loading:{type:Boolean},size:{default:"normal"},type:{default:"primary"}},emits:["click"],setup(e){return (t,n)=>(vue.openBlock(),vue.createBlock(Ae,{disabled:!t.keyboard,title:`快捷键: ${t.keyboard}`},{default:vue.withCtx(()=>[vue.createElementVNode("div",vue.mergeProps({class:"base-button"},t.$attrs,{onClick:n[0]||(n[0]=l=>!t.disabled&&!t.loading&&t.$emit("click",l)),class:[t.active&&"active",t.size,t.type,(t.disabled||t.loading)&&"disabled",!t.disabled&&"hvr-grow"]}),[vue.createElementVNode("span",{style:vue.normalizeStyle({opacity:t.loading?0:1})},[vue.renderSlot(t.$slots,"default",{},void 0,!0)],4),t.loading?(vue.openBlock(),vue.createBlock(Ze,{key:0,size:"small"})):vue.createCommentVNode("",!0),t.keyboard?(vue.openBlock(),vue.createElementBlock("div",Uo,[vue.createElementVNode("span",Ho,vue.toDisplayString(t.keyboard),1)])):vue.createCommentVNode("",!0)],16)]),_:3},8,["disabled","title"]))}});const ge=J(Fo,[["__scopeId","data-v-5a7d79ba"]]);const $o={name:"Setting",components:{BaseButton:ge,PopConfirm:Ue,Icon:ee,BaseSelect:bt,BaseSwitch:ht,Tooltip:Ae},inject:["isNight"],props:{show:{type:Boolean,default(){return !1}}},data(){return {tabIndex:0}},methods:{confirm(){this.close(),this.$emit("confirm");},close(){this.$emit("update:show",!1);}}},un=e=>(vue.pushScopeId("data-v-cb13d533"),e=e(),vue.popScopeId(),e),Bo={key:0,class:"setting-modal modal"},Go={class:"modal-root"},Wo={class:"modal-header"},jo=un(()=>vue.createElementVNode("div",{class:"title"}," 使用需知 ",-1)),qo={class:"body"},zo=un(()=>vue.createElementVNode("div",{class:"modal-content"},[vue.createElementVNode("div",null,"开启此功能会带来以下影响"),vue.createElementVNode("div",null,"缺点"),vue.createElementVNode("div",{style:{color:"red"}},[vue.createElementVNode("div",null,"1、你的IP可能会被封禁"),vue.createElementVNode("div",null,"2、消耗更多流量，给服务器带来更大的负担"),vue.createElementVNode("div",null,"3、你的V站浏览进度条会变快")]),vue.createElementVNode("div",null,"优点"),vue.createElementVNode("div",null,"1、卡片模式，无需打开主题即可查看内容"),vue.createElementVNode("div",null,"2、打开主题时提前预览正文内容，无需等待加载"),vue.createElementVNode("div",null,"原理"),vue.createElementVNode("div",null,"1、解析列表所有主题ID，批量调用show.json接口，获取对应主题的正文"),vue.createElementVNode("div",null,"2、请求的主题数据会缓存到本地，不会重复请求，超过3天的数据会删除"),vue.createElementVNode("div",null,"3、前面4条会并发请求，4条以后的一秒请求一条")],-1)),Jo={class:"btns"};function Ko(e,t,n,l,o,i){const a=vue.resolveComponent("Icon"),p=vue.resolveComponent("BaseButton");return vue.openBlock(),vue.createBlock(vue.Transition,null,{default:vue.withCtx(()=>[n.show?(vue.openBlock(),vue.createElementBlock("div",Bo,[vue.createElementVNode("div",{class:"mask",onClick:t[0]||(t[0]=(...f)=>i.close&&i.close(...f))}),vue.createElementVNode("div",Go,[vue.createElementVNode("div",Wo,[jo,vue.createVNode(a,{icon:"ic:round-close",onClick:i.close},null,8,["onClick"])]),vue.createElementVNode("div",qo,[zo,vue.createElementVNode("div",Jo,[vue.createVNode(p,{type:"link",onClick:i.close},{default:vue.withCtx(()=>[vue.createTextVNode("不同意")]),_:1},8,["onClick"]),vue.createVNode(p,{onClick:i.confirm},{default:vue.withCtx(()=>[vue.createTextVNode("同意")]),_:1},8,["onClick"])])])])])):vue.createCommentVNode("",!0)]),_:1})}const Xo=J($o,[["render",Ko],["__scopeId","data-v-cb13d533"]]);const Yo={name:"Setting",components:{NoticeModal:Xo,PopConfirm:Ue,Icon:ee,BaseSelect:bt,BaseSwitch:ht,Tooltip:Ae},inject:["isNight"],props:{modelValue:{type:Object,default(){return {}}},show:{type:Boolean,default(){return !1}}},data(){return {tabIndex:0,config:window.clone(this.modelValue),showNotice:!1}},computed:{DefaultVal(){return he},CommentDisplayType(){return P},isNew(){return this.config.version<he.currentVersion}},watch:{config:{handler(e){e.topReplyLoveMinCount=Math.trunc(e.topReplyLoveMinCount),e.topReplyLoveMinCount<0&&(e.topReplyLoveMinCount=1),this.$emit("update:modelValue",e);},deep:!0}},methods:{close(){this.config.version<he.currentVersion&&(this.config.version=he.currentVersion),this.$emit("update:show",!1);}}},A=e=>(vue.pushScopeId("data-v-9f347886"),e=e(),vue.popScopeId(),e),Zo={key:0,class:"setting-modal modal"},Qo={class:"modal-root"},ei={class:"modal-header"},ti={class:"title"},ni={class:"small"},oi=["href"],ii={class:"body"},si={class:"left"},li={class:"tabs"},ri=A(()=>vue.createElementVNode("span",null,"列表设置",-1)),ai=[ri],ci=A(()=>vue.createElementVNode("span",null,"主题设置",-1)),di=[ci],ui=A(()=>vue.createElementVNode("span",null,"其他设置",-1)),pi=[ui],fi=A(()=>vue.createElementVNode("span",null,"关于脚本",-1)),hi=[fi],mi={class:"icons"},gi=["href"],yi=["href"],wi={class:"modal-content"},_i={class:"scroll"},vi={key:0},bi={class:"row"},ki=A(()=>vue.createElementVNode("label",{class:"item-title"},"列表展示方式",-1)),Ci={class:"wrapper"},Ti={class:"radio-group2"},xi=A(()=>vue.createElementVNode("div",{class:"desc danger"}," 提示：此项需要刷新页面才能生效 ",-1)),Si={class:"row"},Ii=A(()=>vue.createElementVNode("label",{class:"item-title"},"主题弹框显示",-1)),Mi={class:"wrapper"},Li=A(()=>vue.createElementVNode("div",{class:"desc"},[vue.createTextVNode(" 开启此选项后，主题会"),vue.createElementVNode("span",{class:"danger"},"始终"),vue.createTextVNode("以弹框的方式显示。优先级大于“新标签页打开链接” ")],-1)),Ri={class:"row"},Oi=A(()=>vue.createElementVNode("label",{class:"item-title"},"新标签页打开链接",-1)),Ni={class:"wrapper"},Pi=A(()=>vue.createElementVNode("div",{class:"desc"}," 网页上所有链接通过新标签页打开 ",-1)),Ei={class:"row"},Vi=A(()=>vue.createElementVNode("label",{class:"item-title"},"打开新标签页时立即切换过去",-1)),Di={class:"wrapper"},Ai={key:1},Ui={class:"row"},Hi=A(()=>vue.createElementVNode("label",{class:"item-title"},"显示回复展示方式",-1)),Fi={class:"wrapper"},$i={class:"row"},Bi=A(()=>vue.createElementVNode("label",{class:"item-title"},"回复展示方式",-1)),Gi={class:"wrapper"},Wi={class:"row"},ji=A(()=>vue.createElementVNode("label",{class:"item-title"},"单独打开主题时默认显示楼中楼",-1)),qi={class:"wrapper"},zi=A(()=>vue.createElementVNode("div",{class:"desc"}," 单独打开这种地址 https://v2ex.com/t/xxxx 时，是否默认显示楼中楼 ",-1)),Ji={class:"row"},Ki=A(()=>vue.createElementVNode("label",{class:"item-title"},"点击左右两侧透明处关闭主题详情弹框",-1)),Xi={class:"wrapper"},Yi={class:"row"},Zi=A(()=>vue.createElementVNode("label",{class:"item-title"},"正文超长自动折叠",-1)),Qi={class:"wrapper"},es={class:"row"},ts=A(()=>vue.createElementVNode("label",{class:"item-title"},"主题宽度",-1)),ns={class:"wrapper"},os=A(()=>vue.createElementVNode("div",{class:"desc"},[vue.createTextVNode(" 未设定此值时，则默认宽度为77rem。接受合法的width值： "),vue.createElementVNode("a",{href:"https://vue3js.cn/interview/css/em_px_rem_vh_vw.html#%E4%BA%8C%E3%80%81%E5%8D%95%E4%BD%8D",target:"_blank"},"rem、px、vw、vh(点此查看)"),vue.createTextVNode("。 vw代表屏幕百分比，如想要屏幕的66%，请填写66vw ")],-1)),is=A(()=>vue.createElementVNode("div",{class:"desc"}," 提示：此项设置以后，单独打开详情页时会出现主题突然变宽（窄）的问题，暂时无解 ",-1)),ss=A(()=>vue.createElementVNode("div",{class:"desc danger"}," 提示：此项需要刷新页面才能生效 ",-1)),ls=A(()=>vue.createElementVNode("div",{class:"row"},[vue.createElementVNode("label",{class:"main-title"},"高赞回复")],-1)),rs={class:"row"},as=A(()=>vue.createElementVNode("label",{class:"item-title"},"显示高赞回复",-1)),cs={class:"wrapper"},ds={class:"row"},us=A(()=>vue.createElementVNode("label",{class:"item-title"},"最多显示多少个高赞回复",-1)),ps={class:"wrapper"},fs={class:"row"},hs=A(()=>vue.createElementVNode("label",{class:"item-title"},"最少需要多少赞才能被判定为高赞",-1)),ms={class:"wrapper"},gs={key:2},ys={class:"row"},ws=A(()=>vue.createElementVNode("label",{class:"item-title"},"用户打标签(跨平台，数据保存在自己的记事本)：",-1)),_s={class:"wrapper"},vs={class:"row"},bs=A(()=>vue.createElementVNode("label",{class:"item-title"},"划词显示Base64解码框",-1)),ks={class:"wrapper"},Cs={class:"row"},Ts=A(()=>vue.createElementVNode("label",{class:"item-title"},"自动签到",-1)),xs={class:"wrapper"},Ss={class:"row"},Is=A(()=>vue.createElementVNode("label",{class:"item-title"},"自定义背景",-1)),Ms={class:"wrapper"},Ls=A(()=>vue.createElementVNode("div",{class:"desc"},[vue.createTextVNode(" 未设定此值时，则脚本就什么都不做，V站大部分页面背景颜色默认为 #e2e2e2，少部分页面有特定背景。接受一个合法的background值：例如"),vue.createElementVNode("a",{href:"https://developer.mozilla.org/zh-CN/docs/Web/CSS/background",target:"_blank"},"red、#ffffff、rgb(222,222,22)、url(test.jpg)、linear-gradient(to bottom right, #E55D87 0%, #5FC3E4  51%, #E55D87  100%)(点此查看)"),vue.createTextVNode("等等。 ")],-1)),Rs=A(()=>vue.createElementVNode("div",{class:"desc danger"}," 提示：此项需要刷新页面才能生效 ",-1)),Os={class:"row"},Ns=A(()=>vue.createElementVNode("label",{class:"item-title"},"收藏时提醒添加到书签",-1)),Ps={class:"wrapper"},Es=A(()=>vue.createElementVNode("div",{class:"desc"}," V站帐号一旦被封禁，则无法登录，无法查看账号收藏了 ",-1)),Vs={key:3},Ds=A(()=>vue.createElementVNode("h1",null,"V2EX Next",-1)),As={class:"project-desc"},Us=A(()=>vue.createElementVNode("div",null,[vue.createTextVNode(" 本项目完全开源，已支持移动端！"),vue.createElementVNode("b",null,"好用请大家多多点Star！")],-1)),Hs=A(()=>vue.createElementVNode("br",null,null,-1)),Fs={style:{"line-height":"2"}},$s=["href"],Bs=["href"],Gs=["href"],Ws=["href"],js=["href"],qs=["href"];function zs(e,t,n,l,o,i){const a=vue.resolveComponent("Icon"),p=vue.resolveComponent("BaseSwitch"),f=vue.resolveComponent("BaseSelect"),c=vue.resolveComponent("NoticeModal");return vue.openBlock(),vue.createBlock(vue.Transition,null,{default:vue.withCtx(()=>[n.show?(vue.openBlock(),vue.createElementBlock("div",Zo,[vue.createElementVNode("div",{class:"mask",onClick:t[0]||(t[0]=(...r)=>i.close&&i.close(...r))}),vue.createElementVNode("div",Qo,[vue.createElementVNode("div",ei,[vue.createElementVNode("div",ti,[vue.createTextVNode(" 脚本设置 "),vue.createElementVNode("div",ni,[vue.createElementVNode("a",{href:i.DefaultVal.mobileScript,target:"_blank"},"(脚本现已支持移动端！)",8,oi)])]),vue.createVNode(a,{icon:"ic:round-close",onClick:i.close},null,8,["onClick"])]),vue.createElementVNode("div",ii,[vue.createElementVNode("div",si,[vue.createElementVNode("div",li,[vue.createElementVNode("div",{class:vue.normalizeClass(["tab",o.tabIndex===0&&"active"]),onClick:t[1]||(t[1]=r=>o.tabIndex=0)},ai,2),vue.createElementVNode("div",{class:vue.normalizeClass(["tab",o.tabIndex===1&&"active"]),onClick:t[2]||(t[2]=r=>o.tabIndex=1)},di,2),vue.createElementVNode("div",{class:vue.normalizeClass(["tab",o.tabIndex===2&&"active"]),onClick:t[3]||(t[3]=r=>o.tabIndex=2)},pi,2),vue.createElementVNode("div",{class:vue.normalizeClass(["tab",o.tabIndex===3&&"active"]),onClick:t[4]||(t[4]=r=>o.tabIndex=3)},hi,2)]),vue.createElementVNode("div",mi,[vue.createElementVNode("a",{href:i.DefaultVal.git,target:"_blank"},[vue.createVNode(a,{icon:"mdi:github"})],8,gi),vue.createElementVNode("a",{href:i.DefaultVal.homeUrl,target:"_blank"},[vue.createVNode(a,{icon:"iconamoon:home-light"})],8,yi)])]),vue.createElementVNode("div",wi,[vue.createElementVNode("div",_i,[o.tabIndex===0?(vue.openBlock(),vue.createElementBlock("div",vi,[vue.createElementVNode("div",bi,[ki,vue.createElementVNode("div",Ci,[vue.createElementVNode("div",Ti,[vue.createElementVNode("div",{class:vue.normalizeClass(["radio",o.config.viewType==="simple"?"active":""]),onClick:t[5]||(t[5]=r=>o.config.viewType="simple")},"简洁 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["radio",o.config.viewType==="table"?"active":""]),onClick:t[6]||(t[6]=r=>o.config.viewType="table")},"表格 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["radio",o.config.viewType==="card"?"active":""]),onClick:t[7]||(t[7]=r=>o.showNotice=!0)},"卡片 ",2)])])]),xi,vue.createElementVNode("div",Si,[Ii,vue.createElementVNode("div",Mi,[vue.createVNode(p,{modelValue:o.config.clickPostItemOpenDetail,"onUpdate:modelValue":t[8]||(t[8]=r=>o.config.clickPostItemOpenDetail=r)},null,8,["modelValue"])])]),Li,vue.createElementVNode("div",Ri,[Oi,vue.createElementVNode("div",Ni,[vue.createVNode(p,{modelValue:o.config.newTabOpen,"onUpdate:modelValue":t[9]||(t[9]=r=>o.config.newTabOpen=r)},null,8,["modelValue"])])]),Pi,vue.createElementVNode("div",Ei,[Vi,vue.createElementVNode("div",Di,[vue.createVNode(p,{modelValue:o.config.newTabOpenActive,"onUpdate:modelValue":t[10]||(t[10]=r=>o.config.newTabOpenActive=r)},null,8,["modelValue"])])])])):vue.createCommentVNode("",!0),o.tabIndex===1?(vue.openBlock(),vue.createElementBlock("div",Ai,[vue.createElementVNode("div",Ui,[Hi,vue.createElementVNode("div",Fi,[vue.createVNode(p,{modelValue:o.config.showToolbar,"onUpdate:modelValue":t[11]||(t[11]=r=>o.config.showToolbar=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",$i,[Bi,vue.createElementVNode("div",Gi,[vue.createVNode(f,{"display-type":o.config.commentDisplayType,"onUpdate:displayType":t[12]||(t[12]=r=>o.config.commentDisplayType=r)},null,8,["display-type"])])]),vue.createElementVNode("div",Wi,[ji,vue.createElementVNode("div",qi,[vue.createVNode(p,{modelValue:o.config.autoOpenDetail,"onUpdate:modelValue":t[13]||(t[13]=r=>o.config.autoOpenDetail=r)},null,8,["modelValue"])])]),zi,vue.createElementVNode("div",Ji,[Ki,vue.createElementVNode("div",Xi,[vue.createVNode(p,{modelValue:o.config.closePostDetailBySpace,"onUpdate:modelValue":t[14]||(t[14]=r=>o.config.closePostDetailBySpace=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",Yi,[Zi,vue.createElementVNode("div",Qi,[vue.createVNode(p,{modelValue:o.config.contentAutoCollapse,"onUpdate:modelValue":t[15]||(t[15]=r=>o.config.contentAutoCollapse=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",es,[ts,vue.createElementVNode("div",ns,[vue.withDirectives(vue.createElementVNode("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=r=>o.config.postWidth=r)},null,512),[[vue.vModelText,o.config.postWidth]])])]),os,is,ss,ls,vue.createElementVNode("div",rs,[as,vue.createElementVNode("div",cs,[vue.createVNode(p,{modelValue:o.config.showTopReply,"onUpdate:modelValue":t[17]||(t[17]=r=>o.config.showTopReply=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",ds,[us,vue.createElementVNode("div",ps,[vue.withDirectives(vue.createElementVNode("input",{type:"number",min:"1","onUpdate:modelValue":t[18]||(t[18]=r=>o.config.topReplyCount=r)},null,512),[[vue.vModelText,o.config.topReplyCount]])])]),vue.createElementVNode("div",fs,[hs,vue.createElementVNode("div",ms,[vue.withDirectives(vue.createElementVNode("input",{type:"number",min:"1","onUpdate:modelValue":t[19]||(t[19]=r=>o.config.topReplyLoveMinCount=r)},null,512),[[vue.vModelText,o.config.topReplyLoveMinCount]])])])])):vue.createCommentVNode("",!0),o.tabIndex===2?(vue.openBlock(),vue.createElementBlock("div",gs,[vue.createElementVNode("div",ys,[ws,vue.createElementVNode("div",_s,[vue.createVNode(p,{modelValue:o.config.openTag,"onUpdate:modelValue":t[20]||(t[20]=r=>o.config.openTag=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",vs,[bs,vue.createElementVNode("div",ks,[vue.createVNode(p,{modelValue:o.config.base64,"onUpdate:modelValue":t[21]||(t[21]=r=>o.config.base64=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",Cs,[Ts,vue.createElementVNode("div",xs,[vue.createVNode(p,{modelValue:o.config.autoSignin,"onUpdate:modelValue":t[22]||(t[22]=r=>o.config.autoSignin=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",Ss,[Is,vue.createElementVNode("div",Ms,[vue.withDirectives(vue.createElementVNode("input",{type:"text","onUpdate:modelValue":t[23]||(t[23]=r=>o.config.customBgColor=r)},null,512),[[vue.vModelText,o.config.customBgColor]])])]),Ls,Rs,vue.createElementVNode("div",Os,[Ns,vue.createElementVNode("div",Ps,[vue.createVNode(p,{modelValue:o.config.collectBrowserNotice,"onUpdate:modelValue":t[24]||(t[24]=r=>o.config.collectBrowserNotice=r)},null,8,["modelValue"])])]),Es])):vue.createCommentVNode("",!0),o.tabIndex===3?(vue.openBlock(),vue.createElementBlock("div",Vs,[Ds,vue.createElementVNode("div",As,[Us,Hs,vue.createElementVNode("div",Fs,[vue.createElementVNode("div",null,[vue.createTextVNode("官网："),vue.createElementVNode("a",{href:i.DefaultVal.homeUrl,target:"_blank"},vue.toDisplayString(i.DefaultVal.homeUrl),9,$s)]),vue.createElementVNode("div",null,[vue.createTextVNode("GitHub地址："),vue.createElementVNode("a",{href:i.DefaultVal.git,target:"_blank"},vue.toDisplayString(i.DefaultVal.git),9,Bs)]),vue.createElementVNode("div",null,[vue.createTextVNode("PC脚本地址："),vue.createElementVNode("a",{href:i.DefaultVal.pcScript,target:"_blank"},vue.toDisplayString(i.DefaultVal.pcScript),9,Gs)]),vue.createElementVNode("div",null,[vue.createTextVNode("移动端脚本地址："),vue.createElementVNode("a",{href:i.DefaultVal.mobileScript,target:"_blank"},vue.toDisplayString(i.DefaultVal.mobileScript),9,Ws)]),vue.createElementVNode("div",null,[vue.createTextVNode("反馈: "),vue.createElementVNode("a",{href:i.DefaultVal.issue,target:"_blank"},vue.toDisplayString(i.DefaultVal.issue),9,js)]),vue.createElementVNode("div",null,[vue.createTextVNode("更新日志："),vue.createElementVNode("a",{href:i.DefaultVal.pcLog,target:"_blank"},vue.toDisplayString(i.DefaultVal.pcLog),9,qs)])])])])):vue.createCommentVNode("",!0)])])])]),vue.createVNode(c,{show:o.showNotice,"onUpdate:show":t[25]||(t[25]=r=>o.showNotice=r),onConfirm:t[26]||(t[26]=r=>o.config.viewType="card")},null,8,["show"])])):vue.createCommentVNode("",!0)]),_:1})}const Js=J(Yo,[["render",zs],["__scopeId","data-v-9f347886"]]),Ks={name:"Point",components:{PopConfirm:Ue,Icon:ee},inject:["post","isLogin"],props:{item:{type:Object,default(){return {}}},apiUrl:""},computed:{disabled(){return this.item.username===window.user.username||this.item.isThanked||!this.isLogin}},methods:{thankError(){if(!this.isLogin)return _.emit(b.SHOW_MSG,{type:"warning",text:"请先登录！"});if(this.item.username===window.user.username)return _.emit(b.SHOW_MSG,{type:"warning",text:"不能感谢自己"});if(this.item.isThanked)return _.emit(b.SHOW_MSG,{type:"warning",text:"已经感谢过了"})},async thank(){this.$emit("addThank");let e=`${window.baseUrl}/thank/${this.apiUrl}?once=${this.post.once}`;$.post(e).then(t=>{t.success||(this.$emit("recallThank"),_.emit(b.SHOW_MSG,{type:"error",text:t.message})),_.emit(b.REFRESH_ONCE,t.once);},t=>{this.$emit("recallThank"),_.emit(b.SHOW_MSG,{type:"error",text:"感谢失败"}),_.emit(b.REFRESH_ONCE);});}}},Xs={key:2,class:"link-num"},Ys={key:3};function Zs(e,t,n,l,o,i){const a=vue.resolveComponent("Icon"),p=vue.resolveComponent("PopConfirm");return vue.openBlock(),vue.createBlock(p,{disabled:i.disabled,title:`确认花费 10 个铜币向 @${n.item.username} 的这条回复发送感谢？`,onConfirm:i.thank},{default:vue.withCtx(()=>[vue.createElementVNode("div",{class:vue.normalizeClass(["tool",[i.disabled&&"disabled"]]),onClick:t[0]||(t[0]=(...f)=>i.thankError&&i.thankError(...f))},[n.item.isThanked?(vue.openBlock(),vue.createBlock(a,{key:0,color:"rgb(224,42,42)",icon:"icon-park-solid:like"})):(vue.openBlock(),vue.createBlock(a,{key:1,color:n.item.thankCount?"rgb(224,42,42)":null,icon:"icon-park-outline:like"},null,8,["color"])),n.item.thankCount?(vue.openBlock(),vue.createElementBlock("span",Xs,vue.toDisplayString(n.item.thankCount),1)):(vue.openBlock(),vue.createElementBlock("span",Ys,"感谢"))],2)]),_:1},8,["disabled","title","onConfirm"])}const Qe=J(Ks,[["render",Zs]]);const Qs={name:"Author",components:{PopConfirm:Ue,Point:Qe,Icon:ee},inject:["isLogin","tags","config","isNight"],props:{modelValue:!1,comment:{type:Object,default(){return {}}},type:{type:String,default(){return "list"}}},computed:{isDev(){return !1},pointInfo(){return {isThanked:this.comment.isThanked,thankCount:this.comment.thankCount,username:this.comment.username}},myTags(){return this.tags[this.comment.username]??[]},context(){return this.comment.replyUsers.length}},methods:{jump(){_.emit(b.JUMP,this.comment.floor);},showRelationReply(){if(!this.comment.replyUsers.length){_.emit(b.SHOW_MSG,{type:"warning",text:"该回复无上下文"});return}_.emit(b.RELATION_REPLY,{left:this.comment.replyUsers,right:this.comment.username,rightFloor:this.comment.floor});},addTag(){_.emit(b.ADD_TAG,this.comment.username);},removeTag(e){_.emit(b.REMOVE_TAG,{username:this.comment.username,tag:e});},checkIsLogin(e=""){return this.isLogin?(this.$emit(e),!0):(_.emit(b.SHOW_MSG,{type:"warning",text:"请先登录！"}),!1)},addThank(){_.emit(b.CHANGE_COMMENT_THANK,{id:this.comment.id,type:"add"});},recallThank(){_.emit(b.CHANGE_COMMENT_THANK,{id:this.comment.id,type:"recall"});}}},He=e=>(vue.pushScopeId("data-v-64aa1930"),e=e(),vue.popScopeId(),e),el={class:"Author-left"},tl=["href"],nl=["src"],ol={class:"texts"},il=["href"],sl={key:0,class:"owner"},ll={key:1,class:"dup"},rl={key:2,class:"mod"},al={class:"ago"},cl={class:"my-tag"},dl=He(()=>vue.createElementVNode("i",{class:"fa fa-tag"},null,-1)),ul=["onClick"],pl={class:"Author-right"},fl={key:0,class:"toolbar"},hl={class:"tool"},ml=He(()=>vue.createElementVNode("span",null,"隐藏",-1)),gl=He(()=>vue.createElementVNode("span",null,"上下文",-1)),yl=He(()=>vue.createElementVNode("span",null,"跳转",-1)),wl=He(()=>vue.createElementVNode("span",null,"回复",-1));function _l(e,t,n,l,o,i){const a=vue.resolveComponent("Icon"),p=vue.resolveComponent("PopConfirm"),f=vue.resolveComponent("Point");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["Author",{expand:!n.modelValue}])},[vue.createElementVNode("div",el,[n.modelValue?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createBlock(a,{key:0,onClick:t[0]||(t[0]=vue.withModifiers(c=>e.$emit("update:modelValue",!0),["stop"])),color:"#177EC9",class:"expand-icon",icon:"gravity-ui:chevrons-expand-up-right"})),i.config.viewType!=="simple"?(vue.openBlock(),vue.createElementBlock("a",{key:1,class:"avatar",href:`/member/${n.comment.username}`},[vue.createElementVNode("img",{src:n.comment.avatar,alt:""},null,8,nl)],8,tl)):vue.createCommentVNode("",!0),vue.createElementVNode("span",ol,[vue.createElementVNode("strong",null,[vue.createElementVNode("a",{href:`/member/${n.comment.username}`,class:vue.normalizeClass(["username",{dark:i.isNight}])},vue.toDisplayString(n.comment.username),11,il)]),n.comment.isOp?(vue.openBlock(),vue.createElementBlock("div",sl,"OP")):vue.createCommentVNode("",!0),n.comment.isDup?(vue.openBlock(),vue.createElementBlock("div",ll,"DUP")):vue.createCommentVNode("",!0),n.comment.isMod?(vue.openBlock(),vue.createElementBlock("div",rl,"MOD")):vue.createCommentVNode("",!0),vue.createElementVNode("span",al,vue.toDisplayString(n.comment.date),1),i.isLogin&&i.config.openTag?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:3},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.myTags,c=>(vue.openBlock(),vue.createElementBlock("span",cl,[dl,vue.createElementVNode("span",null,vue.toDisplayString(c),1),vue.createElementVNode("i",{class:"fa fa-trash-o remove",onClick:vue.withModifiers(r=>i.removeTag(c),["stop"])},null,8,ul)]))),256)),vue.createElementVNode("span",{class:"add-tag ago",onClick:t[1]||(t[1]=vue.withModifiers((...c)=>i.addTag&&i.addTag(...c),["stop"])),title:"添加标签"},"+")],64)):vue.createCommentVNode("",!0)])]),vue.createElementVNode("div",pl,[i.isLogin?(vue.openBlock(),vue.createElementBlock("div",fl,[vue.createVNode(p,{title:"确认隐藏这条回复?",onConfirm:t[2]||(t[2]=c=>e.$emit("hide"))},{default:vue.withCtx(()=>[vue.createElementVNode("div",hl,[vue.createVNode(a,{icon:"fluent:eye-hide-24-regular"}),ml])]),_:1}),i.context?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"tool",onClick:t[3]||(t[3]=vue.withModifiers((...c)=>i.showRelationReply&&i.showRelationReply(...c),["stop"]))},[vue.createVNode(a,{icon:"iconoir:page-search"}),gl])):vue.createCommentVNode("",!0),n.type==="top"?(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"tool",onClick:t[4]||(t[4]=vue.withModifiers((...c)=>i.jump&&i.jump(...c),["stop"]))},[vue.createVNode(a,{icon:"icon-park-outline:to-bottom"}),yl])):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"tool",onClick:t[5]||(t[5]=vue.withModifiers(c=>i.checkIsLogin("reply"),["stop"]))},[vue.createVNode(a,{icon:"mynaui:message"}),wl]),vue.withDirectives(vue.createVNode(f,{item:i.pointInfo,onAddThank:i.addThank,onRecallThank:i.recallThank,"api-url":"reply/"+n.comment.id},null,8,["item","onAddThank","onRecallThank","api-url"]),[[vue.vShow,!n.comment.thankCount]])])):vue.createCommentVNode("",!0),vue.withDirectives(vue.createVNode(f,{item:i.pointInfo,onAddThank:i.addThank,onRecallThank:i.recallThank,"api-url":"reply/"+n.comment.id},null,8,["item","onAddThank","onRecallThank","api-url"]),[[vue.vShow,n.comment.thankCount]]),vue.createElementVNode("div",{class:vue.normalizeClass(["floor",{isDev:i.isDev}])},vue.toDisplayString(n.comment.floor),3)])],2)}const pn=J(Qs,[["render",_l],["__scopeId","data-v-64aa1930"]]);const vl=e=>(vue.pushScopeId("data-v-b23e5528"),e=e(),vue.popScopeId(),e),bl={class:"get-cursor"},kl=["innerHTML"],Cl={class:"toolbar"},Tl={class:"left"},xl={class:"upload"},Sl={key:0,style:{color:"black","font-size":"1.4rem"}},Il={class:"right"},Ml=vl(()=>vue.createElementVNode("div",{class:"title"},"经典表情",-1)),Ll={class:"list"},Rl=["src","onClick"],Ol={class:"emoji"},Nl={class:"title"},Pl={class:"list"},El=["onClick"],Vl={__name:"PostEditor",props:{replyUser:null,replyFloor:null,useType:{type:String,default(){return "reply-comment"}}},emits:["close"],setup(e,{expose:t,emit:n}){const l=e,{replyUser:o,replyFloor:i,useType:a}=l,p=o?`@${o} #${i} `:"",f=n,c=vue.inject("post"),r=vue.inject("show"),u=vue.inject("isNight");vue.inject("pageType");const v=vue.inject("allReplyUsers");let y=vue.ref(!1);const w=vue.ref(!1),m=vue.ref(!1),h=vue.ref(!1),C=vue.ref("editorId_"+Date.now()),k=vue.ref(p),S=vue.ref(null),q=vue.ref(null),Y=vue.ref(null),E=vue.ref('<span style="white-space:pre-wrap;"> </span>'),G=[{title:"小黄脸",list:["😀","😁","😂","🤣","😅","😊","😋","😘","🥰","😗","🤩","🤔","🤨","😐","😑","🙄","😏","😪","😫","🥱","😜","😒","😔","😨","😰","😱","🥵","😡","🥳","🥺","🤭","🧐","😎","🤓","😭","🤑","🤮"]},{title:"手势",list:["🙋","🙎","🙅","🙇","🤷","🤏","👉","✌️","🤘","🤙","👌","🤌","👍","👎","👋","🤝","🙏","👏"]},{title:"庆祝",list:["✨","🎉","🎊"]},{title:"其他",list:["👻","🤡","🐔","👀","💩","🐴","🦄","🐧","🐶","🐒","🙈","🙉","🙊","🐵"]}],X=[{name:"[狗头]",low:"https://i.imgur.com/io2SM1h.png",high:"https://i.imgur.com/0icl60r.png"},{name:"[马]",low:"https://i.imgur.com/8EKZv7I.png",high:"https://i.imgur.com/ANFUX52.png"},{name:"[不高兴]",low:"https://i.imgur.com/huX6coX.png",high:"https://i.imgur.com/N7JEuvc.png"},{name:"[呵呵]",low:"https://i.imgur.com/RvoLAbX.png",high:"https://i.imgur.com/xSzIqrK.png"},{name:"[真棒]",low:"https://i.imgur.com/xr1UOz1.png",high:"https://i.imgur.com/w8YEw9Q.png"},{name:"[鄙视]",low:"https://i.imgur.com/u6jlqVq.png",high:"https://i.imgur.com/8JFNANq.png"},{name:"[疑问]",low:"https://i.imgur.com/F29pmQ6.png",high:"https://i.imgur.com/EbbTQAR.png"},{name:"[吐舌]",low:"https://i.imgur.com/InmIzl9.png",high:"https://i.imgur.com/Ovj56Cd.png"},{name:"[笑眼]",low:"https://i.imgur.com/ZveiiGy.png",high:"https://i.imgur.com/PI1CfEr.png"},{name:"[狂汗]",low:"https://i.imgur.com/veWihk6.png",high:"https://i.imgur.com/3LtHdQv.png"},{name:"[大哭]",low:"https://i.imgur.com/hu4oR6C.png",high:"https://i.imgur.com/b4X9XLE.png"},{name:"[喷]",low:"https://i.imgur.com/bkw3VRr.png",high:"https://i.imgur.com/wnZL13L.png"},{name:"[苦笑]",low:"https://i.imgur.com/VUWFktU.png",high:"https://i.imgur.com/NAfspZ1.png"},{name:"[喝酒]",low:"https://i.imgur.com/2ZZSapE.png",high:"https://i.imgur.com/rVbSVak.png"},{name:"[吃瓜]",low:"https://i.imgur.com/ee8Lq7H.png",high:"https://i.imgur.com/0L26og9.png"},{name:"[捂脸]",low:"https://i.imgur.com/krir4IG.png",high:"https://i.imgur.com/qqBqgVm.png"},{name:"[呕]",low:"https://i.imgur.com/6CUiUxv.png",high:"https://i.imgur.com/kgdxRsG.png"},{name:"[阴险]",low:"https://i.imgur.com/MA8YqTP.png",high:"https://i.imgur.com/e94jbaT.png"},{name:"[怒]",low:"https://i.imgur.com/n4kWfGB.png",high:"https://i.imgur.com/iMXxNxh.png"},{name:"[衰]",low:"https://i.imgur.com/voHFDyQ.png",high:"https://i.imgur.com/XffE6gu.png"},{name:"[合十]",low:"https://i.imgur.com/I8x3ang.png",high:"https://i.imgur.com/T4rJVee.png"},{name:"[赞]",low:"https://i.imgur.com/lG44yUl.png",high:"https://i.imgur.com/AoF5PLp.png"},{name:"[踩]",low:"https://i.imgur.com/cJp0uKZ.png",high:"https://i.imgur.com/1XYGfXj.png"},{name:"[爱心]",low:"https://i.imgur.com/sLENaF5.png",high:"https://i.imgur.com/dND56oX.png"},{name:"[心碎]",low:"https://i.imgur.com/AZxJzve.png",high:"https://i.imgur.com/RiUsPci.png"}],K=["3107b9ef8b316f3","442b04f26eefc8a","59cfebe717c09e4","60605aad4a62882","6c65ab1d3f5452a","83e123737849aa9","9311f6be1c10160","c4a4a563f698595","81be04b9e4a08ce"];t({content:k,isFocus:()=>y.value});const te=vue.computed(()=>[a,y.value?"isFocus":"",u.value?"isNight":""]),le=vue.computed(()=>{var O;if(!S.value||!k.value)return "";let F=((O=S.value)==null?void 0:O.selectionStart)||0;return k.value.substring(0,F).replace(/</g,"<").replace(/>/g,">").replace(/\n/g,"<br/>").replace(/\s/g,E.value)}),pe=vue.computed(()=>k.value?k.value===p:!0);function we(F){F.preventDefault(),Fe(F.dataTransfer.files[0]);}async function Fe(F){if(!F||m.value)return;m.value=!0;const O=new FormData;O.append("image",F);const U=Math.floor(Math.random()*K.length),z=K[U],Z=await fetch("https://api.imgur.com/3/upload",{method:"POST",headers:{Authorization:`Client-ID ${z}`},body:O});if(m.value=!1,Z.ok){const W=await Z.json();if(W.success)return tt(" "+W.data.link+" ")}_.emit(b.SHOW_MSG,{type:"error",text:"上传失败"});}async function ke(){if(pe.value||w.value)return;w.value=!0;let F=k.value.replace(/\[((?!\[).)+\]/g,function(W){let oe=X.find(_e=>_e.name===W);return oe?oe.low+" ":W}),O=k.value.replace(/https?:\/\/(i\.)?imgur\.com\/((?!http).)+\.(gif|png|jpg|jpeg|GIF|PNG|JPG|JPEG)/g,function(W){return `<img src="${W}" data-originUrl="${W}" data-notice="这个img标签由v2ex-超级增强脚本解析" style="max-width: 100%">`});O=O.replace(/\[((?!\[).)+\]/g,function(W){let oe=X.find(_e=>_e.name===W);return oe?`<a target="_blank" href="${oe.low}" rel="nofollow noopener"><img src="${oe.low}" class="embedded_image" rel="noreferrer"></a> `:W});let U=O.match(/@([\w]+?[\s])/g);U&&U.map(W=>{let oe=W.replace("@","").replace(" ","");O=O.replace(oe,`<a href="/member/${oe}">${oe}</a>`);}),O=O.replaceAll(`
`,"<br/>");let z={thankCount:0,isThanked:!1,isOp:c.value.username===window.user.username,isDup:!1,id:Date.now(),username:window.user.username,avatar:window.user.avatar,date:"几秒前",floor:c.value.replyCount+1,reply_content:O??"",children:[],replyUsers:o?[o]:[],replyFloor:i||-1,level:a==="reply-comment"?1:0};z.hideCallUserReplyContent=z.reply_content,z.replyUsers.length===1&&(z.hideCallUserReplyContent=z.reply_content.replace(/@<a href="\/member\/[\s\S]+?<\/a>(\s#[\d]+)?\s(<br>)?/,()=>""));let Z=`${window.baseUrl}/t/${c.value.id}`;$.post(Z,{content:F,once:c.value.once}).then(W=>{w.value=!1;let oe=W.search("你上一条回复的内容和这条相同");if(oe>-1)return _.emit(b.SHOW_MSG,{type:"error",text:"你上一条回复的内容和这条相同"});if(oe=W.search("请不要在每一个回复中都包括外链，这看起来像是在 spamming"),oe>-1)return _.emit(b.SHOW_MSG,{type:"error",text:"请不要在每一个回复中都包括外链，这看起来像是在 spamming"});if(W.search("创建新回复")>-1){_.emit(b.REFRESH_ONCE,W),_.emit(b.SHOW_MSG,{type:"error",text:"回复出现了问题，请使用原版进行回复"});let $e=window.document.body.clientWidth,Be=1200,_n=$e/2-Be/2,Mt=window.open("创建新回复","",`width=${Be},height=600,left=${_n},top=100`);Mt.document.write(W);let vn=setInterval(function(){Mt.closed&&(clearInterval(vn),_.emit(b.REFRESH_POST));},1e3);return}k.value=p,f("close"),_.emit(b.REFRESH_ONCE,W),_.emit(b.SHOW_MSG,{type:"success",text:"回复成功"}),_.emit(b.ADD_REPLY,z);},W=>{w.value=!1,_.emit(b.SHOW_MSG,{type:"error",text:"回复失败"});}).catch(W=>{});}function Se(F){if(h.value)return h.value=!1;let O=F.currentTarget.getBoundingClientRect();Y.value.style.left=O.left+30+"px",Y.value.style.bottom=window.innerHeight-O.top-20+"px",h.value=!0;}function re(){_.emit(b.SHOW_CALL,{show:!1}),_.off(b.SET_CALL);}function xt(){S.value.style.height=0,S.value.style.height=S.value.scrollHeight+"px";}function tt(F){let O=S.value.selectionStart,U=k.value.slice(0,O),z=k.value.slice(O,k.value.length);k.value=U+F+z;let Z=U.length+F.length;setTimeout(()=>{S.value.focus(),S.value.setSelectionRange(Z,Z),xt();});}function Ie(F){let O=q.value.getBoundingClientRect();_.emit(b.SHOW_CALL,{show:!0,top:O.top,left:O.left,text:F}),_.off(b.SET_CALL),_.on(b.SET_CALL,U=>{let z=S.value.selectionStart,Z=k.value.slice(0,z),W=k.value.slice(z,k.value.length),oe=Z.lastIndexOf("@");Z=k.value.slice(0,oe+1),U==="管理员"&&(U="Livid @Kai @Olivia @GordianZ @sparanoid @drymonfidelia"),U==="所有人"&&(U=v.value.map(($e,Be)=>Be?"@"+$e:$e).join(" ")),k.value=Z+U+" "+W;let _e=Z.length+U.length+1;setTimeout(()=>{S.value.setSelectionRange(_e,_e),xt();}),_.off(b.SET_CALL);});}function gn(F){switch(F.keyCode){case 8:k.value==="@"&&re();break;case 37:case 38:case 39:case 40:setTimeout(()=>St({data:""}),100);break;case 27:return F.preventDefault(),F.stopPropagation(),F.stopImmediatePropagation(),!1;case 13:F.ctrlKey&&ke(),F.metaKey&&ke();break}}function St(F){let O=S.value.selectionStart;if(k.value){if(F.data===" ")return re();if(F.data==="@"){if(k.value.length!==1){if(k.value[O-2]===" "||k.value[O-2]===`
`)return Ie("")}else return Ie("");re();}else {let U=k.value.slice(0,O),z=U.lastIndexOf("@");if(z===-1)return re();let Z=U.slice(z,O);if(Z.includes(" "))re();else {if(z===0)return Ie(Z.replace("@",""));if(k.value.length!==1){if(k.value[z-1]===" "||k.value[z-1]===`
`)return Ie(Z.replace("@",""))}else return Ie(Z.replace("@",""));re();}}}}function It(F){const O=F.clipboardData.items,U=[].slice.call(O).filter(function(W){return W.type.indexOf("image")!==-1});if(U.length===0)return;const Z=U[0].getAsFile();Fe(Z);}function yn(){document.removeEventListener("paste",It),y.value=!1;}function wn(){document.addEventListener("paste",It);}return vue.watch(()=>r,F=>{F.value&&(h.value=!1);},{deep:!0}),vue.onMounted(()=>{$(`.${C.value}`).each(function(){this.setAttribute("style","height:"+this.scrollHeight+"px;overflow-y:hidden;");}).on("input",function(){this.style.height=0,this.style.height=this.scrollHeight+"px";}),a==="reply-comment"&&S.value&&S.value.focus();}),vue.onBeforeUnmount(()=>{$(`.${C.value}`).off();}),(F,O)=>(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["post-editor-wrapper",te.value])},[vue.withDirectives(vue.createElementVNode("textarea",{class:vue.normalizeClass(["post-editor",C.value]),ref_key:"txtRef",ref:S,onFocus:O[0]||(O[0]=U=>vue.isRef(y)?y.value=!0:y=!0),onBlur:yn,onFocusin:wn,placeholder:"请尽量让自己的回复能够对别人有帮助",onInput:St,onKeydown:gn,onDrop:we,"onUpdate:modelValue":O[1]||(O[1]=U=>k.value=U)},null,34),[[vue.vModelText,k.value]]),vue.createElementVNode("div",bl,[vue.createElementVNode("span",{innerHTML:le.value},null,8,kl),vue.createElementVNode("span",{class:"cursor",ref_key:"cursorRef",ref:q},"|",512)]),vue.createElementVNode("div",Cl,[vue.createElementVNode("div",Tl,[vue.createVNode(vue.unref(ee),{onClick:vue.withModifiers(Se,["stop"]),icon:"streamline:smiley-happy"}),vue.createElementVNode("div",xl,[vue.createElementVNode("input",{type:"file",accept:"image/*",onChange:O[2]||(O[2]=U=>Fe(U.currentTarget.files[0]))},null,32),vue.createVNode(vue.unref(ee),{icon:"lets-icons:img-load-box-fill"})]),m.value?(vue.openBlock(),vue.createElementBlock("span",Sl,"上传中.....")):vue.createCommentVNode("",!0)]),vue.createElementVNode("div",Il,[vue.unref(a)==="reply-comment"?(vue.openBlock(),vue.createBlock(ge,{key:0,type:"link",size:"small",style:{"margin-right":"1rem",cursor:"pointer"},onClick:O[3]||(O[3]=vue.withModifiers(U=>f("close"),["stop"]))},{default:vue.withCtx(()=>[vue.createTextVNode(" 关闭 ")]),_:1})):vue.createCommentVNode("",!0),vue.createVNode(ge,{size:"small",disabled:pe.value,loading:w.value,onClick:vue.withModifiers(ke,["stop"])},{default:vue.withCtx(()=>[vue.createTextVNode("回复 ")]),_:1},8,["disabled","loading"])])]),vue.withDirectives(vue.createElementVNode("div",{class:"emoticon-pack",ref_key:"emoticonsRef",ref:Y},[vue.createVNode(vue.unref(ee),{icon:"ic:round-close",onClick:O[4]||(O[4]=vue.withModifiers(U=>h.value=!1,["stop"]))}),Ml,vue.createElementVNode("div",Ll,[(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,vue.renderList(X,U=>vue.createElementVNode("img",{src:U.high,onClick:vue.withModifiers(z=>{tt(U.name),h.value=!1;},["stop"])},null,8,Rl)),64))]),vue.createElementVNode("div",Ol,[(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,vue.renderList(G,U=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createElementVNode("div",Nl,vue.toDisplayString(U.title),1),vue.createElementVNode("div",Pl,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(U.list,z=>(vue.openBlock(),vue.createElementBlock("span",{onClick:vue.withModifiers(Z=>{tt(z),h.value=!1;},["stop"])},vue.toDisplayString(z),9,El))),256))])],64))),64))])],512),[[vue.vShow,h.value]])],2))}},kt=J(Vl,[["__scopeId","data-v-b23e5528"]]);const Dl={key:0,class:"html-wrapper"},Al=["innerHTML"],Ul=900,Hl={__name:"BaseHtmlRender",props:["html"],setup(e){const t=vue.inject("config"),n=e,l=vue.ref(null),o=vue.ref(!1),i=vue.ref(!1);function a(f){if(!t.value.base64)return;let c=window.win().getSelection().toString();if(c){let r=c.match(/([A-Za-z0-9+/=]+)/g);if(r){if(r[0].length<4)return;_.emit(b.SHOW_TOOLTIP,{text:r[0],e:f});}}}vue.watch(t.value,f=>{f.contentAutoCollapse||(o.value=!1);}),vue.watch([()=>l.value,()=>n.html],()=>{!l.value||!n.html||t.value.contentAutoCollapse&&(l.value.querySelectorAll("img").forEach(f=>{f.removeEventListener("load",p),f.addEventListener("load",p);}),p());},{immediate:!0,flush:"post"});function p(){if(i.value)return;let f=l.value.getBoundingClientRect();o.value=f.height>=Ul;}return (f,c)=>n.html?(vue.openBlock(),vue.createElementBlock("div",Dl,[vue.createElementVNode("div",{class:vue.normalizeClass({mask:o.value})},[vue.createElementVNode("div",{ref_key:"contentRef",ref:l,innerHTML:n.html,onMouseup:a},null,40,Al)],2),o.value?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"expand",onClick:c[0]||(c[0]=r=>{o.value=!1,i.value=!0;})},"展开")):vue.createCommentVNode("",!0)])):vue.createCommentVNode("",!0)}},et=J(Hl,[["__scopeId","data-v-2c9a538c"]]);const Fl={name:"TopSubComment",components:{BaseHtmlRender:et,Author:pn,PostEditor:kt,Point:Qe,Icon:ee},inject:["post","postDetailWidth","show","isNight","isLogin","tags","config"],props:{modelValue:{reply_content:""},level:-1},data(){return {expand:!0,edit:!1,replyInfo:`@${this.modelValue.username} #${this.modelValue.floor} `,floor:this.modelValue.floor}},watch:{show(e){e&&(this.edit=!1);}},computed:{myTags(){return this.tags[this.modelValue.username]??[]}},methods:{jump(){_.emit(b.JUMP,this.modelValue.floor);}}},$l=e=>(vue.pushScopeId("data-v-48071e95"),e=e(),vue.popScopeId(),e),Bl=["data-floor"],Gl=$l(()=>vue.createElementVNode("div",{class:"left expand-line"},null,-1)),Wl={class:"right"},jl={class:"simple-wrapper"};function ql(e,t,n,l,o,i){const a=vue.resolveComponent("Author"),p=vue.resolveComponent("BaseHtmlRender"),f=vue.resolveComponent("PostEditor"),c=vue.resolveComponent("TopSubComment",!0);return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["top-sub-comment",n.level===1&&"top-sub-reply"]),ref:"comment","data-floor":o.floor},[Gl,vue.createElementVNode("div",Wl,[vue.createVNode(a,{modelValue:o.expand,"onUpdate:modelValue":t[0]||(t[0]=r=>o.expand=r),comment:n.modelValue,onReply:t[1]||(t[1]=r=>o.edit=!o.edit),type:"top"},null,8,["modelValue","comment"]),vue.createVNode(p,{class:"top-reply_content",html:n.modelValue.hideCallUserReplyContent},null,8,["html"]),o.edit?(vue.openBlock(),vue.createBlock(f,{key:0,onClose:t[2]||(t[2]=r=>o.edit=!1),replyInfo:o.replyInfo,replyUser:n.modelValue.username,replyFloor:n.modelValue.floor},null,8,["replyInfo","replyUser","replyFloor"])):vue.createCommentVNode("",!0),vue.createElementVNode("div",jl,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(n.modelValue.children,(r,u)=>(vue.openBlock(),vue.createBlock(c,{modelValue:n.modelValue.children[u],"onUpdate:modelValue":v=>n.modelValue.children[u]=v,key:u},null,8,["modelValue","onUpdate:modelValue"]))),128))])])],10,Bl)}const zl=J(Fl,[["render",ql],["__scopeId","data-v-48071e95"]]);const Jl={name:"Comment",components:{BaseHtmlRender:et,Author:pn,PostEditor:kt,Point:Qe,Icon:ee,TopSubComment:zl},inject:["post","postDetailWidth","show","isNight","config"],props:{modelValue:{reply_content:""},type:{type:String,default(){return "list"}}},data(){return {edit:!1,ding:!1,expand:!0,expandTopReply:!1,expandWrong:!1,replyInfo:`@${this.modelValue.username} #${this.modelValue.floor} `,cssStyle:null,floor:this.modelValue.floor}},watch:{show(e){e&&(this.edit=!1);},postDetailWidth(e,t){this.checkIsTooLong(e);}},computed:{CommentDisplayType(){return P},myClass(){return {isOp:this.modelValue.isOp,isSimple:this.config.viewType==="simple",ding:this.ding,isLevelOne:this.type==="top"?!0:this.modelValue.level===0,["c_"+this.floor]:this.type!=="top"}}},mounted(){this.checkIsTooLong(this.postDetailWidth);},methods:{checkIsTooLong(e){if(e!==0){let t=this.$refs.comment.getBoundingClientRect(),n=e*.6;if(n<t.width&&t.width<n+25&&this.modelValue.children.length){this.expand=!1;let l=2;this.cssStyle={padding:"1rem 0",width:`calc(${e}px - ${l}rem)`,transform:`translateX(calc(${t.width-e}px + ${l}rem))`,background:this.isNight?"#18222d":"white"};}}},showDing(){this.ding=!0,setTimeout(()=>{this.ding=!1;},2e3);},hide(){let e=`${window.baseUrl}/ignore/reply/${this.modelValue.id}?once=${this.post.once}`;_.emit(b.REMOVE,this.modelValue.floor),$.post(e).then(t=>{_.emit(b.REFRESH_ONCE),_.emit(b.SHOW_MSG,{type:"success",text:"隐藏成功"});},t=>{_.emit(b.SHOW_MSG,{type:"warning",text:"隐藏成功,仅本次有效（接口调用失败！）"});});},toggle(){this.expand=!this.expand;},jump(){_.emit(b.JUMP,this.modelValue.floor);}}},ye=e=>(vue.pushScopeId("data-v-84714fe5"),e=e(),vue.popScopeId(),e),Kl=["data-floor"],Xl={class:"comment-content"},Yl={class:"right"},Zl={class:"w"},Ql={key:0,class:"wrong-wrapper"},er=["href"],tr={class:"del-line"},nr=ye(()=>vue.createElementVNode("i",{class:"fa fa-question-circle-o wrong-icon","aria-hidden":"true"},null,-1)),or={key:0,class:"warning"},ir=ye(()=>vue.createElementVNode("br",null,null,-1)),sr=ye(()=>vue.createElementVNode("br",null,null,-1)),lr=ye(()=>vue.createElementVNode("br",null,null,-1)),rr=ye(()=>vue.createElementVNode("br",null,null,-1)),ar=ye(()=>vue.createElementVNode("br",null,null,-1)),cr=ye(()=>vue.createElementVNode("a",{href:"https://github.com/zyronon/web-scripts/issues",target:"_blank"},"这里",-1)),dr=ye(()=>vue.createElementVNode("div",{class:"gang"},null,-1)),ur={class:"simple-wrapper"},pr={key:0,class:"top-reply-wrap"};function fr(e,t,n,l,o,i){const a=vue.resolveComponent("Author"),p=vue.resolveComponent("BaseHtmlRender"),f=vue.resolveComponent("PostEditor"),c=vue.resolveComponent("Icon"),r=vue.resolveComponent("TopSubComment"),u=vue.resolveComponent("Comment",!0);return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["comment",i.myClass]),ref:"comment","data-floor":o.floor},[vue.createVNode(a,{modelValue:o.expand,"onUpdate:modelValue":t[0]||(t[0]=v=>o.expand=v),comment:n.modelValue,onReply:t[1]||(t[1]=v=>o.edit=!o.edit),type:n.type,onHide:i.hide},null,8,["modelValue","comment","type","onHide"]),o.cssStyle&&!o.expand?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"more ago",onClick:t[2]||(t[2]=v=>o.expand=!o.expand)}," 由于嵌套回复层级太深，自动将后续回复隐藏 ")):vue.createCommentVNode("",!0),o.expand?(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"comment-content-w",style:vue.normalizeStyle(o.cssStyle)},[o.cssStyle?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"more ago",onClick:t[3]||(t[3]=v=>o.expand=!o.expand)}," 由于嵌套回复层级太深，自动将以下回复移至可见范围 ")):vue.createCommentVNode("",!0),vue.createElementVNode("div",Xl,[vue.createElementVNode("div",{class:"left expand-line",onClick:t[4]||(t[4]=(...v)=>i.toggle&&i.toggle(...v))}),vue.createElementVNode("div",Yl,[vue.createElementVNode("div",Zl,[n.modelValue.isWrong?(vue.openBlock(),vue.createElementBlock("div",Ql,[vue.createElementVNode("span",{onClick:t[5]||(t[5]=v=>o.expandWrong=!o.expandWrong),title:"点击楼层号查看提示"},[vue.createElementVNode("a",{href:"/member/"+n.modelValue.replyUsers[0]},"@"+vue.toDisplayString(n.modelValue.replyUsers[0])+"  ",9,er),vue.createElementVNode("span",tr,"#"+vue.toDisplayString(n.modelValue.replyFloor),1),nr]),o.expandWrong?(vue.openBlock(),vue.createElementBlock("div",or,[vue.createTextVNode(" 这条回复似乎有点问题，指定的楼层号与@的人对应不上 "),ir,vue.createTextVNode(" 原因可能有下面几种： "),sr,vue.createTextVNode(" 一、屏蔽用户导致楼层塌陷：你屏蔽了A，自A以后的回复的楼层号都会减1 "),lr,vue.createTextVNode(" 二、忽略回复导致楼层塌陷：原理同上 "),rr,vue.createTextVNode(" 三、层主回复时指定错了楼层号（同一，层主屏蔽了别人，导致楼层塌陷） "),ar,vue.createTextVNode(" 四、脚本解析错误，请在 "),cr,vue.createTextVNode("反馈 ")])):vue.createCommentVNode("",!0)])):vue.createCommentVNode("",!0),i.config.commentDisplayType===i.CommentDisplayType.FloorInFloorNoCallUser&&n.type!=="top"?(vue.openBlock(),vue.createBlock(p,{key:1,class:"reply_content",html:n.modelValue.hideCallUserReplyContent},null,8,["html"])):(vue.openBlock(),vue.createBlock(p,{key:2,class:"reply_content",html:n.modelValue.reply_content},null,8,["html"])),o.edit?(vue.openBlock(),vue.createBlock(f,{key:3,onClose:t[6]||(t[6]=v=>o.edit=!1),replyInfo:o.replyInfo,replyUser:n.modelValue.username,replyFloor:n.modelValue.floor},null,8,["replyInfo","replyUser","replyFloor"])):vue.createCommentVNode("",!0),n.type==="top"&&n.modelValue.replyCount?(vue.openBlock(),vue.createElementBlock("div",{key:4,class:"reply-count",onClick:t[7]||(t[7]=v=>o.expandTopReply=!o.expandTopReply)},[dr,vue.createElementVNode("span",null," 共有"+vue.toDisplayString(n.modelValue.replyCount)+" 条回复 ",1),vue.createVNode(c,{icon:"ep:arrow-down-bold"})])):vue.createCommentVNode("",!0)]),vue.createElementVNode("div",ur,[n.type==="top"?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[o.expandTopReply&&n.modelValue.replyCount?(vue.openBlock(),vue.createElementBlock("div",pr,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(n.modelValue.children,(v,y)=>(vue.openBlock(),vue.createBlock(r,{level:1,modelValue:n.modelValue.children[y],"onUpdate:modelValue":w=>n.modelValue.children[y]=w,key:y},null,8,["modelValue","onUpdate:modelValue"]))),128))])):vue.createCommentVNode("",!0)],64)):(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:1},vue.renderList(n.modelValue.children,(v,y)=>(vue.openBlock(),vue.createBlock(u,{modelValue:n.modelValue.children[y],"onUpdate:modelValue":w=>n.modelValue.children[y]=w,key:y},null,8,["modelValue","onUpdate:modelValue"]))),128))])])]),o.cssStyle?(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"more ago",onClick:t[8]||(t[8]=v=>o.expand=!o.expand)}," 由于嵌套回复层级太深，自动将以上回复移至可见范围 ")):vue.createCommentVNode("",!0)],4)):vue.createCommentVNode("",!0)],10,Kl)}const hr=J(Jl,[["render",fr],["__scopeId","data-v-84714fe5"]]);const mr={name:"Toolbar",components:{Icon:ee,BaseLoading:Ze},inject:["isLogin","post","pageType"],data(){return {timer:null,loading:!1,loading2:!1,loading3:!1}},methods:{checkIsLogin(e=""){return this.isLogin?(this.$emit(e),!0):(_.emit(b.SHOW_MSG,{type:"warning",text:"请先登录！"}),!1)},tweet(){var n;let e=((n=window.user)==null?void 0:n.username)??"",t=`https://twitter.com/intent/tweet?url=${location.origin}/t/${this.post.id}?r=${e}&related=v2ex&text=${this.post.title}`;window.open(t,"_blank","width=550,height=370");},async report(){if(!this.checkIsLogin()||this.loading3)return;let e=this.post.isReport;if(e){_.emit(b.SHOW_MSG,{type:"success",text:"你已对本主题进行了报告"});return}let t=`${location.origin}/report/topic/${this.post.id}?once=${this.post.once}`;this.loading3=!0;let n=await fetch(t);if(this.loading3=!1,n.redirected){let l=await n.text();if(l.search("你已对本主题进行了报告")){_.emit(b.SHOW_MSG,{type:"success",text:"你已对本主题进行了报告"}),_.emit(b.REFRESH_ONCE,l),_.emit(b.MERGE,{isReport:!e});return}}_.emit(b.REFRESH_ONCE),_.emit(b.SHOW_MSG,{type:"error",text:"操作失败，请重试"});},async toggleIgnore(){if(!this.checkIsLogin())return;let e=`${window.baseUrl}/${this.post.isIgnore?"unignore":"ignore"}/topic/${this.post.id}?once=${this.post.once}`;this.pageType===j.Post?(this.loading2=!0,(await window.win().fetch(e)).redirected?(this.post.isIgnore||(window.win().location=window.baseUrl),_.emit(b.SHOW_MSG,{type:"success",text:this.post.isIgnore?"取消成功":"忽略成功"}),_.emit(b.MERGE,{isIgnore:!this.post.isIgnore})):_.emit(b.SHOW_MSG,{type:"warning",text:"忽略失败"}),this.loading2=!1):(this.post.isIgnore?this.loading2=!0:_.emit(b.IGNORE),(await window.win().fetch(e)).redirected?(this.post.isIgnore&&_.emit(b.REFRESH_ONCE),_.emit(b.SHOW_MSG,{type:"success",text:this.post.isIgnore?"取消成功":"忽略成功"}),_.emit(b.MERGE,{isIgnore:!this.post.isIgnore})):_.emit(b.SHOW_MSG,{type:"warning",text:"忽略成功,仅本次有效（接口调用失败！）"}),this.loading2=!1);},async toggleFavorite(){if(!this.checkIsLogin()||this.loading)return;let e=this.post.isFavorite;!e&&config.collectBrowserNotice&&_.emit(b.SHOW_MSG,{type:"success",text:"别忘记按Command/Cmd/CTRL + D添加到书签哦"});let t=`${location.origin}/${e?"unfavorite":"favorite"}/topic/${this.post.id}?once=${this.post.once}`;this.loading=!0;let n=await fetch(t);if(this.loading=!1,n.redirected){let l=await n.text();if(l.search(e?"加入收藏":"取消收藏")){_.emit(b.SHOW_MSG,{type:"success",text:e?"取消成功":"收藏成功"}),_.emit(b.MERGE,{collectCount:e?this.post.collectCount-1:this.post.collectCount+1}),_.emit(b.REFRESH_ONCE,l),_.emit(b.MERGE,{isFavorite:!e});return}}_.emit(b.REFRESH_ONCE),_.emit(b.SHOW_MSG,{type:"error",text:"操作失败"});}}},fn=e=>(vue.pushScopeId("data-v-260c1ef3"),e=e(),vue.popScopeId(),e),gr={class:"toolbar"},yr=fn(()=>vue.createElementVNode("span",null,"回复",-1)),wr={key:0,class:"tool no-hover"},_r=fn(()=>vue.createElementVNode("span",null,"Tweet",-1));function vr(e,t,n,l,o,i){const a=vue.resolveComponent("Icon"),p=vue.resolveComponent("BaseLoading");return vue.openBlock(),vue.createElementBlock("div",gr,[vue.renderSlot(e.$slots,"default",{},void 0,!0),vue.createElementVNode("div",{class:"tool",onClick:t[0]||(t[0]=vue.withModifiers(f=>i.checkIsLogin("reply"),["stop"]))},[vue.createVNode(a,{icon:"mynaui:message"}),yr]),vue.createElementVNode("div",{class:vue.normalizeClass(["tool",{disabled:o.loading}]),onClick:t[1]||(t[1]=vue.withModifiers((...f)=>i.toggleFavorite&&i.toggleFavorite(...f),["stop"]))},[o.loading?(vue.openBlock(),vue.createBlock(p,{key:0,size:"small"})):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[i.post.isFavorite?(vue.openBlock(),vue.createBlock(a,{key:0,color:"rgb(224,42,42)",icon:"iconoir:star-solid"})):(vue.openBlock(),vue.createBlock(a,{key:1,icon:"iconoir:star"}))],64)),vue.createElementVNode("span",null,vue.toDisplayString(i.post.isFavorite?"取消":"")+"收藏",1)],2),i.post.collectCount!==0?(vue.openBlock(),vue.createElementBlock("div",wr,[vue.createElementVNode("span",null,vue.toDisplayString(i.post.collectCount+"人收藏"),1)])):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"tool",onClick:t[2]||(t[2]=vue.withModifiers((...f)=>i.tweet&&i.tweet(...f),["stop"]))},[vue.createVNode(a,{icon:"uil:share"}),_r]),vue.createElementVNode("div",{class:vue.normalizeClass(["tool",{disabled:o.loading2}]),onClick:t[3]||(t[3]=vue.withModifiers((...f)=>i.toggleIgnore&&i.toggleIgnore(...f),["stop"]))},[o.loading2?(vue.openBlock(),vue.createBlock(p,{key:0,size:"small"})):(vue.openBlock(),vue.createBlock(a,{key:1,icon:"fluent:eye-hide-24-regular"})),vue.createElementVNode("span",null,vue.toDisplayString(i.post.isIgnore?"取消忽略":"忽略"),1)],2),vue.createElementVNode("div",{class:vue.normalizeClass(["tool",{disabled:o.loading3}]),onClick:t[4]||(t[4]=vue.withModifiers((...f)=>i.report&&i.report(...f),["stop"]))},[o.loading3?(vue.openBlock(),vue.createBlock(p,{key:0,size:"small"})):(vue.openBlock(),vue.createBlock(a,{key:1,class:"black",icon:"solar:danger-triangle-outline"})),vue.createElementVNode("span",null,vue.toDisplayString(i.post.isReport?"你已对本主题进行了报告":"报告"),1)],2)])}const br=J(mr,[["render",vr],["__scopeId","data-v-260c1ef3"]]);const Ct=e=>(vue.pushScopeId("data-v-4a063111"),e=e(),vue.popScopeId(),e),kr=["href"],Cr=["src"],Tr={class:"texts"},xr={key:0,class:"point"},Sr={class:"link-num"},Ir={class:"my-tag"},Mr=Ct(()=>vue.createElementVNode("i",{class:"fa fa-tag"},null,-1)),Lr={key:2,class:"ago"},Rr={key:3,class:"mod"},Or={key:4,class:"owner"},Nr=["href"],Pr={key:5,class:"owner"},Er={key:6,class:"mod"},Vr={key:7,class:"ago"},Dr={class:"my-tag"},Ar=Ct(()=>vue.createElementVNode("i",{class:"fa fa-tag"},null,-1)),Ur={key:9,class:"point"},Hr={class:"link-num"},Fr=["href"],$r=["src"],Br={class:"Author-right"},Gr={class:"floor"},Wr=Ct(()=>vue.createElementVNode("span",null,"跳转",-1)),jr=[Wr],qr={__name:"SingleComment",props:{comment:{reply_content:""},isRight:{type:Boolean,default(){return !1}}},setup(e){const t=vue.inject("config"),n=vue.inject("isLogin"),l=vue.inject("tags"),o=e,i=vue.computed(()=>l[o.comment.username]??[]);function a(){_.emit(b.JUMP,o.comment.floor);}return (p,f)=>(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["comment",{isSimple:vue.unref(t).viewType==="simple"}]),ref:"comment"},[e.isRight?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("a",{key:0,class:"avatar",href:`/member/${e.comment.username}`},[vue.createElementVNode("img",{src:e.comment.avatar,alt:""},null,8,Cr)],8,kr)),vue.createElementVNode("div",{class:vue.normalizeClass(["comment-body",{isRight:e.isRight}])},[vue.createElementVNode("div",Tr,[e.comment.thankCount&&e.isRight?(vue.openBlock(),vue.createElementBlock("div",xr,[e.comment.isThanked?(vue.openBlock(),vue.createBlock(vue.unref(ee),{key:0,color:"rgb(224,42,42)",icon:"icon-park-solid:like"})):(vue.openBlock(),vue.createBlock(vue.unref(ee),{key:1,color:e.comment.thankCount?"rgb(224,42,42)":null,icon:"icon-park-outline:like"},null,8,["color"])),vue.createElementVNode("div",Sr,vue.toDisplayString(e.comment.thankCount),1)])):vue.createCommentVNode("",!0),vue.unref(n)&&vue.unref(t).openTag&&e.isRight?(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:1},vue.renderList(i.value,c=>(vue.openBlock(),vue.createElementBlock("span",Ir,[Mr,vue.createElementVNode("span",null,vue.toDisplayString(c),1)]))),256)):vue.createCommentVNode("",!0),e.isRight?(vue.openBlock(),vue.createElementBlock("span",Lr,vue.toDisplayString(e.comment.date),1)):vue.createCommentVNode("",!0),e.comment.isMod&&e.isRight?(vue.openBlock(),vue.createElementBlock("div",Rr,"MOD")):vue.createCommentVNode("",!0),e.comment.isOp&&e.isRight?(vue.openBlock(),vue.createElementBlock("div",Or,"OP")):vue.createCommentVNode("",!0),vue.createElementVNode("a",{href:`/member/${e.comment.username}`,class:"username"},vue.toDisplayString(e.comment.username),9,Nr),e.comment.isOp&&!e.isRight?(vue.openBlock(),vue.createElementBlock("div",Pr,"OP")):vue.createCommentVNode("",!0),e.comment.isMod&&!e.isRight?(vue.openBlock(),vue.createElementBlock("div",Er,"MOD")):vue.createCommentVNode("",!0),e.isRight?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("span",Vr,vue.toDisplayString(e.comment.date),1)),vue.unref(n)&&vue.unref(t).openTag&&!e.isRight?(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:8},vue.renderList(i.value,c=>(vue.openBlock(),vue.createElementBlock("span",Dr,[Ar,vue.createElementVNode("span",null,vue.toDisplayString(c),1)]))),256)):vue.createCommentVNode("",!0),e.comment.thankCount&&!e.isRight?(vue.openBlock(),vue.createElementBlock("div",Ur,[e.comment.isThanked?(vue.openBlock(),vue.createBlock(vue.unref(ee),{key:0,color:"rgb(224,42,42)",icon:"icon-park-solid:like"})):(vue.openBlock(),vue.createBlock(vue.unref(ee),{key:1,color:e.comment.thankCount?"rgb(224,42,42)":null,icon:"icon-park-outline:like"},null,8,["color"])),vue.createElementVNode("div",Hr,vue.toDisplayString(e.comment.thankCount),1)])):vue.createCommentVNode("",!0)]),vue.createVNode(et,{class:"reply_content",html:e.comment.reply_content},null,8,["html"])],2),e.isRight?(vue.openBlock(),vue.createElementBlock("a",{key:1,class:"avatar",href:`/member/${e.comment.username}`},[vue.createElementVNode("img",{src:e.comment.avatar,alt:""},null,8,$r)],8,Fr)):vue.createCommentVNode("",!0),vue.createElementVNode("div",Br,[vue.createElementVNode("div",Gr,vue.toDisplayString(e.comment.floor),1),vue.createElementVNode("div",{class:"tool jump",onClick:vue.withModifiers(a,["stop"])},jr)])],2))}},zr=J(qr,[["__scopeId","data-v-4a063111"]]);const Jr={name:"detail",components:{BaseSelect:bt,BaseButton:ge,SingleComment:zr,PopConfirm:Ue,Comment:hr,PostEditor:kt,Point:Qe,Toolbar:br,BaseHtmlRender:et,Tooltip:Ae,BaseLoading:Ze,Icon:ee},inject:["allReplyUsers","post","tags","isLogin","config","pageType","isNight"],provide(){return {postDetailWidth:vue.computed(()=>this.postDetailWidth)}},props:{modelValue:{type:Boolean,default(){return !1}},loading:{type:Boolean,default(){return !1}},refreshLoading:{type:Boolean,default(){return !1}},displayType:P.FloorInFloorNoCallUser},data(){return {isSticky:!1,selectCallIndex:0,postDetailWidth:0,showCallList:!1,showRelationReply:!1,replyText:"",callStyle:{top:0,left:0},targetUser:{left:[],right:"",rightFloor:-1},currentFloor:"",showOpTag:!1}},computed:{canAppend(){if(this.isMy){let e=new Date(this.post.createDate);return Date.now()-e.valueOf()>1e3*60*30}return !1},canEditMove(){if(this.isMy){let e=new Date(this.post.createDate);return Date.now()-e.valueOf()<1e3*60*10}return !1},isMy(){return this.post.member.username===window.user.username},myTags(){return this.tags[this.post.member.username]??[]},CommentDisplayType(){return P},isPost(){return this.pageType===j.Post},filterCallList(){if(this.showCallList){let e=["管理员","所有人"].concat(this.allReplyUsers);return this.replyText?e.filter(t=>t.search(this.replyText)>-1):e}return []},replyList(){return [P.FloorInFloor,P.FloorInFloorNoCallUser].includes(this.displayType)?this.post.nestedReplies:this.displayType===P.Like?window.clone(this.post.nestedReplies).sort((e,t)=>t.thankCount-e.thankCount):this.displayType===P.New?window.clone(this.post.replyList).reverse():this.displayType===P.V2exOrigin?this.post.replyList:this.displayType===P.FloorInFloorNested?this.post.nestedRedundReplies:this.displayType===P.OnlyOp?this.post.replyList.filter(e=>{var t;return e.username===((t=this.post.member)==null?void 0:t.username)}):[]},relationReply(){return this.targetUser.left.length&&this.targetUser.right?this.post.replyList.filter(e=>{if(this.targetUser.left.includes(e.username))if(e.floor>this.targetUser.rightFloor){if(e.replyUsers.includes(this.targetUser.right))return !0}else return !0;if(e.username===this.targetUser.right){for(let t=0;t<this.targetUser.left.length;t++)if(e.replyUsers.includes(this.targetUser.left[t]))return !0}}):[]}},watch:{"post.id"(e,t){this.$refs["post-editor"]&&(this.$refs["post-editor"].content="",vue.nextTick(()=>{var n,l;(l=(n=this.$refs)==null?void 0:n.detail)==null||l.scrollTo({top:0});}));},"post.headerTemplate"(e,t){document.querySelector(".main-wrapper .post-wrapper .html-wrapper .header")&&(this.showOpTag=!0);},modelValue:{handler(e){this.isPost||(e?(document.body.style.overflow="hidden",window.history.state||window.history.pushState({},0,this.post.href),this.currentFloor="",vue.nextTick(()=>{var t,n;window.document.title=this.post.title??"V2EX",(n=(t=this.$refs)==null?void 0:t.main)==null||n.focus();})):(document.body.style.overflow="unset",window.document.title="V2EX",this.isSticky=!1,this.showRelationReply=!1,window.history.state&&window.history.back()));}}},mounted(){vue.nextTick(()=>{setTimeout(()=>{var e;this.postDetailWidth=((e=this.$refs.mainWrapper)==null?void 0:e.getBoundingClientRect().width)||0;},500);}),this.isLogin&&(new IntersectionObserver(([t])=>t.target.toggleAttribute("stuck",t.intersectionRatio<1),{threshold:[1]}).observe(this.$refs.replyBox),window.addEventListener("keydown",this.onKeyDown)),_.on(b.SHOW_CALL,e=>{e.show?(this.showCallList=!0,this.replyText=e.text,this.isPost?this.callStyle.top=e.top+$(window.win()).scrollTop()+-40+"px":this.callStyle.top=e.top+$(".post-detail").scrollTop()+15+"px",this.callStyle.left=e.left-$(".main")[0].getBoundingClientRect().left+10+"px",this.selectCallIndex>=this.filterCallList.length&&(this.selectCallIndex=0)):(this.replyText="",this.showCallList=!1,this.selectCallIndex=0);}),_.on(b.RELATION_REPLY,e=>{this.targetUser=e,this.showRelationReply=!0;}),_.on(b.JUMP,this.jump);},beforeUnmount(){window.removeEventListener("keydown",this.onKeyDown),_.off(b.SHOW_CALL);},methods:{addTag(){_.emit(b.ADD_TAG,this.post.member.username);},removeTag(e){_.emit(b.REMOVE_TAG,{username:this.post.member.username,tag:e});},stop(e){},jump(e){let t=this.replyList[this.replyList.length-1];if(e==="")e=t.floor;else {try{e=Number(e);}catch{e=t.floor;}e===0&&(e=1),e>t.floor&&(e=t.floor);}if(!this.post.replyList.length){_.emit(b.SHOW_MSG,{type:"warning",text:"没有回复可跳转！"});return}if(e>this.post.replyList.length){_.emit(b.SHOW_MSG,{type:"error",text:"没有找到对应回复！"});return}let n=$(`.c_${e}`);if(!n.length){_.emit(b.SHOW_MSG,{type:"error",text:"没有找到对应回复！"});return}n[0].scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),n.addClass("ding"),this.currentFloor=e+1,setTimeout(()=>{n.removeClass("ding");},2e3);},collapseTopReplyList(){$(this.$refs.topReply).slideToggle("fast");},goBottom(){this.isSticky=!1,setTimeout(()=>{if(this.isPost){let e=$("body , html"),t=e.prop("scrollHeight");e.animate({scrollTop:t-850},300);}else this.$refs.detail.scrollTo({top:this.$refs.detail.scrollHeight,behavior:"smooth"});});},close(e){this.isPost||(e==="space"?this.config.closePostDetailBySpace&&this.$emit("update:modelValue",!1):this.$emit("update:modelValue",!1));},setCall(e){_.emit(b.SET_CALL,e),this.showCallList=!1;},onKeyDown(e){if(!this.modelValue||!this.showCallList)return;let t=this.filterCallList.slice(0,10).length;e.keyCode===13&&(this.setCall(this.filterCallList[this.selectCallIndex]),e.preventDefault()),e.keyCode===38&&(this.selectCallIndex--,this.selectCallIndex<0&&(this.selectCallIndex=t-1),e.preventDefault()),e.keyCode===40&&(this.selectCallIndex++,this.selectCallIndex>t-1&&(this.selectCallIndex=0),e.preventDefault());},changeOption(e){this.$emit("update:displayType",e);},addThank(){_.emit(b.CHANGE_POST_THANK,{id:this.post.id,type:"add"});},recallThank(){_.emit(b.CHANGE_POST_THANK,{id:this.post.id,type:"recall"});},scrollTop(){this.isPost?$("body , html").animate({scrollTop:0},300):this.$refs.detail.scrollTo({top:0,behavior:"smooth"});}}},ue=e=>(vue.pushScopeId("data-v-daeffca4"),e=e(),vue.popScopeId(),e),Kr={class:"my-box post-wrapper"},Xr={class:"header"},Yr={class:"fr"},Zr=["href"],Qr=["src","alt"],ea=ue(()=>vue.createElementVNode("a",{href:"/"},"V2EX",-1)),ta=ue(()=>vue.createElementVNode("span",{class:"chevron"},"  ›  ",-1)),na=["href"],oa=ue(()=>vue.createElementVNode("div",{class:"sep10"},null,-1)),ia=["id"],sa=["onclick"],la=ue(()=>vue.createElementVNode("li",{class:"fa fa-chevron-up"},null,-1)),ra=["onclick"],aa=ue(()=>vue.createElementVNode("li",{class:"fa fa-chevron-down"},null,-1)),ca=[aa],da={class:"gray"},ua=["href"],pa=["title"],fa=["href"],ha=ue(()=>vue.createElementVNode("li",{class:"fa fa-info-circle"},null,-1)),ma=[ha],ga=["href"],ya=["href"],wa=["href"],_a={class:"my-tag"},va=ue(()=>vue.createElementVNode("i",{class:"fa fa-tag"},null,-1)),ba=["onClick"],ka={key:0,class:"my-box"},Ca=ue(()=>vue.createElementVNode("span",null,"高赞回复",-1)),Ta={class:"top-reply"},xa={class:"tool"},Sa={ref:"topReply"},Ia={class:"my-box comment-wrapper"},Ma={key:0,class:"my-cell flex"},La={key:0},Ra=ue(()=>vue.createElementVNode("strong",{class:"snow"},"•",-1)),Oa=["innerHTML"],Na={key:0,class:"loading-wrapper"},Pa={key:1,class:"comments"},Ea={key:1,id:"no-comments-yet"},Va={class:"my-cell flex"},Da=ue(()=>vue.createElementVNode("span",null,"添加一条新回复",-1)),Aa={class:"notice-right gray"},Ua={class:"p1"},Ha=ue(()=>vue.createElementVNode("span",{class:"gray"},"上下文",-1)),Fa={class:"top-reply"},$a=["onClick"];function Ba(e,t,n,l,o,i){const a=vue.resolveComponent("BaseHtmlRender"),p=vue.resolveComponent("Point"),f=vue.resolveComponent("Toolbar"),c=vue.resolveComponent("Icon"),r=vue.resolveComponent("Tooltip"),u=vue.resolveComponent("Comment"),v=vue.resolveComponent("BaseSelect"),y=vue.resolveComponent("BaseLoading"),w=vue.resolveComponent("PostEditor"),m=vue.resolveComponent("SingleComment");return vue.withDirectives((vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["post-detail",[i.isNight?"isNight":"",i.pageType]]),ref:"detail",onKeydown:t[19]||(t[19]=vue.withKeys(h=>i.close(),["esc"])),onClick:t[20]||(t[20]=h=>i.close("space"))},[vue.createElementVNode("div",{ref:"main",class:"main",tabindex:"1",onClick:t[18]||(t[18]=vue.withModifiers((...h)=>i.stop&&i.stop(...h),["stop"]))},[vue.createElementVNode("div",{class:"main-wrapper",ref:"mainWrapper",style:vue.normalizeStyle({width:i.config.postWidth})},[vue.createElementVNode("div",Kr,[vue.createElementVNode("div",Xr,[vue.createElementVNode("div",Yr,[vue.createElementVNode("a",{href:`/member/${i.post.member.username}`,style:{width:"73px",height:"73px",display:"inline-block"}},[i.post.member.avatar_large?(vue.openBlock(),vue.createElementBlock("img",{key:0,src:i.post.member.avatar_large,class:"avatar",style:{width:"73px",height:"73px"},border:"0",align:"default",alt:i.post.member.username},null,8,Qr)):vue.createCommentVNode("",!0)],8,Zr)]),ea,ta,vue.createElementVNode("a",{href:i.post.node.url},vue.toDisplayString(i.post.node.title),9,na),oa,vue.createElementVNode("h1",null,vue.toDisplayString(i.post.title),1),vue.createElementVNode("div",{id:`topic_${i.post.id}_votes`,class:"votes"},[vue.createElementVNode("a",{href:"javascript:",onclick:`upVoteTopic(${i.post.id});`,class:"vote"},[la,vue.createTextVNode("   ")],8,sa),vue.createTextVNode("   "),vue.createElementVNode("a",{href:"javascript:",onclick:`downVoteTopic(${i.post.id});`,class:"vote"},ca,8,ra)],8,ia),vue.createTextVNode("   "),vue.createElementVNode("small",da,[vue.createElementVNode("a",{href:`/member/${i.post.member.username}`},vue.toDisplayString(i.post.member.username),9,ua),vue.createTextVNode(" · "),i.post.member.createDate?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createElementVNode("span",{class:vue.normalizeClass(i.post.member.isNew&&"danger")},vue.toDisplayString(i.post.member.createDate),3),vue.createTextVNode(" · ")],64)):vue.createCommentVNode("",!0),i.post.createDateAgo?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createElementVNode("span",{title:i.post.createDate},vue.toDisplayString(i.post.createDateAgo),9,pa),vue.createTextVNode(" · ")],64)):vue.createCommentVNode("",!0),vue.createTextVNode(" "+vue.toDisplayString(i.post.clickCount)+" 次点击 ",1),i.isMy?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:2},[vue.createTextVNode("   "),vue.createElementVNode("a",{href:`/t/${i.post.id}/info`},ma,8,fa),vue.createTextVNode("   "),i.canAppend?(vue.openBlock(),vue.createElementBlock("a",{key:0,href:`/append/topic/${i.post.id}`,class:"op"},"APPEND",8,ga)):vue.createCommentVNode("",!0),i.canEditMove?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createElementVNode("a",{href:`/move/topic/${i.post.id}`,class:"op"},"MOVE",8,ya),vue.createTextVNode("  "),vue.createElementVNode("a",{href:`/edit/topic/${i.post.id}`,class:"op"},"EDIT",8,wa)],64)):vue.createCommentVNode("",!0)],64)):vue.createCommentVNode("",!0)]),i.isLogin&&i.config.openTag?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.myTags,h=>(vue.openBlock(),vue.createElementBlock("span",_a,[va,vue.createElementVNode("span",null,vue.toDisplayString(h),1),vue.createElementVNode("i",{class:"fa fa-trash-o remove",onClick:vue.withModifiers(C=>i.removeTag(h),["stop"])},null,8,ba)]))),256)),vue.createElementVNode("span",{class:"add-tag ago",onClick:t[0]||(t[0]=vue.withModifiers((...h)=>i.addTag&&i.addTag(...h),["stop"])),title:"添加标签"},"+")],64)):vue.createCommentVNode("",!0)]),i.post.headerTemplate?(vue.openBlock(),vue.createBlock(a,{key:0,html:i.post.headerTemplate},null,8,["html"])):(vue.openBlock(),vue.createBlock(a,{key:1,html:i.post.jsonContent},null,8,["html"])),vue.createVNode(f,{onReply:t[1]||(t[1]=h=>o.isSticky=!o.isSticky)},{default:vue.withCtx(()=>[vue.createVNode(p,{onAddThank:i.addThank,onRecallThank:i.recallThank,item:{isThanked:i.post.isThanked,thankCount:i.post.thankCount,username:i.post.username},"api-url":"topic/"+i.post.id},null,8,["onAddThank","onRecallThank","item","api-url"])]),_:1})]),i.post.topReplyList.length&&i.config.showTopReply?(vue.openBlock(),vue.createElementBlock("div",ka,[vue.createElementVNode("div",{class:"my-cell flex",onClick:t[2]||(t[2]=vue.withModifiers((...h)=>i.collapseTopReplyList&&i.collapseTopReplyList(...h),["stop"]))},[Ca,vue.createElementVNode("div",Ta,[vue.createVNode(r,{title:"收起高赞回复"},{default:vue.withCtx(()=>[vue.createElementVNode("div",xa,[vue.createVNode(c,{icon:"gravity-ui:chevrons-collapse-vertical"})])]),_:1})])]),vue.createElementVNode("div",Sa,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.post.topReplyList,(h,C)=>(vue.openBlock(),vue.createBlock(u,{key:h.floor,type:"top",modelValue:i.post.topReplyList[C],"onUpdate:modelValue":k=>i.post.topReplyList[C]=k},null,8,["modelValue","onUpdate:modelValue"]))),128))],512)])):vue.createCommentVNode("",!0),vue.createElementVNode("div",Ia,[i.post.replyList.length||n.loading?(vue.openBlock(),vue.createElementBlock("div",Ma,[vue.createElementVNode("div",null,[vue.createTextVNode(vue.toDisplayString(i.post.replyCount)+" 条回复 ",1),i.post.lastReplyDate?(vue.openBlock(),vue.createElementBlock("span",La,[vue.createTextVNode("  "),Ra,vue.createTextVNode("  "+vue.toDisplayString(i.post.lastReplyDate),1)])):vue.createCommentVNode("",!0)]),i.config.showToolbar?(vue.openBlock(),vue.createBlock(v,{key:0,"display-type":n.displayType,"onUpdate:displayType":t[3]||(t[3]=h=>e.$emit("update:displayType",h))},null,8,["display-type"])):(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"fr",innerHTML:i.post.fr},null,8,Oa))])):vue.createCommentVNode("",!0),i.replyList.length||n.loading?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[n.loading?(vue.openBlock(),vue.createElementBlock("div",Na,[vue.createVNode(y,{size:"large"})])):(vue.openBlock(),vue.createElementBlock("div",Pa,[n.modelValue?(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:0},vue.renderList(i.replyList,(h,C)=>(vue.openBlock(),vue.createBlock(u,{key:h.floor,modelValue:i.replyList[C],"onUpdate:modelValue":k=>i.replyList[C]=k},null,8,["modelValue","onUpdate:modelValue"]))),128)):vue.createCommentVNode("",!0)]))],64)):vue.createCommentVNode("",!0)]),i.replyList.length||n.loading?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("div",Ea,"目前尚无回复")),i.isLogin?(vue.openBlock(),vue.createElementBlock("div",{key:2,class:vue.normalizeClass(["my-box",{sticky:o.isSticky}]),ref:"replyBox"},[vue.createElementVNode("div",Va,[Da,vue.createElementVNode("div",Aa,[o.isSticky?(vue.openBlock(),vue.createElementBlock("a",{key:0,style:{"margin-right":"2rem"},onClick:t[4]||(t[4]=vue.withModifiers(h=>o.isSticky=!1,["stop"]))},"取消回复框停靠")):vue.createCommentVNode("",!0),vue.createElementVNode("a",{onClick:t[5]||(t[5]=vue.withModifiers((...h)=>i.scrollTop&&i.scrollTop(...h),["stop"]))},"回到顶部")])]),vue.createElementVNode("div",Ua,[vue.createVNode(w,{onClose:i.goBottom,ref:"post-editor",useType:"reply-post",onClick:t[6]||(t[6]=vue.withModifiers(h=>o.isSticky=!0,["stop"]))},null,8,["onClose"])])],2)):vue.createCommentVNode("",!0)],4),o.showRelationReply?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"relationReply",onClick:t[10]||(t[10]=vue.withModifiers(h=>i.close("space"),["stop"]))},[vue.createElementVNode("div",{class:"my-cell flex",onClick:t[8]||(t[8]=vue.withModifiers((...h)=>i.stop&&i.stop(...h),["stop"]))},[Ha,vue.createElementVNode("div",Fa,[vue.createVNode(c,{icon:"ic:round-close",onClick:t[7]||(t[7]=vue.withModifiers(h=>o.showRelationReply=!1,["stop"]))})])]),vue.createElementVNode("div",{class:"comments",onClick:t[9]||(t[9]=vue.withModifiers((...h)=>i.stop&&i.stop(...h),["stop"]))},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.relationReply,(h,C)=>(vue.openBlock(),vue.createBlock(m,{"is-right":h.username===o.targetUser.right,key:h.floor,comment:h},null,8,["is-right","comment"]))),128))])])):vue.createCommentVNode("",!0),o.showCallList&&i.filterCallList.length?(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"call-list",style:vue.normalizeStyle(o.callStyle)},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.filterCallList,(h,C)=>(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["call-item",{select:C===o.selectCallIndex}]),onClick:vue.withModifiers(k=>i.setCall(h),["stop"])},[vue.createElementVNode("a",null,vue.toDisplayString(h),1)],10,$a))),256))],4)):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"close-btn",onClick:t[11]||(t[11]=vue.withModifiers(h=>i.close("btn"),["stop"]))},[vue.createVNode(c,{icon:"fontisto:close-a"})]),vue.createElementVNode("div",{class:"scroll-top gray",onClick:t[12]||(t[12]=vue.withModifiers((...h)=>i.scrollTop&&i.scrollTop(...h),["stop"]))},[vue.createVNode(c,{icon:"lucide:move-up"})]),vue.createElementVNode("div",{class:"refresh gray",onClick:t[13]||(t[13]=vue.withModifiers(h=>e.$emit("refresh"),["stop"]))},[n.refreshLoading?(vue.openBlock(),vue.createBlock(y,{key:0})):(vue.openBlock(),vue.createBlock(c,{key:1,icon:"material-symbols:refresh"}))]),vue.createElementVNode("div",{class:"scroll-to gray",onClick:t[17]||(t[17]=vue.withModifiers(h=>i.jump(o.currentFloor),["stop"]))},[vue.createVNode(c,{icon:"lucide:move-down"}),vue.withDirectives(vue.createElementVNode("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=h=>o.currentFloor=h),onClick:t[15]||(t[15]=vue.withModifiers((...h)=>i.stop&&i.stop(...h),["stop"])),onKeydown:t[16]||(t[16]=vue.withKeys(h=>i.jump(o.currentFloor),["enter"]))},null,544),[[vue.vModelText,o.currentFloor]])])],512)],34)),[[vue.vShow,n.modelValue]])}const Ga=J(Jr,[["render",Ba],["__scopeId","data-v-daeffca4"]]);const Wa={key:1},ja={__name:"Base64Tooltip",setup(e){const t=vue.ref(null),n=vue.ref(!1),l=vue.ref(""),o=vue.ref(""),i=vue.reactive({left:"-100vw",top:"-100vh"});vue.onMounted(()=>{_.on(b.SHOW_TOOLTIP,({text:r,e:u})=>{setTimeout(()=>n.value=!0),l.value=r,o.value="",i.left=u.clientX+"px",i.top=u.clientY+20+"px";}),window.addEventListener("click",r=>{t.value&&!t.value.contains(r.target)&&n.value&&(n.value=!1);},{capture:!0});const c=()=>n.value&&(n.value=!1);$(".post-detail",window.win().doc).on("scroll",c);});function a(){window.win().navigator.clipboard?(window.win().navigator.clipboard.writeText(o.value),_.emit(b.SHOW_MSG,{type:"success",text:"复制成功"})):_.emit(b.SHOW_MSG,{type:"error",text:"复制失败！浏览器不支持！"});}function p(c){let r=window.atob(c),u=r.length,v=new Uint8Array(u);for(let y=0;y<u;y++)v[y]=r.charCodeAt(y);return v.buffer}function f(){try{new Blob([p(l.value)]).text().then(c=>{o.value=c;});}catch{_.emit(b.SHOW_MSG,{type:"error",text:"Base64解码失败！不是标准数据！"});}}return (c,r)=>vue.withDirectives((vue.openBlock(),vue.createElementBlock("div",{class:"base64_tooltip",style:vue.normalizeStyle(i),onClick:f,ref_key:"tooltip",ref:t},[o.value?(vue.openBlock(),vue.createElementBlock("div",Wa,[vue.createElementVNode("span",null,vue.toDisplayString(o.value),1),vue.createVNode(ge,{class:"btn",size:"small",onClick:a},{default:vue.withCtx(()=>[vue.createTextVNode("点击复制")]),_:1})])):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(" Base64解码："+vue.toDisplayString(l.value)+" ",1),vue.createVNode(vue.unref(ee),{icon:"system-uicons:translate"})],64))],4)),[[vue.vShow,n.value]])}},qa=J(ja,[["__scopeId","data-v-c50fb66c"]]);const za={name:"Msg",components:{Icon:ee},props:{type:"",text:""},created(){setTimeout(()=>{this.$emit("close");},3e3);}},Ja={class:"right"};function Ka(e,t,n,l,o,i){const a=vue.resolveComponent("Icon");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["msg",n.type])},[vue.createElementVNode("div",{class:"left",onClick:t[0]||(t[0]=p=>e.$emit("close"))},[vue.createVNode(a,{icon:"ic:round-close"})]),vue.createElementVNode("div",Ja,vue.toDisplayString(n.text),1)],2)}const hn=J(za,[["render",Ka],["__scopeId","data-v-8bf692ea"]]);const mn=e=>(vue.pushScopeId("data-v-7e92a866"),e=e(),vue.popScopeId(),e),Xa={key:0,class:"tag-modal modal"},Ya={class:"wrapper"},Za=mn(()=>vue.createElementVNode("div",{class:"title"}," 添加标签 ",-1)),Qa={class:"option"},ec=mn(()=>vue.createElementVNode("span",null,"用户：",-1)),tc={class:"btns"},nc={__name:"TagModal",props:["tags"],emits:["update:tags"],setup(e,{emit:t}){const n=vue.reactive({show:!1,currentUsername:"",tag:""}),l=e,o=t,i=vue.ref();vue.onMounted(()=>{_.on(b.ADD_TAG,p=>{n.currentUsername=p,n.show=!0,vue.nextTick(()=>{i.value.focus();});});});async function a(){if(!n.tag){_.emit(b.SHOW_MSG,{type:"warning",text:"请输入标签"});return}let p=window.clone(l.tags),f=window.clone(l.tags),c=f[n.currentUsername]??[];if(c.findIndex(v=>v===n.tag)>-1){_.emit(b.SHOW_MSG,{type:"warning",text:"标签已存在！"});return}else c.push(n.tag);f[n.currentUsername]=c,o("update:tags",f),n.tag="",n.show=!1,await window.parse.saveTags(f)||(_.emit(b.SHOW_MSG,{type:"error",text:"标签添加失败！"}),o("update:tags",p));}return (p,f)=>(vue.openBlock(),vue.createBlock(vue.Transition,null,{default:vue.withCtx(()=>[n.show?(vue.openBlock(),vue.createElementBlock("div",Xa,[vue.createElementVNode("div",{class:"mask",onClick:f[0]||(f[0]=vue.withModifiers(c=>n.show=!1,["stop"]))}),vue.createElementVNode("div",Ya,[Za,vue.createElementVNode("div",Qa,[ec,vue.createElementVNode("div",null,[vue.createElementVNode("b",null,vue.toDisplayString(n.currentUsername),1)])]),vue.withDirectives(vue.createElementVNode("input",{type:"text",ref_key:"inputRef",ref:i,style:{width:"100%"},"onUpdate:modelValue":f[1]||(f[1]=c=>n.tag=c),onKeydown:vue.withKeys(a,["enter"])},null,544),[[vue.vModelText,n.tag]]),vue.createElementVNode("div",tc,[vue.createVNode(ge,{type:"link",onClick:f[2]||(f[2]=vue.withModifiers(c=>{n.show=!1,n.tag="";},["stop"]))},{default:vue.withCtx(()=>[vue.createTextVNode("取消")]),_:1}),vue.createVNode(ge,{onClick:vue.withModifiers(a,["stop"])},{default:vue.withCtx(()=>[vue.createTextVNode("确定")]),_:1})])])])):vue.createCommentVNode("",!0)]),_:1}))}},oc=J(nc,[["__scopeId","data-v-7e92a866"]]);const ic={class:"msgs"},sc={__name:"MsgModal",setup(e){const t=vue.reactive([]);vue.onMounted(()=>{_.on(b.SHOW_MSG,l=>{t.push({...l,id:Date.now()});});});function n(l){let o=t.findIndex(i=>i.id===l);o>-1&&t.splice(o,1);}return (l,o)=>(vue.openBlock(),vue.createElementBlock("div",ic,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(t,i=>(vue.openBlock(),vue.createBlock(hn,{key:i.id,type:i.type,text:i.text,onClose:a=>n(i.id)},null,8,["type","text","onClose"]))),128))]))}},lc=J(sc,[["__scopeId","data-v-b73f4332"]]);let rc=".__cf_email__",ac="data-cfemail",Wt=document.createElement("div");function jt(e,t){let n=e.substr(t,2);return parseInt(n,16)}function cc(e,t){let n="",l=jt(e,t);for(let o=t+2;o<e.length;o+=2){let i=jt(e,o)^l;n+=String.fromCharCode(i);}try{n=decodeURIComponent(escape(n));}catch(o){}return Wt.innerHTML='<a href="'+n.replace(/"/g,"&quot;")+'"></a>',Wt.childNodes[0].getAttribute("href")||""}function dc(e){try{e.find(rc).each(function(){try{let n=this,l=n.parentNode,o=n.getAttribute(ac);if(o){let i=cc(o,0),a=document.createTextNode(i);l.replaceChild(a,n);}}catch(n){}});}catch(t){}}const uc=e=>(vue.pushScopeId("data-v-882b932b"),e=e(),vue.popScopeId(),e),pc={key:0,class:"tag-modal modal"},fc={class:"modal-root"},hc=uc(()=>vue.createElementVNode("div",{class:"title"}," 提醒系统 ",-1)),mc=["innerHTML"],gc={__name:"NotificationModal",props:["modelValue","h"],emits:["update:modelValue"],setup(e,{emit:t}){const n=t;vue.onMounted(()=>{});function l(){n("update:modelValue",!1);}return (o,i)=>(vue.openBlock(),vue.createBlock(vue.Transition,null,{default:vue.withCtx(()=>[e.modelValue?(vue.openBlock(),vue.createElementBlock("div",pc,[vue.createElementVNode("div",{class:"mask",onClick:vue.withModifiers(l,["stop"])}),vue.createElementVNode("div",fc,[vue.createElementVNode("div",{class:"modal-header"},[hc,vue.createElementVNode("i",{class:"fa fa-times",onClick:l})]),vue.createElementVNode("div",{innerHTML:e.h,class:"modal-body"},null,8,mc)])])):vue.createCommentVNode("",!0)]),_:1}))}},yc=J(gc,[["__scopeId","data-v-882b932b"]]);const wc={components:{Icon:ee,BaseButton:ge,NotificationModal:yc,BaseLoading:Ze,BaseSwitch:ht,MsgModal:lc,TagModal:oc,Tooltip:Ae,Setting:Js,PostDetail:Ga,Base64Tooltip:qa,Msg:hn},provide(){return {isLogin:vue.computed(()=>this.isLogin),isNight:vue.computed(()=>this.isNight),pageType:vue.computed(()=>this.pageType),tags:vue.computed(()=>this.tags),show:vue.computed(()=>this.show),post:vue.computed(()=>this.current),config:vue.computed(()=>this.config),allReplyUsers:vue.computed(()=>{var e,t,n;return (e=this.current)!=null&&e.replyList?Array.from(new Set(((n=(t=this.current)==null?void 0:t.replyList)==null?void 0:n.map(l=>l.username))??[])):[]}),showConfig:this.showConfig}},data(){return {loading:window.pageType===j.Post,refreshLoading:!1,loadMore:!1,isLogin:!!window.user.username,pageType:window.pageType,isNight:window.isNight,stopMe:window.stopMe,show:!1,current:window.clone(window.initPost),list:[],config:window.clone(window.config),tags:window.user.tags,configModal:{show:!1},notificationModal:{show:!1,h:""},previewModal:{show:!1,src:""},popConfirmModal:{show:!1,title:"",id:""}}},computed:{targetUserTags(){return this.tags[window.targetUserName]??[]},isList(){return [j.Home,j.Node].includes(this.pageType)},isPost(){return this.pageType===j.Post},isMember(){return this.pageType===j.Member}},watch:{config:{handler(e){let t={[window.user.username??"default"]:e};localStorage.setItem("v2ex-config",JSON.stringify(t)),window.config=e,window.initConfig&&window.parse.editNoteItem(window.user.configPrefix+JSON.stringify(window.config),window.user.configNoteId);},deep:!0},tags(e){window.user.tags=e;},"config.viewType"(e){e&&(e==="card"?$(".post-item").each(function(){$(this).addClass("preview");}):$(".post-item").each(function(){$(this).removeClass("preview");}));}},created(){let e=this;this.initEvent(),window.cb=this.winCb,window.canParseV2exPage&&($(document).on("click","a",this.clickA),$(document).on("click",".post-item",function(t){if(!t.currentTarget.getAttribute("script")){if(e.stopMe)return !0;if(this.classList.contains("preview")&&t.target.tagName!=="A"&&t.target.tagName!=="IMG"&&!t.target.classList.contains("toggle")){let n=this.dataset.id,l=this.dataset.href;n?e.clickPost(t,n,l):l&&(location.href=l);}}}),$(document).on("click",".toggle",t=>{if(this.stopMe)return !0;let n=t.target.dataset.id,l=document.querySelector(`.id_${n}`);l.classList.contains("preview")?(t.target.innerText="预览",l.classList.remove("preview")):this.config.viewType!=="card"?this.list.findIndex(i=>i.id==n)>-1?(t.target.innerText="收起",l.classList.add("preview")):(t.target.innerText="加载中",I.getPostDetailByApi(n).then(i=>{i.content_rendered?(i.href=l.dataset.href,this.list.push(Le(i)),l.classList.add("preview"),t.target.innerText="收起",I.appendPostContent(i,l)):(t.target.innerText="预览",_.emit(b.SHOW_MSG,{type:"warning",text:"主题暂无正文！"}));})):(t.target.innerText="收起",l.classList.add("preview"));}),window.onpopstate=t=>{t.state?this.show||(this.show=!0):this.show&&(this.show=!1);},window.deleteNotification=(t,n)=>{let l=$("#n_"+t);l.slideUp("fast"),$.post({url:"/delete/notification/"+t+"?once="+n,success(){$.get({url:"/notifications/below/"+window.notificationBottom,success(o,i,a){l.remove(),$("#notifications").append(o),window.notificationBottom=a.getResponseHeader("X-V2EX-New-Notification-Bottom");},error(){l.slideDown("fast");}});},error(){l.slideDown("fast");}});});},mounted(){},beforeUnmount(){_.clear(),$(document).off("click","a",this.clickA);},methods:{async getUnreadMessagesCount(){var o,i;const t=await(await fetch(`${location.origin}/mission`)).text(),l=$(t).find('#Rightbar a[href^="/notifications"]').text();if(l.includes("未读提醒")){if((o=l.match(/\d+/))==null?void 0:o.at(0))return Number((i=l.match(/\d+/))==null?void 0:i.at(0))}else return 0;throw new Error("无法获取未读消息数量")},clickA(e){let t=this;if(e.currentTarget.getAttribute("script"))return;if(t.stopMe)return !0;let{pageType:n}=I.checkPageType(e.currentTarget);switch(n){case j.Post:let{href:l,id:o,title:i}=I.parseA(e.currentTarget);o&&t.clickPost(e,o,l,i);break;case j.Node:case j.Home:case j.Changes:return;default:if(e.currentTarget.href.includes("/settings/night/toggle")||e.currentTarget.href===location.origin+"/#;")return;e.currentTarget.href.includes("/notifications"),t.config.newTabOpen&&(t.stopEvent(e),I.openNewTab(e.currentTarget.href,t.config.newTabOpenActive));return}},stopEvent(e){e.preventDefault(),e.stopPropagation();},async clickPost(e,t,n,l=""){if(t){if(this.config.clickPostItemOpenDetail){this.stopEvent(e);let o=Le(),i=this.list.findIndex(a=>a.id==t);i>-1&&(o=this.list[i]),o.title||(o.title=l??"加载中"),o.id=t,o.href=n,this.getPostDetail(o);return}this.config.newTabOpen&&(this.stopEvent(e),I.openNewTab(`https://www.v2ex.com/t/${t}?p=1`,this.config.newTabOpenActive));}},showPost(){this.show=!0,$("#Wrapper #Main .box:lt(3)").each(function(){$(this).hide();});},showConfig(){this.configModal.show=!0;},async winCb({type:e,value:t}){e==="openSetting"&&this.showConfig(),e==="syncData"&&(this.list=Object.assign(this.list,window.postList),this.config=window.config,this.stopMe=window.stopMe,this.tags=window.user.tags),e==="warningNotice"&&_.emit(b.SHOW_MSG,{type:"warning",text:t}),!this.stopMe&&(e==="restorePost"&&(this.show=!1,this.loading=!1,_.emit(b.SHOW_MSG,{type:"warning",text:"脚本无法查看此页面！"}),$("#Wrapper #Main .box:lt(3)").each(function(){$(this).show();})),e==="postContent"&&(this.current=Object.assign(this.current,t),this.current.inList=!0,this.config.autoOpenDetail&&this.showPost()),e==="postReplies"&&(this.loading=!1,this.current=Object.assign(this.current,t),this.list.push(this.clone(this.current))));},clone(e){return window.clone(e)},regenerateReplyList(){if(this.current.replyList.length?I.createList(this.current,this.current.replyList):(this.current.replyCount=0,this.current.nestedReplies=[],this.current.nestedRedundReplies=[]),this.list.length){let e=this.list.findIndex(t=>t.id===this.current.id);e>-1&&(this.list[e]=this.clone(this.current));}},initEvent(){_.on(b.CHANGE_COMMENT_THANK,e=>{const{id:t,type:n}=e;let l=this.current.replyList.findIndex(o=>o.id===t);l>-1&&(this.current.replyList[l].isThanked=n==="add",n==="add"?this.current.replyList[l].thankCount++:this.current.replyList[l].thankCount--,this.regenerateReplyList());}),_.on(b.CHANGE_POST_THANK,e=>{const{id:t,type:n}=e;this.current.isThanked=n==="add",n==="add"?this.current.thankCount++:this.current.thankCount--;let l=this.list.findIndex(o=>o.id===t);l>-1&&(this.list[l].isThanked=n==="add",n==="add"?this.list[l].thankCount++:this.list[l].thankCount++);}),_.on(b.REMOVE,e=>{let t=this.current.replyList.findIndex(n=>n.floor===e);t>-1&&this.current.replyList.splice(t,1),this.regenerateReplyList();}),_.on(b.IGNORE,()=>{this.show=!1;let e=this.list.findIndex(t=>t.id===this.current.id);e>-1&&this.list.splice(e,1),this.current=this.clone(window.initPost);}),_.on(b.MERGE,e=>{this.current=Object.assign(this.current,e);let t=this.list.findIndex(n=>n.id===this.current.id);t>-1&&(this.list[t]=this.clone(this.current));}),_.on(b.ADD_REPLY,e=>{this.current.replyList.push(e),this.regenerateReplyList();}),_.on(b.REFRESH_ONCE,async e=>{if(e){if(typeof e=="string"){let t=e.match(/var once = "([\d]+)";/);if(t&&t[1]){this.current.once=Number(t[1]);return}}if(typeof e=="number"){this.current.once=e;return}}window.fetchOnce().then(t=>{this.current.once=t;});}),_.on(b.REMOVE_TAG,async({username:e,tag:t})=>{let n=this.clone(this.tags),l=this.tags[e]??[],o=l.findIndex(a=>a===t);o>-1&&l.splice(o,1),this.tags[e]=l,await window.parse.saveTags(this.tags)||(_.emit(b.SHOW_MSG,{type:"error",text:"标签删除失败！"}),this.tags=n);}),_.on(b.SHOW_CONFIRM_MODAL,e=>{const{rect:t,title:n,id:l}=e;this.popConfirmModal.show=!0,this.popConfirmModal.title=n,this.popConfirmModal.id=l,vue.nextTick(()=>{this.$refs.tip.style.top=t.top+"px",this.$refs.tip.style.left=t.left+t.width/2-50+"px";});});},async getPostDetail(e){this.current=e,this.show=!0;let t=window.baseUrl+"/t/"+this.current.id;this.current.url=t,this.current.replyList.length?this.refreshLoading=!0:(this.loading=!0,I.getPostDetailByApi(this.current.id).then(c=>{if(c.replyCount=c.replies,this.current=Object.assign(this.current,c),this.current.replyCount>zt){I.openNewTab(`${location.origin}/t/${this.current.id}?p=1&script=1`,!0),_.emit(b.SHOW_MSG,{type:"warning",text:"由于回复数量较多，已为您单独打开此主题"}),this.loading=this.show=!1;return}else this.current.jsonContent=`
            <div class="cell">
              <div class="topic_content">
                <div class="markdown_body">
                 ${(c==null?void 0:c.content_rendered)??""}
                </div>
              </div>
            </div>`;}));let l=await window.fetch(t+"?p=1");if(l.status===404)return _.emit(b.SHOW_MSG,{type:"error",text:"主题未找到"}),this.refreshLoading=this.loading=!1;if(l.status===403){this.refreshLoading=this.show=this.loading=!1,I.openNewTab(`${location.origin}/t/${e.id}?p=1&script=0`,!0);return}if(l.redirected)return _.emit(b.SHOW_MSG,{type:"error",text:"没有权限"}),this.refreshLoading=this.loading=!1;let o=await l.text();if(o.search("你要查看的页面需要先登录")>-1)return _.emit(b.SHOW_MSG,{type:"error",text:"你要查看的页面需要先登录"}),this.refreshLoading=this.loading=!1;let a=o.match(/<body[^>]*>([\s\S]+?)<\/body>/g),p=$(a[0]);dc(p),await window.parse.getPostDetail(this.current,p,o);let f=this.list.findIndex(c=>c.id==this.current.id);f>-1?this.list[f]=this.clone(this.current):this.list.push(this.clone(this.current)),this.refreshLoading=this.loading=!1,await window.parse.parseOp(this.current);},addTargetUserTag(){_.emit(b.ADD_TAG,window.targetUserName);},removeTargetUserTag(e){_.emit(b.REMOVE_TAG,{username:window.targetUserName,tag:e});},popConfirmModalCancel(){this.popConfirmModal.show=!1;},popConfirmModalConfirm(){this.popConfirmModalCancel(),_.emit(b.SHOW_CONFIRM_MODAL_CONFIRM,this.popConfirmModal.id);}}},Tt=e=>(vue.pushScopeId("data-v-15f2a343"),e=e(),vue.popScopeId(),e),_c={key:0,class:"target-user-tags p1"},vc=Tt(()=>vue.createElementVNode("span",null,"标签：",-1)),bc={class:"my-tag"},kc=Tt(()=>vue.createElementVNode("i",{class:"fa fa-tag"},null,-1)),Cc=["onClick"],Tc={key:1,class:"my-box p2",style:{"margin-top":"2rem","margin-bottom":"0"}},xc={key:0,class:"flex flex-center"},Sc={key:1,class:"loaded"},Ic=Tt(()=>vue.createElementVNode("span",null,"楼中楼解析完成",-1)),Mc={key:0,ref:"tip",class:"pop-confirm-content"},Lc={class:"text"},Rc={class:"options"};function Oc(e,t,n,l,o,i){const a=vue.resolveComponent("Setting"),p=vue.resolveComponent("TagModal"),f=vue.resolveComponent("PostDetail"),c=vue.resolveComponent("Base64Tooltip"),r=vue.resolveComponent("MsgModal"),u=vue.resolveComponent("NotificationModal"),v=vue.resolveComponent("BaseLoading"),y=vue.resolveComponent("BaseButton");return vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createVNode(a,{modelValue:o.config,"onUpdate:modelValue":t[0]||(t[0]=w=>o.config=w),show:o.configModal.show,"onUpdate:show":t[1]||(t[1]=w=>o.configModal.show=w)},null,8,["modelValue","show"]),vue.createVNode(p,{tags:o.tags,"onUpdate:tags":t[2]||(t[2]=w=>o.tags=w)},null,8,["tags"]),vue.createVNode(f,{modelValue:o.show,"onUpdate:modelValue":t[3]||(t[3]=w=>o.show=w),ref:"postDetail",displayType:o.config.commentDisplayType,"onUpdate:displayType":t[4]||(t[4]=w=>o.config.commentDisplayType=w),onRefresh:t[5]||(t[5]=w=>i.getPostDetail(o.current)),loading:o.loading,refreshLoading:o.refreshLoading},null,8,["modelValue","displayType","loading","refreshLoading"]),vue.createVNode(c),vue.createVNode(r),vue.createVNode(u,{modelValue:o.notificationModal.show,"onUpdate:modelValue":t[6]||(t[6]=w=>o.notificationModal.show=w),h:o.notificationModal.h},null,8,["modelValue","h"]),o.stopMe?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[i.isMember&&o.isLogin&&o.config.openTag?(vue.openBlock(),vue.createElementBlock("div",_c,[vc,(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.targetUserTags,w=>(vue.openBlock(),vue.createElementBlock("span",bc,[kc,vue.createElementVNode("span",null,vue.toDisplayString(w),1),vue.createElementVNode("i",{class:"fa fa-trash-o remove",onClick:m=>i.removeTargetUserTag(w)},null,8,Cc)]))),256)),vue.createElementVNode("span",{class:"add-tag ago",onClick:t[7]||(t[7]=(...w)=>i.addTargetUserTag&&i.addTargetUserTag(...w)),title:"添加标签"},"+")])):vue.createCommentVNode("",!0),i.isPost&&!o.show?(vue.openBlock(),vue.createElementBlock("div",Tc,[o.loading?(vue.openBlock(),vue.createElementBlock("div",xc,[vue.createVNode(v)])):(vue.openBlock(),vue.createElementBlock("div",Sc,[Ic,vue.createVNode(y,{size:"small",onClick:i.showPost},{default:vue.withCtx(()=>[vue.createTextVNode("点击显示")]),_:1},8,["onClick"])]))])):vue.createCommentVNode("",!0)],64)),(vue.openBlock(),vue.createBlock(vue.Teleport,{to:"body"},[vue.createVNode(vue.Transition,null,{default:vue.withCtx(()=>[o.popConfirmModal.show?(vue.openBlock(),vue.createElementBlock("div",Mc,[vue.createElementVNode("div",Lc,vue.toDisplayString(o.popConfirmModal.title),1),vue.createElementVNode("div",Rc,[vue.createVNode(y,{type:"link",size:"small",onClick:vue.withModifiers(i.popConfirmModalCancel,["stop"])},{default:vue.withCtx(()=>[vue.createTextVNode("取消")]),_:1},8,["onClick"]),vue.createVNode(y,{size:"small",onClick:vue.withModifiers(i.popConfirmModalConfirm,["stop"])},{default:vue.withCtx(()=>[vue.createTextVNode("确认")]),_:1},8,["onClick"])])],512)):vue.createCommentVNode("",!0)]),_:1})]))],64)}const Nc=J(wc,[["render",Oc],["__scopeId","data-v-15f2a343"]]);let Pc=!document.querySelector("#Rightbar"),me=document.createElement("section");me.id="app";function Ec(){window.baseUrl=location.origin,window.initPost=Jt,window.win=function(){return window},window.win().doc=window.win().document,window.win().query=r=>window.win().document.querySelector(r),window.query=r=>window.win().document.querySelector(r),window.clone=r=>JSON.parse(JSON.stringify(r)),window.user=Ln,window.targetUserName="",window.pageType=void 0,window.pageData={pageNo:1},window.config=Rn,window.isNight=$(".Night").length===1,window.cb=null,window.stopMe=!1,window.postList=[],window.parse={async parsePostContent(r,u,v){let y=v.match(/var once = "([\d]+)";/);y&&y[1]&&(r.once=y[1]),r.isReport=v.includes("你已对本主题进行了报告");let w=u.find("#Main");if(!r.title||!r.content_rendered){let G=w.find("h1");G&&(r.title=G[0].innerText);}let m=w.find(".header > a");m.length&&(r.node.title=m[1].innerText,r.node.url=m[1].href);let h=w.find(".header small.gray a:nth-child(1)");h.length&&(r.member.username=h[0].innerText);let C=w.find(".header small.gray span");C.length&&(r.createDateAgo=C[0].innerText,r.createDate=C[0].title);let k=w.find(".header .avatar");k.length&&(r.member.avatar_large=k[0].src);let S=u.find(".topic_buttons");if(S.length){let G=S.find(".tb:first");G.length&&(r.isFavorite=G[0].innerText==="取消收藏");let X=S.find(".tb:nth-child(3)");X.length&&(r.isIgnore=X[0].innerText==="取消忽略"),S.find("#topic_thank .tb").length||(r.isThanked=!0);let te=S.find(".topic_stats");if(te.length){let le=te[0].innerText,pe=le.matchAll(/([\d]+)[\s]*人收藏/g),we=[...pe];we.length&&(r.collectCount=Number(we[0][1])),pe=le.matchAll(/([\d]+)[\s]*likes/g),we=[...pe],we.length&&(r.collectCount=Number(we[0][1]));let ke=[...le.matchAll(/([\d]+)[\s]*人感谢/g)];ke.length&&(r.thankCount=Number(ke[0][1]));let Se=le.matchAll(/([\d]+)[\s]*次点击/g),re=[...Se];re.length&&(r.clickCount=Number(re[0][1])),Se=le.matchAll(/([\d]+)[\s]*views/g),re=[...Se],re.length&&(r.clickCount=Number(re[0][1]));}}let Y=u.find("#Main .box").first().clone();Y.find(".topic_buttons").remove(),Y.find(".inner").remove(),Y.find(".header").remove();let E=Y.html();return E=I.checkPhotoLink2Img(E),r.headerTemplate=E,r},async parseOp(r){if(!r.member.id){let u=await fetch(window.baseUrl+"/api/members/show.json?username="+r.member.username);u.status===200&&(r.member=await u.json());}if(r.member.id){let u=new Date(r.member.created*1e3),v=`${u.getFullYear()}-${u.getMonth()+1}-${u.getDate()}`;u.setHours(0),u.setMinutes(0),u.setSeconds(0),u.setMilliseconds(0);let y=new Date;y.setHours(0),y.setMinutes(0),y.setSeconds(0),y.setMilliseconds(0);let m=y.getTime()-u.getTime()<=1e3*60*60*24*7;r.member.createDate=v+" 注册",r.member.isNew=m;}else r.member.createDate="用户已被注销/封禁",r.member.isNew=!0;return r},async getPostAllReplies(r,u,v,y=1){var C,k;if(u.find("#no-comments-yet").length)return r;let h=u.find("#Main .box")[1].querySelectorAll(".cell");if(h&&h.length){r.fr=h[0].querySelector(".cell .fr").innerHTML,h=Array.from(h);let S=h[0].querySelector(".snow");r.lastReplyDate=((k=(C=S==null?void 0:S.nextSibling)==null?void 0:C.nodeValue)==null?void 0:k.trim())||"";let q=[];if(h[1].id){q.push({i:y,replyList:this.parsePageReplies(h.slice(1))});let Y=I.getAllReply(q);return I.createList(r,Y),r}else {let Y=[];return new Promise((E,G)=>{q.push({i:y,replyList:this.parsePageReplies(h.slice(2,h.length-1))});let X=h[1].querySelectorAll("a.page_normal");X=Array.from(X);let K=window.baseUrl+"/t/"+r.id;for(let te=0;te<X.length;te++){let le=Number(X[te].innerText);Y.push(this.fetchPostOtherPageReplies(K+"?p="+le,le));}Promise.allSettled(Y).then(te=>{te.filter(pe=>pe.status==="fulfilled").map(pe=>q.push(pe.value));let le=I.getAllReply(q);I.createList(r,le),E(r);});})}}},fetchPostOtherPageReplies(r,u){return new Promise(v=>{$.get(r).then(y=>{let w=y.match(/<body[^>]*>([\s\S]+?)<\/body>/g),h=$(w[0]).find("#Main .box")[1].querySelectorAll(".cell");h=Array.from(h),v({i:u,replyList:this.parsePageReplies(h.slice(2,h.length-1))});}).catch(y=>{y.status===403&&I.cbChecker({type:"restorePost",value:null});});})},parsePageReplies(r){let u=[];return r.forEach((v,y)=>{if(!v.id)return;let w={level:0,thankCount:0,replyCount:0,isThanked:!1,isOp:!1,isDup:!1,id:v.id.replace("r_","")},m=v.querySelector(".reply_content");w.reply_content=I.checkPhotoLink2Img(m.innerHTML),w.reply_text=m.textContent;let{users:h,floor:C}=this.parseReplyContent(w.reply_content);w.hideCallUserReplyContent=w.reply_content,h.length===1&&(w.hideCallUserReplyContent=w.reply_content.replace(/@<a href="\/member\/[\s\S]+?<\/a>(\s#[\d]+)?\s(<br>)?/,()=>"")),w.replyUsers=h,w.replyFloor=C;let k=v.querySelector(".ago");w.date=k.textContent;let S=v.querySelector("strong a");w.username=S.textContent;let q=v.querySelector("td img");w.avatar=q.src;let Y=v.querySelector(".no");w.floor=Number(Y.textContent);let E=v.querySelector(".thank_area");E&&(w.isThanked=E.classList.contains("thanked"));let G=v.querySelector(".small");G&&(w.thankCount=Number(G.textContent)),v.querySelector(".op")&&(w.isOp=!0),v.querySelector(".mod")&&(w.isMod=!0),u.push(w);}),u},parseReplyContent(r){if(!r)return;let u=[],v=C=>{let k=C.indexOf('">');if(k>-1){let S=C.substring(0,k);u.find(q=>q===S)||u.push(S);}},y=/@<a href="\/member\/([\s\S]+?)<\/a>/g,m=[...r.matchAll(y)];m.length>1&&m.map(C=>{v(C[1]);}),m.length===1&&v(m[0][1]);let h=-1;if(u.length===1){let C=/@<a href="\/member\/[\s\S]+?<\/a>[\s]+#([\d]+)/g,S=[...r.matchAll(C)];S.length&&(h=Number(S[0][1]));}return {users:u,floor:h}},async getPostDetail(r,u,v,y=1){return r=await this.parsePostContent(r,u,v),await this.getPostAllReplies(r,u,v,y)},parsePagePostList(r,u){if(r.forEach(y=>{let w=y.querySelector(".item_title");if(!w)return;let m=Le();y.classList.add("post-item");try{let h=w.querySelector("a"),{href:C,id:k}=I.parseA(h);m.id=String(Number(k)),h.href=m.href=C,m.url=location.origin+"/api/topics/show.json?id="+m.id,y.classList.add(`id_${k}`),y.dataset.href=C;let S=y.querySelector("td:nth-child(4)");S||(S=y.querySelector("td:nth-child(2)")),S.style.position="relative";let q=document.createElement("div");q.dataset.id=m.id,q.classList.add("toggle"),q.innerText="预览",S.append(q),window.config.viewType==="card"&&window.postList.push(m);}catch{}}),window.pageType===j.Home){localStorage.setItem("d","");const y=()=>{let w=$(window.atob("LmxpZ2h0LXRvZ2dsZSA+IGltZw==")).length;w===0?(window.stopMe=!0,localStorage.setItem("d","1"),I.cbChecker({type:"syncData"})):localStorage.setItem("d",""),w=$(window.atob("LnYycC1ob3Zlci1idG4=")).length,w!==0?(window.stopMe=!0,localStorage.setItem("d","1"),I.cbChecker({type:"syncData"})):localStorage.setItem("d","");};y(),setTimeout(y,1e3),setTimeout(y,2e3),setTimeout(y,3e3),setTimeout(y,5e3),setTimeout(y,1e4),setTimeout(y,15e3);}const v=y=>{let w=window.postList.findIndex(h=>h.id===y.id);w>-1&&(window.postList[w]=Object.assign(window.postList[w],y),I.cbChecker({type:"syncData"}));let m=u.querySelector(`.id_${y.id}`);m.classList.add("preview"),y.content_rendered&&I.appendPostContent(y,m);};if(window.config.viewType==="card"&&!window.stopMe){let y=localStorage.getItem("cacheData"),w=[];if(y){w=JSON.parse(y);let h=Date.now();w=w.filter(C=>C.created>h/1e3-60*60*24*3);}let m=0;for(let h=0;h<window.postList.length;h++){let C=window.postList[h],k=w.find(S=>S.id===C.id);k?(k.href=C.href,v(k)):(m++,setTimeout(()=>{$.get(C.url).then(S=>{if(S&&S.length){let q=Le(S[0]);q.href=C.href,w.push(q),localStorage.setItem("cacheData",JSON.stringify(w)),v(q);}});},m<4?0:(m-4)*1e3));}}},async createNoteItem(r){return new Promise(async u=>{let v=new FormData;v.append("content",r),v.append("parent_id",0),v.append("syntax",0);let y=await fetch(`${location.origin}/notes/new`,{method:"post",body:v});if(y.redirected&&y.status===200){u(y.url.substr(-5));return}u(null);})},async editNoteItem(r,u){if(!u)return;let v=new FormData;v.append("content",r),v.append("syntax",0);let y=await fetch(`${location.origin}/notes/edit/${u}`,{method:"post",body:v});return y.redirected&&y.status===200},async saveTags(r){for(const[u,v]of Object.entries(r))v.length||delete r[u];return await this.editNoteItem(window.user.tagPrefix+JSON.stringify(r),window.user.tagsId)},async saveReadList(r){},async saveImgurList(r){}};function e(){try{Te("脚本设置",()=>{I.cbChecker({type:"openSetting"});}),Te("仓库地址",()=>{I.openNewTab(he.git,!0);}),Te("反馈 & 建议",I.feedback);}catch{}}function t(){let r=`
       html, body {
            font-size: 62.5%;
        }
        

        :root{
          --box-border-radius:8px;
        }
        
        .box{
          box-shadow:rgba(0, 0, 0, 0.08) 0px 4px 12px;
        }
        
        #Tabs{
            border-top-left-radius: var(--box-border-radius) !important;
            border-top-right-radius: var(--box-border-radius) !important;
        }
        
        #Main .cell .count_livid { 
            font-size: 14px;
            font-weight: bold;
            padding: 3px 10px; 
            border-radius: 5px; 
        }

        #Wrapper {
          height: unset !important;
          width: unset !important;
        }

       #Wrapper > .content {
        height: unset !important;
        width: unset !important;
          max-width:1100px !important;
      }

      .post-item {
          background: white;
      } 

      .post-item > .post-content {
          height: 0;
          margin-top: 0;
      }

      .post-item:hover .toggle {
          display: flex;
      }

      .toggle {
          position: absolute;
          right: ${window.config.viewType==="simple"?"5rem":0};
          top: ${window.config.viewType==="simple"?0:"0.5rem"};
            width: 5rem;
            height: 100%;
            display: flex;
            justify-content: flex-end;
            align-items: flex-end;
            cursor: pointer;
            font-size: 1.2rem;
            color: var(--link-color);
          display: none;
            padding-right: 1rem;
      }

      .preview {
          margin: 1rem 0;
          border: 1px solid transparent;
          border-radius: var(--box-border-radius);
          cursor: pointer;
      }

      .preview:hover {
          border: 1px solid #c8c8c8;
      }

      .preview > .post-content {
          height: unset !important;
          margin-top: 0.5rem !important;
      }

      .preview > .post-content.show-all {
          max-height: unset;
          -webkit-mask-image:none; 
      }

      .preview  .topic-link:link {
          color: black !important;
      }

      .post-content {
          margin-top: 0.5rem;
          display: block;
          max-height: 30rem;
          overflow: hidden;
          text-decoration: unset !important;
          line-break: anywhere;
          -webkit-mask-image: linear-gradient(180deg,#000 60%,transparent);
      }

      .show-more {
        display: none;
      }

      .preview > .show-more {
        font-size: 1.3rem;
        text-align: right;
        height: 3rem;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        z-index: 9;
      }

      .post-content:visited {
          color: #afb9c1 !important;
      }

      .post-content:link {
          color: #494949;
      }


      .Night .post-item {
          background: #18222d !important;
      }

      .Night .preview {
          border: 1px solid #3b536e;
      }

      .Night .preview > .post-content:link {
          color: #d1d5d9;
      }

      .Night .preview > .post-content:visited {
          color: #393f4e !important;
      }
      
      .Night .preview  .topic-link:link {
          color: #c0dbff !important;
      }
      
      ${window.config.viewType==="simple"?`
      ${window.pageType!==j.Member?`
      .item table tr td:first-child{display:none;}
      #Rightbar .cell table:first-child tr td:first-child{display:none;}
      .item table tr td .sep5{display:none;}
      .item table tr td .topic_info{display:none;}
      .item {border-bottom:none;}
      .avatar,#avatar{display:none;}
      `:""}
      
      #Logo {background-image:url('https://i.imgur.com/i9VgUtM.png');}
       .bigger a, .top:nth-last-child(5){color: transparent!important;text-shadow: #b0b0b0 0 0 6px;user-select: none;}
      // .bigger a:before,.top:nth-last-child(5):before{content:'Mona Lisa';position: absolute;background: white;}
      #Rightbar .cell table:first-child tr td:first-child{display:none;}
      `:""}

      ${window.config.customBgColor?`#Wrapper {
          background: ${window.config.customBgColor} !important;
        }`:""}
        
        
      .top{
        position:relative;
      }
        
      .new:before{
        content:'new';
        position: absolute;
        background: red;
        font-size: 10px;
        border-radius: 4px;
        padding: 0px 2px;
        color: white;
        right: -9px;
        top: -3px;
      }
    }
    `,u=document.createElement("style");u.rel="stylesheet",u.type="text/css",u.innerHTML=r,window.document.head.append(u);}function n(){let r=new Date().getUTCFullYear()+"/"+(new Date().getUTCMonth()+1)+"/"+new Date().getUTCDate();if(window.pageType===j.Home){let u=window.query('.box .inner a[href="/mission/daily"]');u?l(u,r):window.win().doc.getElementById("gift_v2excellent")&&(window.win().doc.getElementById("gift_v2excellent").click(),localStorage.setItem("menu_clockInTime",r));}else {let u=localStorage.getItem("menu_clockInTime");(!u||u!=r)&&o(r);}}function l(r,u){let v=window.baseUrl+"/mission/daily/redeem?"+RegExp("once\\=(\\d+)").exec(document.querySelector("div#Top .tools, #menu-body").innerHTML)[0];$.get(v).then(y=>{let w=y.match(/<body[^>]*>([\s\S]+?)<\/body>/g),m=$(w[0]);m.find("li.fa.fa-ok-sign").length?(m=m.find("#Main").text().match(/已连续登录 (\d+?) 天/)[0],localStorage.setItem("menu_clockInTime",u),r&&(r.textContent=`自动签到完成！${m}`,r.href="javascript:void(0);")):(In({text:`自动签到失败！请关闭其他插件或脚本。
如果连续几天都签到失败，请联系作者解决！`,timeout:4e3,onclick(){I.feedback();}}),r&&(r.textContent="自动签到失败！请尝试手动签到！"));});}function o(r){$.get(window.baseUrl+"/mission/daily").then(u=>{let v=u.match(/<body[^>]*>([\s\S]+?)<\/body>/g);$(v[0]).find('input[value^="领取"]').length?l(null,r):localStorage.setItem("menu_clockInTime",r);});}function i(r,u){return new Promise((v,y)=>{$.get(location.origin+"/notes/edit/"+r).then(w=>{let m=w.match(/<body[^>]*>([\s\S]+?)<\/body>/g),C=$(m[0]).find(".note_editor").text();if(C===u)v({});else {let k=C.substring(u.length);try{v(JSON.parse(k));}catch{v({});}}});})}function a(r,u){fetch(`/notes/${r}`).then(v=>{v.text().then(y=>{let w=y.match(/\?once=([\d]+)/);w&&w[1]&&fetch(`/notes/delete/${r}?once=${Number(w[1])}`).then(m=>{m.status===200?m.redirected&&m.url===location.origin+"/"&&u():u();});});});}async function p(){$.get(location.origin+"/notes").then(async r=>{let u=r.match(/<body[^>]*>([\s\S]+?)<\/body>/g),y=$(u[0]).find("#Main .box .note_item_title a");if(window.config.openTag){let m=Array.from(y).filter(h=>h.innerText.includes(window.user.tagPrefix));if(m.length){if(m.length>1){let h=!0;for(let C=1;C<m.length-1;C++)setTimeout(()=>{if(!h)return;let k=m[C].href.substr(-5);a(k,()=>h=!1);},60*1e3*C);}window.user.tagsId=m[0].href.substr(-5),window.user.tags=await i(window.user.tagsId,window.user.tagPrefix);}else {let h=await window.parse.createNoteItem(window.user.tagPrefix);h&&(window.user.tagsId=h);}}let w=Array.from(y).filter(m=>m.innerText.includes(window.user.configPrefix));if(w.length){if(w.length>1){let h=!0;for(let C=1;C<w.length-1;C++)setTimeout(()=>{if(!h)return;let k=w[C].href.substr(-5);a(k,()=>h=!1);},60*1e3*C);}window.user.configNoteId=w[0].href.substr(-5);let m=await i(window.user.configNoteId,window.user.configPrefix);window.config=Object.assign(window.config,m);}else {let m=await window.parse.createNoteItem(window.user.configPrefix);m&&(window.user.configNoteId=m);}window.config.version<he.currentVersion&&(window.config.version=he.currentVersion),localStorage.setItem("v2ex-config",JSON.stringify(window.config)),window.parse.editNoteItem(window.user.configPrefix+JSON.stringify(window.config),window.user.configNoteId),await I.cbChecker({type:"syncData"}),setTimeout(()=>[window.initConfig=!0]);});}function f(){let r=$('<a href="/" class="top">脚本设置</a>');r.on("click",function(u){u.stopPropagation(),u.preventDefault(),this.classList.remove("new"),I.cbChecker({type:"openSetting"});}),$(".tools").prepend(r);}async function c(){window.addEventListener("error",w=>{let m=w.target,h=m.getAttribute("data-originurl");if(h){let C=document.createElement("a");C.href=h,C.setAttribute("notice","此标签由v2ex超级增强脚本转换图片失败后恢复"),C.innerText=h,m.parentNode.replaceChild(C,m);}},!0),window.isNight&&document.documentElement.classList.add("dark");let{pageData:r,pageType:u,username:v}=I.checkPageType();window.pageType=u,window.pageData=r,window.targetUserName=v,e();let y=document.querySelector(".tools .top:nth-child(2)");y&&y.textContent!=="注册"&&(window.user.username=y.textContent,window.user.avatar=$("#Rightbar .box .avatar").attr("src")),I.initConfig().then(async w=>{f(),t();try{window.config.autoSignin&&window.user.username&&n();}catch{}window.user.username&&p();let m,h,C,k;switch(window.pageType){case j.Node:m=document.querySelectorAll("#Wrapper #Main .box");try{k=$('<div class="post-item"></div>'),window.config.viewType==="card"&&k[0].classList.add("preview"),$(m[1]).prepend(k),$(m[1]).children().slice(1,3).each(function(){this.classList.contains("cell")&&k.append(this);}),k=$('<div class="post-item"></div>'),window.config.viewType==="card"&&k[0].classList.add("preview"),$(m[1]).append(k),$(m[1]).children().slice(2).each(function(){this.classList.contains("cell")&&k.append(this);}),m[1].style.boxShadow="unset",m[1].style.background="unset",m[1].style.overflow="hidden";}catch{}h=m[1].querySelector("#TopicsNode").querySelectorAll(".cell"),h[0].before(me),window.parse.parsePagePostList(h,m[1]);break;case j.Changes:case j.Home:m=document.querySelector("#Wrapper #Main .box");try{k=$('<div class="post-item"></div>'),window.config.viewType==="card"&&k[0].classList.add("preview"),$(m).prepend(k),$(m).children().slice(1,3).each(function(){this.classList.contains("item")||k.append(this);}),C=$(m).children().last(),C.addClass("cell post-item"),window.config.viewType==="card"&&C[0].classList.add("preview"),m.style.boxShadow="unset",m.style.background="unset",m.style.overflow="hidden";}catch{}h=m.querySelectorAll(".item"),h[0].before(me),window.parse.parsePagePostList(h,m);break;case j.Post:if(localStorage.getItem("d")){window.stopMe=!0,I.cbChecker({type:"syncData"});return}if(m=document.querySelector("#Wrapper #Main .box"),m.after(me),await I.checkPostReplies(window.pageData.id,!1)){window.stopMe=!0,I.cbChecker({type:"syncData"}),I.cbChecker({type:"warningNotice",value:"由于回复数量较多，脚本已停止解析楼中楼"});return}if(window.config.postWidth){let K=$("#Main");K.css({width:window.config.postWidth,margin:"unset"}),$("#Wrapper > .content").css({"max-width":"unset",display:"flex","justify-content":"center",gap:"20px"}),K.after($("#Rightbar"));}let E=Le({id:window.pageData.id}),G=$(document.body),X=document.documentElement.outerHTML;window.parse.parsePostContent(E,G,X).then(async K=>{await I.cbChecker({type:"postContent",value:K}),await window.parse.parseOp(K);}),window.parse.getPostAllReplies(E,G,X,window.pageData.pageNo).then(async K=>{await I.cbChecker({type:"postReplies",value:K});});break;case j.Member:if(m=document.querySelectorAll("#Wrapper #Main .box"),location.pathname.includes("/replies"))m[0].after(me);else {window.config.openTag&&(m[0].style.borderBottom="none",m[0].style["border-bottom-left-radius"]="0",m[0].style["border-bottom-right-radius"]="0");try{k=$('<div class="post-item"></div>'),window.config.viewType==="card"&&k[0].classList.add("preview"),$(m[1]).prepend(k),$(m[1]).children().slice(1,2).each(function(){this.classList.contains("item")||k.append(this);}),C=$(m[1]).children().last(),C.addClass("cell post-item"),window.config.viewType==="card"&&C[0].classList.add("preview"),m[1].style.boxShadow="unset",m[1].style.background="unset",m[1].style.overflow="hidden";}catch{}h=m[1].querySelectorAll(".cell"),m[0].after(me),window.parse.parsePagePostList(h,m[1]);}break;default:window.stopMe=!0,I.cbChecker({type:"syncData"});break}});}window.canParseV2exPage=!window.location.search.includes("script"),window.canParseV2exPage?c():(document.querySelector("#Wrapper #Main .box").after(me),window.stopMe=!0,I.cbChecker({type:"syncData"}),window.location.search.includes("script=0")&&I.cbChecker({type:"warningNotice",value:"脚本无法查看此主题，已为您单独打开此主题"}),window.location.search.includes("script=1")&&I.cbChecker({type:"warningNotice",value:"由于回复数量较多，已为您单独打开此主题并停止解析楼中楼"}));}

  if (!Pc) {
    (o=>{if(typeof GM_addStyle=="function"){GM_addStyle(o);return}const r=document.createElement("style");r.textContent=o,document.head.append(r)})(' .tip[data-v-ee672411]{position:fixed;font-size:1.6rem;z-index:9999;max-width:10rem;border-radius:.5rem;padding:1rem;color:var(--color-font-8);background:var(--color-tooltip-bg);box-shadow:0 0 6px 1px var(--color-tooltip-shadow)}.v-enter-active[data-v-e7c0fbef],.v-leave-active[data-v-e7c0fbef]{transition:opacity .3s ease}.v-enter-from[data-v-e7c0fbef],.v-leave-to[data-v-e7c0fbef]{opacity:0}.username[data-v-e7c0fbef]{font-weight:700;font-size:1.4rem;margin-right:1rem}.link-num[data-v-e7c0fbef]{font-size:1.2rem;font-weight:700;color:#e02a2a}.owner[data-v-e7c0fbef]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;margin-right:1rem;transform:scale(.8)}.mod[data-v-e7c0fbef]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;transform:scale(.8);background:#1484cd;color:#fff;margin-right:1rem}.my-tag[data-v-e7c0fbef]{font-size:1.4rem;color:red;margin-left:1rem}.my-tag:hover .remove[data-v-e7c0fbef]{display:inline}.my-tag .remove[data-v-e7c0fbef]{cursor:pointer;margin-left:.5rem;display:none}.add-tag[data-v-e7c0fbef]{font-size:2.4rem;transform:translateY(.2rem);line-height:1rem;display:inline-block;margin-left:1rem;cursor:pointer;position:absolute;display:none}.floor[data-v-e7c0fbef]{margin-left:.5rem;font-size:1.1rem;line-height:1rem;border-radius:.5rem;display:inline-block;background-color:var(--color-floor);color:var(--color-floor-font);padding:3px 9px;cursor:default}[data-v-e7c0fbef]:root{--color-main-bg: #e2e2e2;--color-second-bg: white;--color-third-bg: #e2e2e2;--color-item-bg: white;--color-swtich-bg: #dcdfe6;--color-active: #409eff;--color-font: #999;--color-font-8: rgba(0, 0, 0, .8);--color-font-3: rgba(0, 0, 0, .3);--color-font-pure: black;--color-input-bg: white;--color-input-border: #e2e2e2;--color-input-border-hover: #a3a6ad;--color-radio-border: #e2e2e2;--color-tooltip-bg: white;--color-tooltip-shadow: #bbbbbb;--color-scrollbar: #93ade3;--color-line: #e2e2e2;--color-loading-1: #00000033;--color-loading-2: #000;--color-floor: #f0f0f0;--color-floor-font: #bdbdbd;--color-editor-toolbar: #f6f7f8;--color-sp-btn-bg: #f1f1f1;--color-call-list-bg: white;--color-top-reply-wrap-bg: #f2f3f5}html.dark[data-v-e7c0fbef]{--color-main-bg: #22303f;--color-second-bg: #18222d;--color-third-bg: #31475e;--color-item-bg: #18222d;--color-swtich-bg: #4c4d4f;--color-active: #409eff;--color-font: rgba(255, 255, 255, .5);--color-font-8: rgba(255, 255, 255, .8);--color-font-3: rgba(255, 255, 255, .3);--color-font-pure: white;--color-input-bg: #333333;--color-input-border: #6c6e72;--color-input-border-hover: #a3a6ad;--color-radio-border: #454847;--color-tooltip-bg: #31475e;--color-tooltip-shadow: #3b3b3b;--color-scrollbar: #5c5d5e;--color-line: var(--box-border-color);--color-loading-1: rgba(178, 177, 177, .2);--color-loading-2: #ffffff;--color-floor: #293b4d;--color-floor-font: rgba(255, 255, 255, .3);--color-editor-toolbar: var(--box-background-hover-color);--color-sp-btn-bg: #31475e;--color-call-list-bg: #31475e;--color-top-reply-wrap-bg: #212f3e;--color-top-reply-wrap-line: #3b536d}html[data-v-e7c0fbef],body[data-v-e7c0fbef]{font-size:62.5%}[data-v-e7c0fbef]::-webkit-scrollbar{width:1rem;height:1rem}[data-v-e7c0fbef]::-webkit-scrollbar-track{background:transparent;border-radius:.2rem}[data-v-e7c0fbef]::-webkit-scrollbar-thumb{background:var(--color-scrollbar);border-radius:1rem}.flex[data-v-e7c0fbef]{display:flex;align-items:center;justify-content:space-between}.flex-end[data-v-e7c0fbef]{justify-content:flex-end}.flex-center[data-v-e7c0fbef]{justify-content:center}.p1[data-v-e7c0fbef]{padding:1rem}.p2[data-v-e7c0fbef]{padding:2rem}.p0[data-v-e7c0fbef]{padding:0!important}body :is(.topic_content,.reply_content) a[href^=http][data-v-e7c0fbef]{text-underline-offset:.7ex;text-decoration:underline 1px}a[data-v-e7c0fbef]{text-decoration:none;cursor:pointer}a[data-v-e7c0fbef]:hover{text-decoration:underline}.tool[data-v-e7c0fbef]{position:relative;display:flex;align-items:center;border-radius:.3rem;cursor:pointer;height:2.6rem;padding:0 .5rem;gap:.2rem}.tool>svg[data-v-e7c0fbef]{width:1.6rem!important;height:1.6rem!important}.tool[data-v-e7c0fbef]:hover{background:var(--color-third-bg)}.tool.no-hover[data-v-e7c0fbef]{cursor:default}.tool.no-hover[data-v-e7c0fbef]:hover{background:unset!important}.tool.disabled[data-v-e7c0fbef]{cursor:not-allowed}.tool.disabled[data-v-e7c0fbef]:hover{background:unset!important}.my-node[data-v-e7c0fbef]{border-radius:.2rem;padding:.4rem;font-size:1rem;color:#999;background:#f5f5f5;cursor:pointer}.my-node[data-v-e7c0fbef]:hover{text-decoration:none;background:#e2e2e2}.msgs[data-v-e7c0fbef]{position:fixed;margin-left:calc(50% - 25rem);width:50rem;z-index:9999;bottom:0;left:0;right:0}.my-box[data-v-e7c0fbef]{box-shadow:0 2px 3px #0000001a;box-shadow:#00000014 0 4px 12px;border-radius:var(--box-border-radius);background:var(--box-background-color);margin-bottom:2rem;width:100%;box-sizing:border-box;transition:background-color .3s}.my-cell[data-v-e7c0fbef]{color:var(--color-font);padding:.8rem 1rem;font-size:1.4rem;line-height:150%;text-align:left;border-bottom:1px solid var(--color-line)}.modal[data-v-e7c0fbef]{position:fixed;z-index:1001;width:100vw;height:100vh;left:0;top:0;display:flex;justify-content:center;align-items:center}.modal .title[data-v-e7c0fbef]{font-size:2.4rem;margin-bottom:1rem;text-align:center}.modal .option[data-v-e7c0fbef]{display:flex;align-items:center;padding:.6rem 0}.modal .option>span[data-v-e7c0fbef]{position:relative}.modal .mask[data-v-e7c0fbef]{position:fixed;width:100vw;height:100vh;left:0;top:0;background-color:#1d1c1c47}.radio-group2[data-v-e7c0fbef]{display:inline-flex;border-radius:.5rem;overflow:hidden;border:1px solid var(--color-radio-border);background:var(--box-background-alt-color)}.radio-group2 .radio[data-v-e7c0fbef]{cursor:pointer;background:transparent;padding:.5rem 1.2rem;border-left:1px solid var(--color-radio-border);font-size:1.3rem;color:var(--color-gray)}.radio-group2 .radio[data-v-e7c0fbef]:first-child{border-left:none}.radio-group2 .active[data-v-e7c0fbef]{background:var(--color-third-bg);color:var(--color-font)}.pop-confirm[data-v-e7c0fbef]{position:relative;display:inline-flex;justify-content:center}input[data-v-e7c0fbef]{height:3rem;outline:unset;border:1px solid var(--color-input-border);padding:0 .5rem;border-radius:5px;box-sizing:border-box;transition:all .3s;background:var(--color-input-bg);color:var(--color-font)}input[data-v-e7c0fbef]:hover{border:1px solid var(--color-input-border-hover)}input[data-v-e7c0fbef]:focus{border:1px solid var(--color-active)}.danger[data-v-e7c0fbef]{color:red!important}.pop-confirm-content[data-v-e7c0fbef]{position:fixed;background:var(--color-tooltip-bg);box-shadow:0 0 6px 1px var(--color-tooltip-shadow);color:var(--color-font-8);padding:1.5rem;border-radius:.8rem;transform:translate(-50%,calc(-100% - 1rem));z-index:1001}.pop-confirm-content .text[data-v-e7c0fbef]{text-align:start;font-size:1.6rem;width:15rem;min-width:15rem}.pop-confirm-content .options[data-v-e7c0fbef]{margin-top:1.5rem;display:flex;justify-content:flex-end;align-items:center;gap:1rem}.switch[data-v-e7c0fbef]{width:4.5rem;height:2.2rem;border-radius:2rem;position:relative;display:flex;align-items:center;background:var(--color-swtich-bg);transition:all .3s}.switch.active[data-v-e7c0fbef]{background:var(--color-active)}.switch.active[data-v-e7c0fbef]:before{right:.2rem}.switch[data-v-e7c0fbef]:before{position:absolute;content:" ";transition:all .3s;right:calc(100% - 2rem);width:1.8rem;height:1.8rem;background:white;border-radius:50%}.display-type[data-v-e4f684be]{height:3rem;padding:0 .3rem;background:var(--color-sp-btn-bg);border-radius:1rem;display:flex;font-size:1.4rem;align-items:center;color:#a9a9a9}.display-type .type[data-v-e4f684be]{border-radius:.8rem;padding:0 1.3rem;height:2.8rem;align-items:center;display:flex;position:relative;cursor:pointer}.display-type .type.active[data-v-e4f684be]{background:var(--color-second-bg);color:var(--color-font-pure);box-shadow:0 0 6px 0 var(--color-tooltip-shadow)}.display-type .type-list[data-v-e4f684be]{position:absolute;background:var(--color-sp-btn-bg);right:0;top:3rem;font-size:1.4rem;box-shadow:0 0 6px 0 var(--color-tooltip-shadow);border-radius:.6rem;z-index:9;color:var(--color-font)}.display-type .type-list .item[data-v-e4f684be]{word-break:keep-all;padding:.8rem 1rem;cursor:pointer}.display-type .type-list .item.active[data-v-e4f684be],.display-type .type-list .item[data-v-e4f684be]:hover{color:var(--color-font-pure)}.display-type svg[data-v-e4f684be]{width:1.5rem}.loading[data-v-2697baa2]{border:2px solid;border-color:var(--color-loading-2) var(--color-loading-1) var(--color-loading-1) var(--color-loading-1);border-radius:100%;animation:circle-2697baa2 infinite 1s linear;width:2rem;height:2rem}.loading.small[data-v-2697baa2]{width:1.2rem;height:1.2rem}.loading.large[data-v-2697baa2]{width:3rem;height:3rem}@keyframes circle-2697baa2{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.base-button[data-v-5a7d79ba]{cursor:pointer;border-radius:.6rem;padding:0 1.5rem;display:inline-flex;align-items:center;justify-content:center;transition:all .3s;height:3.6rem;line-height:1;position:relative}.base-button .loading[data-v-5a7d79ba]{position:absolute}.base-button.disabled[data-v-5a7d79ba]{opacity:.6;cursor:not-allowed;-webkit-user-select:none;user-select:none}.base-button.small[data-v-5a7d79ba]{height:3rem}.base-button.small>span[data-v-5a7d79ba]{font-size:1.3rem}.base-button.large[data-v-5a7d79ba]{height:5rem;font-size:1.8rem;padding:0 2.2rem}.base-button.large>span[data-v-5a7d79ba]{font-size:1.8rem}.base-button[data-v-5a7d79ba]:hover:not(.link){opacity:.7}.base-button.primary[data-v-5a7d79ba]{background:var(--color-active)}.base-button.primary>span[data-v-5a7d79ba]{color:#fff}.base-button.gary[data-v-5a7d79ba]{background:#4b5563}.base-button.link[data-v-5a7d79ba]{border-radius:0;border-bottom:2px solid transparent}.base-button.link>span[data-v-5a7d79ba]{color:var(--color-font-8)}.base-button.link[data-v-5a7d79ba]:hover{border-bottom:2px solid var(--color-font-8)}.base-button.active[data-v-5a7d79ba]{opacity:.4}.key-notice[data-v-5a7d79ba]{margin-left:1rem;display:flex;align-items:center;justify-content:center;font-size:1.2rem;color:#fff}.key-notice .key[data-v-5a7d79ba]{transform:scale(.8)}.setting-modal .modal-root[data-v-cb13d533]{z-index:9;background:var(--color-main-bg);border-radius:1.6rem;font-size:1.4rem;overflow:hidden;color:var(--color-font-pure)}.setting-modal .modal-root .modal-header[data-v-cb13d533]{padding:1.4rem;display:flex;justify-content:center;position:relative}.setting-modal .modal-root .modal-header .title[data-v-cb13d533]{font-size:2.2rem;text-align:left;margin-bottom:0}.setting-modal .modal-root .modal-header svg[data-v-cb13d533]{position:absolute;right:1rem;cursor:pointer;font-size:2.6rem}.setting-modal .modal-root .body[data-v-cb13d533]{width:60rem}.setting-modal .modal-root .body .modal-content[data-v-cb13d533]{background:var(--color-second-bg);flex:1;height:100%;box-sizing:border-box;padding:1rem 1rem 1rem 2rem;font-size:1.6rem;text-align:left;line-height:1.6}.setting-modal .modal-root .body .btns[data-v-cb13d533]{margin:1.5rem;display:flex;justify-content:flex-end;align-items:center;gap:1.5rem;font-size:1.4rem}.setting-modal .modal-root[data-v-9f347886]{z-index:9;background:var(--color-main-bg);border-radius:1.6rem;font-size:1.4rem;overflow:hidden;color:var(--color-font-pure)}.setting-modal .modal-root .modal-header[data-v-9f347886]{padding:2.4rem;display:flex;justify-content:space-between}.setting-modal .modal-root .modal-header .title[data-v-9f347886]{font-size:2.6rem;font-weight:700;text-align:left;margin-bottom:0}.setting-modal .modal-root .modal-header svg[data-v-9f347886]{cursor:pointer;font-size:2.6rem}.setting-modal .modal-root .body[data-v-9f347886]{width:45vw;height:70vh;display:flex}.setting-modal .modal-root .body .left[data-v-9f347886]{display:flex;flex-direction:column;justify-content:space-between;align-items:center;font-size:1.8rem}.setting-modal .modal-root .body .left .tabs[data-v-9f347886]{padding:1rem 2rem;display:flex;flex-direction:column;gap:1rem}.setting-modal .modal-root .body .left .tabs .tab[data-v-9f347886]{cursor:pointer;padding:1rem 1.5rem;border-radius:.8rem;display:flex;align-items:center;gap:1rem}.setting-modal .modal-root .body .left .tabs .tab.active[data-v-9f347886]{background:var(--color-item-bg)}.setting-modal .modal-root .body .left .icons[data-v-9f347886]{display:flex;gap:1rem;margin-bottom:2rem;font-size:2.4rem}.setting-modal .modal-root .body .modal-content[data-v-9f347886]{background:var(--color-second-bg);flex:1;height:100%;box-sizing:border-box;padding:1rem 1rem 1rem 2rem;border-radius:1.6rem;display:flex}.setting-modal .modal-root .body .modal-content .scroll[data-v-9f347886]{flex:1;padding-right:1rem;overflow:auto}.setting-modal .modal-root .body .modal-content .scroll .row[data-v-9f347886]{min-height:5rem;display:flex;justify-content:space-between;align-items:center}.setting-modal .modal-root .body .modal-content .scroll .row .wrapper[data-v-9f347886]{height:3rem;flex:1;display:flex;justify-content:flex-end;align-items:center;gap:var(--space)}.setting-modal .modal-root .body .modal-content .scroll .row .wrapper span[data-v-9f347886]{text-align:right;font-size:1.4rem;color:gray}.setting-modal .modal-root .body .modal-content .scroll .row .wrapper .set-key[data-v-9f347886]{align-items:center}.setting-modal .modal-root .body .modal-content .scroll .row .wrapper .set-key input[data-v-9f347886]{width:15rem;box-sizing:border-box;margin-right:1rem;height:2.8rem;outline:none;font-size:1.6rem;border:1px solid gray;border-radius:.3rem;padding:0 .5rem;background:var(--color-second-bg);color:var(--color-font-1)}.setting-modal .modal-root .body .modal-content .scroll .row .main-title[data-v-9f347886]{font-size:2.2rem;font-weight:700;color:var(--color-font-8)}.setting-modal .modal-root .body .modal-content .scroll .row .item-title[data-v-9f347886]{font-size:1.8rem}.setting-modal .modal-root .body .modal-content .scroll .desc[data-v-9f347886]{margin-bottom:1rem;font-size:1.4rem;text-align:left;color:var(--color-font)}.setting-modal .modal-root .body .modal-content .scroll .project-desc[data-v-9f347886]{text-align:start;font-size:1.6rem;padding-bottom:10rem}.setting-modal .modal-root .body .modal-content .scroll .line[data-v-9f347886]{border-bottom:1px solid #c4c3c3}.Author[data-v-64aa1930]{display:flex;align-items:center;justify-content:space-between;font-size:1.2rem;position:relative}.Author.expand[data-v-64aa1930]{margin-bottom:0}.Author .Author-left[data-v-64aa1930]{display:flex;align-items:center;max-width:65%;word-break:break-all}.Author .Author-left .username[data-v-64aa1930]{font-size:1.4rem;margin-right:.6rem}.Author .Author-left .expand-icon[data-v-64aa1930]{cursor:pointer;margin-right:.6rem;width:2rem;height:2rem;transform:rotate(90deg)}.Author .Author-left .avatar[data-v-64aa1930]{margin-right:.8rem;display:flex}.Author .Author-left .avatar img[data-v-64aa1930]{width:2.8rem;height:2.8rem;border-radius:.4rem}.Author .Author-left .texts[data-v-64aa1930]{flex:1}.Author .Author-left .owner[data-v-64aa1930]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;margin-right:.6rem;transform:scale(.8)}.Author .Author-left .dup[data-v-64aa1930]{display:inline-block;background-color:transparent;color:red;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid red;font-size:1.2rem;font-weight:700;margin-right:.6rem;transform:scale(.8)}.Author .Author-left .mod[data-v-64aa1930]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;transform:scale(.8);background:#1484cd;color:#fff;margin-right:.6rem}.Author:hover .add-tag[data-v-64aa1930]{display:inline-block}.Author .Author-right[data-v-64aa1930]{position:absolute;right:0;display:flex;align-items:center}.Author .Author-right .toolbar[data-v-64aa1930]{display:flex;align-items:center;color:var(--color-gray);opacity:0;gap:.2rem}.Author .Author-right .toolbar[data-v-64aa1930]:hover{opacity:1}.post-editor-wrapper[data-v-b23e5528]{width:100%;box-sizing:border-box;position:relative;overflow:hidden;transition:all .3s;color:var(--color-font)}.post-editor-wrapper.reply-post .post-editor[data-v-b23e5528]{border:1px solid var(--color-line)}.post-editor-wrapper.reply-post.isFocus .post-editor[data-v-b23e5528]{border:1px solid var(--color-active)}.post-editor-wrapper.reply-comment[data-v-b23e5528]{border-radius:var(--box-border-radius);overflow:hidden;border:1px solid var(--color-line)}.post-editor-wrapper.reply-comment.isFocus[data-v-b23e5528]{border:1px solid var(--color-active)}.post-editor-wrapper.reply-comment .toolbar[data-v-b23e5528]{background:var(--color-editor-toolbar)}.post-editor-wrapper .post-editor[data-v-b23e5528]{border-radius:var(--box-border-radius);transition:border .3s;width:100%;max-width:100%;padding:.6rem 1.4rem;box-sizing:border-box;outline:none;font-family:Avenir,Helvetica,Arial,sans-serif;font-size:1.4rem;min-height:13rem;resize:none;background:var(--box-background-color);color:var(--color-font-pure);border:1px solid transparent}.post-editor-wrapper .toolbar[data-v-b23e5528]{box-sizing:border-box;padding:.5rem 1rem;width:100%;position:relative;display:flex;justify-content:space-between;align-items:center}.post-editor-wrapper .toolbar .left[data-v-b23e5528]{display:flex;align-items:center;gap:1rem;font-size:2.6rem}.post-editor-wrapper .toolbar .left svg[data-v-b23e5528]{cursor:pointer}.post-editor-wrapper .toolbar .left .upload[data-v-b23e5528]{width:2.6rem;height:2.6rem;overflow:hidden;display:flex;justify-content:center;align-items:center}.post-editor-wrapper .toolbar .left .upload input[data-v-b23e5528]{width:2.6rem;height:2.6rem;cursor:pointer;position:absolute;opacity:0}.post-editor-wrapper .toolbar span[data-v-b23e5528]{color:gray;font-size:1.3rem}.post-editor-wrapper .get-cursor[data-v-b23e5528]{border-radius:var(--box-border-radius);transition:border .3s;width:100%;max-width:100%;padding:.6rem 1.4rem;box-sizing:border-box;outline:none;font-family:Avenir,Helvetica,Arial,sans-serif;font-size:1.4rem;min-height:13rem;resize:none;background:var(--box-background-color);color:var(--color-font-pure);border:1px solid transparent;position:absolute;top:0;z-index:-100}.post-editor-wrapper .emoticon-pack[data-v-b23e5528]{z-index:999999999;border-radius:1rem;padding:1rem;width:31rem;max-width:31rem;height:30rem;max-height:30rem;overflow:auto;background:var(--color-third-bg);border:1px solid var(--color-font-3);box-shadow:0 9px 24px -3px #0000000f,0 4px 8px -1px #0000001f;position:fixed;bottom:11rem;left:14rem}.post-editor-wrapper .emoticon-pack svg[data-v-b23e5528]{cursor:pointer;position:absolute;right:.8rem;font-size:2.4rem}.post-editor-wrapper .emoticon-pack .list[data-v-b23e5528]{margin:1rem 0}.post-editor-wrapper .emoticon-pack img[data-v-b23e5528]{cursor:pointer;width:3rem;height:3rem;padding:.5rem}.post-editor-wrapper .emoticon-pack span[data-v-b23e5528]{display:inline-block;cursor:pointer;font-size:2.3rem;padding:.5rem}.v-enter-active[data-v-2c9a538c],.v-leave-active[data-v-2c9a538c]{transition:opacity .3s ease}.v-enter-from[data-v-2c9a538c],.v-leave-to[data-v-2c9a538c]{opacity:0}.username[data-v-2c9a538c]{font-weight:700;font-size:1.4rem;margin-right:1rem}.link-num[data-v-2c9a538c]{font-size:1.2rem;font-weight:700;color:#e02a2a}.owner[data-v-2c9a538c]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;margin-right:1rem;transform:scale(.8)}.mod[data-v-2c9a538c]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;transform:scale(.8);background:#1484cd;color:#fff;margin-right:1rem}.my-tag[data-v-2c9a538c]{font-size:1.4rem;color:red;margin-left:1rem}.my-tag:hover .remove[data-v-2c9a538c]{display:inline}.my-tag .remove[data-v-2c9a538c]{cursor:pointer;margin-left:.5rem;display:none}.add-tag[data-v-2c9a538c]{font-size:2.4rem;transform:translateY(.2rem);line-height:1rem;display:inline-block;margin-left:1rem;cursor:pointer;position:absolute;display:none}.floor[data-v-2c9a538c]{margin-left:.5rem;font-size:1.1rem;line-height:1rem;border-radius:.5rem;display:inline-block;background-color:var(--color-floor);color:var(--color-floor-font);padding:3px 9px;cursor:default}[data-v-2c9a538c]:root{--color-main-bg: #e2e2e2;--color-second-bg: white;--color-third-bg: #e2e2e2;--color-item-bg: white;--color-swtich-bg: #dcdfe6;--color-active: #409eff;--color-font: #999;--color-font-8: rgba(0, 0, 0, .8);--color-font-3: rgba(0, 0, 0, .3);--color-font-pure: black;--color-input-bg: white;--color-input-border: #e2e2e2;--color-input-border-hover: #a3a6ad;--color-radio-border: #e2e2e2;--color-tooltip-bg: white;--color-tooltip-shadow: #bbbbbb;--color-scrollbar: #93ade3;--color-line: #e2e2e2;--color-loading-1: #00000033;--color-loading-2: #000;--color-floor: #f0f0f0;--color-floor-font: #bdbdbd;--color-editor-toolbar: #f6f7f8;--color-sp-btn-bg: #f1f1f1;--color-call-list-bg: white;--color-top-reply-wrap-bg: #f2f3f5}html.dark[data-v-2c9a538c]{--color-main-bg: #22303f;--color-second-bg: #18222d;--color-third-bg: #31475e;--color-item-bg: #18222d;--color-swtich-bg: #4c4d4f;--color-active: #409eff;--color-font: rgba(255, 255, 255, .5);--color-font-8: rgba(255, 255, 255, .8);--color-font-3: rgba(255, 255, 255, .3);--color-font-pure: white;--color-input-bg: #333333;--color-input-border: #6c6e72;--color-input-border-hover: #a3a6ad;--color-radio-border: #454847;--color-tooltip-bg: #31475e;--color-tooltip-shadow: #3b3b3b;--color-scrollbar: #5c5d5e;--color-line: var(--box-border-color);--color-loading-1: rgba(178, 177, 177, .2);--color-loading-2: #ffffff;--color-floor: #293b4d;--color-floor-font: rgba(255, 255, 255, .3);--color-editor-toolbar: var(--box-background-hover-color);--color-sp-btn-bg: #31475e;--color-call-list-bg: #31475e;--color-top-reply-wrap-bg: #212f3e;--color-top-reply-wrap-line: #3b536d}html[data-v-2c9a538c],body[data-v-2c9a538c]{font-size:62.5%}[data-v-2c9a538c]::-webkit-scrollbar{width:1rem;height:1rem}[data-v-2c9a538c]::-webkit-scrollbar-track{background:transparent;border-radius:.2rem}[data-v-2c9a538c]::-webkit-scrollbar-thumb{background:var(--color-scrollbar);border-radius:1rem}.flex[data-v-2c9a538c]{display:flex;align-items:center;justify-content:space-between}.flex-end[data-v-2c9a538c]{justify-content:flex-end}.flex-center[data-v-2c9a538c]{justify-content:center}.p1[data-v-2c9a538c]{padding:1rem}.p2[data-v-2c9a538c]{padding:2rem}.p0[data-v-2c9a538c]{padding:0!important}body :is(.topic_content,.reply_content) a[href^=http][data-v-2c9a538c]{text-underline-offset:.7ex;text-decoration:underline 1px}a[data-v-2c9a538c]{text-decoration:none;cursor:pointer}a[data-v-2c9a538c]:hover{text-decoration:underline}.tool[data-v-2c9a538c]{position:relative;display:flex;align-items:center;border-radius:.3rem;cursor:pointer;height:2.6rem;padding:0 .5rem;gap:.2rem}.tool>svg[data-v-2c9a538c]{width:1.6rem!important;height:1.6rem!important}.tool[data-v-2c9a538c]:hover{background:var(--color-third-bg)}.tool.no-hover[data-v-2c9a538c]{cursor:default}.tool.no-hover[data-v-2c9a538c]:hover{background:unset!important}.tool.disabled[data-v-2c9a538c]{cursor:not-allowed}.tool.disabled[data-v-2c9a538c]:hover{background:unset!important}.my-node[data-v-2c9a538c]{border-radius:.2rem;padding:.4rem;font-size:1rem;color:#999;background:#f5f5f5;cursor:pointer}.my-node[data-v-2c9a538c]:hover{text-decoration:none;background:#e2e2e2}.msgs[data-v-2c9a538c]{position:fixed;margin-left:calc(50% - 25rem);width:50rem;z-index:9999;bottom:0;left:0;right:0}.my-box[data-v-2c9a538c]{box-shadow:0 2px 3px #0000001a;box-shadow:#00000014 0 4px 12px;border-radius:var(--box-border-radius);background:var(--box-background-color);margin-bottom:2rem;width:100%;box-sizing:border-box;transition:background-color .3s}.my-cell[data-v-2c9a538c]{color:var(--color-font);padding:.8rem 1rem;font-size:1.4rem;line-height:150%;text-align:left;border-bottom:1px solid var(--color-line)}.modal[data-v-2c9a538c]{position:fixed;z-index:1001;width:100vw;height:100vh;left:0;top:0;display:flex;justify-content:center;align-items:center}.modal .title[data-v-2c9a538c]{font-size:2.4rem;margin-bottom:1rem;text-align:center}.modal .option[data-v-2c9a538c]{display:flex;align-items:center;padding:.6rem 0}.modal .option>span[data-v-2c9a538c]{position:relative}.modal .mask[data-v-2c9a538c]{position:fixed;width:100vw;height:100vh;left:0;top:0;background-color:#1d1c1c47}.radio-group2[data-v-2c9a538c]{display:inline-flex;border-radius:.5rem;overflow:hidden;border:1px solid var(--color-radio-border);background:var(--box-background-alt-color)}.radio-group2 .radio[data-v-2c9a538c]{cursor:pointer;background:transparent;padding:.5rem 1.2rem;border-left:1px solid var(--color-radio-border);font-size:1.3rem;color:var(--color-gray)}.radio-group2 .radio[data-v-2c9a538c]:first-child{border-left:none}.radio-group2 .active[data-v-2c9a538c]{background:var(--color-third-bg);color:var(--color-font)}.pop-confirm[data-v-2c9a538c]{position:relative;display:inline-flex;justify-content:center}input[data-v-2c9a538c]{height:3rem;outline:unset;border:1px solid var(--color-input-border);padding:0 .5rem;border-radius:5px;box-sizing:border-box;transition:all .3s;background:var(--color-input-bg);color:var(--color-font)}input[data-v-2c9a538c]:hover{border:1px solid var(--color-input-border-hover)}input[data-v-2c9a538c]:focus{border:1px solid var(--color-active)}.danger[data-v-2c9a538c]{color:red!important}.pop-confirm-content[data-v-2c9a538c]{position:fixed;background:var(--color-tooltip-bg);box-shadow:0 0 6px 1px var(--color-tooltip-shadow);color:var(--color-font-8);padding:1.5rem;border-radius:.8rem;transform:translate(-50%,calc(-100% - 1rem));z-index:1001}.pop-confirm-content .text[data-v-2c9a538c]{text-align:start;font-size:1.6rem;width:15rem;min-width:15rem}.pop-confirm-content .options[data-v-2c9a538c]{margin-top:1.5rem;display:flex;justify-content:flex-end;align-items:center;gap:1rem}.html-wrapper[data-v-2c9a538c]{position:relative}.html-wrapper .mask[data-v-2c9a538c]{max-height:90rem;overflow:hidden;-webkit-mask-image:linear-gradient(180deg,#000 80%,transparent)}.html-wrapper .expand[data-v-2c9a538c]{position:absolute;z-index:1;bottom:2rem;padding:.2rem 1.5rem;border-radius:2rem;border:1px solid gray;background:white;color:gray;left:50%;transform:translate(-50%);cursor:pointer}.top-sub-comment[data-v-48071e95]{width:100%;box-sizing:border-box;margin-top:.8rem;display:flex;position:relative}.top-sub-comment .expand-line[data-v-48071e95]{width:1.6rem;position:relative}.top-sub-comment .expand-line[data-v-48071e95]:after{position:absolute;left:50%;top:2%;content:" ";height:98%;width:0;border-right:1px solid var(--color-top-reply-wrap-line)}.top-sub-comment .right[data-v-48071e95]{flex:1;width:calc(100% - 3rem)}.top-sub-comment .right .w .post-editor-wrapper[data-v-48071e95]{margin-top:1rem}.top-sub-comment[data-v-48071e95] .avatar{display:none!important}.top-sub-comment.top-sub-reply[data-v-48071e95]:first-child{margin-top:0}.top-sub-comment.top-sub-reply>.expand-line[data-v-48071e95]{width:1rem}.top-sub-comment.top-sub-reply>.expand-line[data-v-48071e95]:after{display:none}.comment[data-v-84714fe5]{width:100%;box-sizing:border-box;margin-top:.6rem}.comment.isLevelOne[data-v-84714fe5]{border-bottom:1px solid var(--color-line);padding:.8rem 1rem;margin-top:0}.comment.ding[data-v-84714fe5]{background:rgba(255,255,0,.3)!important}.comment.isSimple .avatar[data-v-84714fe5],.comment.isSimple .expand-line[data-v-84714fe5]{display:none}.comment.isSimple .simple-wrapper[data-v-84714fe5]{padding-left:2.8rem}.comment.isSimple .w[data-v-84714fe5]{padding-left:0!important;padding-top:.5rem}.comment .comment-content-w .more[data-v-84714fe5]{text-align:center;margin:2rem 0}.comment .comment-content[data-v-84714fe5]{display:flex;position:relative}.comment .comment-content .expand-line[data-v-84714fe5]{cursor:pointer;margin-top:.6rem;width:2rem;min-width:2rem;position:relative}.comment .comment-content .expand-line[data-v-84714fe5]:after{position:absolute;left:50%;content:" ";height:100%;width:0;border-right:1px solid var(--color-line)}.comment .comment-content .expand-line[data-v-84714fe5]:hover:after{border-right:2px solid var(--color-active)}.comment .comment-content .right[data-v-84714fe5]{flex:1;width:calc(100% - 3rem)}.comment .comment-content .right .w[data-v-84714fe5]{padding-left:1rem}.comment .comment-content .right .w .post-editor-wrapper[data-v-84714fe5]{margin-top:1rem}.wrong-wrapper[data-v-84714fe5]{font-size:1.4rem;margin-bottom:1rem}.wrong-wrapper span[data-v-84714fe5]{cursor:pointer}.wrong-wrapper .del-line[data-v-84714fe5]{text-decoration:line-through}.wrong-wrapper .wrong-icon[data-v-84714fe5]{margin-left:.5rem}.wrong-wrapper .warning[data-v-84714fe5]{border-top:1px solid #e1e1e1;border-bottom:1px solid #e1e1e1;padding:1rem 0;margin-top:1rem;font-size:1.2rem;color:red}.reply-count[data-v-84714fe5]{padding:.8rem 0 .4rem;border-radius:.2rem;font-size:1.3rem;display:flex;align-items:center;color:gray;gap:1rem;cursor:pointer}.reply-count .gang[data-v-84714fe5]{width:2rem;height:0;border-bottom:1px solid #d5d5d5}.reply-count svg[data-v-84714fe5]{font-size:1rem}.top-reply-wrap[data-v-84714fe5]{background:var(--color-top-reply-wrap-bg);border-radius:.8rem;padding:.6rem;padding-left:0;margin-left:1rem}.toolbar[data-v-260c1ef3]{border-top:1px solid var(--color-line);height:3.8rem;padding-left:.6rem;display:flex;align-items:center;color:var(--color-gray);font-size:1.2rem;gap:.5rem}.comment[data-v-4a063111]{width:100%;box-sizing:border-box;display:flex;gap:1rem;padding:1rem;border-bottom:1px solid var(--color-line)}.comment.isSimple .avatar[data-v-4a063111]{display:none}.comment.isSimple .reply_content[data-v-4a063111]{margin-top:.5rem!important}.comment .avatar[data-v-4a063111]{display:flex}.comment .avatar img[data-v-4a063111]{width:3.8rem;height:3.8rem;border-radius:.3rem}.comment .comment-body[data-v-4a063111]{flex:1;display:flex;flex-direction:column}.comment .comment-body .texts[data-v-4a063111]{display:flex;align-items:center}.comment .comment-body .reply_content[data-v-4a063111]{margin-top:1rem;max-width:calc(100% - 5rem)}.comment .isRight[data-v-4a063111]{align-items:flex-end}.comment .isRight .owner[data-v-4a063111],.comment .isRight .mod[data-v-4a063111],.comment .isRight .username[data-v-4a063111]{margin:0 0 0 1rem}.comment .Author-right[data-v-4a063111]{display:flex;flex-direction:column;align-items:center}.comment .Author-right .floor[data-v-4a063111]{margin-left:0}.comment .Author-right .jump[data-v-4a063111]{color:#929596;margin-top:.4rem;font-size:1.4rem}.comment .point[data-v-4a063111]{margin:0 .5rem;font-size:1.6rem;display:flex;gap:.5rem;align-items:center;font-weight:700;color:#000}.sticky{position:sticky;bottom:-2px;z-index:2;background:var(--box-background-hover-color)!important}.sticky[stuck]{box-shadow:0 2px 20px #00000059!important}.v-enter-active[data-v-daeffca4],.v-leave-active[data-v-daeffca4]{transition:opacity .3s ease}.v-enter-from[data-v-daeffca4],.v-leave-to[data-v-daeffca4]{opacity:0}.username[data-v-daeffca4]{font-weight:700;font-size:1.4rem;margin-right:1rem}.link-num[data-v-daeffca4]{font-size:1.2rem;font-weight:700;color:#e02a2a}.owner[data-v-daeffca4]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;margin-right:1rem;transform:scale(.8)}.mod[data-v-daeffca4]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;transform:scale(.8);background:#1484cd;color:#fff;margin-right:1rem}.my-tag[data-v-daeffca4]{font-size:1.4rem;color:red;margin-left:1rem}.my-tag:hover .remove[data-v-daeffca4]{display:inline}.my-tag .remove[data-v-daeffca4]{cursor:pointer;margin-left:.5rem;display:none}.add-tag[data-v-daeffca4]{font-size:2.4rem;transform:translateY(.2rem);line-height:1rem;display:inline-block;margin-left:1rem;cursor:pointer;position:absolute;display:none}.floor[data-v-daeffca4]{margin-left:.5rem;font-size:1.1rem;line-height:1rem;border-radius:.5rem;display:inline-block;background-color:var(--color-floor);color:var(--color-floor-font);padding:3px 9px;cursor:default}[data-v-daeffca4]:root{--color-main-bg: #e2e2e2;--color-second-bg: white;--color-third-bg: #e2e2e2;--color-item-bg: white;--color-swtich-bg: #dcdfe6;--color-active: #409eff;--color-font: #999;--color-font-8: rgba(0, 0, 0, .8);--color-font-3: rgba(0, 0, 0, .3);--color-font-pure: black;--color-input-bg: white;--color-input-border: #e2e2e2;--color-input-border-hover: #a3a6ad;--color-radio-border: #e2e2e2;--color-tooltip-bg: white;--color-tooltip-shadow: #bbbbbb;--color-scrollbar: #93ade3;--color-line: #e2e2e2;--color-loading-1: #00000033;--color-loading-2: #000;--color-floor: #f0f0f0;--color-floor-font: #bdbdbd;--color-editor-toolbar: #f6f7f8;--color-sp-btn-bg: #f1f1f1;--color-call-list-bg: white;--color-top-reply-wrap-bg: #f2f3f5}html.dark[data-v-daeffca4]{--color-main-bg: #22303f;--color-second-bg: #18222d;--color-third-bg: #31475e;--color-item-bg: #18222d;--color-swtich-bg: #4c4d4f;--color-active: #409eff;--color-font: rgba(255, 255, 255, .5);--color-font-8: rgba(255, 255, 255, .8);--color-font-3: rgba(255, 255, 255, .3);--color-font-pure: white;--color-input-bg: #333333;--color-input-border: #6c6e72;--color-input-border-hover: #a3a6ad;--color-radio-border: #454847;--color-tooltip-bg: #31475e;--color-tooltip-shadow: #3b3b3b;--color-scrollbar: #5c5d5e;--color-line: var(--box-border-color);--color-loading-1: rgba(178, 177, 177, .2);--color-loading-2: #ffffff;--color-floor: #293b4d;--color-floor-font: rgba(255, 255, 255, .3);--color-editor-toolbar: var(--box-background-hover-color);--color-sp-btn-bg: #31475e;--color-call-list-bg: #31475e;--color-top-reply-wrap-bg: #212f3e;--color-top-reply-wrap-line: #3b536d}html[data-v-daeffca4],body[data-v-daeffca4]{font-size:62.5%}[data-v-daeffca4]::-webkit-scrollbar{width:1rem;height:1rem}[data-v-daeffca4]::-webkit-scrollbar-track{background:transparent;border-radius:.2rem}[data-v-daeffca4]::-webkit-scrollbar-thumb{background:var(--color-scrollbar);border-radius:1rem}.flex[data-v-daeffca4]{display:flex;align-items:center;justify-content:space-between}.flex-end[data-v-daeffca4]{justify-content:flex-end}.flex-center[data-v-daeffca4]{justify-content:center}.p1[data-v-daeffca4]{padding:1rem}.p2[data-v-daeffca4]{padding:2rem}.p0[data-v-daeffca4]{padding:0!important}body :is(.topic_content,.reply_content) a[href^=http][data-v-daeffca4]{text-underline-offset:.7ex;text-decoration:underline 1px}a[data-v-daeffca4]{text-decoration:none;cursor:pointer}a[data-v-daeffca4]:hover{text-decoration:underline}.tool[data-v-daeffca4]{position:relative;display:flex;align-items:center;border-radius:.3rem;cursor:pointer;height:2.6rem;padding:0 .5rem;gap:.2rem}.tool>svg[data-v-daeffca4]{width:1.6rem!important;height:1.6rem!important}.tool[data-v-daeffca4]:hover{background:var(--color-third-bg)}.tool.no-hover[data-v-daeffca4]{cursor:default}.tool.no-hover[data-v-daeffca4]:hover{background:unset!important}.tool.disabled[data-v-daeffca4]{cursor:not-allowed}.tool.disabled[data-v-daeffca4]:hover{background:unset!important}.my-node[data-v-daeffca4]{border-radius:.2rem;padding:.4rem;font-size:1rem;color:#999;background:#f5f5f5;cursor:pointer}.my-node[data-v-daeffca4]:hover{text-decoration:none;background:#e2e2e2}.msgs[data-v-daeffca4]{position:fixed;margin-left:calc(50% - 25rem);width:50rem;z-index:9999;bottom:0;left:0;right:0}.my-box[data-v-daeffca4]{box-shadow:0 2px 3px #0000001a;box-shadow:#00000014 0 4px 12px;border-radius:var(--box-border-radius);background:var(--box-background-color);margin-bottom:2rem;width:100%;box-sizing:border-box;transition:background-color .3s}.my-cell[data-v-daeffca4]{color:var(--color-font);padding:.8rem 1rem;font-size:1.4rem;line-height:150%;text-align:left;border-bottom:1px solid var(--color-line)}.modal[data-v-daeffca4]{position:fixed;z-index:1001;width:100vw;height:100vh;left:0;top:0;display:flex;justify-content:center;align-items:center}.modal .title[data-v-daeffca4]{font-size:2.4rem;margin-bottom:1rem;text-align:center}.modal .option[data-v-daeffca4]{display:flex;align-items:center;padding:.6rem 0}.modal .option>span[data-v-daeffca4]{position:relative}.modal .mask[data-v-daeffca4]{position:fixed;width:100vw;height:100vh;left:0;top:0;background-color:#1d1c1c47}.radio-group2[data-v-daeffca4]{display:inline-flex;border-radius:.5rem;overflow:hidden;border:1px solid var(--color-radio-border);background:var(--box-background-alt-color)}.radio-group2 .radio[data-v-daeffca4]{cursor:pointer;background:transparent;padding:.5rem 1.2rem;border-left:1px solid var(--color-radio-border);font-size:1.3rem;color:var(--color-gray)}.radio-group2 .radio[data-v-daeffca4]:first-child{border-left:none}.radio-group2 .active[data-v-daeffca4]{background:var(--color-third-bg);color:var(--color-font)}.pop-confirm[data-v-daeffca4]{position:relative;display:inline-flex;justify-content:center}input[data-v-daeffca4]{height:3rem;outline:unset;border:1px solid var(--color-input-border);padding:0 .5rem;border-radius:5px;box-sizing:border-box;transition:all .3s;background:var(--color-input-bg);color:var(--color-font)}input[data-v-daeffca4]:hover{border:1px solid var(--color-input-border-hover)}input[data-v-daeffca4]:focus{border:1px solid var(--color-active)}.danger[data-v-daeffca4]{color:red!important}.pop-confirm-content[data-v-daeffca4]{position:fixed;background:var(--color-tooltip-bg);box-shadow:0 0 6px 1px var(--color-tooltip-shadow);color:var(--color-font-8);padding:1.5rem;border-radius:.8rem;transform:translate(-50%,calc(-100% - 1rem));z-index:1001}.pop-confirm-content .text[data-v-daeffca4]{text-align:start;font-size:1.6rem;width:15rem;min-width:15rem}.pop-confirm-content .options[data-v-daeffca4]{margin-top:1.5rem;display:flex;justify-content:flex-end;align-items:center;gap:1rem}.Post[data-v-daeffca4]{position:unset!important;background:transparent!important;overflow:unset!important}.Post .main[data-v-daeffca4]{background:transparent!important;padding:unset!important;width:100%!important}.Post .close-btn[data-v-daeffca4]{display:none}.post-detail[data-v-daeffca4]{text-align:start;position:fixed;z-index:1000;left:0;right:0;bottom:0;top:0;background:rgba(46,47,48,.8);overflow:auto;font-size:1.4rem;display:flex;justify-content:center;flex-wrap:wrap}.post-detail[data-v-daeffca4] .subtle{background-color:#ecfdf5e6;border-left:4px solid #a7f3d0}.post-detail.isNight[data-v-daeffca4] .subtle{background-color:#1a3332;border-left:4px solid #047857}.post-detail .main[data-v-daeffca4]{display:flex;justify-content:flex-end;padding:3rem 8rem 15rem;background:var(--color-main-bg);position:relative;outline:none}.post-detail .main .main-wrapper[data-v-daeffca4]{width:77rem;padding-bottom:2rem;display:flex;flex-direction:column;align-items:center;position:relative}.post-detail .main .main-wrapper .post-wrapper .header:hover .add-tag[data-v-daeffca4]{display:inline-block}.post-detail .main .main-wrapper .loading-wrapper[data-v-daeffca4]{height:20rem;display:flex;justify-content:center;align-items:center}.post-detail .main .main-wrapper #no-comments-yet[data-v-daeffca4]{color:#a9a9a9;font-weight:700;text-align:center;width:100%;margin-bottom:2rem;box-sizing:border-box}.post-detail .main .relationReply[data-v-daeffca4]{position:fixed;width:25vw;top:6.5rem;bottom:15rem;z-index:100;transform:translate(calc(100% + 2rem));font-size:2rem;overflow:hidden}.post-detail .main .relationReply .my-cell[data-v-daeffca4]{background:var(--color-second-bg);border-radius:var(--box-border-radius) var(--box-border-radius) 0 0}.post-detail .main .relationReply .comments[data-v-daeffca4]{max-height:calc(100% - 4.2rem);overflow:auto;background:var(--color-second-bg);border-radius:0 0 var(--box-border-radius) var(--box-border-radius)}.post-detail .main .call-list[data-v-daeffca4]{z-index:9;position:absolute;top:12rem;border:1px solid var(--color-main-bg);background:var(--color-call-list-bg);box-shadow:0 5px 15px #0000001a;overflow:auto;max-height:30rem;border-radius:var(--box-border-radius);min-width:8rem;box-sizing:content-box}.post-detail .main .call-list .call-item[data-v-daeffca4]{border-top:1px solid var(--color-main-bg);height:3rem;display:flex;padding:0 1rem;align-items:center;cursor:pointer;font-size:14px;box-sizing:border-box}.post-detail .main .call-list .call-item .select[data-v-daeffca4],.post-detail .main .call-list .call-item[data-v-daeffca4]:hover,.post-detail .main .call-list .call-item.select[data-v-daeffca4]{background:var(--color-main-bg);text-decoration:none}.post-detail .main .call-list .call-item[data-v-daeffca4]:nth-child(1){border-top:1px solid transparent}@media screen and (max-width: 1500px){.post-detail .main-wrapper[data-v-daeffca4]{width:65vw!important}}@media screen and (max-width: 1280px){.post-detail .main-wrapper[data-v-daeffca4]{width:75vw!important}}@media screen and (max-width: 960px){.post-detail .main-wrapper[data-v-daeffca4]{width:100vw!important}}.post-detail .scroll-top[data-v-daeffca4]{cursor:pointer;position:fixed;border-radius:.6rem;display:flex;align-items:center;justify-content:center;bottom:10rem;z-index:99;padding:.8rem 0;gap:1rem;width:4.2rem;transform:translate(6rem);font-size:2rem;background:var(--color-sp-btn-bg);color:var(--color-font-3)}.post-detail .scroll-top svg[data-v-daeffca4]{font-size:2.4rem}.post-detail .refresh[data-v-daeffca4]{cursor:pointer;position:fixed;border-radius:.6rem;display:flex;align-items:center;justify-content:center;bottom:10rem;z-index:99;padding:.8rem 0;gap:1rem;width:4.2rem;transform:translate(6rem);font-size:2rem;background:var(--color-sp-btn-bg);color:var(--color-font-3);bottom:23.5rem}.post-detail .refresh svg[data-v-daeffca4]{font-size:2.4rem}.post-detail .scroll-to[data-v-daeffca4]{cursor:pointer;position:fixed;border-radius:.6rem;align-items:center;justify-content:center;bottom:10rem;z-index:99;padding:.8rem 0;gap:1rem;width:4.2rem;transform:translate(6rem);font-size:2rem;background:var(--color-sp-btn-bg);color:var(--color-font-3);bottom:15rem;display:flex;flex-direction:column}.post-detail .scroll-to svg[data-v-daeffca4]{font-size:2.4rem}.post-detail .scroll-to input[data-v-daeffca4]{height:2.6rem;width:3.6rem;font-size:1.4rem;text-align:center;color:gray}.post-detail .close-btn[data-v-daeffca4]{color:var(--color-font-3);cursor:pointer;position:fixed;top:3rem;transform:translate(4rem);font-size:1.6rem}.post-detail .top-reply[data-v-daeffca4]{color:var(--color-font-3);cursor:pointer;font-size:2rem;display:flex}.base64_tooltip[data-v-c50fb66c]{box-shadow:0 3px 6px -4px #0000001f,0 6px 16px #00000014,0 9px 28px 8px #0000000d;background:var(--color-third-bg);min-height:2.2rem;max-width:20rem;padding:1rem;position:fixed;z-index:9998;display:flex;align-items:center;border-radius:.5rem;cursor:pointer;line-break:anywhere;font-size:1.4rem;color:var(--color-font-8)}.base64_tooltip svg[data-v-c50fb66c]{margin-left:1rem;font-size:3rem;color:var(--color-gray)}.base64_tooltip[data-v-c50fb66c] .base-button{margin-left:1rem;margin-top:1rem}.msg[data-v-8bf692ea]{cursor:default;margin-bottom:2rem;display:flex;font-size:1.4rem;box-sizing:border-box;border-radius:var(--box-border-radius);color:var(--color-font-8);background:var(--color-tooltip-bg);box-shadow:0 0 6px 1px var(--color-tooltip-shadow)}.msg.success .left[data-v-8bf692ea]{background:var(--color-active)}.msg.warning .left[data-v-8bf692ea]{background:#c8c002}.msg.error .left[data-v-8bf692ea]{background:red}.msg .left[data-v-8bf692ea]{border-radius:var(--box-border-radius) 0 0 var(--box-border-radius);display:flex;align-items:center;background:var(--color-active);color:#fff;width:3.6rem;font-size:2.4rem;justify-content:center}.msg .left svg[data-v-8bf692ea]{cursor:pointer}.msg .right[data-v-8bf692ea]{flex:1;padding:1rem 2rem;display:flex;justify-content:space-between;align-items:center}.tag-modal .wrapper[data-v-7e92a866]{z-index:9;background:var(--color-main-bg);color:var(--color-font-8);border-radius:1.6rem;font-size:1.4rem;padding:2rem 4rem;width:25rem}.tag-modal .wrapper .title[data-v-7e92a866]{font-weight:700}.tag-modal .wrapper .btns[data-v-7e92a866]{margin-top:1.5rem;display:flex;justify-content:flex-end;align-items:center;gap:1.5rem;font-size:1.4rem}.msgs[data-v-b73f4332]{position:fixed;margin-left:calc(50% - 25rem);width:50rem;z-index:9999;bottom:0;left:0;right:0}.tag-modal .modal-root[data-v-882b932b]{z-index:9;background:var(--color-second-bg);color:var(--color-font-8);border-radius:1.6rem;font-size:1.4rem;width:50vw;height:70vh;display:flex;flex-direction:column}.tag-modal .modal-root .modal-header[data-v-882b932b]{padding:2.4rem;display:flex;justify-content:space-between}.tag-modal .modal-root .modal-header .title[data-v-882b932b]{font-size:2.6rem;font-weight:700;text-align:left;margin-bottom:0}.tag-modal .modal-root .modal-header i[data-v-882b932b]{cursor:pointer;font-size:2.2rem}.tag-modal .modal-root .modal-body[data-v-882b932b]{padding:2rem;padding-top:0;flex:1;overflow:auto}.tag-modal .modal-root .modal-body[data-v-882b932b] .cell{padding:2rem}.v-enter-active,.v-leave-active{transition:opacity .3s ease}.v-enter-from,.v-leave-to{opacity:0}.username{font-weight:700;font-size:1.4rem;margin-right:1rem}.link-num{font-size:1.2rem;font-weight:700;color:#e02a2a}.owner{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;margin-right:1rem;transform:scale(.8)}.mod{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;transform:scale(.8);background:#1484cd;color:#fff;margin-right:1rem}.my-tag{font-size:1.4rem;color:red;margin-left:1rem}.my-tag:hover .remove{display:inline}.my-tag .remove{cursor:pointer;margin-left:.5rem;display:none}.add-tag{font-size:2.4rem;transform:translateY(.2rem);line-height:1rem;display:inline-block;margin-left:1rem;cursor:pointer;position:absolute;display:none}.floor{margin-left:.5rem;font-size:1.1rem;line-height:1rem;border-radius:.5rem;display:inline-block;background-color:var(--color-floor);color:var(--color-floor-font);padding:3px 9px;cursor:default}:root{--color-main-bg: #e2e2e2;--color-second-bg: white;--color-third-bg: #e2e2e2;--color-item-bg: white;--color-swtich-bg: #dcdfe6;--color-active: #409eff;--color-font: #999;--color-font-8: rgba(0, 0, 0, .8);--color-font-3: rgba(0, 0, 0, .3);--color-font-pure: black;--color-input-bg: white;--color-input-border: #e2e2e2;--color-input-border-hover: #a3a6ad;--color-radio-border: #e2e2e2;--color-tooltip-bg: white;--color-tooltip-shadow: #bbbbbb;--color-scrollbar: #93ade3;--color-line: #e2e2e2;--color-loading-1: #00000033;--color-loading-2: #000;--color-floor: #f0f0f0;--color-floor-font: #bdbdbd;--color-editor-toolbar: #f6f7f8;--color-sp-btn-bg: #f1f1f1;--color-call-list-bg: white;--color-top-reply-wrap-bg: #f2f3f5}html.dark{--color-main-bg: #22303f;--color-second-bg: #18222d;--color-third-bg: #31475e;--color-item-bg: #18222d;--color-swtich-bg: #4c4d4f;--color-active: #409eff;--color-font: rgba(255, 255, 255, .5);--color-font-8: rgba(255, 255, 255, .8);--color-font-3: rgba(255, 255, 255, .3);--color-font-pure: white;--color-input-bg: #333333;--color-input-border: #6c6e72;--color-input-border-hover: #a3a6ad;--color-radio-border: #454847;--color-tooltip-bg: #31475e;--color-tooltip-shadow: #3b3b3b;--color-scrollbar: #5c5d5e;--color-line: var(--box-border-color);--color-loading-1: rgba(178, 177, 177, .2);--color-loading-2: #ffffff;--color-floor: #293b4d;--color-floor-font: rgba(255, 255, 255, .3);--color-editor-toolbar: var(--box-background-hover-color);--color-sp-btn-bg: #31475e;--color-call-list-bg: #31475e;--color-top-reply-wrap-bg: #212f3e;--color-top-reply-wrap-line: #3b536d}html,body{font-size:62.5%}::-webkit-scrollbar{width:1rem;height:1rem}::-webkit-scrollbar-track{background:transparent;border-radius:.2rem}::-webkit-scrollbar-thumb{background:var(--color-scrollbar);border-radius:1rem}.flex{display:flex;align-items:center;justify-content:space-between}.flex-end{justify-content:flex-end}.flex-center{justify-content:center}.p1{padding:1rem}.p2{padding:2rem}.p0{padding:0!important}body :is(.topic_content,.reply_content) a[href^=http]{text-underline-offset:.7ex;text-decoration:underline 1px}a{text-decoration:none;cursor:pointer}a:hover{text-decoration:underline}.tool{position:relative;display:flex;align-items:center;border-radius:.3rem;cursor:pointer;height:2.6rem;padding:0 .5rem;gap:.2rem}.tool>svg{width:1.6rem!important;height:1.6rem!important}.tool:hover{background:var(--color-third-bg)}.tool.no-hover{cursor:default}.tool.no-hover:hover{background:unset!important}.tool.disabled{cursor:not-allowed}.tool.disabled:hover{background:unset!important}.my-node{border-radius:.2rem;padding:.4rem;font-size:1rem;color:#999;background:#f5f5f5;cursor:pointer}.my-node:hover{text-decoration:none;background:#e2e2e2}.msgs{position:fixed;margin-left:calc(50% - 25rem);width:50rem;z-index:9999;bottom:0;left:0;right:0}.my-box{box-shadow:0 2px 3px #0000001a;box-shadow:#00000014 0 4px 12px;border-radius:var(--box-border-radius);background:var(--box-background-color);margin-bottom:2rem;width:100%;box-sizing:border-box;transition:background-color .3s}.my-cell{color:var(--color-font);padding:.8rem 1rem;font-size:1.4rem;line-height:150%;text-align:left;border-bottom:1px solid var(--color-line)}.modal{position:fixed;z-index:1001;width:100vw;height:100vh;left:0;top:0;display:flex;justify-content:center;align-items:center}.modal .title{font-size:2.4rem;margin-bottom:1rem;text-align:center}.modal .option{display:flex;align-items:center;padding:.6rem 0}.modal .option>span{position:relative}.modal .mask{position:fixed;width:100vw;height:100vh;left:0;top:0;background-color:#1d1c1c47}.radio-group2{display:inline-flex;border-radius:.5rem;overflow:hidden;border:1px solid var(--color-radio-border);background:var(--box-background-alt-color)}.radio-group2 .radio{cursor:pointer;background:transparent;padding:.5rem 1.2rem;border-left:1px solid var(--color-radio-border);font-size:1.3rem;color:var(--color-gray)}.radio-group2 .radio:first-child{border-left:none}.radio-group2 .active{background:var(--color-third-bg);color:var(--color-font)}.pop-confirm{position:relative;display:inline-flex;justify-content:center}input{height:3rem;outline:unset;border:1px solid var(--color-input-border);padding:0 .5rem;border-radius:5px;box-sizing:border-box;transition:all .3s;background:var(--color-input-bg);color:var(--color-font)}input:hover{border:1px solid var(--color-input-border-hover)}input:focus{border:1px solid var(--color-active)}.danger{color:red!important}.pop-confirm-content{position:fixed;background:var(--color-tooltip-bg);box-shadow:0 0 6px 1px var(--color-tooltip-shadow);color:var(--color-font-8);padding:1.5rem;border-radius:.8rem;transform:translate(-50%,calc(-100% - 1rem));z-index:1001}.pop-confirm-content .text{text-align:start;font-size:1.6rem;width:15rem;min-width:15rem}.pop-confirm-content .options{margin-top:1.5rem;display:flex;justify-content:flex-end;align-items:center;gap:1rem}.target-user-tags[data-v-15f2a343]{background:var(--color-second-bg);color:var(--color-font);word-break:break-all;text-align:start;font-size:1.4rem;box-shadow:0 2px 3px #0000001a;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.target-user-tags .add-tag[data-v-15f2a343]{display:inline-block}.loaded[data-v-15f2a343]{font-size:1.4rem;display:flex;align-items:center;gap:1rem;color:var(--color-font-pure)} ');

    Ec();
    let e = vue.createApp(Nc);
    e.config.unwrapInjectedRef = !0, e.mount(me);
  }

})(Vue);

// ==UserScript==
// @name         V2Next
// @namespace    http://tampermonkey.net/
// @version      10.6
// @author       zyronon
// @description  V2Next - 一个好用的V2EX脚本！ 已适配移动端
// @license      GPL License
// @icon         https://v2ex-script.vercel.app/favicon.ico
// @homepage     https://github.com/zyronon/web-scripts
// @homepageURL  https://github.com/zyronon/web-scripts
// @supportURL   https://update.greasyfork.org/scripts/458024/V2Next.user.js
// @downloadURL  https://update.greasyfork.org/scripts/458024/V2Next.user.js
// @updateURL    https://update.greasyfork.org/scripts/458024/V2Next.user.js
// @match        https://v2ex.com/
// @match        https://v2ex.com/?tab=*
// @match        https://v2ex.com/t/*
// @match        https://v2ex.com/recent*
// @match        https://v2ex.com/go/*
// @match        https://v2ex.com/member/*
// @match        https://v2ex.com/changes*
// @match        https://*.v2ex.com/
// @match        https://*.v2ex.com/?tab=*
// @match        https://*.v2ex.com/t/*
// @match        https://*.v2ex.com/recent*
// @match        https://*.v2ex.com/go/*
// @match        https://*.v2ex.com/member/*
// @match        https://*.v2ex.com/changes*
// @require      https://lib.baomitu.com/jquery/latest/jquery.min.js
// @require      https://lib.baomitu.com/vue/3.4.14/vue.runtime.global.prod.min.js
// @grant        GM_addStyle
// @grant        GM_openInTab
// @grant        GM_registerMenuCommand
// ==/UserScript==


(function (vue) {
  'use strict';

  var G=(e=>(e.Home="Home",e.Node="Node",e.Post="Post",e.Member="Member",e.Changes="Changes",e))(G||{}),V=(e=>(e[e.FloorInFloor=0]="FloorInFloor",e[e.FloorInFloorNoCallUser=4]="FloorInFloorNoCallUser",e[e.FloorInFloorNested=5]="FloorInFloorNested",e[e.Like=1]="Like",e[e.V2exOrigin=2]="V2exOrigin",e[e.OnlyOp=3]="OnlyOp",e[e.New=6]="New",e))(V||{});const Jt=400,Si={name:"Tooltip",props:{title:{type:String,default(){return ""}},disabled:{type:Boolean,default(){return !1}}},data(){return {show:!1}},methods:{showPop(e){if(this.disabled||!this.title)return;e.stopPropagation();let t=e.target.getBoundingClientRect();this.show=!0,vue.nextTick(()=>{var o,a;let i=(a=(o=this.$refs)==null?void 0:o.tip)==null?void 0:a.getBoundingClientRect();if(!i)return;t.top<50?this.$refs.tip.style.top=t.top+t.height+10+"px":this.$refs.tip.style.top=t.top-i.height-10+"px";let s=i.width,n=t.width;this.$refs.tip.style.left=t.left-(s-n)/2+"px";});}},render(){let e=this.$slots.default()[0];return vue.createVNode(vue.Fragment,null,[this.show&&this.title&&vue.createVNode(vue.Teleport,{to:"body"},{default:()=>[vue.createVNode(vue.Transition,{name:"fade"},{default:()=>[vue.createVNode("div",{ref:"tip",className:"tip"},[this.title])]})]}),vue.createVNode(e,{onClick:()=>this.show=!1,onmouseenter:t=>this.showPop(t),onmouseleave:()=>this.show=!1},null)])}};const X=(e,t)=>{const i=e.__vccOpts||e;for(const[s,n]of t)i[s]=n;return i},Ue=X(Si,[["__scopeId","data-v-ee672411"]]),Ii=vue.defineComponent({__name:"BaseSwitch",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){return (i,s)=>(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["switch",{active:i.modelValue}]),onClick:s[0]||(s[0]=n=>i.$emit("update:modelValue",!i.modelValue))},null,2))}});const yt=X(Ii,[["__scopeId","data-v-e7c0fbef"]]);var Mi=(()=>typeof GM_openInTab<"u"?GM_openInTab:void 0)(),Te=(()=>typeof GM_registerMenuCommand<"u"?GM_registerMenuCommand:void 0)();const I={createList(e,t){return e.replyList=t,e.topReplyList=window.clone(t).filter(i=>i.thankCount>=window.config.topReplyLoveMinCount).sort((i,s)=>s.thankCount-i.thankCount).slice(0,window.config.topReplyCount),e.replyCount=t.length,e.allReplyUsers=Array.from(new Set(t.map(i=>i.username))),e.nestedReplies=I.createNestedList(window.clone(t),e.topReplyList),e.nestedRedundReplies=I.createNestedRedundantList(window.clone(t),e.topReplyList),e},getAllReply(e=[]){return e.sort((t,i)=>t.i-i.i).reduce((t,i)=>(t=t.concat(i.replyList),t),[])},findChildren(e,t,i,s){var u;const n=(r,d,g)=>{r.level=g.level+1;let y=i.findIndex(m=>m.floor===r.floor);y>-1&&(i[y].isUse=!0),g.children.push(this.findChildren(r,d,i,s));};e.children=[];let o=[];for(let r=0;r<t.length;r++){let d=t[r];d.isUse||d.replyFloor===e.floor&&(d.replyUsers.length===1&&d.replyUsers[0]===e.username?(d.isUse=!0,o.push({endList:t.slice(r+1),currentItem:d})):d.isWrong=!0);}o.reverse().map(({currentItem:r,endList:d})=>{n(r,d,e);});let a=t.findIndex(r=>{var d;return r.username===e.username&&((d=r.replyUsers)==null?void 0:d[0])!==e.username}),c=a>-1?t.slice(0,a):t;for(let r=0;r<c.length;r++){let d=c[r];if(!d.isUse){if(d.replyUsers.length===1){if(d.replyFloor!==-1&&((u=i[d.replyFloor-1])==null?void 0:u.username)===d.replyUsers[0])continue;let g=t.slice(r+1);if(d.username===e.username){d.replyUsers[0]===e.username&&n(d,g,e);break}else d.replyUsers[0]===e.username&&n(d,g,e);}else if(d.username===e.username)break}}e.children=e.children.sort((r,d)=>r.floor-d.floor),e.replyCount=e.children.reduce((r,d)=>r+(d.children.length?d.replyCount+1:1),0);let p=s.findIndex(r=>r.floor===e.floor);return p>-1&&(s[p].children=e.children,s[p].replyCount=e.replyCount),e},createNestedList(e=[],t){if(!e.length)return [];let i=e,s=[];return i.map((n,o)=>{let a=i.slice(0,o),c=Array.from(new Set(a.map(u=>u.username))),p=i.slice(o+1);if(o===0)s.push(this.findChildren(n,p,i,t));else if(!n.isUse){let u=!1;n.replyUsers.length?n.replyUsers.length>1?u=!0:u=!c.find(r=>r===n.replyUsers[0]):u=!0,u&&(n.level=0,s.push(this.findChildren(n,p,i,t)));}}),s},createNestedRedundantList(e=[],t){if(!e.length)return [];let i=e,s=[];return i.map((n,o)=>{let a=i.slice(0,o),c=Array.from(new Set(a.map(u=>u.username))),p=i.slice(o+1);if(o===0)s.push(this.findChildren(n,p,i,t));else if(n.isUse){let u=window.clone(n);u.children=[],u.level=0,u.isDup=!0,s.push(u);}else {let u=!1;n.replyUsers.length?n.replyUsers.length>1?u=!0:u=!c.find(r=>r===n.replyUsers[0]):u=!0,u&&(n.level=0,s.push(this.findChildren(n,p,i,t)));}}),s},parseA(e){let t=e.href,i;return t.includes("/t/")&&(i=e.pathname.substring(3)),{href:t,id:i,title:e.innerText}},checkPhotoLink2Img(e){if(e){try{[/<a((?!<a).)*href="https?:\/\/((?!<a).)*imgur.com((?!<a).)*>(((?!<a).)*)<\/a>/g,/<a((?!<a).)*href="https?:\/\/((?!<a).)*\.(gif|png|jpg|jpeg|GIF|PNG|JPG|JPEG) ((?!<a).)*>(((?!<a).)*)<\/a>/g].map((i,s)=>{[...e.matchAll(i)].map(a=>{let c=s===0?a[4]:a[5];if(c){let p=c.toLowerCase(),u=c;p.includes(".png")||p.includes(".jpg")||p.includes(".jpeg")||p.includes(".gif")||(u=c+".png"),e=e.replace(a[0],`<img src="${u}" data-originUrl="${c}" data-notice="此img标签由v2ex-超级增强脚本解析" style="max-width: 100%">`);}});});}catch{}return e}},async checkPostReplies(e,t=!0){return new Promise(async i=>{let s=await I.getPostDetailByApi(e);if((s==null?void 0:s.replies)>Jt)return t&&I.openNewTab(`https://${location.origin}/t/${e}?p=1&script=1`),i(!0);i(!1);})},async sleep(e){return new Promise(t=>{setTimeout(t,e);})},openNewTab(e,t=!1){if(/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)){let s="a_blank_"+Date.now(),n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("target","_blank"),n.setAttribute("id",s),n.setAttribute("script","1"),document.getElementById(s)||document.body.appendChild(n),n.click();}else Mi(e,{active:t});},async cbChecker(e,t=0){if(window.cb)window.cb(e);else {for(;!window.cb&&t<30;)await I.sleep(500),t++;window.cb&&window.cb(e);}},initMonkeyMenu(){try{Te("脚本设置",()=>{I.cbChecker({type:"openSetting"});}),Te("仓库地址",()=>{I.openNewTab(window.const.git);}),Te("反馈 & 建议",I.feedback);}catch{}},clone(e){return JSON.parse(JSON.stringify(e))},feedback(){I.openNewTab(ge.issue);},checkPageType(e){let t=e||window.location,i={pageType:null,pageData:{id:"",pageNo:null},username:""};if(t.pathname==="/")i.pageType=G.Home;else if(t.pathname==="/changes")i.pageType=G.Changes;else if(t.pathname==="/recent")i.pageType=G.Changes;else if(t.href.match(/.com\/?tab=/))i.pageType=G.Home;else if(t.href.match(/.com\/go\//))t.href.includes("/links")||(i.pageType=G.Node);else if(t.href.match(/.com\/member/))i.pageType=G.Member,i.username=t.pathname.replace("/member/","").replace("/replies","").replace("/topics","");else {let s=t.href.match(/.com\/t\/([\d]+)/);if(s&&!t.pathname.includes("review")&&!t.pathname.includes("info")&&(i.pageType=G.Post,i.pageData.id=s[1],t.search)){let n=t.href.match(/\?p=([\d]+)/);n&&(i.pageData.pageNo=Number(n[1]));}}return i},getPostDetailByApi(e){return new Promise(t=>{fetch(`${location.origin}/api/topics/show.json?id=${e}`).then(async i=>{if(i.status===200){let s=await i.json();if(s){let n=s[0];t(n);}}});})},appendPostContent(e,t){let i=document.createElement("a");i.href=e.href,i.classList.add("post-content");let s=document.createElement("div");s.innerHTML=e.content_rendered,i.append(s),t.append(i),(()=>{var o;if(s.clientHeight<300)i.classList.add("show-all");else {let a=document.createElement("div");a.classList.add("show-more"),a.innerHTML="显示更多/收起",a.onclick=function(c){c.stopPropagation(),i.classList.toggle("show-all");},(o=i.parentNode)==null||o.append(a);}})();},initConfig(){let e=localStorage.getItem("v2ex-config"),t={},i={},s=window.user.username||"default";e&&(t=JSON.parse(e),i=t[s],i&&(window.config=I.deepAssign(window.config,i))),t[s]=window.config,localStorage.setItem("v2ex-config",JSON.stringify(t));},deepAssign(...e){let t,i,s,n,o=arguments.length,a=1,c=arguments[0]||{};for(typeof c!="object"&&(c={});a<o;a++)if(i=arguments[a],i!=null)for(t in i)s=c[t],n=i[t],n&&typeof n=="object"?c[t]=this.deepAssign(s,n):n!==void 0&&(c[t]=n);return c}},Kt={allReplyUsers:[],content_rendered:"",createDate:"",createDateAgo:"",lastReplyDate:"",fr:"",replyList:[],topReplyList:[],nestedReplies:[],nestedRedundReplies:[],username:"",url:"",href:"",member:{},node:{title:"",url:""},headerTemplate:"",title:"",id:"",type:"post",once:"",replyCount:0,clickCount:0,thankCount:0,collectCount:0,lastReadFloor:0,isFavorite:!1,isIgnore:!1,isThanked:!1,isReport:!1,inList:!1},Re=(e={})=>Object.assign(I.clone(Kt),e),Li={tagPrefix:"--用户标签--",tags:{},tagsId:"",username:"",avatar:"",readPrefix:"--已读楼层--",readNoteItemId:"",readList:{},imgurPrefix:"--imgur图片删除hash--",imgurList:{},imgurNoteId:"",configPrefix:"--config--",configNoteId:""},ge={pageType:void 0,pageData:{pageNo:1},targetUserName:"",currentVersion:2,isNight:!1,cb:null,stopMe:null,postList:[],git:"https://github.com/zyronon/web-scripts",shortGit:"zyronon/web-scripts",issue:"https://github.com/zyronon/web-scripts/issues",pcLog:"https://greasyfork.org/zh-CN/scripts/458024/versions",pcScript:"https://greasyfork.org/zh-CN/scripts/458024",mobileScript:"https://greasyfork.org/zh-CN/scripts/485356",homeUrl:"https://v2ex-script.vercel.app/"},Ri={showToolbar:!0,autoOpenDetail:!0,openTag:!1,clickPostItemOpenDetail:!0,closePostDetailBySpace:!0,contentAutoCollapse:!0,viewType:"table",commentDisplayType:V.FloorInFloorNoCallUser,newTabOpen:!1,newTabOpenActive:!1,base64:!0,sov2ex:!1,postWidth:"",showTopReply:!0,topReplyLoveMinCount:3,topReplyCount:5,autoJumpLastReadFloor:!1,rememberLastReadFloor:!1,autoSignin:!0,customBgColor:"",version:ge.currentVersion,collectBrowserNotice:!1,fontSizeType:"normal",notice:{uid:"",text:"",ddWebhook:"",takeOverNoticePage:!0,whenNewNoticeGlimmer:!1,loopCheckNotice:!1,loopCheckNoticeInterval:5}};function Ni(){return {...Ri}}const Ne=/^[a-z0-9]+(-[a-z0-9]+)*$/,Qe=(e,t,i,s="")=>{const n=e.split(":");if(e.slice(0,1)==="@"){if(n.length<2||n.length>3)return null;s=n.shift().slice(1);}if(n.length>3||!n.length)return null;if(n.length>1){const c=n.pop(),p=n.pop(),u={provider:n.length>0?n[0]:s,prefix:p,name:c};return t&&!ze(u)?null:u}const o=n[0],a=o.split("-");if(a.length>1){const c={provider:s,prefix:a.shift(),name:a.join("-")};return t&&!ze(c)?null:c}if(i&&s===""){const c={provider:s,prefix:"",name:o};return t&&!ze(c,i)?null:c}return null},ze=(e,t)=>e?!!((e.provider===""||e.provider.match(Ne))&&(t&&e.prefix===""||e.prefix.match(Ne))&&e.name.match(Ne)):!1,Yt=Object.freeze({left:0,top:0,width:16,height:16}),Ye=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),Ze=Object.freeze({...Yt,...Ye}),at=Object.freeze({...Ze,body:"",hidden:!1});function Oi(e,t){const i={};!e.hFlip!=!t.hFlip&&(i.hFlip=!0),!e.vFlip!=!t.vFlip&&(i.vFlip=!0);const s=((e.rotate||0)+(t.rotate||0))%4;return s&&(i.rotate=s),i}function Ot(e,t){const i=Oi(e,t);for(const s in at)s in Ye?s in e&&!(s in i)&&(i[s]=Ye[s]):s in t?i[s]=t[s]:s in e&&(i[s]=e[s]);return i}function Pi(e,t){const i=e.icons,s=e.aliases||Object.create(null),n=Object.create(null);function o(a){if(i[a])return n[a]=[];if(!(a in n)){n[a]=null;const c=s[a]&&s[a].parent,p=c&&o(c);p&&(n[a]=[c].concat(p));}return n[a]}return (t||Object.keys(i).concat(Object.keys(s))).forEach(o),n}function Ei(e,t,i){const s=e.icons,n=e.aliases||Object.create(null);let o={};function a(c){o=Ot(s[c]||n[c],o);}return a(t),i.forEach(a),Ot(e,o)}function Xt(e,t){const i=[];if(typeof e!="object"||typeof e.icons!="object")return i;e.not_found instanceof Array&&e.not_found.forEach(n=>{t(n,null),i.push(n);});const s=Pi(e);for(const n in s){const o=s[n];o&&(t(n,Ei(e,n,o)),i.push(n));}return i}const Vi={provider:"",aliases:{},not_found:{},...Yt};function st(e,t){for(const i in t)if(i in e&&typeof e[i]!=typeof t[i])return !1;return !0}function Qt(e){if(typeof e!="object"||e===null)return null;const t=e;if(typeof t.prefix!="string"||!e.icons||typeof e.icons!="object"||!st(e,Vi))return null;const i=t.icons;for(const n in i){const o=i[n];if(!n.match(Ne)||typeof o.body!="string"||!st(o,at))return null}const s=t.aliases||Object.create(null);for(const n in s){const o=s[n],a=o.parent;if(!n.match(Ne)||typeof a!="string"||!i[a]&&!s[a]||!st(o,at))return null}return t}const Pt=Object.create(null);function Ai(e,t){return {provider:e,prefix:t,icons:Object.create(null),missing:new Set}}function Ce(e,t){const i=Pt[e]||(Pt[e]=Object.create(null));return i[t]||(i[t]=Ai(e,t))}function wt(e,t){return Qt(t)?Xt(t,(i,s)=>{s?e.icons[i]=s:e.missing.add(i);}):[]}function Di(e,t,i){try{if(typeof i.body=="string")return e.icons[t]={...i},!0}catch{}return !1}let Ve=!1;function Zt(e){return typeof e=="boolean"&&(Ve=e),Ve}function $i(e){const t=typeof e=="string"?Qe(e,!0,Ve):e;if(t){const i=Ce(t.provider,t.prefix),s=t.name;return i.icons[s]||(i.missing.has(s)?null:void 0)}}function Ui(e,t){const i=Qe(e,!0,Ve);if(!i)return !1;const s=Ce(i.provider,i.prefix);return Di(s,i.name,t)}function Fi(e,t){if(typeof e!="object")return !1;if(typeof t!="string"&&(t=e.provider||""),Ve&&!t&&!e.prefix){let n=!1;return Qt(e)&&(e.prefix="",Xt(e,(o,a)=>{a&&Ui(o,a)&&(n=!0);})),n}const i=e.prefix;if(!ze({provider:t,prefix:i,name:"a"}))return !1;const s=Ce(t,i);return !!wt(s,e)}const ei=Object.freeze({width:null,height:null}),ti=Object.freeze({...ei,...Ye}),Hi=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Bi=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Et(e,t,i){if(t===1)return e;if(i=i||100,typeof e=="number")return Math.ceil(e*t*i)/i;if(typeof e!="string")return e;const s=e.split(Hi);if(s===null||!s.length)return e;const n=[];let o=s.shift(),a=Bi.test(o);for(;;){if(a){const c=parseFloat(o);isNaN(c)?n.push(o):n.push(Math.ceil(c*t*i)/i);}else n.push(o);if(o=s.shift(),o===void 0)return n.join("");a=!a;}}const Wi=e=>e==="unset"||e==="undefined"||e==="none";function ji(e,t){const i={...Ze,...e},s={...ti,...t},n={left:i.left,top:i.top,width:i.width,height:i.height};let o=i.body;[i,s].forEach(m=>{const b=[],h=m.hFlip,S=m.vFlip;let k=m.rotate;h?S?k+=2:(b.push("translate("+(n.width+n.left).toString()+" "+(0-n.top).toString()+")"),b.push("scale(-1 1)"),n.top=n.left=0):S&&(b.push("translate("+(0-n.left).toString()+" "+(n.height+n.top).toString()+")"),b.push("scale(1 -1)"),n.top=n.left=0);let T;switch(k<0&&(k-=Math.floor(k/4)*4),k=k%4,k){case 1:T=n.height/2+n.top,b.unshift("rotate(90 "+T.toString()+" "+T.toString()+")");break;case 2:b.unshift("rotate(180 "+(n.width/2+n.left).toString()+" "+(n.height/2+n.top).toString()+")");break;case 3:T=n.width/2+n.left,b.unshift("rotate(-90 "+T.toString()+" "+T.toString()+")");break}k%2===1&&(n.left!==n.top&&(T=n.left,n.left=n.top,n.top=T),n.width!==n.height&&(T=n.width,n.width=n.height,n.height=T)),b.length&&(o='<g transform="'+b.join(" ")+'">'+o+"</g>");});const a=s.width,c=s.height,p=n.width,u=n.height;let r,d;a===null?(d=c===null?"1em":c==="auto"?u:c,r=Et(d,p/u)):(r=a==="auto"?p:a,d=c===null?Et(r,u/p):c==="auto"?u:c);const g={},y=(m,b)=>{Wi(b)||(g[m]=b.toString());};return y("width",r),y("height",d),g.viewBox=n.left.toString()+" "+n.top.toString()+" "+p.toString()+" "+u.toString(),{attributes:g,body:o}}const Gi=/\sid="(\S+)"/g,qi="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let zi=0;function Ji(e,t=qi){const i=[];let s;for(;s=Gi.exec(e);)i.push(s[1]);if(!i.length)return e;const n="suffix"+(Math.random()*16777216|Date.now()).toString(16);return i.forEach(o=>{const a=typeof t=="function"?t(o):t+(zi++).toString(),c=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+c+')([")]|\\.[a-z])',"g"),"$1"+a+n+"$3");}),e=e.replace(new RegExp(n,"g"),""),e}const ct=Object.create(null);function Ki(e,t){ct[e]=t;}function dt(e){return ct[e]||ct[""]}function _t(e){let t;if(typeof e.resources=="string")t=[e.resources];else if(t=e.resources,!(t instanceof Array)||!t.length)return null;return {resources:t,path:e.path||"/",maxURL:e.maxURL||500,rotate:e.rotate||750,timeout:e.timeout||5e3,random:e.random===!0,index:e.index||0,dataAfterTimeout:e.dataAfterTimeout!==!1}}const vt=Object.create(null),Le=["https://api.simplesvg.com","https://api.unisvg.com"],Je=[];for(;Le.length>0;)Le.length===1||Math.random()>.5?Je.push(Le.shift()):Je.push(Le.pop());vt[""]=_t({resources:["https://api.iconify.design"].concat(Je)});function Yi(e,t){const i=_t(t);return i===null?!1:(vt[e]=i,!0)}function bt(e){return vt[e]}const Xi=()=>{let e;try{if(e=fetch,typeof e=="function")return e}catch{}};let Vt=Xi();function Qi(e,t){const i=bt(e);if(!i)return 0;let s;if(!i.maxURL)s=0;else {let n=0;i.resources.forEach(a=>{n=Math.max(n,a.length);});const o=t+".json?icons=";s=i.maxURL-n-i.path.length-o.length;}return s}function Zi(e){return e===404}const en=(e,t,i)=>{const s=[],n=Qi(e,t),o="icons";let a={type:o,provider:e,prefix:t,icons:[]},c=0;return i.forEach((p,u)=>{c+=p.length+1,c>=n&&u>0&&(s.push(a),a={type:o,provider:e,prefix:t,icons:[]},c=p.length),a.icons.push(p);}),s.push(a),s};function tn(e){if(typeof e=="string"){const t=bt(e);if(t)return t.path}return "/"}const nn=(e,t,i)=>{if(!Vt){i("abort",424);return}let s=tn(t.provider);switch(t.type){case"icons":{const o=t.prefix,c=t.icons.join(","),p=new URLSearchParams({icons:c});s+=o+".json?"+p.toString();break}case"custom":{const o=t.uri;s+=o.slice(0,1)==="/"?o.slice(1):o;break}default:i("abort",400);return}let n=503;Vt(e+s).then(o=>{const a=o.status;if(a!==200){setTimeout(()=>{i(Zi(a)?"abort":"next",a);});return}return n=501,o.json()}).then(o=>{if(typeof o!="object"||o===null){setTimeout(()=>{o===404?i("abort",o):i("next",n);});return}setTimeout(()=>{i("success",o);});}).catch(()=>{i("next",n);});},on={prepare:en,send:nn};function sn(e){const t={loaded:[],missing:[],pending:[]},i=Object.create(null);e.sort((n,o)=>n.provider!==o.provider?n.provider.localeCompare(o.provider):n.prefix!==o.prefix?n.prefix.localeCompare(o.prefix):n.name.localeCompare(o.name));let s={provider:"",prefix:"",name:""};return e.forEach(n=>{if(s.name===n.name&&s.prefix===n.prefix&&s.provider===n.provider)return;s=n;const o=n.provider,a=n.prefix,c=n.name,p=i[o]||(i[o]=Object.create(null)),u=p[a]||(p[a]=Ce(o,a));let r;c in u.icons?r=t.loaded:a===""||u.missing.has(c)?r=t.missing:r=t.pending;const d={provider:o,prefix:a,name:c};r.push(d);}),t}function ii(e,t){e.forEach(i=>{const s=i.loaderCallbacks;s&&(i.loaderCallbacks=s.filter(n=>n.id!==t));});}function ln(e){e.pendingCallbacksFlag||(e.pendingCallbacksFlag=!0,setTimeout(()=>{e.pendingCallbacksFlag=!1;const t=e.loaderCallbacks?e.loaderCallbacks.slice(0):[];if(!t.length)return;let i=!1;const s=e.provider,n=e.prefix;t.forEach(o=>{const a=o.icons,c=a.pending.length;a.pending=a.pending.filter(p=>{if(p.prefix!==n)return !0;const u=p.name;if(e.icons[u])a.loaded.push({provider:s,prefix:n,name:u});else if(e.missing.has(u))a.missing.push({provider:s,prefix:n,name:u});else return i=!0,!0;return !1}),a.pending.length!==c&&(i||ii([e],o.id),o.callback(a.loaded.slice(0),a.missing.slice(0),a.pending.slice(0),o.abort));});}));}let rn=0;function an(e,t,i){const s=rn++,n=ii.bind(null,i,s);if(!t.pending.length)return n;const o={id:s,icons:t,callback:e,abort:n};return i.forEach(a=>{(a.loaderCallbacks||(a.loaderCallbacks=[])).push(o);}),n}function cn(e,t=!0,i=!1){const s=[];return e.forEach(n=>{const o=typeof n=="string"?Qe(n,t,i):n;o&&s.push(o);}),s}var dn={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function un(e,t,i,s){const n=e.resources.length,o=e.random?Math.floor(Math.random()*n):e.index;let a;if(e.random){let D=e.resources.slice(0);for(a=[];D.length>1;){const z=Math.floor(Math.random()*D.length);a.push(D[z]),D=D.slice(0,z).concat(D.slice(z+1));}a=a.concat(D);}else a=e.resources.slice(o).concat(e.resources.slice(0,o));const c=Date.now();let p="pending",u=0,r,d=null,g=[],y=[];typeof s=="function"&&y.push(s);function m(){d&&(clearTimeout(d),d=null);}function b(){p==="pending"&&(p="aborted"),m(),g.forEach(D=>{D.status==="pending"&&(D.status="aborted");}),g=[];}function h(D,z){z&&(y=[]),typeof D=="function"&&y.push(D);}function S(){return {startTime:c,payload:t,status:p,queriesSent:u,queriesPending:g.length,subscribe:h,abort:b}}function k(){p="failed",y.forEach(D=>{D(void 0,r);});}function T(){g.forEach(D=>{D.status==="pending"&&(D.status="aborted");}),g=[];}function W(D,z,j){const ue=z!=="success";switch(g=g.filter(ie=>ie!==D),p){case"pending":break;case"failed":if(ue||!e.dataAfterTimeout)return;break;default:return}if(z==="abort"){r=j,k();return}if(ue){r=j,g.length||(a.length?q():k());return}if(m(),T(),!e.random){const ie=e.resources.indexOf(D.resource);ie!==-1&&ie!==e.index&&(e.index=ie);}p="completed",y.forEach(ie=>{ie(j);});}function q(){if(p!=="pending")return;m();const D=a.shift();if(D===void 0){if(g.length){d=setTimeout(()=>{m(),p==="pending"&&(T(),k());},e.timeout);return}k();return}const z={status:"pending",resource:D,callback:(j,ue)=>{W(z,j,ue);}};g.push(z),u++,d=setTimeout(q,e.rotate),i(D,t,z.callback);}return setTimeout(q),S}function ni(e){const t={...dn,...e};let i=[];function s(){i=i.filter(c=>c().status==="pending");}function n(c,p,u){const r=un(t,c,p,(d,g)=>{s(),u&&u(d,g);});return i.push(r),r}function o(c){return i.find(p=>c(p))||null}return {query:n,find:o,setIndex:c=>{t.index=c;},getIndex:()=>t.index,cleanup:s}}function At(){}const lt=Object.create(null);function pn(e){if(!lt[e]){const t=bt(e);if(!t)return;const i=ni(t),s={config:t,redundancy:i};lt[e]=s;}return lt[e]}function fn(e,t,i){let s,n;if(typeof e=="string"){const o=dt(e);if(!o)return i(void 0,424),At;n=o.send;const a=pn(e);a&&(s=a.redundancy);}else {const o=_t(e);if(o){s=ni(o);const a=e.resources?e.resources[0]:"",c=dt(a);c&&(n=c.send);}}return !s||!n?(i(void 0,424),At):s.query(t,n,i)().abort}const Dt="iconify2",Ae="iconify",oi=Ae+"-count",$t=Ae+"-version",si=36e5,hn=168;function ut(e,t){try{return e.getItem(t)}catch{}}function kt(e,t,i){try{return e.setItem(t,i),!0}catch{}}function Ut(e,t){try{e.removeItem(t);}catch{}}function pt(e,t){return kt(e,oi,t.toString())}function ft(e){return parseInt(ut(e,oi))||0}const et={local:!0,session:!0},li={local:new Set,session:new Set};let Ct=!1;function mn(e){Ct=e;}let qe=typeof window>"u"?{}:window;function ri(e){const t=e+"Storage";try{if(qe&&qe[t]&&typeof qe[t].length=="number")return qe[t]}catch{}et[e]=!1;}function ai(e,t){const i=ri(e);if(!i)return;const s=ut(i,$t);if(s!==Dt){if(s){const c=ft(i);for(let p=0;p<c;p++)Ut(i,Ae+p.toString());}kt(i,$t,Dt),pt(i,0);return}const n=Math.floor(Date.now()/si)-hn,o=c=>{const p=Ae+c.toString(),u=ut(i,p);if(typeof u=="string"){try{const r=JSON.parse(u);if(typeof r=="object"&&typeof r.cached=="number"&&r.cached>n&&typeof r.provider=="string"&&typeof r.data=="object"&&typeof r.data.prefix=="string"&&t(r,c))return !0}catch{}Ut(i,p);}};let a=ft(i);for(let c=a-1;c>=0;c--)o(c)||(c===a-1?(a--,pt(i,a)):li[e].add(c));}function ci(){if(!Ct){mn(!0);for(const e in et)ai(e,t=>{const i=t.data,s=t.provider,n=i.prefix,o=Ce(s,n);if(!wt(o,i).length)return !1;const a=i.lastModified||-1;return o.lastModifiedCached=o.lastModifiedCached?Math.min(o.lastModifiedCached,a):a,!0});}}function gn(e,t){const i=e.lastModifiedCached;if(i&&i>=t)return i===t;if(e.lastModifiedCached=t,i)for(const s in et)ai(s,n=>{const o=n.data;return n.provider!==e.provider||o.prefix!==e.prefix||o.lastModified===t});return !0}function yn(e,t){Ct||ci();function i(s){let n;if(!et[s]||!(n=ri(s)))return;const o=li[s];let a;if(o.size)o.delete(a=Array.from(o).shift());else if(a=ft(n),!pt(n,a+1))return;const c={cached:Math.floor(Date.now()/si),provider:e.provider,data:t};return kt(n,Ae+a.toString(),JSON.stringify(c))}t.lastModified&&!gn(e,t.lastModified)||Object.keys(t.icons).length&&(t.not_found&&(t=Object.assign({},t),delete t.not_found),i("local")||i("session"));}function Ft(){}function wn(e){e.iconsLoaderFlag||(e.iconsLoaderFlag=!0,setTimeout(()=>{e.iconsLoaderFlag=!1,ln(e);}));}function _n(e,t){e.iconsToLoad?e.iconsToLoad=e.iconsToLoad.concat(t).sort():e.iconsToLoad=t,e.iconsQueueFlag||(e.iconsQueueFlag=!0,setTimeout(()=>{e.iconsQueueFlag=!1;const{provider:i,prefix:s}=e,n=e.iconsToLoad;delete e.iconsToLoad;let o;if(!n||!(o=dt(i)))return;o.prepare(i,s,n).forEach(c=>{fn(i,c,p=>{if(typeof p!="object")c.icons.forEach(u=>{e.missing.add(u);});else try{const u=wt(e,p);if(!u.length)return;const r=e.pendingIcons;r&&u.forEach(d=>{r.delete(d);}),yn(e,p);}catch{}wn(e);});});}));}const vn=(e,t)=>{const i=cn(e,!0,Zt()),s=sn(i);if(!s.pending.length){let p=!0;return t&&setTimeout(()=>{p&&t(s.loaded,s.missing,s.pending,Ft);}),()=>{p=!1;}}const n=Object.create(null),o=[];let a,c;return s.pending.forEach(p=>{const{provider:u,prefix:r}=p;if(r===c&&u===a)return;a=u,c=r,o.push(Ce(u,r));const d=n[u]||(n[u]=Object.create(null));d[r]||(d[r]=[]);}),s.pending.forEach(p=>{const{provider:u,prefix:r,name:d}=p,g=Ce(u,r),y=g.pendingIcons||(g.pendingIcons=new Set);y.has(d)||(y.add(d),n[u][r].push(d));}),o.forEach(p=>{const{provider:u,prefix:r}=p;n[u][r].length&&_n(p,n[u][r]);}),t?an(t,s,o):Ft};function bn(e,t){const i={...e};for(const s in t){const n=t[s],o=typeof n;s in ei?(n===null||n&&(o==="string"||o==="number"))&&(i[s]=n):o===typeof i[s]&&(i[s]=s==="rotate"?n%4:n);}return i}const kn=/[\s,]+/;function Cn(e,t){t.split(kn).forEach(i=>{switch(i.trim()){case"horizontal":e.hFlip=!0;break;case"vertical":e.vFlip=!0;break}});}function xn(e,t=0){const i=e.replace(/^-?[0-9.]*/,"");function s(n){for(;n<0;)n+=4;return n%4}if(i===""){const n=parseInt(e);return isNaN(n)?0:s(n)}else if(i!==e){let n=0;switch(i){case"%":n=25;break;case"deg":n=90;}if(n){let o=parseFloat(e.slice(0,e.length-i.length));return isNaN(o)?0:(o=o/n,o%1===0?s(o):0)}}return t}function Tn(e,t){let i=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const s in t)i+=" "+s+'="'+t[s]+'"';return '<svg xmlns="http://www.w3.org/2000/svg"'+i+">"+e+"</svg>"}function Sn(e){return e.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function In(e){return "data:image/svg+xml,"+Sn(e)}function Mn(e){return 'url("'+In(e)+'")'}const Ht={...ti,inline:!1},Ln={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},Rn={display:"inline-block"},ht={backgroundColor:"currentColor"},di={backgroundColor:"transparent"},Bt={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},Wt={webkitMask:ht,mask:ht,background:di};for(const e in Wt){const t=Wt[e];for(const i in Bt)t[e+i]=Bt[i];}const Ke={};["horizontal","vertical"].forEach(e=>{const t=e.slice(0,1)+"Flip";Ke[e+"-flip"]=t,Ke[e.slice(0,1)+"-flip"]=t,Ke[e+"Flip"]=t;});function jt(e){return e+(e.match(/^[-0-9.]+$/)?"px":"")}const Gt=(e,t)=>{const i=bn(Ht,t),s={...Ln},n=t.mode||"svg",o={},a=t.style,c=typeof a=="object"&&!(a instanceof Array)?a:{};for(let b in t){const h=t[b];if(h!==void 0)switch(b){case"icon":case"style":case"onLoad":case"mode":break;case"inline":case"hFlip":case"vFlip":i[b]=h===!0||h==="true"||h===1;break;case"flip":typeof h=="string"&&Cn(i,h);break;case"color":o.color=h;break;case"rotate":typeof h=="string"?i[b]=xn(h):typeof h=="number"&&(i[b]=h);break;case"ariaHidden":case"aria-hidden":h!==!0&&h!=="true"&&delete s["aria-hidden"];break;default:{const S=Ke[b];S?(h===!0||h==="true"||h===1)&&(i[S]=!0):Ht[b]===void 0&&(s[b]=h);}}}const p=ji(e,i),u=p.attributes;if(i.inline&&(o.verticalAlign="-0.125em"),n==="svg"){s.style={...o,...c},Object.assign(s,u);let b=0,h=t.id;return typeof h=="string"&&(h=h.replace(/-/g,"_")),s.innerHTML=Ji(p.body,h?()=>h+"ID"+b++:"iconifyVue"),vue.h("svg",s)}const{body:r,width:d,height:g}=e,y=n==="mask"||(n==="bg"?!1:r.indexOf("currentColor")!==-1),m=Tn(r,{...u,width:d+"",height:g+""});return s.style={...o,"--svg":Mn(m),width:jt(u.width),height:jt(u.height),...Rn,...y?ht:di,...c},vue.h("span",s)};Zt(!0);Ki("",on);if(typeof document<"u"&&typeof window<"u"){ci();const e=window;if(e.IconifyPreload!==void 0){const t=e.IconifyPreload;typeof t=="object"&&t!==null&&(t instanceof Array?t:[t]).forEach(s=>{try{typeof s!="object"||s===null||s instanceof Array||typeof s.icons!="object"||typeof s.prefix!="string"||Fi(s);}catch{}});}if(e.IconifyProviders!==void 0){const t=e.IconifyProviders;if(typeof t=="object"&&t!==null)for(let i in t){try{const n=t[i];if(typeof n!="object"||!n||n.resources===void 0)continue;Yi(i,n);}catch{}}}}const Nn={...Ze,body:""},te=vue.defineComponent({inheritAttrs:!1,data(){return {iconMounted:!1,counter:0}},mounted(){this._name="",this._loadingIcon=null,this.iconMounted=!0;},unmounted(){this.abortLoading();},methods:{abortLoading(){this._loadingIcon&&(this._loadingIcon.abort(),this._loadingIcon=null);},getIcon(e,t){if(typeof e=="object"&&e!==null&&typeof e.body=="string")return this._name="",this.abortLoading(),{data:e};let i;if(typeof e!="string"||(i=Qe(e,!1,!0))===null)return this.abortLoading(),null;const s=$i(i);if(!s)return (!this._loadingIcon||this._loadingIcon.name!==e)&&(this.abortLoading(),this._name="",s!==null&&(this._loadingIcon={name:e,abort:vn([i],()=>{this.counter++;})})),null;this.abortLoading(),this._name!==e&&(this._name=e,t&&t(e));const n=["iconify"];return i.prefix!==""&&n.push("iconify--"+i.prefix),i.provider!==""&&n.push("iconify--"+i.provider),{data:s,classes:n}}},render(){this.counter;const e=this.$attrs,t=this.iconMounted?this.getIcon(e.icon,e.onLoad):null;if(!t)return Gt(Nn,e);let i=e;return t.classes&&(i={...e,class:(typeof e.class=="string"?e.class+" ":"")+t.classes.join(" ")}),Gt({...Ze,...t.data},i)}}),On={class:"display-type"},Pn={style:{position:"relative"}},En={key:0,class:"type-list"},Vn=vue.defineComponent({__name:"BaseSelect",props:{displayType:{}},emits:["update:displayType"],setup(e,{emit:t}){const i=e,s=t;let n=vue.reactive({showChangeDisplayType:!1,lastDisplayType:null});function o(p){[V.New,V.Like].includes(i.displayType)||(n.lastDisplayType=i.displayType),s("update:displayType",p),n.showChangeDisplayType=!1;}function a(){if([V.New,V.Like].includes(i.displayType))return o(n.lastDisplayType??V.FloorInFloorNoCallUser);n.showChangeDisplayType=!n.showChangeDisplayType;}const c=vue.computed(()=>{let p=i.displayType;switch([V.New,V.Like].includes(i.displayType)&&(p=n.lastDisplayType),p){case V.FloorInFloorNoCallUser:return "楼中楼";case V.FloorInFloor:return "楼中楼(@)";case V.FloorInFloorNested:return "冗余楼中楼";case V.V2exOrigin:return "V2原版";case V.OnlyOp:return "只看楼主";default:return "楼中楼"}});return (p,u)=>(vue.openBlock(),vue.createElementBlock("div",On,[vue.createElementVNode("div",{class:vue.normalizeClass(["type",p.displayType===vue.unref(V).New&&"active"]),onClick:u[0]||(u[0]=r=>o(vue.unref(V).New))},"最新 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["type",p.displayType===vue.unref(V).Like&&"active"]),onClick:u[1]||(u[1]=r=>o(vue.unref(V).Like))},"最热 ",2),vue.createElementVNode("div",Pn,[vue.createElementVNode("div",{class:vue.normalizeClass(["type",![vue.unref(V).New,vue.unref(V).Like].includes(p.displayType)&&"active"]),onClick:a},[vue.createElementVNode("span",null,vue.toDisplayString(c.value),1),vue.createVNode(vue.unref(te),{icon:"mingcute:down-line"})],2),vue.unref(n).showChangeDisplayType?(vue.openBlock(),vue.createElementBlock("div",En,[vue.createElementVNode("div",{class:vue.normalizeClass(["item",p.displayType===vue.unref(V).FloorInFloorNoCallUser&&"active"]),onClick:u[2]||(u[2]=vue.withModifiers(r=>o(vue.unref(V).FloorInFloorNoCallUser),["stop"]))},"楼中楼 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["item",p.displayType===vue.unref(V).FloorInFloor&&"active"]),onClick:u[3]||(u[3]=vue.withModifiers(r=>o(vue.unref(V).FloorInFloor),["stop"]))},"楼中楼(@) ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["item",p.displayType===vue.unref(V).FloorInFloorNested&&"active"]),onClick:u[4]||(u[4]=vue.withModifiers(r=>o(vue.unref(V).FloorInFloorNested),["stop"]))},"冗余楼中楼 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["item",p.displayType===vue.unref(V).OnlyOp&&"active"]),onClick:u[5]||(u[5]=vue.withModifiers(r=>o(vue.unref(V).OnlyOp),["stop"]))},"只看楼主 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["item",p.displayType===vue.unref(V).V2exOrigin&&"active"]),onClick:u[6]||(u[6]=vue.withModifiers(r=>o(vue.unref(V).V2exOrigin),["stop"]))},"V2原版 ",2)])):vue.createCommentVNode("",!0)])]))}});const xt=X(Vn,[["__scopeId","data-v-e4f684be"]]),_={eventMap:new Map,on(e,t){let i=this.eventMap.get(e);i?i.push(t):i=[t],this.eventMap.set(e,i);},offOne(e,t){let i=this.eventMap.get(e);if(i){let s=i.findIndex(n=>n===t);s>-1&&i.splice(s,1);}this.eventMap.set(e,i);},emit(e,t){let i=this.eventMap.get(e);i&&i.map(s=>s(t));},off(e){this.eventMap.has(e)&&this.eventMap.delete(e);},clear(){this.eventMap=new Map;}},v={SHOW_TOOLTIP:"SHOW_TOOLTIP",SHOW_MSG:"SHOW_MSG",SET_CALL:"SET_CALL",SHOW_CALL:"SHOW_CALL",REFRESH_ONCE:"REFRESH_ONCE",ADD_REPLY:"ADD_REPLY",IGNORE:"IGNORE",MERGE:"MERGE",REMOVE:"REMOVE",CHANGE_COMMENT_THANK:"CHANGE_COMMENT_THANK",CHANGE_POST_THANK:"CHANGE_POST_THANK",ADD_TAG:"ADD_TAG",REMOVE_TAG:"REMOVE_TAG",RELATION_REPLY:"RELATION_REPLY",JUMP:"JUMP",REFRESH_POST:"REFRESH_POST",SHOW_CONFIRM_MODAL:"SHOW_CONFIRM_MODAL",SHOW_CONFIRM_MODAL_CONFIRM:"SHOW_CONFIRM_MODAL_CONFIRM"},An={name:"PopConfirm",props:{title:{type:String,default(){return ""}},disabled:{type:Boolean,default(){return !1}}},data(){return {id:""}},created(){},methods:{cb(e){e===this.id&&(this.$emit("confirm"),this.id="");},showPop(e){if(this.disabled)return;let t=e.target.getBoundingClientRect();this.id=Date.now(),_.emit(v.SHOW_CONFIRM_MODAL,{title:this.title,rect:t,id:this.id}),_.offOne(v.SHOW_CONFIRM_MODAL_CONFIRM,this.cb),_.on(v.SHOW_CONFIRM_MODAL_CONFIRM,this.cb);}},unmounted(){_.offOne(v.SHOW_CONFIRM_MODAL_CONFIRM,this.cb);}};function Dn(e,t,i,s,n,o){return vue.openBlock(),vue.createElementBlock("span",{onClick:t[0]||(t[0]=vue.withModifiers((...a)=>o.showPop&&o.showPop(...a),["stop"]))},[vue.renderSlot(e.$slots,"default")])}const Fe=X(An,[["render",Dn]]),$n=vue.defineComponent({__name:"BaseLoading",props:{size:{default:"normal"}},setup(e){return (t,i)=>(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["loading",[t.size]])},null,2))}});const He=X($n,[["__scopeId","data-v-2697baa2"]]),Un={key:1,class:"key-notice"},Fn={class:"key"},Hn=vue.defineComponent({__name:"BaseButton",props:{keyboard:{},active:{type:Boolean},disabled:{type:Boolean},loading:{type:Boolean},size:{default:"normal"},type:{default:"primary"}},emits:["click"],setup(e){return (t,i)=>(vue.openBlock(),vue.createBlock(Ue,{disabled:!t.keyboard,title:`快捷键: ${t.keyboard}`},{default:vue.withCtx(()=>[vue.createElementVNode("div",vue.mergeProps({class:"base-button"},t.$attrs,{onClick:i[0]||(i[0]=s=>!t.disabled&&!t.loading&&t.$emit("click",s)),class:[t.active&&"active",t.size,t.type,(t.disabled||t.loading)&&"disabled",!t.disabled&&"hvr-grow"]}),[vue.createElementVNode("span",{style:vue.normalizeStyle({opacity:t.loading?0:1})},[vue.renderSlot(t.$slots,"default",{},void 0,!0)],4),t.loading?(vue.openBlock(),vue.createBlock(He,{key:0,size:"small"})):vue.createCommentVNode("",!0),t.keyboard?(vue.openBlock(),vue.createElementBlock("div",Un,[vue.createElementVNode("span",Fn,vue.toDisplayString(t.keyboard),1)])):vue.createCommentVNode("",!0)],16)]),_:3},8,["disabled","title"]))}});const ye=X(Hn,[["__scopeId","data-v-5a7d79ba"]]);const Bn={name:"Setting",components:{BaseButton:ye,PopConfirm:Fe,Icon:te,BaseSelect:xt,BaseSwitch:yt,Tooltip:Ue},inject:["isNight"],props:{show:{type:Boolean,default(){return !1}}},data(){return {tabIndex:0}},methods:{confirm(){this.close(),this.$emit("confirm");},close(){this.$emit("update:show",!1);}}},ui=e=>(vue.pushScopeId("data-v-386b43d0"),e=e(),vue.popScopeId(),e),Wn={key:0,class:"setting-modal modal"},jn={class:"modal-root"},Gn={class:"modal-header"},qn=ui(()=>vue.createElementVNode("div",{class:"title"}," 使用需知 ",-1)),zn={class:"body"},Jn=ui(()=>vue.createElementVNode("div",{class:"modal-content"},[vue.createElementVNode("div",null,"开启此功能会带来以下影响"),vue.createElementVNode("div",null,"缺点"),vue.createElementVNode("div",{style:{color:"red"}},[vue.createElementVNode("div",null,"1、你的IP可能会被封禁"),vue.createElementVNode("div",null,"2、消耗更多流量，给服务器带来更大的负担"),vue.createElementVNode("div",null,"3、你的V站浏览进度条会变快")]),vue.createElementVNode("div",null,"优点"),vue.createElementVNode("div",null,"1、卡片模式，无需打开主题即可查看内容"),vue.createElementVNode("div",null,"2、打开主题时提前预览正文内容，无需等待加载"),vue.createElementVNode("div",null,"原理"),vue.createElementVNode("div",null,"1、解析列表所有主题ID，批量调用show.json接口，获取对应主题的正文"),vue.createElementVNode("div",null,"2、请求的主题数据会缓存到本地，不会重复请求，超过3天的数据会删除"),vue.createElementVNode("div",null,"3、前面4条会并发请求，4条以后的一秒请求一条")],-1)),Kn={class:"btns"};function Yn(e,t,i,s,n,o){const a=vue.resolveComponent("Icon"),c=vue.resolveComponent("BaseButton");return vue.openBlock(),vue.createBlock(vue.Transition,null,{default:vue.withCtx(()=>[i.show?(vue.openBlock(),vue.createElementBlock("div",Wn,[vue.createElementVNode("div",{class:"mask",onClick:t[0]||(t[0]=(...p)=>o.close&&o.close(...p))}),vue.createElementVNode("div",jn,[vue.createElementVNode("div",Gn,[qn,vue.createVNode(a,{icon:"ic:round-close",onClick:o.close},null,8,["onClick"])]),vue.createElementVNode("div",zn,[Jn,vue.createElementVNode("div",Kn,[vue.createVNode(c,{type:"link",onClick:o.close},{default:vue.withCtx(()=>[vue.createTextVNode("不同意")]),_:1},8,["onClick"]),vue.createVNode(c,{onClick:o.confirm},{default:vue.withCtx(()=>[vue.createTextVNode("同意")]),_:1},8,["onClick"])])])])])):vue.createCommentVNode("",!0)]),_:1})}const Xn=X(Bn,[["render",Yn],["__scopeId","data-v-386b43d0"]]);const Qn={name:"Setting",components:{NoticeModal:Xn,PopConfirm:Fe,Icon:te,BaseSelect:xt,BaseSwitch:yt,Tooltip:Ue},inject:["isNight"],props:{modelValue:{type:Object,default(){return {}}},show:{type:Boolean,default(){return !1}}},data(){return {tabIndex:0,config:window.clone(this.modelValue),showNotice:!1}},computed:{DefaultVal(){return ge},CommentDisplayType(){return V},isNew(){return this.config.version<ge.currentVersion}},watch:{config:{handler(e){e.topReplyLoveMinCount=Math.trunc(e.topReplyLoveMinCount),e.topReplyLoveMinCount<0&&(e.topReplyLoveMinCount=1),this.$emit("update:modelValue",e);},deep:!0},"config.loopCheckNotice"(e){e?(this.config.loopCheckNoticeInterval=5,this.config.whenNewNoticeGlimmer=!1):(this.config.loopCheckNoticeInterval=0,this.config.whenNewNoticeGlimmer=!1,this.config.ddWebhook="");},show(e){e?document.body.style.overflow="hidden":document.body.style.overflow="unset";}},methods:{close(){this.config.version<ge.currentVersion&&(this.config.version=ge.currentVersion),this.$emit("update:show",!1);}}},N=e=>(vue.pushScopeId("data-v-9e40bff6"),e=e(),vue.popScopeId(),e),Zn={key:0,class:"setting-modal modal"},eo={class:"modal-root"},to={class:"modal-header"},io={class:"title"},no={class:"small"},oo=["href"],so={class:"body"},lo={class:"left"},ro={class:"tabs"},ao=N(()=>vue.createElementVNode("span",null,"列表设置",-1)),co=[ao],uo=N(()=>vue.createElementVNode("span",null,"主题设置",-1)),po=[uo],fo=N(()=>vue.createElementVNode("span",null,"其他设置",-1)),ho=[fo],mo=N(()=>vue.createElementVNode("span",null,"关于脚本",-1)),go=[mo],yo={class:"icons"},wo=["href"],_o=["href"],vo={class:"modal-content"},bo={class:"scroll"},ko={key:0},Co={class:"row"},xo=N(()=>vue.createElementVNode("label",{class:"item-title"},"列表展示方式",-1)),To={class:"wrapper"},So={class:"radio-group2"},Io=N(()=>vue.createElementVNode("div",{class:"desc danger"}," 提示：此项需要刷新页面才能生效 ",-1)),Mo={class:"row"},Lo=N(()=>vue.createElementVNode("label",{class:"item-title"},"主题弹框显示",-1)),Ro={class:"wrapper"},No=N(()=>vue.createElementVNode("div",{class:"desc"},[vue.createTextVNode(" 开启此选项后，主题会"),vue.createElementVNode("span",{class:"danger"},"始终"),vue.createTextVNode("以弹框的方式显示。优先级大于“新标签页打开链接” ")],-1)),Oo={class:"row"},Po=N(()=>vue.createElementVNode("label",{class:"item-title"},"新标签页打开链接",-1)),Eo={class:"wrapper"},Vo=N(()=>vue.createElementVNode("div",{class:"desc"}," 网页上所有链接通过新标签页打开 ",-1)),Ao={class:"row"},Do=N(()=>vue.createElementVNode("label",{class:"item-title"},"打开新标签页时立即切换过去",-1)),$o={class:"wrapper"},Uo={key:1},Fo={class:"row"},Ho=N(()=>vue.createElementVNode("label",{class:"item-title"},"显示回复展示方式",-1)),Bo={class:"wrapper"},Wo={class:"row"},jo=N(()=>vue.createElementVNode("label",{class:"item-title"},"回复展示方式",-1)),Go={class:"wrapper"},qo={class:"row"},zo=N(()=>vue.createElementVNode("label",{class:"item-title"},"单独打开主题时默认显示楼中楼",-1)),Jo={class:"wrapper"},Ko=N(()=>vue.createElementVNode("div",{class:"desc"}," 单独打开这种地址 https://v2ex.com/t/xxxx 时，是否默认显示楼中楼 ",-1)),Yo={class:"row"},Xo=N(()=>vue.createElementVNode("label",{class:"item-title"},"点击左右两侧透明处关闭主题详情弹框",-1)),Qo={class:"wrapper"},Zo={class:"row"},es=N(()=>vue.createElementVNode("label",{class:"item-title"},"正文超长自动折叠",-1)),ts={class:"wrapper"},is={class:"row"},ns=N(()=>vue.createElementVNode("label",{class:"item-title"},"主题宽度",-1)),os={class:"wrapper"},ss=N(()=>vue.createElementVNode("div",{class:"desc"},[vue.createTextVNode(" 未设定此值时，则默认宽度为77rem。接受合法的width值： "),vue.createElementVNode("a",{href:"https://vue3js.cn/interview/css/em_px_rem_vh_vw.html#%E4%BA%8C%E3%80%81%E5%8D%95%E4%BD%8D",target:"_blank"},"rem、px、vw、vh(点此查看)"),vue.createTextVNode("。 vw代表屏幕百分比，如想要屏幕的66%，请填写66vw ")],-1)),ls=N(()=>vue.createElementVNode("div",{class:"desc"}," 提示：此项设置以后，单独打开详情页时会出现主题突然变宽（窄）的问题，暂时无解 ",-1)),rs=N(()=>vue.createElementVNode("div",{class:"desc danger"}," 提示：此项需要刷新页面才能生效 ",-1)),as=N(()=>vue.createElementVNode("div",{class:"row"},[vue.createElementVNode("label",{class:"main-title"},"高赞回复")],-1)),cs={class:"row"},ds=N(()=>vue.createElementVNode("label",{class:"item-title"},"显示高赞回复",-1)),us={class:"wrapper"},ps={class:"row"},fs=N(()=>vue.createElementVNode("label",{class:"item-title"},"最多显示多少个高赞回复",-1)),hs={class:"wrapper"},ms={class:"row"},gs=N(()=>vue.createElementVNode("label",{class:"item-title"},"最少需要多少赞才能被判定为高赞",-1)),ys={class:"wrapper"},ws={key:2},_s={class:"row"},vs=N(()=>vue.createElementVNode("label",{class:"item-title"},"用户打标签(跨平台，数据保存在自己的记事本)：",-1)),bs={class:"wrapper"},ks={class:"row"},Cs=N(()=>vue.createElementVNode("label",{class:"item-title"},"划词显示Base64解码框",-1)),xs={class:"wrapper"},Ts={class:"row"},Ss=N(()=>vue.createElementVNode("label",{class:"item-title"},"自动签到",-1)),Is={class:"wrapper"},Ms={class:"row"},Ls=N(()=>vue.createElementVNode("label",{class:"item-title"},"自定义背景",-1)),Rs={class:"wrapper"},Ns=N(()=>vue.createElementVNode("div",{class:"desc"},[vue.createTextVNode(" 未设定此值时，则脚本就什么都不做，V站大部分页面背景颜色默认为 #e2e2e2，少部分页面有特定背景。接受一个合法的css color值：例如"),vue.createElementVNode("a",{href:"https://developer.mozilla.org/zh-CN/docs/Web/CSS/color_value",target:"_blank"},"red、#ffffff、rgb(222,222,22)(点此查看)"),vue.createTextVNode("等等。 ")],-1)),Os=N(()=>vue.createElementVNode("div",{class:"desc danger"}," 提示：此项需要刷新页面才能生效 ",-1)),Ps={class:"row"},Es=N(()=>vue.createElementVNode("label",{class:"item-title"},"收藏时提醒添加到书签",-1)),Vs={class:"wrapper"},As=N(()=>vue.createElementVNode("div",{class:"desc"}," V站帐号一旦被封禁，则无法登录，无法查看账号收藏了 ",-1)),Ds=N(()=>vue.createElementVNode("div",{class:"row"},[vue.createElementVNode("label",{class:"main-title"},"消息通知")],-1)),$s={class:"row"},Us=N(()=>vue.createElementVNode("label",{class:"item-title"},"接管未读提醒页面",-1)),Fs={class:"wrapper"},Hs={class:"row"},Bs=N(()=>vue.createElementVNode("label",{class:"item-title"},"定时查询未读提醒",-1)),Ws={class:"wrapper"},js=N(()=>vue.createElementVNode("div",{class:"desc"}," 开启此功能会带来以下影响： 1、你的IP可能会被封禁 2、消耗更多流量，给服务器带来更大的负担 3、你的V站浏览进度条会变快 ",-1)),Gs={key:0,class:"sub-content"},qs={class:"row"},zs=N(()=>vue.createElementVNode("label",{class:"item-title"},"查询间隔",-1)),Js={class:"wrapper"},Ks=["value"],Ys=N(()=>vue.createElementVNode("div",{class:"desc"}," 设置值太小，会导致频繁请求，你的IP可能会被封禁，建议设置为5，即每次5分钟查询一次 ",-1)),Xs={class:"row"},Qs=N(()=>vue.createElementVNode("label",{class:"item-title"},"当有新未读提醒时，网页标题闪烁",-1)),Zs={class:"wrapper"},el=N(()=>vue.createElementVNode("div",{class:"row"},[vue.createElementVNode("label",{class:"item-title"},"钉钉Webhook地址")],-1)),tl={class:"desc"},il=["value"],nl=N(()=>vue.createElementVNode("div",{class:"desc danger"}," 提示：此项需要刷新页面才能生效 ",-1)),ol={key:3},sl=N(()=>vue.createElementVNode("h1",null,"V2EX Next",-1)),ll={class:"project-desc"},rl={style:{"line-height":"2"}},al=["href"],cl=["href"],dl=["href"],ul=["href"],pl=["href"],fl=["href"];function hl(e,t,i,s,n,o){const a=vue.resolveComponent("Icon"),c=vue.resolveComponent("BaseSwitch"),p=vue.resolveComponent("BaseSelect"),u=vue.resolveComponent("NoticeModal");return vue.openBlock(),vue.createBlock(vue.Transition,null,{default:vue.withCtx(()=>[i.show?(vue.openBlock(),vue.createElementBlock("div",Zn,[vue.createElementVNode("div",{class:"mask",onClick:t[0]||(t[0]=(...r)=>o.close&&o.close(...r))}),vue.createElementVNode("div",eo,[vue.createElementVNode("div",to,[vue.createElementVNode("div",io,[vue.createTextVNode(" 脚本设置 "),vue.createElementVNode("div",no,[vue.createElementVNode("a",{href:o.DefaultVal.mobileScript,target:"_blank"},"(脚本现已支持移动端！)",8,oo)])]),vue.createVNode(a,{icon:"ic:round-close",onClick:o.close},null,8,["onClick"])]),vue.createElementVNode("div",so,[vue.createElementVNode("div",lo,[vue.createElementVNode("div",ro,[vue.createElementVNode("div",{class:vue.normalizeClass(["tab",n.tabIndex===0&&"active"]),onClick:t[1]||(t[1]=r=>n.tabIndex=0)},co,2),vue.createElementVNode("div",{class:vue.normalizeClass(["tab",n.tabIndex===1&&"active"]),onClick:t[2]||(t[2]=r=>n.tabIndex=1)},po,2),vue.createElementVNode("div",{class:vue.normalizeClass(["tab",n.tabIndex===2&&"active"]),onClick:t[3]||(t[3]=r=>n.tabIndex=2)},ho,2),vue.createElementVNode("div",{class:vue.normalizeClass(["tab",n.tabIndex===3&&"active"]),onClick:t[4]||(t[4]=r=>n.tabIndex=3)},go,2)]),vue.createElementVNode("div",yo,[vue.createElementVNode("a",{href:o.DefaultVal.git,target:"_blank"},[vue.createVNode(a,{icon:"mdi:github"})],8,wo),vue.createElementVNode("a",{href:o.DefaultVal.homeUrl,target:"_blank"},[vue.createVNode(a,{icon:"iconamoon:home-light"})],8,_o)])]),vue.createElementVNode("div",vo,[vue.createElementVNode("div",bo,[n.tabIndex===0?(vue.openBlock(),vue.createElementBlock("div",ko,[vue.createElementVNode("div",Co,[xo,vue.createElementVNode("div",To,[vue.createElementVNode("div",So,[vue.createElementVNode("div",{class:vue.normalizeClass(["radio",n.config.viewType==="simple"?"active":""]),onClick:t[5]||(t[5]=r=>n.config.viewType="simple")},"简洁 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["radio",n.config.viewType==="table"?"active":""]),onClick:t[6]||(t[6]=r=>n.config.viewType="table")},"表格 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["radio",n.config.viewType==="card"?"active":""]),onClick:t[7]||(t[7]=r=>n.showNotice=!0)},"卡片 ",2)])])]),Io,vue.createElementVNode("div",Mo,[Lo,vue.createElementVNode("div",Ro,[vue.createVNode(c,{modelValue:n.config.clickPostItemOpenDetail,"onUpdate:modelValue":t[8]||(t[8]=r=>n.config.clickPostItemOpenDetail=r)},null,8,["modelValue"])])]),No,vue.createElementVNode("div",Oo,[Po,vue.createElementVNode("div",Eo,[vue.createVNode(c,{modelValue:n.config.newTabOpen,"onUpdate:modelValue":t[9]||(t[9]=r=>n.config.newTabOpen=r)},null,8,["modelValue"])])]),Vo,vue.createElementVNode("div",Ao,[Do,vue.createElementVNode("div",$o,[vue.createVNode(c,{modelValue:n.config.newTabOpenActive,"onUpdate:modelValue":t[10]||(t[10]=r=>n.config.newTabOpenActive=r)},null,8,["modelValue"])])])])):vue.createCommentVNode("",!0),n.tabIndex===1?(vue.openBlock(),vue.createElementBlock("div",Uo,[vue.createElementVNode("div",Fo,[Ho,vue.createElementVNode("div",Bo,[vue.createVNode(c,{modelValue:n.config.showToolbar,"onUpdate:modelValue":t[11]||(t[11]=r=>n.config.showToolbar=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",Wo,[jo,vue.createElementVNode("div",Go,[vue.createVNode(p,{"display-type":n.config.commentDisplayType,"onUpdate:displayType":t[12]||(t[12]=r=>n.config.commentDisplayType=r)},null,8,["display-type"])])]),vue.createElementVNode("div",qo,[zo,vue.createElementVNode("div",Jo,[vue.createVNode(c,{modelValue:n.config.autoOpenDetail,"onUpdate:modelValue":t[13]||(t[13]=r=>n.config.autoOpenDetail=r)},null,8,["modelValue"])])]),Ko,vue.createElementVNode("div",Yo,[Xo,vue.createElementVNode("div",Qo,[vue.createVNode(c,{modelValue:n.config.closePostDetailBySpace,"onUpdate:modelValue":t[14]||(t[14]=r=>n.config.closePostDetailBySpace=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",Zo,[es,vue.createElementVNode("div",ts,[vue.createVNode(c,{modelValue:n.config.contentAutoCollapse,"onUpdate:modelValue":t[15]||(t[15]=r=>n.config.contentAutoCollapse=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",is,[ns,vue.createElementVNode("div",os,[vue.withDirectives(vue.createElementVNode("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=r=>n.config.postWidth=r)},null,512),[[vue.vModelText,n.config.postWidth]])])]),ss,ls,rs,as,vue.createElementVNode("div",cs,[ds,vue.createElementVNode("div",us,[vue.createVNode(c,{modelValue:n.config.showTopReply,"onUpdate:modelValue":t[17]||(t[17]=r=>n.config.showTopReply=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",ps,[fs,vue.createElementVNode("div",hs,[vue.withDirectives(vue.createElementVNode("input",{type:"number",min:"1","onUpdate:modelValue":t[18]||(t[18]=r=>n.config.topReplyCount=r)},null,512),[[vue.vModelText,n.config.topReplyCount]])])]),vue.createElementVNode("div",ms,[gs,vue.createElementVNode("div",ys,[vue.withDirectives(vue.createElementVNode("input",{type:"number",min:"1","onUpdate:modelValue":t[19]||(t[19]=r=>n.config.topReplyLoveMinCount=r)},null,512),[[vue.vModelText,n.config.topReplyLoveMinCount]])])])])):vue.createCommentVNode("",!0),n.tabIndex===2?(vue.openBlock(),vue.createElementBlock("div",ws,[vue.createElementVNode("div",_s,[vs,vue.createElementVNode("div",bs,[vue.createVNode(c,{modelValue:n.config.openTag,"onUpdate:modelValue":t[20]||(t[20]=r=>n.config.openTag=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",ks,[Cs,vue.createElementVNode("div",xs,[vue.createVNode(c,{modelValue:n.config.base64,"onUpdate:modelValue":t[21]||(t[21]=r=>n.config.base64=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",Ts,[Ss,vue.createElementVNode("div",Is,[vue.createVNode(c,{modelValue:n.config.autoSignin,"onUpdate:modelValue":t[22]||(t[22]=r=>n.config.autoSignin=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",Ms,[Ls,vue.createElementVNode("div",Rs,[vue.withDirectives(vue.createElementVNode("input",{type:"text","onUpdate:modelValue":t[23]||(t[23]=r=>n.config.customBgColor=r)},null,512),[[vue.vModelText,n.config.customBgColor]])])]),Ns,Os,vue.createElementVNode("div",Ps,[Es,vue.createElementVNode("div",Vs,[vue.createVNode(c,{modelValue:n.config.collectBrowserNotice,"onUpdate:modelValue":t[24]||(t[24]=r=>n.config.collectBrowserNotice=r)},null,8,["modelValue"])])]),As,Ds,vue.createElementVNode("div",$s,[Us,vue.createElementVNode("div",Fs,[vue.createVNode(c,{modelValue:n.config.notice.takeOverNoticePage,"onUpdate:modelValue":t[25]||(t[25]=r=>n.config.notice.takeOverNoticePage=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",Hs,[Bs,vue.createElementVNode("div",Ws,[vue.createVNode(c,{modelValue:n.config.notice.loopCheckNotice,"onUpdate:modelValue":t[26]||(t[26]=r=>n.config.notice.loopCheckNotice=r)},null,8,["modelValue"])])]),js,n.config.notice.loopCheckNotice?(vue.openBlock(),vue.createElementBlock("div",Gs,[vue.createElementVNode("div",qs,[zs,vue.createElementVNode("div",Js,[vue.createElementVNode("input",{type:"number",value:n.config.notice.loopCheckNoticeInterval,onBlur:t[27]||(t[27]=r=>n.config.notice.loopCheckNoticeInterval=r.target.value),style:{"margin-right":"1rem"}},null,40,Ks),vue.createTextVNode("分钟 ")])]),Ys,vue.createElementVNode("div",Xs,[Qs,vue.createElementVNode("div",Zs,[vue.createVNode(c,{modelValue:n.config.notice.whenNewNoticeGlimmer,"onUpdate:modelValue":t[28]||(t[28]=r=>n.config.notice.whenNewNoticeGlimmer=r)},null,8,["modelValue"])])]),el,vue.createElementVNode("div",tl,[vue.createElementVNode("input",{type:"text",value:n.config.notice.ddWebhook,onBlur:t[29]||(t[29]=r=>n.config.notice.ddWebhook=r.target.value),style:{width:"100%"}},null,40,il)])])):vue.createCommentVNode("",!0),nl])):vue.createCommentVNode("",!0),n.tabIndex===3?(vue.openBlock(),vue.createElementBlock("div",ol,[sl,vue.createElementVNode("div",ll,[vue.createElementVNode("div",rl,[vue.createElementVNode("div",null,[vue.createTextVNode("官网："),vue.createElementVNode("a",{href:o.DefaultVal.homeUrl,target:"_blank"},vue.toDisplayString(o.DefaultVal.homeUrl),9,al)]),vue.createElementVNode("div",null,[vue.createTextVNode("GitHub地址："),vue.createElementVNode("a",{href:o.DefaultVal.git,target:"_blank"},vue.toDisplayString(o.DefaultVal.git),9,cl)]),vue.createElementVNode("div",null,[vue.createTextVNode("PC脚本地址："),vue.createElementVNode("a",{href:o.DefaultVal.pcScript,target:"_blank"},vue.toDisplayString(o.DefaultVal.pcScript),9,dl)]),vue.createElementVNode("div",null,[vue.createTextVNode("移动端脚本地址："),vue.createElementVNode("a",{href:o.DefaultVal.mobileScript,target:"_blank"},vue.toDisplayString(o.DefaultVal.mobileScript),9,ul)]),vue.createElementVNode("div",null,[vue.createTextVNode("反馈: "),vue.createElementVNode("a",{href:o.DefaultVal.issue,target:"_blank"},vue.toDisplayString(o.DefaultVal.issue),9,pl)]),vue.createElementVNode("div",null,[vue.createTextVNode("更新日志："),vue.createElementVNode("a",{href:o.DefaultVal.pcLog,target:"_blank"},vue.toDisplayString(o.DefaultVal.pcLog),9,fl)])])])])):vue.createCommentVNode("",!0)])])])]),vue.createVNode(u,{show:n.showNotice,"onUpdate:show":t[30]||(t[30]=r=>n.showNotice=r),onConfirm:t[31]||(t[31]=r=>n.config.viewType="card")},null,8,["show"])])):vue.createCommentVNode("",!0)]),_:1})}const ml=X(Qn,[["render",hl],["__scopeId","data-v-9e40bff6"]]),gl={name:"Point",components:{PopConfirm:Fe,Icon:te},inject:["post","isLogin"],props:{item:{type:Object,default(){return {}}},apiUrl:""},computed:{disabled(){return this.item.username===window.user.username||this.item.isThanked||!this.isLogin}},methods:{thankError(){if(!this.isLogin)return _.emit(v.SHOW_MSG,{type:"warning",text:"请先登录！"});if(this.item.username===window.user.username)return _.emit(v.SHOW_MSG,{type:"warning",text:"不能感谢自己"});if(this.item.isThanked)return _.emit(v.SHOW_MSG,{type:"warning",text:"已经感谢过了"})},async thank(){this.$emit("addThank");let e=`${location.origin}/thank/${this.apiUrl}?once=${this.post.once}`;$.post(e).then(t=>{t.success||(this.$emit("recallThank"),_.emit(v.SHOW_MSG,{type:"error",text:t.message})),_.emit(v.REFRESH_ONCE,t.once);},t=>{this.$emit("recallThank"),_.emit(v.SHOW_MSG,{type:"error",text:"感谢失败"}),_.emit(v.REFRESH_ONCE);});}}},yl={key:2,class:"link-num"},wl={key:3};function _l(e,t,i,s,n,o){const a=vue.resolveComponent("Icon"),c=vue.resolveComponent("PopConfirm");return vue.openBlock(),vue.createBlock(c,{disabled:o.disabled,title:`确认花费 10 个铜币向 @${i.item.username} 的这条回复发送感谢？`,onConfirm:o.thank},{default:vue.withCtx(()=>[vue.createElementVNode("div",{class:vue.normalizeClass(["tool",[o.disabled&&"disabled"]]),onClick:t[0]||(t[0]=(...p)=>o.thankError&&o.thankError(...p))},[i.item.isThanked?(vue.openBlock(),vue.createBlock(a,{key:0,color:"rgb(224,42,42)",icon:"icon-park-solid:like"})):(vue.openBlock(),vue.createBlock(a,{key:1,color:i.item.thankCount?"rgb(224,42,42)":null,icon:"icon-park-outline:like"},null,8,["color"])),i.item.thankCount?(vue.openBlock(),vue.createElementBlock("span",yl,vue.toDisplayString(i.item.thankCount),1)):(vue.openBlock(),vue.createElementBlock("span",wl,"感谢"))],2)]),_:1},8,["disabled","title","onConfirm"])}const tt=X(gl,[["render",_l]]);const vl={name:"Author",components:{PopConfirm:Fe,Point:tt,Icon:te},inject:["isLogin","tags","config","isNight"],props:{modelValue:!1,comment:{type:Object,default(){return {}}},type:{type:String,default(){return "list"}}},computed:{isDev(){return !1},pointInfo(){return {isThanked:this.comment.isThanked,thankCount:this.comment.thankCount,username:this.comment.username}},myTags(){return this.tags[this.comment.username]??[]},context(){return this.comment.replyUsers.length}},methods:{jump(){_.emit(v.JUMP,this.comment.floor);},showRelationReply(){if(!this.comment.replyUsers.length){_.emit(v.SHOW_MSG,{type:"warning",text:"该回复无上下文"});return}_.emit(v.RELATION_REPLY,{left:this.comment.replyUsers,right:this.comment.username,rightFloor:this.comment.floor});},addTag(){_.emit(v.ADD_TAG,this.comment.username);},removeTag(e){_.emit(v.REMOVE_TAG,{username:this.comment.username,tag:e});},checkIsLogin(e=""){return this.isLogin?(this.$emit(e),!0):(_.emit(v.SHOW_MSG,{type:"warning",text:"请先登录！"}),!1)},addThank(){_.emit(v.CHANGE_COMMENT_THANK,{id:this.comment.id,type:"add"});},recallThank(){_.emit(v.CHANGE_COMMENT_THANK,{id:this.comment.id,type:"recall"});}}},Be=e=>(vue.pushScopeId("data-v-64aa1930"),e=e(),vue.popScopeId(),e),bl={class:"Author-left"},kl=["href"],Cl=["src"],xl={class:"texts"},Tl=["href"],Sl={key:0,class:"owner"},Il={key:1,class:"dup"},Ml={key:2,class:"mod"},Ll={class:"ago"},Rl={class:"my-tag"},Nl=Be(()=>vue.createElementVNode("i",{class:"fa fa-tag"},null,-1)),Ol=["onClick"],Pl={class:"Author-right"},El={key:0,class:"toolbar"},Vl={class:"tool"},Al=Be(()=>vue.createElementVNode("span",null,"隐藏",-1)),Dl=Be(()=>vue.createElementVNode("span",null,"上下文",-1)),$l=Be(()=>vue.createElementVNode("span",null,"跳转",-1)),Ul=Be(()=>vue.createElementVNode("span",null,"回复",-1));function Fl(e,t,i,s,n,o){const a=vue.resolveComponent("Icon"),c=vue.resolveComponent("PopConfirm"),p=vue.resolveComponent("Point");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["Author",{expand:!i.modelValue}])},[vue.createElementVNode("div",bl,[i.modelValue?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createBlock(a,{key:0,onClick:t[0]||(t[0]=vue.withModifiers(u=>e.$emit("update:modelValue",!0),["stop"])),color:"#177EC9",class:"expand-icon",icon:"gravity-ui:chevrons-expand-up-right"})),o.config.viewType!=="simple"?(vue.openBlock(),vue.createElementBlock("a",{key:1,class:"avatar",href:`/member/${i.comment.username}`},[vue.createElementVNode("img",{src:i.comment.avatar,alt:""},null,8,Cl)],8,kl)):vue.createCommentVNode("",!0),vue.createElementVNode("span",xl,[vue.createElementVNode("strong",null,[vue.createElementVNode("a",{href:`/member/${i.comment.username}`,class:vue.normalizeClass(["username",{dark:o.isNight}])},vue.toDisplayString(i.comment.username),11,Tl)]),i.comment.isOp?(vue.openBlock(),vue.createElementBlock("div",Sl,"OP")):vue.createCommentVNode("",!0),i.comment.isDup?(vue.openBlock(),vue.createElementBlock("div",Il,"DUP")):vue.createCommentVNode("",!0),i.comment.isMod?(vue.openBlock(),vue.createElementBlock("div",Ml,"MOD")):vue.createCommentVNode("",!0),vue.createElementVNode("span",Ll,vue.toDisplayString(i.comment.date),1),o.isLogin&&o.config.openTag?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:3},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.myTags,u=>(vue.openBlock(),vue.createElementBlock("span",Rl,[Nl,vue.createElementVNode("span",null,vue.toDisplayString(u),1),vue.createElementVNode("i",{class:"fa fa-trash-o remove",onClick:vue.withModifiers(r=>o.removeTag(u),["stop"])},null,8,Ol)]))),256)),vue.createElementVNode("span",{class:"add-tag ago",onClick:t[1]||(t[1]=vue.withModifiers((...u)=>o.addTag&&o.addTag(...u),["stop"])),title:"添加标签"},"+")],64)):vue.createCommentVNode("",!0)])]),vue.createElementVNode("div",Pl,[o.isLogin?(vue.openBlock(),vue.createElementBlock("div",El,[vue.createVNode(c,{title:"确认隐藏这条回复?",onConfirm:t[2]||(t[2]=u=>e.$emit("hide"))},{default:vue.withCtx(()=>[vue.createElementVNode("div",Vl,[vue.createVNode(a,{icon:"fluent:eye-hide-24-regular"}),Al])]),_:1}),o.context?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"tool",onClick:t[3]||(t[3]=vue.withModifiers((...u)=>o.showRelationReply&&o.showRelationReply(...u),["stop"]))},[vue.createVNode(a,{icon:"iconoir:page-search"}),Dl])):vue.createCommentVNode("",!0),i.type==="top"?(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"tool",onClick:t[4]||(t[4]=vue.withModifiers((...u)=>o.jump&&o.jump(...u),["stop"]))},[vue.createVNode(a,{icon:"icon-park-outline:to-bottom"}),$l])):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"tool",onClick:t[5]||(t[5]=vue.withModifiers(u=>o.checkIsLogin("reply"),["stop"]))},[vue.createVNode(a,{icon:"mynaui:message"}),Ul]),vue.withDirectives(vue.createVNode(p,{item:o.pointInfo,onAddThank:o.addThank,onRecallThank:o.recallThank,"api-url":"reply/"+i.comment.id},null,8,["item","onAddThank","onRecallThank","api-url"]),[[vue.vShow,!i.comment.thankCount]])])):vue.createCommentVNode("",!0),vue.withDirectives(vue.createVNode(p,{item:o.pointInfo,onAddThank:o.addThank,onRecallThank:o.recallThank,"api-url":"reply/"+i.comment.id},null,8,["item","onAddThank","onRecallThank","api-url"]),[[vue.vShow,i.comment.thankCount]]),vue.createElementVNode("div",{class:vue.normalizeClass(["floor",{isDev:o.isDev}])},vue.toDisplayString(i.comment.floor),3)])],2)}const pi=X(vl,[["render",Fl],["__scopeId","data-v-64aa1930"]]);const Hl=e=>(vue.pushScopeId("data-v-180caef6"),e=e(),vue.popScopeId(),e),Bl={class:"get-cursor"},Wl=["innerHTML"],jl={class:"toolbar"},Gl={class:"left"},ql={class:"upload"},zl={key:0,style:{color:"black","font-size":"1.4rem"}},Jl={class:"right"},Kl=Hl(()=>vue.createElementVNode("div",{class:"title"},"经典",-1)),Yl={class:"list"},Xl=["src","onClick"],Ql={class:"emoji"},Zl={class:"title"},er={class:"list"},tr=["onClick"],ir={__name:"PostEditor",props:{replyUser:null,replyFloor:null,useType:{type:String,default(){return "reply-comment"}}},emits:["close"],setup(e,{expose:t,emit:i}){const s=e,{replyUser:n,replyFloor:o,useType:a}=s,c=n?`@${n} #${o} `:"",p=i,u=vue.inject("post"),r=vue.inject("show"),d=vue.inject("isNight");vue.inject("pageType");const g=vue.inject("allReplyUsers");let y=vue.ref(!1);const m=vue.ref(!1),b=vue.ref(!1),h=vue.ref(!1),S=vue.ref("editorId_"+Date.now()),k=vue.ref(c),T=vue.ref(null),W=vue.ref(null),q=vue.ref(null),D=vue.ref('<span style="white-space:pre-wrap;"> </span>'),z=[{title:"常用",list:["😅","😭","😂","🥰","😰","🤡","👀","🐴","🐶","❓","❤️","💔","⭐","🔥","💩","🔞","⚠️","🎁","🎉"]},{title:"小黄脸",list:["😀","😁","😂","🤣","😅","😊","😋","😘","🥰","😗","🤩","🤔","🤨","😐","😑","🙄","😏","😪","😫","🥱","😜","😒","😔","😨","😰","😱","🥵","😡","🥳","🥺","🤭","🧐","😎","🤓","😭","🤑","🤮"]},{title:"手势",list:["🤏","👉","✌️","👌","👍","👎","🤝","🙏","👏"]},{title:"其他",list:["🔞","👻","🤡","🐔","👀","💩","🐴","🦄","🐧","🐶"]}],j=[{name:"[狗头]",low:"https://i.imgur.com/io2SM1h.png",high:"https://i.imgur.com/0icl60r.png"},{name:"[doge]",low:"https://i.imgur.com/duWRpIu.png",high:"https://i.imgur.com/HyphI6d.png"},{name:"[受虐滑稽]",low:"https://i.imgur.com/Iy0taMy.png",high:"https://i.imgur.com/PS1pxd9.png"},{name:"[马]",low:"https://i.imgur.com/8EKZv7I.png",high:"https://i.imgur.com/ANFUX52.png"},{name:"[二哈]",low:"https://i.imgur.com/XKj1Tkx.png",high:"https://i.imgur.com/dOeP4XD.png"},{name:"[舔屏]",low:"https://i.imgur.com/Cvl7dyN.png",high:"https://i.imgur.com/LmETy9N.png"},{name:"[辣眼睛]",low:"https://i.imgur.com/cPNPYD5.png",high:"https://i.imgur.com/3fSUmi8.png"},{name:"[吃瓜]",low:"https://i.imgur.com/ee8Lq7H.png",high:"https://i.imgur.com/0L26og9.png"},{name:"[不高兴]",low:"https://i.imgur.com/huX6coX.png",high:"https://i.imgur.com/N7JEuvc.png"},{name:"[真棒]",low:"https://i.imgur.com/xr1UOz1.png",high:"https://i.imgur.com/w8YEw9Q.png"},{name:"[鄙视]",low:"https://i.imgur.com/u6jlqVq.png",high:"https://i.imgur.com/8JFNANq.png"},{name:"[疑问]",low:"https://i.imgur.com/F29pmQ6.png",high:"https://i.imgur.com/EbbTQAR.png"},{name:"[吐舌]",low:"https://i.imgur.com/InmIzl9.png",high:"https://i.imgur.com/Ovj56Cd.png"},{name:"[笑眼]",low:"https://i.imgur.com/ZveiiGy.png",high:"https://i.imgur.com/PI1CfEr.png"},{name:"[大哭]",low:"https://i.imgur.com/hu4oR6C.png",high:"https://i.imgur.com/b4X9XLE.png"},{name:"[喷]",low:"https://i.imgur.com/bkw3VRr.png",high:"https://i.imgur.com/wnZL13L.png"},{name:"[苦笑]",low:"https://i.imgur.com/VUWFktU.png",high:"https://i.imgur.com/NAfspZ1.png"},{name:"[喝酒]",low:"https://i.imgur.com/2ZZSapE.png",high:"https://i.imgur.com/rVbSVak.png"},{name:"[捂脸]",low:"https://i.imgur.com/krir4IG.png",high:"https://i.imgur.com/qqBqgVm.png"},{name:"[阴险]",low:"https://i.imgur.com/MA8YqTP.png",high:"https://i.imgur.com/e94jbaT.png"},{name:"[怒]",low:"https://i.imgur.com/n4kWfGB.png",high:"https://i.imgur.com/iMXxNxh.png"}],ue=["3107b9ef8b316f3","442b04f26eefc8a","59cfebe717c09e4","60605aad4a62882","6c65ab1d3f5452a","83e123737849aa9","9311f6be1c10160","c4a4a563f698595","81be04b9e4a08ce"];t({content:k,isFocus:()=>y.value});const ie=vue.computed(()=>[a,y.value?"isFocus":"",d.value?"isNight":""]),le=vue.computed(()=>{var O;if(!T.value||!k.value)return "";let H=((O=T.value)==null?void 0:O.selectionStart)||0;return k.value.substring(0,H).replace(/</g,"<").replace(/>/g,">").replace(/\n/g,"<br/>").replace(/\s/g,D.value)}),fe=vue.computed(()=>k.value?k.value===c:!0);function _e(H){H.preventDefault(),We(H.dataTransfer.files[0]);}async function We(H){if(!H||b.value)return;b.value=!0;const O=new FormData;O.append("image",H);const U=Math.floor(Math.random()*ue.length),Y=ue[U],Q=await fetch("https://api.imgur.com/3/upload",{method:"POST",headers:{Authorization:`Client-ID ${Y}`},body:O});if(b.value=!1,Q.ok){const J=await Q.json();if(J.success)return ot(" "+J.data.link+" ")}_.emit(v.SHOW_MSG,{type:"error",text:"上传失败"});}async function xe(){if(fe.value||m.value)return;m.value=!0;let H=k.value.replace(/\[((?!\[).)+\]/g,function(J){let ne=j.find(ve=>ve.name===J);return ne?ne.low+" ":J}),O=k.value.replace(/https?:\/\/(i\.)?imgur\.com\/((?!http).)+\.(gif|png|jpg|jpeg|GIF|PNG|JPG|JPEG)/g,function(J){return `<img src="${J}" data-originUrl="${J}" data-notice="这个img标签由v2ex-超级增强脚本解析" style="max-width: 100%">`});O=O.replace(/\[((?!\[).)+\]/g,function(J){let ne=j.find(ve=>ve.name===J);return ne?`<a target="_blank" href="${ne.low}" rel="nofollow noopener"><img src="${ne.low}" class="embedded_image" rel="noreferrer"></a> `:J});let U=O.match(/@([\w]+?[\s])/g);U&&U.map(J=>{let ne=J.replace("@","").replace(" ","");O=O.replace(ne,`<a href="/member/${ne}">${ne}</a>`);}),O=O.replaceAll(`
`,"<br/>");let Y={thankCount:0,isThanked:!1,isOp:u.value.username===window.user.username,isDup:!1,id:Date.now(),username:window.user.username,avatar:window.user.avatar,date:"几秒前",floor:u.value.replyCount+1,reply_content:O??"",children:[],replyUsers:n?[n]:[],replyFloor:o||-1,level:a==="reply-comment"?1:0};Y.hideCallUserReplyContent=Y.reply_content,Y.replyUsers.length===1&&(Y.hideCallUserReplyContent=Y.reply_content.replace(/@<a href="\/member\/[\s\S]+?<\/a>(\s#[\d]+)?\s(<br>)?/,()=>""));let Q=`${location.origin}/t/${u.value.id}`;$.post(Q,{content:H,once:u.value.once}).then(J=>{m.value=!1;let ne=J.search("你上一条回复的内容和这条相同");if(ne>-1)return _.emit(v.SHOW_MSG,{type:"error",text:"你上一条回复的内容和这条相同"});if(ne=J.search("请不要在每一个回复中都包括外链，这看起来像是在 spamming"),ne>-1)return _.emit(v.SHOW_MSG,{type:"error",text:"请不要在每一个回复中都包括外链，这看起来像是在 spamming"});if(J.search("创建新回复")>-1){_.emit(v.REFRESH_ONCE,J),_.emit(v.SHOW_MSG,{type:"error",text:"回复出现了问题，请使用原版进行回复"});let je=window.document.body.clientWidth,Ge=1200,vi=je/2-Ge/2,Rt=window.open("创建新回复","",`width=${Ge},height=600,left=${vi},top=100`);Rt.document.write(J);let bi=setInterval(function(){Rt.closed&&(clearInterval(bi),_.emit(v.REFRESH_POST));},1e3);return}k.value=c,p("close"),_.emit(v.REFRESH_ONCE,J),_.emit(v.SHOW_MSG,{type:"success",text:"回复成功"}),_.emit(v.ADD_REPLY,Y);},J=>{m.value=!1,_.emit(v.SHOW_MSG,{type:"error",text:"回复失败"});}).catch(J=>{});}function Ie(H){if(h.value)return h.value=!1;let O=H.currentTarget.getBoundingClientRect();q.value.style.left=O.left+30+"px",q.value.style.bottom=window.innerHeight-O.top-20+"px",h.value=!0;}function re(){_.emit(v.SHOW_CALL,{show:!1}),_.off(v.SET_CALL);}function nt(){T.value.style.height=0,T.value.style.height=T.value.scrollHeight+"px";}function ot(H){let O=T.value.selectionStart,U=k.value.slice(0,O),Y=k.value.slice(O,k.value.length);k.value=U+H+Y;let Q=U.length+H.length;setTimeout(()=>{T.value.focus(),T.value.setSelectionRange(Q,Q),nt();});}function Me(H){let O=W.value.getBoundingClientRect();_.emit(v.SHOW_CALL,{show:!0,top:O.top,left:O.left,text:H}),_.off(v.SET_CALL),_.on(v.SET_CALL,U=>{let Y=T.value.selectionStart,Q=k.value.slice(0,Y),J=k.value.slice(Y,k.value.length),ne=Q.lastIndexOf("@");Q=k.value.slice(0,ne+1),U==="管理员"&&(U="Livid @Kai @Olivia @GordianZ @sparanoid @drymonfidelia"),U==="所有人"&&(U=g.value.map((je,Ge)=>Ge?"@"+je:je).join(" ")),k.value=Q+U+" "+J;let ve=Q.length+U.length+1;setTimeout(()=>{T.value.setSelectionRange(ve,ve),nt();}),_.off(v.SET_CALL);});}function yi(H){switch(H.keyCode){case 8:k.value==="@"&&re();break;case 37:case 38:case 39:case 40:setTimeout(()=>Mt({data:""}),100);break;case 27:return H.preventDefault(),H.stopPropagation(),H.stopImmediatePropagation(),!1;case 13:H.ctrlKey&&xe(),H.metaKey&&xe();break}}function Mt(H){let O=T.value.selectionStart;if(k.value){if(H.data===" ")return re();if(H.data==="@"){if(k.value.length!==1){if(k.value[O-2]===" "||k.value[O-2]===`
`)return Me("")}else return Me("");re();}else {nt();let U=k.value.slice(0,O),Y=U.lastIndexOf("@");if(Y===-1)return re();let Q=U.slice(Y,O);if(Q.includes(" "))re();else {if(Y===0)return Me(Q.replace("@",""));if(k.value.length!==1){if(k.value[Y-1]===" "||k.value[Y-1]===`
`)return Me(Q.replace("@",""))}else return Me(Q.replace("@",""));re();}}}}function Lt(H){const O=H.clipboardData.items,U=[].slice.call(O).filter(function(J){return J.type.indexOf("image")!==-1});if(U.length===0)return;const Q=U[0].getAsFile();We(Q);}function wi(){document.removeEventListener("paste",Lt),y.value=!1;}function _i(){document.addEventListener("paste",Lt);}return vue.watch(()=>r,H=>{H.value&&(h.value=!1);},{deep:!0}),vue.onMounted(()=>{$(`.${S.value}`).each(function(){this.setAttribute("style","height:"+this.scrollHeight+"px;overflow-y:hidden;");}).on("input",function(){this.style.height=0,this.style.height=this.scrollHeight+"px";}),a==="reply-comment"&&T.value&&T.value.focus();}),vue.onBeforeUnmount(()=>{$(`.${S.value}`).off();}),(H,O)=>(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["post-editor-wrapper",ie.value])},[vue.withDirectives(vue.createElementVNode("textarea",{class:vue.normalizeClass(["post-editor",S.value]),ref_key:"txtRef",ref:T,onFocus:O[0]||(O[0]=U=>vue.isRef(y)?y.value=!0:y=!0),onBlur:wi,onFocusin:_i,placeholder:"请尽量让自己的回复能够对别人有帮助",onInput:Mt,onKeydown:yi,onDrop:_e,"onUpdate:modelValue":O[1]||(O[1]=U=>k.value=U)},null,34),[[vue.vModelText,k.value]]),vue.createElementVNode("div",Bl,[vue.createElementVNode("span",{innerHTML:le.value},null,8,Wl),vue.createElementVNode("span",{class:"cursor",ref_key:"cursorRef",ref:W},"|",512)]),vue.createElementVNode("div",jl,[vue.createElementVNode("div",Gl,[vue.createVNode(vue.unref(te),{onClick:vue.withModifiers(Ie,["stop"]),icon:"streamline:smiley-happy"}),vue.createElementVNode("div",ql,[vue.createElementVNode("input",{type:"file",accept:"image/*",onChange:O[2]||(O[2]=U=>We(U.currentTarget.files[0]))},null,32),vue.createVNode(vue.unref(te),{icon:"lets-icons:img-load-box-fill"})]),b.value?(vue.openBlock(),vue.createElementBlock("span",zl,"上传中.....")):vue.createCommentVNode("",!0)]),vue.createElementVNode("div",Jl,[vue.unref(a)==="reply-comment"?(vue.openBlock(),vue.createBlock(ye,{key:0,type:"link",size:"small",style:{"margin-right":"1rem",cursor:"pointer"},onClick:O[3]||(O[3]=vue.withModifiers(U=>p("close"),["stop"]))},{default:vue.withCtx(()=>[vue.createTextVNode(" 关闭 ")]),_:1})):vue.createCommentVNode("",!0),vue.createVNode(ye,{size:"small",disabled:fe.value,loading:m.value,onClick:vue.withModifiers(xe,["stop"])},{default:vue.withCtx(()=>[vue.createTextVNode("回复 ")]),_:1},8,["disabled","loading"])])]),vue.withDirectives(vue.createElementVNode("div",{class:"emoticon-pack",ref_key:"emoticonsRef",ref:q},[vue.createVNode(vue.unref(te),{icon:"ic:round-close",onClick:O[4]||(O[4]=vue.withModifiers(U=>h.value=!1,["stop"]))}),Kl,vue.createElementVNode("div",Yl,[(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,vue.renderList(j,U=>vue.createElementVNode("img",{src:U.high,onClick:vue.withModifiers(Y=>{ot(U.name),h.value=!1;},["stop"])},null,8,Xl)),64))]),vue.createElementVNode("div",Ql,[(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,vue.renderList(z,U=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createElementVNode("div",Zl,vue.toDisplayString(U.title),1),vue.createElementVNode("div",er,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(U.list,Y=>(vue.openBlock(),vue.createElementBlock("span",{onClick:vue.withModifiers(Q=>{ot(Y),h.value=!1;},["stop"])},vue.toDisplayString(Y),9,tr))),256))])],64))),64))])],512),[[vue.vShow,h.value]])],2))}},Tt=X(ir,[["__scopeId","data-v-180caef6"]]);const nr={key:0,class:"html-wrapper"},or=["innerHTML"],sr=900,lr={__name:"BaseHtmlRender",props:["html"],setup(e){const t=vue.inject("config"),i=e,s=vue.ref(null),n=vue.ref(!1),o=vue.ref(!1);function a(p){if(!t.value.base64)return;let u=window.win().getSelection().toString();if(u){let r=u.match(/([A-Za-z0-9+/=]+)/g);if(r){if(r[0].length<4)return;_.emit(v.SHOW_TOOLTIP,{text:r[0],e:p});}}}vue.watch(t.value,p=>{p.contentAutoCollapse||(n.value=!1);}),vue.watch([()=>s.value,()=>i.html],()=>{!s.value||!i.html||t.value.contentAutoCollapse&&(s.value.querySelectorAll("img").forEach(p=>{p.removeEventListener("load",c),p.addEventListener("load",c);}),c());},{immediate:!0,flush:"post"});function c(){if(o.value||!s.value)return;let p=s.value.getBoundingClientRect();n.value=p.height>=sr;}return (p,u)=>i.html?(vue.openBlock(),vue.createElementBlock("div",nr,[vue.createElementVNode("div",{class:vue.normalizeClass({mask:n.value})},[vue.createElementVNode("div",{ref_key:"contentRef",ref:s,innerHTML:i.html,onMouseup:a},null,40,or)],2),n.value?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"expand",onClick:u[0]||(u[0]=r=>{n.value=!1,o.value=!0;})},"展开")):vue.createCommentVNode("",!0)])):vue.createCommentVNode("",!0)}},it=X(lr,[["__scopeId","data-v-727ada32"]]);const rr={name:"TopSubComment",components:{BaseHtmlRender:it,Author:pi,PostEditor:Tt,Point:tt,Icon:te},inject:["post","postDetailWidth","show","isNight","isLogin","tags","config"],props:{modelValue:{reply_content:""},level:-1},data(){return {expand:!0,edit:!1,replyInfo:`@${this.modelValue.username} #${this.modelValue.floor} `,floor:this.modelValue.floor}},watch:{show(e){e&&(this.edit=!1);}},computed:{myTags(){return this.tags[this.modelValue.username]??[]}},methods:{jump(){_.emit(v.JUMP,this.modelValue.floor);}}},ar=e=>(vue.pushScopeId("data-v-d3f8c94b"),e=e(),vue.popScopeId(),e),cr=["data-floor"],dr=ar(()=>vue.createElementVNode("div",{class:"left expand-line"},null,-1)),ur={class:"right"},pr={class:"simple-wrapper"};function fr(e,t,i,s,n,o){const a=vue.resolveComponent("Author"),c=vue.resolveComponent("BaseHtmlRender"),p=vue.resolveComponent("PostEditor"),u=vue.resolveComponent("TopSubComment",!0);return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["top-sub-comment",i.level===1&&"top-sub-reply"]),ref:"comment","data-floor":n.floor},[dr,vue.createElementVNode("div",ur,[vue.createVNode(a,{modelValue:n.expand,"onUpdate:modelValue":t[0]||(t[0]=r=>n.expand=r),comment:i.modelValue,onReply:t[1]||(t[1]=r=>n.edit=!n.edit),type:"top"},null,8,["modelValue","comment"]),vue.createVNode(c,{class:"top-reply_content reply_content",html:i.modelValue.hideCallUserReplyContent},null,8,["html"]),n.edit?(vue.openBlock(),vue.createBlock(p,{key:0,onClose:t[2]||(t[2]=r=>n.edit=!1),replyInfo:n.replyInfo,replyUser:i.modelValue.username,replyFloor:i.modelValue.floor},null,8,["replyInfo","replyUser","replyFloor"])):vue.createCommentVNode("",!0),vue.createElementVNode("div",pr,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.modelValue.children,(r,d)=>(vue.openBlock(),vue.createBlock(u,{modelValue:i.modelValue.children[d],"onUpdate:modelValue":g=>i.modelValue.children[d]=g,key:d},null,8,["modelValue","onUpdate:modelValue"]))),128))])])],10,cr)}const hr=X(rr,[["render",fr],["__scopeId","data-v-d3f8c94b"]]);const mr={name:"Comment",components:{BaseHtmlRender:it,Author:pi,PostEditor:Tt,Point:tt,Icon:te,TopSubComment:hr},inject:["post","postDetailWidth","show","isNight","config"],props:{modelValue:{reply_content:""},type:{type:String,default(){return "list"}}},data(){return {edit:!1,ding:!1,expand:!0,expandTopReply:!0,expandWrong:!1,replyInfo:`@${this.modelValue.username} #${this.modelValue.floor} `,cssStyle:null,floor:this.modelValue.floor}},watch:{show(e){e&&(this.edit=!1);},postDetailWidth(e,t){this.checkIsTooLong(e);}},computed:{CommentDisplayType(){return V},myClass(){return {isOp:this.modelValue.isOp,isSimple:this.config.viewType==="simple",ding:this.ding,isLevelOne:this.type==="top"?!0:this.modelValue.level===0,["c_"+this.floor]:this.type!=="top"}}},mounted(){this.checkIsTooLong(this.postDetailWidth);},methods:{checkIsTooLong(e){if(e!==0){let t=this.$refs.comment.getBoundingClientRect(),i=e*.6;if(i<t.width&&t.width<i+25&&this.modelValue.children.length){this.expand=!1;let s=2;this.cssStyle={padding:"1rem 0",width:`calc(${e}px - ${s}rem)`,transform:`translateX(calc(${t.width-e}px + ${s}rem))`,background:this.isNight?"#18222d":"white"};}}},showDing(){this.ding=!0,setTimeout(()=>{this.ding=!1;},2e3);},hide(){let e=`${location.origin}/ignore/reply/${this.modelValue.id}?once=${this.post.once}`;_.emit(v.REMOVE,this.modelValue.floor),$.post(e).then(t=>{_.emit(v.REFRESH_ONCE),_.emit(v.SHOW_MSG,{type:"success",text:"隐藏成功"});},t=>{_.emit(v.SHOW_MSG,{type:"warning",text:"隐藏成功,仅本次有效（接口调用失败！）"});});},toggle(){this.expand=!this.expand;},jump(){_.emit(v.JUMP,this.modelValue.floor);}}},we=e=>(vue.pushScopeId("data-v-67fa2f3f"),e=e(),vue.popScopeId(),e),gr=["data-floor"],yr={class:"comment-content"},wr={class:"right"},_r={class:"w"},vr={key:0,class:"wrong-wrapper"},br=["href"],kr={class:"del-line"},Cr=we(()=>vue.createElementVNode("i",{class:"fa fa-question-circle-o wrong-icon","aria-hidden":"true"},null,-1)),xr={key:0,class:"warning"},Tr=we(()=>vue.createElementVNode("br",null,null,-1)),Sr=we(()=>vue.createElementVNode("br",null,null,-1)),Ir=we(()=>vue.createElementVNode("br",null,null,-1)),Mr=we(()=>vue.createElementVNode("br",null,null,-1)),Lr=we(()=>vue.createElementVNode("br",null,null,-1)),Rr=we(()=>vue.createElementVNode("a",{href:"https://github.com/zyronon/web-scripts/issues",target:"_blank"},"这里",-1)),Nr=we(()=>vue.createElementVNode("div",{class:"gang"},null,-1)),Or={class:"simple-wrapper"},Pr={key:0,class:"top-reply-wrap"};function Er(e,t,i,s,n,o){const a=vue.resolveComponent("Author"),c=vue.resolveComponent("BaseHtmlRender"),p=vue.resolveComponent("PostEditor"),u=vue.resolveComponent("Icon"),r=vue.resolveComponent("TopSubComment"),d=vue.resolveComponent("Comment",!0);return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["comment",o.myClass]),ref:"comment","data-floor":n.floor},[vue.createVNode(a,{modelValue:n.expand,"onUpdate:modelValue":t[0]||(t[0]=g=>n.expand=g),comment:i.modelValue,onReply:t[1]||(t[1]=g=>n.edit=!n.edit),type:i.type,onHide:o.hide},null,8,["modelValue","comment","type","onHide"]),n.cssStyle&&!n.expand?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"more ago",onClick:t[2]||(t[2]=g=>n.expand=!n.expand)}," 由于嵌套回复层级太深，自动将后续回复隐藏 ")):vue.createCommentVNode("",!0),n.expand?(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"comment-content-w",style:vue.normalizeStyle(n.cssStyle)},[n.cssStyle?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"more ago",onClick:t[3]||(t[3]=g=>n.expand=!n.expand)}," 由于嵌套回复层级太深，自动将以下回复移至可见范围 ")):vue.createCommentVNode("",!0),vue.createElementVNode("div",yr,[vue.createElementVNode("div",{class:"left expand-line",onClick:t[4]||(t[4]=(...g)=>o.toggle&&o.toggle(...g))}),vue.createElementVNode("div",wr,[vue.createElementVNode("div",_r,[i.modelValue.isWrong?(vue.openBlock(),vue.createElementBlock("div",vr,[vue.createElementVNode("span",{onClick:t[5]||(t[5]=g=>n.expandWrong=!n.expandWrong),title:"点击楼层号查看提示"},[vue.createElementVNode("a",{href:"/member/"+i.modelValue.replyUsers[0]},"@"+vue.toDisplayString(i.modelValue.replyUsers[0])+"  ",9,br),vue.createElementVNode("span",kr,"#"+vue.toDisplayString(i.modelValue.replyFloor),1),Cr]),n.expandWrong?(vue.openBlock(),vue.createElementBlock("div",xr,[vue.createTextVNode(" 这条回复似乎有点问题，指定的楼层号与@的人对应不上 "),Tr,vue.createTextVNode(" 原因可能有下面几种： "),Sr,vue.createTextVNode(" 一、屏蔽用户导致楼层塌陷：你屏蔽了A，自A以后的回复的楼层号都会减1 "),Ir,vue.createTextVNode(" 二、忽略回复导致楼层塌陷：原理同上 "),Mr,vue.createTextVNode(" 三、层主回复时指定错了楼层号（同一，层主屏蔽了别人，导致楼层塌陷） "),Lr,vue.createTextVNode(" 四、脚本解析错误，请在 "),Rr,vue.createTextVNode("反馈 ")])):vue.createCommentVNode("",!0)])):vue.createCommentVNode("",!0),o.config.commentDisplayType===o.CommentDisplayType.FloorInFloorNoCallUser&&i.type!=="top"?(vue.openBlock(),vue.createBlock(c,{key:1,class:"reply_content",html:i.modelValue.hideCallUserReplyContent},null,8,["html"])):(vue.openBlock(),vue.createBlock(c,{key:2,class:"reply_content",html:i.modelValue.reply_content},null,8,["html"])),n.edit?(vue.openBlock(),vue.createBlock(p,{key:3,onClose:t[6]||(t[6]=g=>n.edit=!1),replyInfo:n.replyInfo,replyUser:i.modelValue.username,replyFloor:i.modelValue.floor},null,8,["replyInfo","replyUser","replyFloor"])):vue.createCommentVNode("",!0),i.type==="top"&&i.modelValue.replyCount?(vue.openBlock(),vue.createElementBlock("div",{key:4,class:"reply-count",onClick:t[7]||(t[7]=g=>n.expandTopReply=!n.expandTopReply)},[Nr,vue.createElementVNode("span",null," 共有"+vue.toDisplayString(i.modelValue.replyCount)+" 条回复 ",1),n.expandTopReply?(vue.openBlock(),vue.createBlock(u,{key:0,icon:"ep:arrow-up-bold"})):(vue.openBlock(),vue.createBlock(u,{key:1,icon:"ep:arrow-down-bold"}))])):vue.createCommentVNode("",!0)]),vue.createElementVNode("div",Or,[i.type==="top"?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[n.expandTopReply&&i.modelValue.replyCount?(vue.openBlock(),vue.createElementBlock("div",Pr,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.modelValue.children,(g,y)=>(vue.openBlock(),vue.createBlock(r,{level:1,modelValue:i.modelValue.children[y],"onUpdate:modelValue":m=>i.modelValue.children[y]=m,key:y},null,8,["modelValue","onUpdate:modelValue"]))),128))])):vue.createCommentVNode("",!0)],64)):(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:1},vue.renderList(i.modelValue.children,(g,y)=>(vue.openBlock(),vue.createBlock(d,{modelValue:i.modelValue.children[y],"onUpdate:modelValue":m=>i.modelValue.children[y]=m,key:y},null,8,["modelValue","onUpdate:modelValue"]))),128))])])]),n.cssStyle?(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"more ago",onClick:t[8]||(t[8]=g=>n.expand=!n.expand)}," 由于嵌套回复层级太深，自动将以上回复移至可见范围 ")):vue.createCommentVNode("",!0)],4)):vue.createCommentVNode("",!0)],10,gr)}const Vr=X(mr,[["render",Er],["__scopeId","data-v-67fa2f3f"]]);const Ar={name:"Toolbar",components:{Icon:te,BaseLoading:He},inject:["isLogin","post","pageType"],data(){return {timer:null,loading:!1,loading2:!1,loading3:!1}},methods:{checkIsLogin(e=""){return this.isLogin?(this.$emit(e),!0):(_.emit(v.SHOW_MSG,{type:"warning",text:"请先登录！"}),!1)},tweet(){var i;let e=((i=window.user)==null?void 0:i.username)??"",t=`https://twitter.com/intent/tweet?url=${location.origin}/t/${this.post.id}?r=${e}&related=v2ex&text=${this.post.title}`;window.open(t,"_blank","width=550,height=370");},async report(){if(!this.checkIsLogin()||this.loading3)return;let e=this.post.isReport;if(e){_.emit(v.SHOW_MSG,{type:"success",text:"你已对本主题进行了报告"});return}let t=`${location.origin}/report/topic/${this.post.id}?once=${this.post.once}`;this.loading3=!0;let i=await fetch(t);if(this.loading3=!1,i.redirected){let s=await i.text();if(s.search("你已对本主题进行了报告")){_.emit(v.SHOW_MSG,{type:"success",text:"你已对本主题进行了报告"}),_.emit(v.REFRESH_ONCE,s),_.emit(v.MERGE,{isReport:!e});return}}_.emit(v.REFRESH_ONCE),_.emit(v.SHOW_MSG,{type:"error",text:"操作失败，请重试"});},async toggleIgnore(){if(!this.checkIsLogin())return;let e=`${location.origin}/${this.post.isIgnore?"unignore":"ignore"}/topic/${this.post.id}?once=${this.post.once}`;this.pageType===G.Post?(this.loading2=!0,(await window.win().fetch(e)).redirected?(this.post.isIgnore||(window.win().location=location.origin),_.emit(v.SHOW_MSG,{type:"success",text:this.post.isIgnore?"取消成功":"忽略成功"}),_.emit(v.MERGE,{isIgnore:!this.post.isIgnore})):_.emit(v.SHOW_MSG,{type:"warning",text:"忽略失败"}),this.loading2=!1):(this.post.isIgnore?this.loading2=!0:_.emit(v.IGNORE),(await window.win().fetch(e)).redirected?(this.post.isIgnore&&_.emit(v.REFRESH_ONCE),_.emit(v.SHOW_MSG,{type:"success",text:this.post.isIgnore?"取消成功":"忽略成功"}),_.emit(v.MERGE,{isIgnore:!this.post.isIgnore})):_.emit(v.SHOW_MSG,{type:"warning",text:"忽略成功,仅本次有效（接口调用失败！）"}),this.loading2=!1);},async toggleFavorite(){if(!this.checkIsLogin()||this.loading)return;let e=this.post.isFavorite;!e&&config.collectBrowserNotice&&_.emit(v.SHOW_MSG,{type:"success",text:"别忘记按Command/Cmd/CTRL + D添加到书签哦"});let t=`${location.origin}/${e?"unfavorite":"favorite"}/topic/${this.post.id}?once=${this.post.once}`;this.loading=!0;let i=await fetch(t);if(this.loading=!1,i.redirected){let s=await i.text();if(s.search(e?"加入收藏":"取消收藏")){_.emit(v.SHOW_MSG,{type:"success",text:e?"取消成功":"收藏成功"}),_.emit(v.MERGE,{collectCount:e?this.post.collectCount-1:this.post.collectCount+1}),_.emit(v.REFRESH_ONCE,s),_.emit(v.MERGE,{isFavorite:!e});return}}_.emit(v.REFRESH_ONCE),_.emit(v.SHOW_MSG,{type:"error",text:"操作失败"});}}},fi=e=>(vue.pushScopeId("data-v-e86785e8"),e=e(),vue.popScopeId(),e),Dr={class:"toolbar"},$r=fi(()=>vue.createElementVNode("span",null,"回复",-1)),Ur={key:0,class:"tool no-hover"},Fr=fi(()=>vue.createElementVNode("span",null,"Tweet",-1));function Hr(e,t,i,s,n,o){const a=vue.resolveComponent("Icon"),c=vue.resolveComponent("BaseLoading");return vue.openBlock(),vue.createElementBlock("div",Dr,[vue.renderSlot(e.$slots,"default",{},void 0,!0),vue.createElementVNode("div",{class:"tool",onClick:t[0]||(t[0]=vue.withModifiers(p=>o.checkIsLogin("reply"),["stop"]))},[vue.createVNode(a,{icon:"mynaui:message"}),$r]),vue.createElementVNode("div",{class:vue.normalizeClass(["tool",{disabled:n.loading}]),onClick:t[1]||(t[1]=vue.withModifiers((...p)=>o.toggleFavorite&&o.toggleFavorite(...p),["stop"]))},[n.loading?(vue.openBlock(),vue.createBlock(c,{key:0,size:"small"})):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[o.post.isFavorite?(vue.openBlock(),vue.createBlock(a,{key:0,color:"rgb(224,42,42)",icon:"iconoir:star-solid"})):(vue.openBlock(),vue.createBlock(a,{key:1,icon:"iconoir:star"}))],64)),vue.createElementVNode("span",null,vue.toDisplayString(o.post.isFavorite?"取消":"")+"收藏",1)],2),o.post.collectCount!==0?(vue.openBlock(),vue.createElementBlock("div",Ur,[vue.createElementVNode("span",null,vue.toDisplayString(o.post.collectCount+"人收藏"),1)])):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"tool",onClick:t[2]||(t[2]=vue.withModifiers((...p)=>o.tweet&&o.tweet(...p),["stop"]))},[vue.createVNode(a,{icon:"uil:share"}),Fr]),vue.createElementVNode("div",{class:vue.normalizeClass(["tool",{disabled:n.loading2}]),onClick:t[3]||(t[3]=vue.withModifiers((...p)=>o.toggleIgnore&&o.toggleIgnore(...p),["stop"]))},[n.loading2?(vue.openBlock(),vue.createBlock(c,{key:0,size:"small"})):(vue.openBlock(),vue.createBlock(a,{key:1,icon:"fluent:eye-hide-24-regular"})),vue.createElementVNode("span",null,vue.toDisplayString(o.post.isIgnore?"取消忽略":"忽略"),1)],2),vue.createElementVNode("div",{class:vue.normalizeClass(["tool",{disabled:n.loading3}]),onClick:t[4]||(t[4]=vue.withModifiers((...p)=>o.report&&o.report(...p),["stop"]))},[n.loading3?(vue.openBlock(),vue.createBlock(c,{key:0,size:"small"})):(vue.openBlock(),vue.createBlock(a,{key:1,class:"black",icon:"solar:danger-triangle-outline"})),vue.createElementVNode("span",null,vue.toDisplayString(o.post.isReport?"你已对本主题进行了报告":"报告"),1)],2)])}const Br=X(Ar,[["render",Hr],["__scopeId","data-v-e86785e8"]]);const St=e=>(vue.pushScopeId("data-v-4a063111"),e=e(),vue.popScopeId(),e),Wr=["href"],jr=["src"],Gr={class:"texts"},qr={key:0,class:"point"},zr={class:"link-num"},Jr={class:"my-tag"},Kr=St(()=>vue.createElementVNode("i",{class:"fa fa-tag"},null,-1)),Yr={key:2,class:"ago"},Xr={key:3,class:"mod"},Qr={key:4,class:"owner"},Zr=["href"],ea={key:5,class:"owner"},ta={key:6,class:"mod"},ia={key:7,class:"ago"},na={class:"my-tag"},oa=St(()=>vue.createElementVNode("i",{class:"fa fa-tag"},null,-1)),sa={key:9,class:"point"},la={class:"link-num"},ra=["href"],aa=["src"],ca={class:"Author-right"},da={class:"floor"},ua=St(()=>vue.createElementVNode("span",null,"跳转",-1)),pa=[ua],fa={__name:"SingleComment",props:{comment:{reply_content:""},isRight:{type:Boolean,default(){return !1}}},setup(e){const t=vue.inject("config"),i=vue.inject("isLogin"),s=vue.inject("tags"),n=e,o=vue.computed(()=>s[n.comment.username]??[]);function a(){_.emit(v.JUMP,n.comment.floor);}return (c,p)=>(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["comment",{isSimple:vue.unref(t).viewType==="simple"}]),ref:"comment"},[e.isRight?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("a",{key:0,class:"avatar",href:`/member/${e.comment.username}`},[vue.createElementVNode("img",{src:e.comment.avatar,alt:""},null,8,jr)],8,Wr)),vue.createElementVNode("div",{class:vue.normalizeClass(["comment-body",{isRight:e.isRight}])},[vue.createElementVNode("div",Gr,[e.comment.thankCount&&e.isRight?(vue.openBlock(),vue.createElementBlock("div",qr,[e.comment.isThanked?(vue.openBlock(),vue.createBlock(vue.unref(te),{key:0,color:"rgb(224,42,42)",icon:"icon-park-solid:like"})):(vue.openBlock(),vue.createBlock(vue.unref(te),{key:1,color:e.comment.thankCount?"rgb(224,42,42)":null,icon:"icon-park-outline:like"},null,8,["color"])),vue.createElementVNode("div",zr,vue.toDisplayString(e.comment.thankCount),1)])):vue.createCommentVNode("",!0),vue.unref(i)&&vue.unref(t).openTag&&e.isRight?(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:1},vue.renderList(o.value,u=>(vue.openBlock(),vue.createElementBlock("span",Jr,[Kr,vue.createElementVNode("span",null,vue.toDisplayString(u),1)]))),256)):vue.createCommentVNode("",!0),e.isRight?(vue.openBlock(),vue.createElementBlock("span",Yr,vue.toDisplayString(e.comment.date),1)):vue.createCommentVNode("",!0),e.comment.isMod&&e.isRight?(vue.openBlock(),vue.createElementBlock("div",Xr,"MOD")):vue.createCommentVNode("",!0),e.comment.isOp&&e.isRight?(vue.openBlock(),vue.createElementBlock("div",Qr,"OP")):vue.createCommentVNode("",!0),vue.createElementVNode("a",{href:`/member/${e.comment.username}`,class:"username"},vue.toDisplayString(e.comment.username),9,Zr),e.comment.isOp&&!e.isRight?(vue.openBlock(),vue.createElementBlock("div",ea,"OP")):vue.createCommentVNode("",!0),e.comment.isMod&&!e.isRight?(vue.openBlock(),vue.createElementBlock("div",ta,"MOD")):vue.createCommentVNode("",!0),e.isRight?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("span",ia,vue.toDisplayString(e.comment.date),1)),vue.unref(i)&&vue.unref(t).openTag&&!e.isRight?(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:8},vue.renderList(o.value,u=>(vue.openBlock(),vue.createElementBlock("span",na,[oa,vue.createElementVNode("span",null,vue.toDisplayString(u),1)]))),256)):vue.createCommentVNode("",!0),e.comment.thankCount&&!e.isRight?(vue.openBlock(),vue.createElementBlock("div",sa,[e.comment.isThanked?(vue.openBlock(),vue.createBlock(vue.unref(te),{key:0,color:"rgb(224,42,42)",icon:"icon-park-solid:like"})):(vue.openBlock(),vue.createBlock(vue.unref(te),{key:1,color:e.comment.thankCount?"rgb(224,42,42)":null,icon:"icon-park-outline:like"},null,8,["color"])),vue.createElementVNode("div",la,vue.toDisplayString(e.comment.thankCount),1)])):vue.createCommentVNode("",!0)]),vue.createVNode(it,{class:"reply_content",html:e.comment.reply_content},null,8,["html"])],2),e.isRight?(vue.openBlock(),vue.createElementBlock("a",{key:1,class:"avatar",href:`/member/${e.comment.username}`},[vue.createElementVNode("img",{src:e.comment.avatar,alt:""},null,8,aa)],8,ra)):vue.createCommentVNode("",!0),vue.createElementVNode("div",ca,[vue.createElementVNode("div",da,vue.toDisplayString(e.comment.floor),1),vue.createElementVNode("div",{class:"tool jump",onClick:vue.withModifiers(a,["stop"])},pa)])],2))}},ha=X(fa,[["__scopeId","data-v-4a063111"]]);function K(e,t,i){const s=/^-?\d+.?\d*(px|pt|em|rem|vw|vh|%|rpx|ms)$/i;if(i===void 0){let n=null;return "getComputedStyle"in window?n=window.getComputedStyle(e,null)[t]:n=e.currentStyle[t],s.test(n)?parseFloat(n):n}else ["top","left","bottom","right","width","height","font-size","margin","padding"].includes(t)&&(s.test(i)||String(i).includes("calc")||(i+="px")),t==="transform"?e.style.webkitTransform=e.style.MsTransform=e.style.msTransform=e.style.MozTransform=e.style.OTransform=e.style.transform=i:e.style[t]=i;}function ma(e,t,i,s){const n=e/t,o=i/s;let a,c;return n>=o?e>i?(a=i,c=i/e*t):(a=e,c=t):t>s?(a=s/t*e,c=s):(a=e,c=t),c===0?(c=s,a=c*1.3):(c<24?(c=50,a=c*n):c<100?(c=300,a=c*n):(c=s,a=c*n),a>i&&(a=i,c=a/n)),{width:a,height:c}}const ga={name:"detail",components:{BaseSelect:xt,BaseButton:ye,SingleComment:ha,PopConfirm:Fe,Comment:Vr,PostEditor:Tt,Point:tt,Toolbar:Br,BaseHtmlRender:it,Tooltip:Ue,BaseLoading:He,Icon:te},inject:["allReplyUsers","post","tags","isLogin","config","pageType","isNight"],provide(){return {postDetailWidth:vue.computed(()=>this.postDetailWidth)}},props:{modelValue:{type:Boolean,default(){return !1}},loading:{type:Boolean,default(){return !1}},refreshLoading:{type:Boolean,default(){return !1}},displayType:V.FloorInFloorNoCallUser},data(){return {isSticky:!1,selectCallIndex:0,postDetailWidth:0,showCallList:!1,showRelationReply:!1,replyText:"",callStyle:{top:0,left:0},targetUser:{left:[],right:"",rightFloor:-1},currentFloor:"",showOpTag:!1,rect:{},result:{},x:0,y:0,scale:1,minScale:.2,maxScale:16,preview:{rect:{},result:{},x:0,y:0,scale:1,minScale:.2,maxScale:16}}},computed:{canAppend(){if(this.isMy){let e=new Date(this.post.createDate);return Date.now()-e.valueOf()>1e3*60*30}return !1},canEditMove(){if(this.isMy){let e=new Date(this.post.createDate);return Date.now()-e.valueOf()<1e3*60*10}return !1},isMy(){return this.post.member.username===window.user.username},myTags(){return this.tags[this.post.member.username]??[]},CommentDisplayType(){return V},isPost(){return this.pageType===G.Post},filterCallList(){if(this.showCallList){let e=["管理员","所有人"].concat(this.allReplyUsers);return this.replyText?e.filter(t=>t.search(this.replyText)>-1):e}return []},replyList(){return [V.FloorInFloor,V.FloorInFloorNoCallUser].includes(this.displayType)?this.post.nestedReplies:this.displayType===V.Like?window.clone(this.post.nestedReplies).sort((e,t)=>t.thankCount-e.thankCount):this.displayType===V.New?window.clone(this.post.replyList).reverse():this.displayType===V.V2exOrigin?this.post.replyList:this.displayType===V.FloorInFloorNested?this.post.nestedRedundReplies:this.displayType===V.OnlyOp?this.post.replyList.filter(e=>{var t;return e.username===((t=this.post.member)==null?void 0:t.username)}):[]},relationReply(){return this.targetUser.left.length&&this.targetUser.right?this.post.replyList.filter(e=>{if(this.targetUser.left.includes(e.username))if(e.floor>this.targetUser.rightFloor){if(e.replyUsers.includes(this.targetUser.right))return !0}else return !0;if(e.username===this.targetUser.right){for(let t=0;t<this.targetUser.left.length;t++)if(e.replyUsers.includes(this.targetUser.left[t]))return !0}}):[]}},watch:{"post.id"(e,t){this.$refs["post-editor"]&&(this.$refs["post-editor"].content="",vue.nextTick(()=>{var i,s;(s=(i=this.$refs)==null?void 0:i.detail)==null||s.scrollTo({top:0});}));},"post.headerTemplate"(e,t){document.querySelector(".main-wrapper .post-wrapper .html-wrapper .header")&&(this.showOpTag=!0);},modelValue:{handler(e){this.isPost||(e?(this.currentFloor="",vue.nextTick(()=>{var t,i;(i=(t=this.$refs)==null?void 0:t.main)==null||i.focus();})):(this.isSticky=!1,this.showRelationReply=!1));}}},mounted(){vue.nextTick(()=>{setTimeout(()=>{var e;this.postDetailWidth=((e=this.$refs.mainWrapper)==null?void 0:e.getBoundingClientRect().width)||0;},500);}),this.isLogin&&(new IntersectionObserver(([t])=>t.target.toggleAttribute("stuck",t.intersectionRatio<1),{threshold:[1]}).observe(this.$refs.replyBox),window.addEventListener("keydown",this.onKeyDown)),_.on(v.SHOW_CALL,e=>{e.show?(this.showCallList=!0,this.replyText=e.text,this.isPost?this.callStyle.top=e.top+$(window.win()).scrollTop()+-40+"px":this.callStyle.top=e.top+$(".post-detail").scrollTop()+15+"px",this.callStyle.left=e.left-$(".main")[0].getBoundingClientRect().left+10+"px",this.selectCallIndex>=this.filterCallList.length&&(this.selectCallIndex=0)):(this.replyText="",this.showCallList=!1,this.selectCallIndex=0);}),_.on(v.RELATION_REPLY,e=>{this.targetUser=e,this.showRelationReply=!0;}),_.on(v.JUMP,this.jump);},beforeUnmount(){window.removeEventListener("keydown",this.onKeyDown),_.off(v.SHOW_CALL);},methods:{addTag(){_.emit(v.ADD_TAG,this.post.member.username);},removeTag(e){_.emit(v.REMOVE_TAG,{username:this.post.member.username,tag:e});},closePreviewModal(){let e=document.querySelector(".preview-modal"),t=document.querySelector(".shadow"),i=this.preview.rect;K(t,"transition","all 0.3s"),K(t,"width",i.width),K(t,"height",i.height),K(t,"transform",`translate3d(${i.x}px, ${i.y}px, 0) scale(1)`);let s=document.querySelector(".preview-modal .mask");K(s,"opacity",0),setTimeout(()=>{K(t,"transition","all 0s"),t.remove(),K(e,"top","-1000vh"),K(document.body,"overflow","auto");},300);},stop(e){if(e.stopPropagation(),e.stopImmediatePropagation(),e.target.tagName==="IMG"){/cdn\.v2ex\.com.*avatar/i.test(e.target.src),this.preview={rect:{},result:{},x:0,y:0,scale:1,minScale:.2,maxScale:16},e.preventDefault();let t=e.target.getBoundingClientRect(),i=document.querySelector(".preview-modal");K(i,"top","0");let s=e.target.cloneNode();s.classList.add("shadow"),i.append(s),K(s,"transition","all 0s"),K(s,"width",t.width),K(s,"height",t.height),K(s,"transform",`translate3d(${t.x}px, ${t.y}px, 0) scale(1)`);let n=".3",o=t.width/window.innerWidth,a=t.height/window.innerHeight;t.sw=o,t.sh=a,this.preview.rect=t,this.preview.result=ma(s.naturalWidth,s.naturalHeight,window.innerWidth*.95,window.innerHeight*.9),this.preview.x=(window.innerWidth-this.preview.result.width)*.5,this.preview.y=(window.innerHeight-this.preview.result.height)*.5;let c=!1,p=!1,u={x:0,y:0},r={x:0,y:0};s.addEventListener("pointerdown",function(g){c=!0,p=!1,s.setPointerCapture(g.pointerId),u={x:g.clientX,y:g.clientY};}),s.addEventListener("pointermove",g=>{if(c){p=!0;const y={x:g.clientX,y:g.clientY};r.x=y.x-u.x,r.y=y.y-u.y,u={x:y.x,y:y.y},this.preview.x+=r.x,this.preview.y+=r.y,K(s,"transition","all 0.1s"),K(s,"transform",`translate3d(${this.preview.x}px, ${this.preview.y}px, 0) scale(${this.preview.scale})`);}g.preventDefault();}),s.addEventListener("pointerup",()=>{c&&(c=!1,p||this.closePreviewModal());}),s.addEventListener("pointercancel",function(g){c&&(c=!1);});let d=document.querySelector(".preview-modal .mask");return K(d,"transition","all 0s"),K(d,"opacity",0),setTimeout(()=>{K(s,"transition",`all ${n}s`),K(d,"transition",`all ${n}s`),K(d,"opacity",1),K(s,"transform",`translate3d(${this.preview.x}px, ${this.preview.y}px, 0) scale(${this.preview.scale})`),K(s,"width",this.preview.result.width),K(s,"height",this.preview.result.height);},0),setTimeout(()=>{K(document.body,"overflow","hidden");},300),!1}},wheel(e){let t=e.deltaY<0?.1:-.1,i=1+t,s=this.preview.scale*i;if(s>this.preview.maxScale?(i=this.preview.maxScale/this.preview.scale,this.preview.scale=this.preview.maxScale):s<this.preview.minScale?(i=this.preview.minScale/this.preview.scale,this.preview.scale=this.preview.minScale):this.preview.scale=s,e.target.tagName==="IMG"){const o={x:t*this.preview.result.width/2,y:t*this.preview.result.height/2};this.preview.x-=t*(e.clientX-this.preview.x)-o.x,this.preview.y-=t*(e.clientY-this.preview.y)-o.y;}let n=document.querySelector(".shadow");K(n,"transition","all 0.2s"),K(n,"transform",`translate3d(${this.preview.x}px, ${this.preview.y}px, 0) scale(${this.preview.scale})`),e.preventDefault();},jump(e){let t=this.replyList[this.replyList.length-1];if(e==="")e=t.floor;else {try{e=Number(e);}catch{e=t.floor;}e===0&&(e=1),e>t.floor&&(e=t.floor);}if(!this.post.replyList.length){_.emit(v.SHOW_MSG,{type:"warning",text:"没有回复可跳转！"});return}if(e>this.post.replyList.length){_.emit(v.SHOW_MSG,{type:"error",text:"没有找到对应回复！"});return}let i=$(`.c_${e}`);if(!i.length){_.emit(v.SHOW_MSG,{type:"error",text:"没有找到对应回复！"});return}i[0].scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),i.addClass("ding"),this.currentFloor=e+1,setTimeout(()=>{i.removeClass("ding");},2e3);},collapseTopReplyList(){$(this.$refs.topReply).slideToggle("fast");},goBottom(){this.isSticky=!1,setTimeout(()=>{if(this.isPost){let e=$("body , html"),t=e.prop("scrollHeight");e.animate({scrollTop:t-850},300);}else this.$refs.detail.scrollTo({top:this.$refs.detail.scrollHeight,behavior:"smooth"});});},close(e){this.isPost||(e==="space"?this.config.closePostDetailBySpace&&this.$emit("update:modelValue",!1):this.$emit("update:modelValue",!1));},setCall(e){_.emit(v.SET_CALL,e),this.showCallList=!1;},onKeyDown(e){if(!this.modelValue||!this.showCallList)return;let t=this.filterCallList.slice(0,10).length;e.keyCode===13&&(this.setCall(this.filterCallList[this.selectCallIndex]),e.preventDefault()),e.keyCode===38&&(this.selectCallIndex--,this.selectCallIndex<0&&(this.selectCallIndex=t-1),e.preventDefault()),e.keyCode===40&&(this.selectCallIndex++,this.selectCallIndex>t-1&&(this.selectCallIndex=0),e.preventDefault());},changeOption(e){this.$emit("update:displayType",e);},addThank(){_.emit(v.CHANGE_POST_THANK,{id:this.post.id,type:"add"});},recallThank(){_.emit(v.CHANGE_POST_THANK,{id:this.post.id,type:"recall"});},scrollTop(){this.isPost?$("body , html").animate({scrollTop:0},300):this.$refs.detail.scrollTo({top:0,behavior:"smooth"});}}},pe=e=>(vue.pushScopeId("data-v-c29afc06"),e=e(),vue.popScopeId(),e),ya={class:"my-box post-wrapper"},wa={class:"header"},_a={class:"fr"},va=["href"],ba=["src","alt"],ka=pe(()=>vue.createElementVNode("a",{href:"/"},"V2EX",-1)),Ca=pe(()=>vue.createElementVNode("span",{class:"chevron"},"  ›  ",-1)),xa=["href"],Ta=pe(()=>vue.createElementVNode("div",{class:"sep10"},null,-1)),Sa=["id"],Ia=["onclick"],Ma=pe(()=>vue.createElementVNode("li",{class:"fa fa-chevron-up"},null,-1)),La=["onclick"],Ra=pe(()=>vue.createElementVNode("li",{class:"fa fa-chevron-down"},null,-1)),Na=[Ra],Oa={class:"gray"},Pa=["href"],Ea=["title"],Va=["href"],Aa=pe(()=>vue.createElementVNode("li",{class:"fa fa-info-circle"},null,-1)),Da=[Aa],$a=["href"],Ua=["href"],Fa=["href"],Ha={class:"my-tag"},Ba=pe(()=>vue.createElementVNode("i",{class:"fa fa-tag"},null,-1)),Wa=["onClick"],ja={key:0,class:"my-box"},Ga=pe(()=>vue.createElementVNode("span",null,"高赞回复",-1)),qa={class:"top-reply"},za={class:"tool"},Ja={ref:"topReply"},Ka={class:"my-box comment-wrapper"},Ya={key:0,class:"my-cell flex"},Xa={key:0},Qa=pe(()=>vue.createElementVNode("strong",{class:"snow"},"•",-1)),Za=["innerHTML"],ec={key:0,class:"loading-wrapper"},tc={key:1,class:"comments"},ic={key:1,id:"no-comments-yet"},nc={class:"my-cell flex"},oc=pe(()=>vue.createElementVNode("span",null,"添加一条新回复",-1)),sc={class:"notice-right gray"},lc={class:"p1"},rc=pe(()=>vue.createElementVNode("span",{class:"gray"},"上下文",-1)),ac={class:"top-reply"},cc=["onClick"];function dc(e,t,i,s,n,o){const a=vue.resolveComponent("BaseHtmlRender"),c=vue.resolveComponent("Point"),p=vue.resolveComponent("Toolbar"),u=vue.resolveComponent("Icon"),r=vue.resolveComponent("Tooltip"),d=vue.resolveComponent("Comment"),g=vue.resolveComponent("BaseSelect"),y=vue.resolveComponent("BaseLoading"),m=vue.resolveComponent("PostEditor"),b=vue.resolveComponent("SingleComment");return vue.withDirectives((vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["post-detail",[o.isNight?"isNight":"",o.pageType]]),ref:"detail",onKeydown:t[21]||(t[21]=vue.withKeys(h=>o.close(),["esc"])),onClick:t[22]||(t[22]=h=>o.close("space"))},[vue.createElementVNode("div",{ref:"main",class:"main",tabindex:"1",onClick:t[18]||(t[18]=(...h)=>o.stop&&o.stop(...h))},[vue.createElementVNode("div",{class:"main-wrapper",ref:"mainWrapper",style:vue.normalizeStyle({width:o.config.postWidth+"!important"})},[vue.createElementVNode("div",ya,[vue.createElementVNode("div",wa,[vue.createElementVNode("div",_a,[vue.createElementVNode("a",{href:`/member/${o.post.member.username}`,style:{width:"73px",height:"73px",display:"inline-block"}},[o.post.member.avatar_large?(vue.openBlock(),vue.createElementBlock("img",{key:0,src:o.post.member.avatar_large,class:"avatar",style:{width:"73px",height:"73px"},border:"0",align:"default",alt:o.post.member.username},null,8,ba)):vue.createCommentVNode("",!0)],8,va)]),ka,Ca,vue.createElementVNode("a",{href:o.post.node.url},vue.toDisplayString(o.post.node.title),9,xa),Ta,vue.createElementVNode("h1",null,vue.toDisplayString(o.post.title),1),vue.createElementVNode("div",{id:`topic_${o.post.id}_votes`,class:"votes"},[vue.createElementVNode("a",{href:"javascript:",onclick:`upVoteTopic(${o.post.id});`,class:"vote"},[Ma,vue.createTextVNode("   ")],8,Ia),vue.createTextVNode("   "),vue.createElementVNode("a",{href:"javascript:",onclick:`downVoteTopic(${o.post.id});`,class:"vote"},Na,8,La)],8,Sa),vue.createTextVNode("   "),vue.createElementVNode("small",Oa,[vue.createElementVNode("a",{href:`/member/${o.post.member.username}`},vue.toDisplayString(o.post.member.username),9,Pa),vue.createTextVNode(" · "),o.post.member.createDate?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createElementVNode("span",{class:vue.normalizeClass(o.post.member.isNew&&"danger")},vue.toDisplayString(o.post.member.createDate),3),vue.createTextVNode(" · ")],64)):vue.createCommentVNode("",!0),o.post.createDateAgo?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createElementVNode("span",{title:o.post.createDate},vue.toDisplayString(o.post.createDateAgo),9,Ea),vue.createTextVNode(" · ")],64)):vue.createCommentVNode("",!0),vue.createTextVNode(" "+vue.toDisplayString(o.post.clickCount)+" 次点击 ",1),o.isMy?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:2},[vue.createTextVNode("   "),vue.createElementVNode("a",{href:`/t/${o.post.id}/info`},Da,8,Va),vue.createTextVNode("   "),o.canAppend?(vue.openBlock(),vue.createElementBlock("a",{key:0,href:`/append/topic/${o.post.id}`,class:"op"},"APPEND",8,$a)):vue.createCommentVNode("",!0),o.canEditMove?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createElementVNode("a",{href:`/move/topic/${o.post.id}`,class:"op"},"MOVE",8,Ua),vue.createTextVNode("  "),vue.createElementVNode("a",{href:`/edit/topic/${o.post.id}`,class:"op"},"EDIT",8,Fa)],64)):vue.createCommentVNode("",!0)],64)):vue.createCommentVNode("",!0)]),o.isLogin&&o.config.openTag?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.myTags,h=>(vue.openBlock(),vue.createElementBlock("span",Ha,[Ba,vue.createElementVNode("span",null,vue.toDisplayString(h),1),vue.createElementVNode("i",{class:"fa fa-trash-o remove",onClick:vue.withModifiers(S=>o.removeTag(h),["stop"])},null,8,Wa)]))),256)),vue.createElementVNode("span",{class:"add-tag ago",onClick:t[0]||(t[0]=vue.withModifiers((...h)=>o.addTag&&o.addTag(...h),["stop"])),title:"添加标签"},"+")],64)):vue.createCommentVNode("",!0)]),o.post.headerTemplate?(vue.openBlock(),vue.createBlock(a,{key:0,html:o.post.headerTemplate},null,8,["html"])):(vue.openBlock(),vue.createBlock(a,{key:1,html:o.post.jsonContent},null,8,["html"])),vue.createVNode(p,{onReply:t[1]||(t[1]=h=>n.isSticky=!n.isSticky)},{default:vue.withCtx(()=>[vue.createVNode(c,{onAddThank:o.addThank,onRecallThank:o.recallThank,item:{isThanked:o.post.isThanked,thankCount:o.post.thankCount,username:o.post.username},"api-url":"topic/"+o.post.id},null,8,["onAddThank","onRecallThank","item","api-url"])]),_:1})]),o.post.topReplyList.length&&o.config.showTopReply?(vue.openBlock(),vue.createElementBlock("div",ja,[vue.createElementVNode("div",{class:"my-cell flex",onClick:t[2]||(t[2]=vue.withModifiers((...h)=>o.collapseTopReplyList&&o.collapseTopReplyList(...h),["stop"]))},[Ga,vue.createElementVNode("div",qa,[vue.createVNode(r,{title:"收起高赞回复"},{default:vue.withCtx(()=>[vue.createElementVNode("div",za,[vue.createVNode(u,{icon:"gravity-ui:chevrons-collapse-vertical"})])]),_:1})])]),vue.createElementVNode("div",Ja,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.post.topReplyList,(h,S)=>(vue.openBlock(),vue.createBlock(d,{key:h.floor,type:"top",modelValue:o.post.topReplyList[S],"onUpdate:modelValue":k=>o.post.topReplyList[S]=k},null,8,["modelValue","onUpdate:modelValue"]))),128))],512)])):vue.createCommentVNode("",!0),vue.createElementVNode("div",Ka,[o.post.replyList.length||i.loading?(vue.openBlock(),vue.createElementBlock("div",Ya,[vue.createElementVNode("div",null,[vue.createTextVNode(vue.toDisplayString(o.post.replyCount)+" 条回复 ",1),o.post.lastReplyDate?(vue.openBlock(),vue.createElementBlock("span",Xa,[vue.createTextVNode("  "),Qa,vue.createTextVNode("  "+vue.toDisplayString(o.post.lastReplyDate),1)])):vue.createCommentVNode("",!0)]),o.config.showToolbar?(vue.openBlock(),vue.createBlock(g,{key:0,"display-type":i.displayType,"onUpdate:displayType":t[3]||(t[3]=h=>e.$emit("update:displayType",h))},null,8,["display-type"])):(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"fr",innerHTML:o.post.fr},null,8,Za))])):vue.createCommentVNode("",!0),o.replyList.length||i.loading?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[i.loading?(vue.openBlock(),vue.createElementBlock("div",ec,[vue.createVNode(y,{size:"large"})])):(vue.openBlock(),vue.createElementBlock("div",tc,[i.modelValue?(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:0},vue.renderList(o.replyList,(h,S)=>(vue.openBlock(),vue.createBlock(d,{key:h.floor,modelValue:o.replyList[S],"onUpdate:modelValue":k=>o.replyList[S]=k},null,8,["modelValue","onUpdate:modelValue"]))),128)):vue.createCommentVNode("",!0)]))],64)):vue.createCommentVNode("",!0)]),o.replyList.length||i.loading?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("div",ic,"目前尚无回复")),o.isLogin?(vue.openBlock(),vue.createElementBlock("div",{key:2,class:vue.normalizeClass(["my-box",{sticky:n.isSticky}]),ref:"replyBox"},[vue.createElementVNode("div",nc,[oc,vue.createElementVNode("div",sc,[n.isSticky?(vue.openBlock(),vue.createElementBlock("a",{key:0,style:{"margin-right":"2rem"},onClick:t[4]||(t[4]=vue.withModifiers(h=>n.isSticky=!1,["stop"]))},"取消回复框停靠")):vue.createCommentVNode("",!0),vue.createElementVNode("a",{onClick:t[5]||(t[5]=vue.withModifiers((...h)=>o.scrollTop&&o.scrollTop(...h),["stop"]))},"回到顶部")])]),vue.createElementVNode("div",lc,[vue.createVNode(m,{onClose:o.goBottom,ref:"post-editor",useType:"reply-post",onClick:t[6]||(t[6]=vue.withModifiers(h=>n.isSticky=!0,["stop"]))},null,8,["onClose"])])],2)):vue.createCommentVNode("",!0)],4),n.showRelationReply?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"relationReply",onClick:t[10]||(t[10]=vue.withModifiers(h=>o.close("space"),["stop"]))},[vue.createElementVNode("div",{class:"my-cell flex",onClick:t[8]||(t[8]=vue.withModifiers((...h)=>o.stop&&o.stop(...h),["stop"]))},[rc,vue.createElementVNode("div",ac,[vue.createVNode(u,{icon:"ic:round-close",onClick:t[7]||(t[7]=vue.withModifiers(h=>n.showRelationReply=!1,["stop"]))})])]),vue.createElementVNode("div",{class:"comments",onClick:t[9]||(t[9]=vue.withModifiers((...h)=>o.stop&&o.stop(...h),["stop"]))},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.relationReply,(h,S)=>(vue.openBlock(),vue.createBlock(b,{"is-right":h.username===n.targetUser.right,key:h.floor,comment:h},null,8,["is-right","comment"]))),128))])])):vue.createCommentVNode("",!0),n.showCallList&&o.filterCallList.length?(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"call-list",style:vue.normalizeStyle(n.callStyle)},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.filterCallList,(h,S)=>(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["call-item",{select:S===n.selectCallIndex}]),onClick:vue.withModifiers(k=>o.setCall(h),["stop"])},[vue.createElementVNode("a",null,vue.toDisplayString(h),1)],10,cc))),256))],4)):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"close-btn",onClick:t[11]||(t[11]=vue.withModifiers(h=>o.close("btn"),["stop"]))},[vue.createVNode(u,{icon:"fontisto:close-a"})]),vue.createElementVNode("div",{class:"refresh gray",onClick:t[12]||(t[12]=vue.withModifiers(h=>e.$emit("refresh"),["stop"]))},[i.refreshLoading?(vue.openBlock(),vue.createBlock(y,{key:0})):(vue.openBlock(),vue.createBlock(u,{key:1,icon:"material-symbols:refresh"}))]),vue.createElementVNode("div",{class:"scroll-to gray",onClick:t[16]||(t[16]=vue.withModifiers(h=>o.jump(n.currentFloor),["stop"]))},[vue.createVNode(u,{icon:"lucide:move-down"}),vue.withDirectives(vue.createElementVNode("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=h=>n.currentFloor=h),onClick:t[14]||(t[14]=vue.withModifiers((...h)=>o.stop&&o.stop(...h),["stop"])),onKeydown:t[15]||(t[15]=vue.withKeys(h=>o.jump(n.currentFloor),["enter"]))},null,544),[[vue.vModelText,n.currentFloor]])]),vue.createElementVNode("div",{class:"scroll-top gray",onClick:t[17]||(t[17]=vue.withModifiers((...h)=>o.scrollTop&&o.scrollTop(...h),["stop"]))},[vue.createVNode(u,{icon:"lucide:move-up"})])],512),(vue.openBlock(),vue.createBlock(vue.Teleport,{to:"body"},[vue.createElementVNode("div",{class:"preview-modal",onWheel:t[20]||(t[20]=(...h)=>o.wheel&&o.wheel(...h))},[vue.createElementVNode("div",{class:"mask",onClick:t[19]||(t[19]=(...h)=>o.closePreviewModal&&o.closePreviewModal(...h))}),vue.createVNode(u,{class:"close",icon:"fontisto:close-a",onClick:o.closePreviewModal},null,8,["onClick"])],32)]))],34)),[[vue.vShow,i.modelValue]])}const uc=X(ga,[["render",dc],["__scopeId","data-v-c29afc06"]]);const pc={key:1},fc={__name:"Base64Tooltip",setup(e){const t=vue.ref(null),i=vue.ref(!1),s=vue.ref(""),n=vue.ref(""),o=vue.reactive({left:"-100vw",top:"-100vh"});vue.onMounted(()=>{_.on(v.SHOW_TOOLTIP,({text:r,e:d})=>{setTimeout(()=>i.value=!0),s.value=r,n.value="",o.left=d.clientX+"px",o.top=d.clientY+20+"px";}),window.addEventListener("click",r=>{t.value&&!t.value.contains(r.target)&&i.value&&(i.value=!1);},{capture:!0});const u=()=>i.value&&(i.value=!1);$(".post-detail",window.win().doc).on("scroll",u);});function a(){window.win().navigator.clipboard?(window.win().navigator.clipboard.writeText(n.value),_.emit(v.SHOW_MSG,{type:"success",text:"复制成功"})):_.emit(v.SHOW_MSG,{type:"error",text:"复制失败！浏览器不支持！"});}function c(u){let r=window.atob(u),d=r.length,g=new Uint8Array(d);for(let y=0;y<d;y++)g[y]=r.charCodeAt(y);return g.buffer}function p(){try{new Blob([c(s.value)]).text().then(u=>{n.value=u;});}catch{_.emit(v.SHOW_MSG,{type:"error",text:"Base64解码失败！不是标准数据！"});}}return (u,r)=>vue.withDirectives((vue.openBlock(),vue.createElementBlock("div",{class:"base64_tooltip",style:vue.normalizeStyle(o),onClick:p,ref_key:"tooltip",ref:t},[n.value?(vue.openBlock(),vue.createElementBlock("div",pc,[vue.createElementVNode("span",null,vue.toDisplayString(n.value),1),vue.createVNode(ye,{class:"btn",size:"small",onClick:a},{default:vue.withCtx(()=>[vue.createTextVNode("点击复制")]),_:1})])):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(" Base64解码："+vue.toDisplayString(s.value)+" ",1),vue.createVNode(vue.unref(te),{icon:"system-uicons:translate"})],64))],4)),[[vue.vShow,i.value]])}},hc=X(fc,[["__scopeId","data-v-c50fb66c"]]);const mc={name:"Msg",components:{Icon:te},props:{type:"",text:""},created(){setTimeout(()=>{this.$emit("close");},3e3);}},gc={class:"right"};function yc(e,t,i,s,n,o){const a=vue.resolveComponent("Icon");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["msg",i.type])},[vue.createElementVNode("div",{class:"left",onClick:t[0]||(t[0]=c=>e.$emit("close"))},[vue.createVNode(a,{icon:"ic:round-close"})]),vue.createElementVNode("div",gc,vue.toDisplayString(i.text),1)],2)}const hi=X(mc,[["render",yc],["__scopeId","data-v-8bf692ea"]]);const mi=e=>(vue.pushScopeId("data-v-93ba3f19"),e=e(),vue.popScopeId(),e),wc={key:0,class:"tag-modal modal"},_c={class:"wrapper"},vc=mi(()=>vue.createElementVNode("div",{class:"title"}," 添加标签 ",-1)),bc={class:"option"},kc=mi(()=>vue.createElementVNode("span",null,"用户：",-1)),Cc={class:"btns"},xc={__name:"TagModal",props:["tags"],emits:["update:tags"],setup(e,{emit:t}){const i=vue.reactive({show:!1,currentUsername:"",tag:""}),s=e,n=t,o=vue.ref();vue.onMounted(()=>{_.on(v.ADD_TAG,c=>{i.currentUsername=c,i.show=!0,vue.nextTick(()=>{o.value.focus();});});});async function a(){if(!i.tag){_.emit(v.SHOW_MSG,{type:"warning",text:"请输入标签"});return}let c=window.clone(s.tags),p=window.clone(s.tags),u=p[i.currentUsername]??[];if(u.findIndex(g=>g===i.tag)>-1){_.emit(v.SHOW_MSG,{type:"warning",text:"标签已存在！"});return}else u.push(i.tag);p[i.currentUsername]=u,n("update:tags",p),i.tag="",i.show=!1,await window.parse.saveTags(p)||(_.emit(v.SHOW_MSG,{type:"error",text:"标签添加失败！"}),n("update:tags",c));}return (c,p)=>(vue.openBlock(),vue.createBlock(vue.Transition,null,{default:vue.withCtx(()=>[i.show?(vue.openBlock(),vue.createElementBlock("div",wc,[vue.createElementVNode("div",{class:"mask",onClick:p[0]||(p[0]=vue.withModifiers(u=>i.show=!1,["stop"]))}),vue.createElementVNode("div",_c,[vc,vue.createElementVNode("div",bc,[kc,vue.createElementVNode("div",null,[vue.createElementVNode("b",null,vue.toDisplayString(i.currentUsername),1)])]),vue.withDirectives(vue.createElementVNode("input",{type:"text",ref_key:"inputRef",ref:o,style:{width:"100%"},"onUpdate:modelValue":p[1]||(p[1]=u=>i.tag=u),onKeydown:vue.withKeys(a,["enter"])},null,544),[[vue.vModelText,i.tag]]),vue.createElementVNode("div",Cc,[vue.createVNode(ye,{type:"link",onClick:p[2]||(p[2]=vue.withModifiers(u=>{i.show=!1,i.tag="";},["stop"]))},{default:vue.withCtx(()=>[vue.createTextVNode("取消")]),_:1}),vue.createVNode(ye,{onClick:vue.withModifiers(a,["stop"])},{default:vue.withCtx(()=>[vue.createTextVNode("确定")]),_:1})])])])):vue.createCommentVNode("",!0)]),_:1}))}},Tc=X(xc,[["__scopeId","data-v-93ba3f19"]]);const Sc={class:"msgs"},Ic={__name:"MsgModal",setup(e){const t=vue.reactive([]);vue.onMounted(()=>{_.on(v.SHOW_MSG,s=>{t.push({...s,id:Date.now()});});});function i(s){let n=t.findIndex(o=>o.id===s);n>-1&&t.splice(n,1);}return (s,n)=>(vue.openBlock(),vue.createElementBlock("div",Sc,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(t,o=>(vue.openBlock(),vue.createBlock(hi,{key:o.id,type:o.type,text:o.text,onClose:a=>i(o.id)},null,8,["type","text","onClose"]))),128))]))}},Mc=X(Ic,[["__scopeId","data-v-b73f4332"]]);let Lc=".__cf_email__",Rc="data-cfemail",qt=document.createElement("div");function zt(e,t){let i=e.substr(t,2);return parseInt(i,16)}function Nc(e,t){let i="",s=zt(e,t);for(let n=t+2;n<e.length;n+=2){let o=zt(e,n)^s;i+=String.fromCharCode(o);}try{i=decodeURIComponent(escape(i));}catch(n){}return qt.innerHTML='<a href="'+i.replace(/"/g,"&quot;")+'"></a>',qt.childNodes[0].getAttribute("href")||""}function Oc(e){try{e.find(Lc).each(function(){try{let i=this,s=i.parentNode,n=i.getAttribute(Rc);if(n){let o=Nc(n,0),a=document.createTextNode(o);s.replaceChild(a,i);}}catch(i){}});}catch(t){}}const gi=e=>(vue.pushScopeId("data-v-77aa374e"),e=e(),vue.popScopeId(),e),Pc={key:0,class:"NotificationModal modal"},Ec={class:"modal-root"},Vc=gi(()=>vue.createElementVNode("div",{class:"title"}," 提醒系统 ",-1)),Ac={class:"modal-body"},Dc={class:"filter"},$c={class:"list-wrap"},Uc={class:"notify-wrap"},Fc=["innerHTML"],Hc={key:0,class:"loading-wrap"},Bc={class:"footer"},Wc=["innerHTML"],jc={class:"total"},Gc=gi(()=>vue.createElementVNode("span",null,"总共收到提醒",-1)),qc={__name:"NotificationModal",props:["modelValue","list","total","pages","loading"],emits:["update:modelValue"],setup(e,{emit:t}){const i=e,s=t,n=vue.ref("all");vue.onMounted(()=>{}),vue.watch([n,()=>i.list],()=>{$(".notify-wrap").scrollTop(0);}),vue.watch(()=>i.modelValue,a=>{a?document.body.style.overflow="hidden":(document.body.style.overflow="unset",$(".notify-wrap").scrollTop(0));});function o(){s("update:modelValue",!1);}return (a,c)=>(vue.openBlock(),vue.createBlock(vue.Transition,null,{default:vue.withCtx(()=>[e.modelValue?(vue.openBlock(),vue.createElementBlock("div",Pc,[vue.createElementVNode("div",{class:"mask",onClick:vue.withModifiers(o,["stop"])}),vue.createElementVNode("div",Ec,[vue.createElementVNode("div",{class:"modal-header"},[Vc,vue.createElementVNode("i",{class:"fa fa-times",onClick:o})]),vue.createElementVNode("div",Ac,[vue.createElementVNode("div",Dc,[vue.createElementVNode("div",{class:vue.normalizeClass(n.value==="all"&&"active"),onClick:c[0]||(c[0]=p=>n.value="all")},"全部",2),vue.createElementVNode("div",{class:vue.normalizeClass(n.value==="reply"&&"active"),onClick:c[1]||(c[1]=p=>n.value="reply")},"回复",2),vue.createElementVNode("div",{class:vue.normalizeClass(n.value==="star"&&"active"),onClick:c[2]||(c[2]=p=>n.value="star")},"感谢",2),vue.createElementVNode("div",{class:vue.normalizeClass(n.value==="collect"&&"active"),onClick:c[3]||(c[3]=p=>n.value="collect")},"收藏",2)]),vue.createElementVNode("div",$c,[vue.createElementVNode("div",Uc,[vue.createElementVNode("div",{id:"notifications",class:vue.normalizeClass(n.value),innerHTML:e.list},null,10,Fc)]),e.loading?(vue.openBlock(),vue.createElementBlock("div",Hc,[vue.createVNode(He)])):vue.createCommentVNode("",!0)]),vue.createElementVNode("div",Bc,[vue.createElementVNode("div",{innerHTML:e.pages,class:"pages"},null,8,Wc),vue.createElementVNode("div",jc,[Gc,vue.createTextVNode(vue.toDisplayString(e.total),1)])])])])])):vue.createCommentVNode("",!0)]),_:1}))}},zc=X(qc,[["__scopeId","data-v-77aa374e"]]);const Jc={components:{Icon:te,BaseButton:ye,NotificationModal:zc,BaseLoading:He,BaseSwitch:yt,MsgModal:Mc,TagModal:Tc,Tooltip:Ue,Setting:ml,PostDetail:uc,Base64Tooltip:hc,Msg:hi},provide(){return {isLogin:vue.computed(()=>this.isLogin),isNight:vue.computed(()=>this.isNight),pageType:vue.computed(()=>this.pageType),tags:vue.computed(()=>this.tags),show:vue.computed(()=>this.show),post:vue.computed(()=>this.current),config:vue.computed(()=>this.config),allReplyUsers:vue.computed(()=>{var e,t,i;return (e=this.current)!=null&&e.replyList?Array.from(new Set(((i=(t=this.current)==null?void 0:t.replyList)==null?void 0:i.map(s=>s.username))??[])):[]}),showConfig:this.showConfig}},data(){return {loading:window.pageType===G.Post,refreshLoading:!1,loadMore:!1,isLogin:!!window.user.username,pageType:window.pageType,isNight:window.isNight,stopMe:window.stopMe,show:!1,current:window.clone(window.initPost),list:[],config:window.clone(window.config),tags:window.user.tags,configModal:{show:!1},notificationModal:{show:!1,loading:!1,list:"",total:0},previewModal:{show:!1,src:""},popConfirmModal:{show:!1,title:"",id:""},timer:-1,timer2:-1,pageInfo:{title:"",number:0}}},computed:{targetUserTags(){return this.tags[window.targetUserName]??[]},isList(){return [G.Home,G.Node].includes(this.pageType)},isPost(){return this.pageType===G.Post},isMember(){return this.pageType===G.Member}},watch:{config:{handler(e,t){let i=localStorage.getItem("v2ex-config");if(i){let s=JSON.parse(i);s[window.user.username||"default"]=e,localStorage.setItem("v2ex-config",JSON.stringify(s));}window.config=e,window.parse.editNoteItem(window.user.configPrefix+JSON.stringify(window.config),window.user.configNoteId);},deep:!0},tags(e){window.user.tags=e;},"config.viewType"(e){e&&(e==="card"?$(".post-item").each(function(){$(this).addClass("preview");}):$(".post-item").each(function(){$(this).removeClass("preview");}));},"pageInfo.number"(e){if(clearInterval(this.timer2),e){if(document.title=`(${this.pageInfo.number}) `+this.pageInfo.title,this.config.notice.whenNewNoticeGlimmer){let t=0;this.timer2=setInterval(()=>{t++,document.title=this.pageInfo.title,t%2===0&&(document.title=`(${this.pageInfo.number}) `+this.pageInfo.title);},1e3);}}else document.title=this.pageInfo.title;},show(e){this.pageType!==G.Post&&(e?(document.body.style.overflow="hidden",window.history.state||window.history.pushState({},0,this.current.href),vue.nextTick(()=>{this.pageInfo.title=document.title=this.current.title??"V2EX";})):(document.body.style.overflow="unset",this.pageInfo.title=document.title="V2EX",window.history.state&&window.history.back()));}},created(){let e=this;this.initEvent(),window.cb=this.winCb,window.canParseV2exPage&&($(document).on("click","a",this.clickA),$(document).on("click",".post-item",function(t){if(!t.currentTarget.getAttribute("script")){if(e.stopMe)return !0;if(this.classList.contains("preview")&&t.target.tagName!=="A"&&t.target.tagName!=="IMG"&&!t.target.classList.contains("toggle")){let i=this.dataset.id,s=this.dataset.href;i?e.clickPost(t,i,s):s&&(location.href=s);}}}),$(document).on("click",".toggle",t=>{if(this.stopMe)return !0;let i=t.target.dataset.id,s=document.querySelector(`.id_${i}`);s.classList.contains("preview")?(t.target.innerText="预览",s.classList.remove("preview")):this.config.viewType!=="card"?this.list.findIndex(o=>o.id==i)>-1?(t.target.innerText="收起",s.classList.add("preview")):(t.target.innerText="加载中",I.getPostDetailByApi(i).then(o=>{o.content_rendered?(o.href=s.dataset.href,this.list.push(Re(o)),s.classList.add("preview"),t.target.innerText="收起",I.appendPostContent(o,s)):(t.target.innerText="预览",_.emit(v.SHOW_MSG,{type:"warning",text:"主题暂无正文！"}));})):(t.target.innerText="收起",s.classList.add("preview"));}),window.onpopstate=t=>{t.state?this.show||(this.show=!0):this.show&&(this.show=!1);},this.config.notice.takeOverNoticePage&&(window.deleteNotification=(t,i)=>{let s=$("#n_"+t);s.slideUp("fast"),$.post({url:"/delete/notification/"+t+"?once="+i,success(){$.get({url:"/notifications/below/"+window.notificationBottom,success(n,o,a){s.remove(),$("#notifications").append(e.checkReplyItemType(n)),window.notificationBottom=a.getResponseHeader("X-V2EX-New-Notification-Bottom");},error(){s.slideDown("fast");}});},error(){s.slideDown("fast");}});}));},mounted(){},beforeUnmount(){clearInterval(this.timer),_.clear(),$(document).off("click","a",this.clickA);},methods:{checkReplyItemType(e){let t=$(e),i=t.html();return (i.includes("提到了你")||i.includes("回复了你"))&&t.addClass("reply"),i.includes("感谢了你")&&t.addClass("star"),i.includes("收藏了你")&&t.addClass("collect"),t},async getUnreadMessagesCount(){var n,o;const t=await(await fetch(`${location.origin}/mission`)).text(),s=$(t).find('#Rightbar a[href^="/notifications"]').text();if(s.includes("未读提醒")){if((n=s.match(/\d+/))==null?void 0:n.at(0))return Number((o=s.match(/\d+/))==null?void 0:o.at(0))}else return 0;throw new Error("无法获取未读消息数量")},clickA(e){let t=this;if(e.currentTarget.getAttribute("script"))return;if(t.stopMe)return !0;let{pageType:i}=I.checkPageType(e.currentTarget),{href:s,id:n,title:o}=I.parseA(e.currentTarget);switch(i){case G.Post:n&&t.clickPost(e,n,s,o);break;case G.Node:case G.Home:case G.Changes:return;default:if(e.currentTarget.href.includes("/settings/night/toggle")||e.currentTarget.href===location.origin+"/#;")return;if(e.currentTarget.href.includes("/notifications")&&(this.pageInfo.number=0,$("#money").parent().prev().replaceWith('<a href="/notifications">0 未读提醒</a>'),this.config.notice.takeOverNoticePage)){this.notificationModal.loading=!0,this.notificationModal.show=!0,fetch(s).then(async a=>{let c=await a.text(),p=c.match(/<body[^>]*>([\s\S]+?)<\/body>/g),u=c.match(/var notificationBottom = ([\d]+);/);u&&u[1]&&(window.notificationBottom=Number(u[1]));let r=$(p[0]),d=r.find("#notifications");d.children().each(function(){t.checkReplyItemType(this);});let g=d.html(),y=r.find("#Main > .box > .header .fr .gray");y.length&&(this.notificationModal.total=y.text()),this.notificationModal.list=g;let m=d.next();m.find(".button").each(function(){let h=this.getAttribute("onclick");h&&(this.innerHTML=`<a href=${h.replace("location.href=","")}>${this.innerHTML}</a>`,this.setAttribute("onclick",""));}),this.notificationModal.pages=m.html(),this.notificationModal.loading=!1;}).catch(a=>{this.notificationModal.loading=!1;}),t.stopEvent(e);return}t.config.newTabOpen&&(t.stopEvent(e),I.openNewTab(e.currentTarget.href,t.config.newTabOpenActive));return}},stopEvent(e){e.preventDefault(),e.stopPropagation();},async clickPost(e,t,i,s=""){if(t){if(this.config.clickPostItemOpenDetail){this.stopEvent(e);let n=Re(),o=this.list.findIndex(a=>a.id==t);o>-1&&(n=this.list[o]),n.title||(n.title=s??"加载中"),n.id=t,n.href=i,this.getPostDetail(n);return}this.config.newTabOpen&&(this.stopEvent(e),I.openNewTab(`https://www.v2ex.com/t/${t}?p=1`,this.config.newTabOpenActive));}},showPost(){this.show=!0,$("#Wrapper #Main .box:lt(3)").each(function(){$(this).hide();});},showConfig(){this.configModal.show=!0;},resetTitle(){let e=document.title.match(/\s?\(\d+\)\s?/);e&&e.length?this.pageInfo.title=document.title.replace(e[0],""):this.pageInfo.title=document.title;},async getNotice(e){if(!e){let i=await fetch("/t");if(i.status===200){let n=(await i.text()).match(/<body[^>]*>([\s\S]+?)<\/body>/g);e=$(n[0]);}}let t=e.find('a[href="/notifications"]');if(t.length){this.resetTitle();let i=t.text();if(i!=="0 未读提醒"){if(this.pageInfo.number=i.replace(" 未读提醒",""),this.config.notice.text!==i&&($("#money").parent().prev().replaceWith(`<div><div class="orange-dot"></div><strong><a href="/notifications">${i}</a></strong></div>`),this.config.notice.text=i,this.config.notice.ddWebhook)){let s=new Date,n=s.getSeconds();n=n<10?"0"+n:n;let o=s.getMinutes();o=o<10?"0"+o:o;let a=s.getHours();a=a<10?"0"+a:a,$.ajax("https://car-back.ttentau.top/index.php/v1/config/forward",{method:"POST",contentType:"application/json",data:JSON.stringify({url:this.config.notice.ddWebhook,text:t.text()+`，时间：${s.getFullYear()}/${s.getMonth()+1}/${s.getDate()} ${a}:${o}:${n}`})});}}else $("#money").parent().prev().replaceWith(`<a href="/notifications">${i}</a>`),this.config.notice.text="";}},async winCb({type:e,value:t}){e==="openSetting"&&this.showConfig(),e==="syncData"&&(this.stopMe=window.stopMe),e==="getConfigSuccess"&&(this.config=window.config,this.tags=window.user.tags,window.isLogin&&this.config.notice.loopCheckNotice&&(this.getNotice($(document.body)),this.timer=setInterval(this.getNotice,1e3*60*Number(this.config.notice.loopCheckNoticeInterval)))),e==="syncList"&&(this.list=Object.assign(this.list,window.postList)),e==="warningNotice"&&_.emit(v.SHOW_MSG,{type:"warning",text:t}),!this.stopMe&&(e==="restorePost"&&(this.show=!1,this.loading=!1,_.emit(v.SHOW_MSG,{type:"warning",text:"脚本无法查看此页面！"}),$("#Wrapper #Main .box:lt(3)").each(function(){$(this).show();})),e==="postContent"&&(this.current=Object.assign(this.current,t),this.current.inList=!0,this.config.autoOpenDetail&&this.showPost()),e==="postReplies"&&(this.loading=!1,this.current=Object.assign(this.current,t),this.list.push(this.clone(this.current))));},clone(e){return window.clone(e)},regenerateReplyList(){if(this.current.replyList.length?I.createList(this.current,this.current.replyList):(this.current.replyCount=0,this.current.nestedReplies=[],this.current.nestedRedundReplies=[]),this.list.length){let e=this.list.findIndex(t=>t.id===this.current.id);e>-1&&(this.list[e]=this.clone(this.current));}},initEvent(){_.on(v.CHANGE_COMMENT_THANK,e=>{const{id:t,type:i}=e;let s=this.current.replyList.findIndex(n=>n.id===t);s>-1&&(this.current.replyList[s].isThanked=i==="add",i==="add"?this.current.replyList[s].thankCount++:this.current.replyList[s].thankCount--,this.regenerateReplyList());}),_.on(v.CHANGE_POST_THANK,e=>{const{id:t,type:i}=e;this.current.isThanked=i==="add",i==="add"?this.current.thankCount++:this.current.thankCount--;let s=this.list.findIndex(n=>n.id===t);s>-1&&(this.list[s].isThanked=i==="add",i==="add"?this.list[s].thankCount++:this.list[s].thankCount++);}),_.on(v.REMOVE,e=>{let t=this.current.replyList.findIndex(i=>i.floor===e);t>-1&&this.current.replyList.splice(t,1),this.regenerateReplyList();}),_.on(v.IGNORE,()=>{this.show=!1;let e=this.list.findIndex(t=>t.id===this.current.id);e>-1&&this.list.splice(e,1),this.current=this.clone(window.initPost);}),_.on(v.MERGE,e=>{this.current=Object.assign(this.current,e);let t=this.list.findIndex(i=>i.id===this.current.id);t>-1&&(this.list[t]=this.clone(this.current));}),_.on(v.ADD_REPLY,e=>{this.current.replyList.push(e),this.regenerateReplyList();}),_.on(v.REFRESH_ONCE,async e=>{if(e){if(typeof e=="string"){let t=e.match(/var once = "([\d]+)";/);if(t&&t[1]){this.current.once=Number(t[1]);return}}if(typeof e=="number"){this.current.once=e;return}}window.fetchOnce().then(t=>{this.current.once=t;});}),_.on(v.REMOVE_TAG,async({username:e,tag:t})=>{let i=this.clone(this.tags),s=this.tags[e]??[],n=s.findIndex(a=>a===t);n>-1&&s.splice(n,1),this.tags[e]=s,await window.parse.saveTags(this.tags)||(_.emit(v.SHOW_MSG,{type:"error",text:"标签删除失败！"}),this.tags=i);}),_.on(v.SHOW_CONFIRM_MODAL,e=>{const{rect:t,title:i,id:s}=e;this.popConfirmModal.show=!0,this.popConfirmModal.title=i,this.popConfirmModal.id=s,vue.nextTick(()=>{this.$refs.tip.style.top=t.top+"px",this.$refs.tip.style.left=t.left+t.width/2-50+"px";});});},async getPostDetail(e){this.current=e,this.show=!0;let t=location.origin+"/t/"+this.current.id;this.current.url=t,this.current.replyList.length?this.refreshLoading=!0:(this.loading=!0,I.getPostDetailByApi(this.current.id).then(u=>{if(u.replyCount=u.replies,this.current=Object.assign(this.current,u),this.current.replyCount>Jt){I.openNewTab(`${location.origin}/t/${this.current.id}?p=1&script=1`,!0),_.emit(v.SHOW_MSG,{type:"warning",text:"由于回复数量较多，已为您单独打开此主题"}),this.loading=this.show=!1;return}else this.current.jsonContent=`
            <div class="cell">
              <div class="topic_content">
                <div class="markdown_body">
                 ${(u==null?void 0:u.content_rendered)??""}
                </div>
              </div>
            </div>`;}));let s=await window.fetch(t+"?p=1");if(s.status===404)return _.emit(v.SHOW_MSG,{type:"error",text:"主题未找到"}),this.refreshLoading=this.loading=!1;if(s.status===403){this.refreshLoading=this.show=this.loading=!1,I.openNewTab(`${location.origin}/t/${e.id}?p=1&script=0`,!0);return}if(s.redirected)return _.emit(v.SHOW_MSG,{type:"error",text:"没有权限"}),this.refreshLoading=this.loading=!1;let n=await s.text();if(n.search("你要查看的页面需要先登录")>-1)return _.emit(v.SHOW_MSG,{type:"error",text:"你要查看的页面需要先登录"}),this.refreshLoading=this.loading=!1;let a=n.match(/<body[^>]*>([\s\S]+?)<\/body>/g),c=$(a[0]);Oc(c),await window.parse.getPostDetail(this.current,c,n);let p=this.list.findIndex(u=>u.id==this.current.id);p>-1?this.list[p]=this.clone(this.current):this.list.push(this.clone(this.current)),this.refreshLoading=this.loading=!1,await window.parse.parseOp(this.current);},addTargetUserTag(){_.emit(v.ADD_TAG,window.targetUserName);},removeTargetUserTag(e){_.emit(v.REMOVE_TAG,{username:window.targetUserName,tag:e});},popConfirmModalCancel(){this.popConfirmModal.show=!1;},popConfirmModalConfirm(){this.popConfirmModalCancel(),_.emit(v.SHOW_CONFIRM_MODAL_CONFIRM,this.popConfirmModal.id);}}},It=e=>(vue.pushScopeId("data-v-33aaa53e"),e=e(),vue.popScopeId(),e),Kc={key:0,class:"target-user-tags p1"},Yc=It(()=>vue.createElementVNode("span",null,"标签：",-1)),Xc={class:"my-tag"},Qc=It(()=>vue.createElementVNode("i",{class:"fa fa-tag"},null,-1)),Zc=["onClick"],ed={key:1,class:"my-box p2",style:{"margin-top":"2rem","margin-bottom":"0"}},td={key:0,class:"flex flex-center"},id={key:1,class:"loaded"},nd=It(()=>vue.createElementVNode("span",null,"楼中楼解析完成",-1)),od={key:0,ref:"tip",class:"pop-confirm-content"},sd={class:"text"},ld={class:"options"};function rd(e,t,i,s,n,o){const a=vue.resolveComponent("Setting"),c=vue.resolveComponent("TagModal"),p=vue.resolveComponent("PostDetail"),u=vue.resolveComponent("Base64Tooltip"),r=vue.resolveComponent("MsgModal"),d=vue.resolveComponent("NotificationModal"),g=vue.resolveComponent("BaseLoading"),y=vue.resolveComponent("BaseButton");return vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createVNode(a,{modelValue:n.config,"onUpdate:modelValue":t[0]||(t[0]=m=>n.config=m),show:n.configModal.show,"onUpdate:show":t[1]||(t[1]=m=>n.configModal.show=m)},null,8,["modelValue","show"]),vue.createVNode(c,{tags:n.tags,"onUpdate:tags":t[2]||(t[2]=m=>n.tags=m)},null,8,["tags"]),vue.createVNode(p,{modelValue:n.show,"onUpdate:modelValue":t[3]||(t[3]=m=>n.show=m),ref:"postDetail",displayType:n.config.commentDisplayType,"onUpdate:displayType":t[4]||(t[4]=m=>n.config.commentDisplayType=m),onRefresh:t[5]||(t[5]=m=>o.getPostDetail(n.current)),loading:n.loading,refreshLoading:n.refreshLoading},null,8,["modelValue","displayType","loading","refreshLoading"]),vue.createVNode(u),vue.createVNode(r),vue.createVNode(d,{modelValue:n.notificationModal.show,"onUpdate:modelValue":t[6]||(t[6]=m=>n.notificationModal.show=m),list:n.notificationModal.list,loading:n.notificationModal.loading,total:n.notificationModal.total,pages:n.notificationModal.pages},null,8,["modelValue","list","loading","total","pages"]),n.stopMe?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[o.isMember&&n.isLogin&&n.config.openTag?(vue.openBlock(),vue.createElementBlock("div",Kc,[Yc,(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.targetUserTags,m=>(vue.openBlock(),vue.createElementBlock("span",Xc,[Qc,vue.createElementVNode("span",null,vue.toDisplayString(m),1),vue.createElementVNode("i",{class:"fa fa-trash-o remove",onClick:b=>o.removeTargetUserTag(m)},null,8,Zc)]))),256)),vue.createElementVNode("span",{class:"add-tag ago",onClick:t[7]||(t[7]=(...m)=>o.addTargetUserTag&&o.addTargetUserTag(...m)),title:"添加标签"},"+")])):vue.createCommentVNode("",!0),o.isPost&&!n.show?(vue.openBlock(),vue.createElementBlock("div",ed,[n.loading?(vue.openBlock(),vue.createElementBlock("div",td,[vue.createVNode(g)])):(vue.openBlock(),vue.createElementBlock("div",id,[nd,vue.createVNode(y,{size:"small",onClick:o.showPost},{default:vue.withCtx(()=>[vue.createTextVNode("点击显示")]),_:1},8,["onClick"])]))])):vue.createCommentVNode("",!0)],64)),(vue.openBlock(),vue.createBlock(vue.Teleport,{to:"body"},[vue.createVNode(vue.Transition,null,{default:vue.withCtx(()=>[n.popConfirmModal.show?(vue.openBlock(),vue.createElementBlock("div",od,[vue.createElementVNode("div",sd,vue.toDisplayString(n.popConfirmModal.title),1),vue.createElementVNode("div",ld,[vue.createVNode(y,{type:"link",size:"small",onClick:vue.withModifiers(o.popConfirmModalCancel,["stop"])},{default:vue.withCtx(()=>[vue.createTextVNode("取消")]),_:1},8,["onClick"]),vue.createVNode(y,{size:"small",onClick:vue.withModifiers(o.popConfirmModalConfirm,["stop"])},{default:vue.withCtx(()=>[vue.createTextVNode("确认")]),_:1},8,["onClick"])])],512)):vue.createCommentVNode("",!0)]),_:1})]))],64)}const ad=X(Jc,[["render",rd],["__scopeId","data-v-33aaa53e"]]);let cd=!document.querySelector("#Rightbar"),he=document.createElement("section");he.id="app";function dd(){window.initPost=Kt,window.win=function(){return window},window.win().doc=window.win().document,window.win().query=r=>window.win().document.querySelector(r),window.query=r=>window.win().document.querySelector(r),window.clone=r=>JSON.parse(JSON.stringify(r)),window.user=Li,window.targetUserName="",window.pageType=void 0,window.pageData={pageNo:1},window.config=Ni(),window.isNight=$(".Night").length===1,window.cb=null,window.stopMe=!1,window.isLogin=!1,window.postList=[],window.parse={async parsePostContent(r,d,g){let y=g.match(/var once = "([\d]+)";/);y&&y[1]&&(r.once=y[1]),r.isReport=g.includes("你已对本主题进行了报告");let m=d.find("#Main");if(!r.title||!r.content_rendered){let z=m.find("h1");z&&(r.title=z[0].innerText);}let b=m.find(".header > a");b.length&&(r.node.title=b[1].innerText,r.node.url=b[1].href);let h=m.find(".header small.gray a:nth-child(1)");h.length&&(r.member.username=h[0].innerText);let S=m.find(".header small.gray span");S.length&&(r.createDateAgo=S[0].innerText,r.createDate=S[0].title);let k=m.find(".header .avatar");k.length&&(r.member.avatar_large=k[0].src);let T=d.find(".topic_buttons");if(T.length){let z=T.find(".tb:first");z.length&&(r.isFavorite=z[0].innerText==="取消收藏");let j=T.find(".tb:nth-child(3)");j.length&&(r.isIgnore=j[0].innerText==="取消忽略"),T.find("#topic_thank .tb").length||(r.isThanked=!0);let ie=T.find(".topic_stats");if(ie.length){let le=ie[0].innerText,fe=le.matchAll(/([\d]+)[\s]*人收藏/g),_e=[...fe];_e.length&&(r.collectCount=Number(_e[0][1])),fe=le.matchAll(/([\d]+)[\s]*likes/g),_e=[...fe],_e.length&&(r.collectCount=Number(_e[0][1]));let xe=[...le.matchAll(/([\d]+)[\s]*人感谢/g)];xe.length&&(r.thankCount=Number(xe[0][1]));let Ie=le.matchAll(/([\d]+)[\s]*次点击/g),re=[...Ie];re.length&&(r.clickCount=Number(re[0][1])),Ie=le.matchAll(/([\d]+)[\s]*views/g),re=[...Ie],re.length&&(r.clickCount=Number(re[0][1]));}}let q=d.find("#Main .box").first().clone();q.find(".topic_buttons").remove(),q.find(".inner").remove(),q.find(".header").remove();let D=q.html();return D=I.checkPhotoLink2Img(D),r.headerTemplate=D,r},async parseOp(r){if(!r.member.id){let d=await fetch(location.origin+"/api/members/show.json?username="+r.member.username);d.status===200&&(r.member=await d.json());}if(r.member.id){let d=new Date(r.member.created*1e3),g=`${d.getFullYear()}-${d.getMonth()+1}-${d.getDate()}`;d.setHours(0),d.setMinutes(0),d.setSeconds(0),d.setMilliseconds(0);let y=new Date;y.setHours(0),y.setMinutes(0),y.setSeconds(0),y.setMilliseconds(0);let b=y.getTime()-d.getTime()<=1e3*60*60*24*15;r.member.createDate=g+" 注册",r.member.isNew=b;}else r.member.createDate="用户已被注销/封禁",r.member.isNew=!0;return r},async getPostAllReplies(r,d,g,y=1){var S,k;if(d.find("#no-comments-yet").length)return r;let h=d.find("#Main .box")[1].querySelectorAll(".cell");if(h&&h.length){r.fr=h[0].querySelector(".cell .fr").innerHTML,h=Array.from(h);let T=h[0].querySelector(".snow");r.lastReplyDate=((k=(S=T==null?void 0:T.nextSibling)==null?void 0:S.nodeValue)==null?void 0:k.trim())||"";let W=[];if(h[1].id){W.push({i:y,replyList:this.parsePageReplies(h.slice(1))});let q=I.getAllReply(W);return I.createList(r,q),r}else {let q=[];return new Promise((D,z)=>{W.push({i:y,replyList:this.parsePageReplies(h.slice(2,h.length-1))});let j=h[1].querySelectorAll("a.page_normal");j=Array.from(j);let ue=location.origin+"/t/"+r.id;for(let ie=0;ie<j.length;ie++){let le=Number(j[ie].innerText);q.push(this.fetchPostOtherPageReplies(ue+"?p="+le,le));}Promise.allSettled(q).then(ie=>{ie.filter(fe=>fe.status==="fulfilled").map(fe=>W.push(fe.value));let le=I.getAllReply(W);I.createList(r,le),D(r);});})}}},fetchPostOtherPageReplies(r,d){return new Promise(g=>{$.get(r).then(y=>{let m=y.match(/<body[^>]*>([\s\S]+?)<\/body>/g),h=$(m[0]).find("#Main .box")[1].querySelectorAll(".cell");h=Array.from(h),g({i:d,replyList:this.parsePageReplies(h.slice(2,h.length-1))});}).catch(y=>{y.status===403&&I.cbChecker({type:"restorePost",value:null});});})},parsePageReplies(r){let d=[];return r.forEach((g,y)=>{if(!g.id)return;let m={level:0,thankCount:0,replyCount:0,isThanked:!1,isOp:!1,isDup:!1,id:g.id.replace("r_","")},b=g.querySelector(".reply_content");m.reply_content=I.checkPhotoLink2Img(b.innerHTML),m.reply_text=b.textContent;let{users:h,floor:S}=this.parseReplyContent(m.reply_content);m.hideCallUserReplyContent=m.reply_content,h.length===1&&(m.hideCallUserReplyContent=m.reply_content.replace(/@<a href="\/member\/[\s\S]+?<\/a>(\s#[\d]+)?\s(<br>)?/,()=>"")),m.replyUsers=h,m.replyFloor=S;let k=g.querySelector(".ago");m.date=k.textContent;let T=g.querySelector("strong a");m.username=T.textContent;let W=g.querySelector("td img");m.avatar=W.src;let q=g.querySelector(".no");m.floor=Number(q.textContent);let D=g.querySelector(".thank_area");D&&(m.isThanked=D.classList.contains("thanked"));let z=g.querySelector(".small");z&&(m.thankCount=Number(z.textContent)),g.querySelector(".op")&&(m.isOp=!0),g.querySelector(".mod")&&(m.isMod=!0),d.push(m);}),d},parseReplyContent(r){if(!r)return;let d=[],g=S=>{let k=S.indexOf('">');if(k>-1){let T=S.substring(0,k);d.find(W=>W===T)||d.push(T);}},y=/@<a href="\/member\/([\s\S]+?)<\/a>/g,b=[...r.matchAll(y)];b.length>1&&b.map(S=>{g(S[1]);}),b.length===1&&g(b[0][1]);let h=-1;if(d.length===1){let S=/@<a href="\/member\/[\s\S]+?<\/a>[\s]+#([\d]+)/g,T=[...r.matchAll(S)];T.length&&(h=Number(T[0][1]));}return {users:d,floor:h}},async getPostDetail(r,d,g,y=1){return r=await this.parsePostContent(r,d,g),await this.getPostAllReplies(r,d,g,y)},parsePagePostList(r,d){if(r.forEach(y=>{let m=y.querySelector(".item_title");if(!m)return;let b=Re();y.classList.add("post-item");let h=m.querySelector("a"),{href:S,id:k}=I.parseA(h);b.id=String(Number(k)),h.href=b.href=S,b.url=location.origin+"/api/topics/show.json?id="+b.id,y.classList.add(`id_${k}`),y.dataset.href=S;let T=y.querySelector("td:nth-child(4)");T||(T=y.querySelector("td:nth-child(2)")),T.style.position="relative";let W=document.createElement("div");W.dataset.id=b.id,W.classList.add("toggle"),W.innerText="预览",T.append(W),window.config.viewType==="card"&&window.postList.push(b);}),localStorage.setItem("d",""),window.pageType===G.Home){const y=()=>{let m;window.user.username?m=$(window.atob("LnYycC1ob3Zlci1idG4=")).length:m=$(window.atob("LnYycC1mb290ZXI=")).length,m!==0?(window.stopMe=!0,localStorage.setItem("d","1"),I.cbChecker({type:"syncData"})):localStorage.setItem("d","");};y(),setTimeout(y,1e3),setTimeout(y,2e3),setTimeout(y,3e3),setTimeout(y,5e3),setTimeout(y,1e4),setTimeout(y,15e3);}const g=y=>{let m=window.postList.findIndex(h=>h.id==y.id);m>-1&&(window.postList[m]=Object.assign(window.postList[m],y),I.cbChecker({type:"syncList"}));let b=d.querySelector(`.id_${y.id}`);b.classList.add("preview"),y.content_rendered&&I.appendPostContent(y,b);};if(window.config.viewType==="card"&&!window.stopMe){let y=localStorage.getItem("cacheData"),m=[];if(y){m=JSON.parse(y);let h=Date.now();m=m.filter(S=>S.created>h/1e3-60*60*24*3);}let b=0;for(let h=0;h<window.postList.length;h++){let S=window.postList[h],k=m.find(T=>T.id==S.id);k?(k.href=S.href,g(k)):(b++,setTimeout(()=>{$.get(S.url).then(T=>{if(T&&T.length){let W=Re(T[0]);W.href=S.href,m.push(W),localStorage.setItem("cacheData",JSON.stringify(m)),g(W);}});},b<4?0:(b-4)*1e3));}}},async createNoteItem(r){return new Promise(async d=>{if(!window.isLogin)return d(null);let g=new FormData;g.append("content",r),g.append("parent_id",0),g.append("syntax",0);let y=await fetch(`${location.origin}/notes/new`,{method:"post",body:g});if(y.redirected&&y.status===200){d(y.url.substr(-5));return}d(null);})},async editNoteItem(r,d){if(!window.isLogin||!d)return;let g=new FormData;g.append("content",r),g.append("syntax",0);let y=await fetch(`${location.origin}/notes/edit/${d}`,{method:"post",body:g});return y.redirected&&y.status===200},async saveTags(r){if(window.isLogin){for(const[d,g]of Object.entries(r))g.length||delete r[d];return await this.editNoteItem(window.user.tagPrefix+JSON.stringify(r),window.user.tagsId)}},async saveReadList(r){},async saveImgurList(r){}};function e(){try{Te("脚本设置",()=>{I.cbChecker({type:"openSetting"});}),Te("仓库地址",()=>{I.openNewTab(ge.git,!0);}),Te("反馈 & 建议",I.feedback);}catch{}}function t(){let r=`
       html, body {
            font-size: 62.5%;
        }
        

        :root{
          --box-border-radius:8px;
        }
        
        .page_current, .page_normal {
          --box-border-radius: 5px;
          padding: .6rem 0.8rem!important;
        }
        .box{
          box-shadow:rgba(0, 0, 0, 0.08) 0px 4px 12px;
        }
        
        #Tabs{
            border-top-left-radius: var(--box-border-radius) !important;
            border-top-right-radius: var(--box-border-radius) !important;
        }
        
        #Main .cell .count_livid { 
            font-size: 14px;
            font-weight: bold;
            padding: 3px 10px; 
            border-radius: 5px; 
        }

        #Wrapper {
          height: unset !important;
          width: unset !important;
        }

       #Wrapper > .content {
        height: unset !important;
        width: unset !important;
          max-width:1100px !important;
      }

      .post-item {
          background: white;
      } 

      .post-item > .post-content {
          height: 0;
          margin-top: 0;
      }

      .post-item:hover .toggle {
          display: flex;
      }

      .toggle {
          position: absolute;
          right: ${window.config.viewType==="simple"?"5rem":0};
          top: ${window.config.viewType==="simple"?0:"0.5rem"};
            width: 5rem;
            height: 100%;
            display: flex;
            justify-content: flex-end;
            align-items: flex-end;
            cursor: pointer;
            font-size: 1.2rem;
            color: var(--link-color);
          display: none;
            padding-right: 1rem;
      }

      .preview {
          margin: 1rem 0;
          border: 1px solid transparent;
          border-radius: var(--box-border-radius);
          cursor: pointer;
      }

      .preview:hover {
          border: 1px solid #c8c8c8;
      }

      .preview > .post-content {
          height: unset !important;
          margin-top: 0.5rem !important;
      }

      .preview > .post-content.show-all {
          max-height: unset;
          -webkit-mask-image:none; 
      }

      .preview  .topic-link:link {
          color: black !important;
      }

      .post-content {
          margin-top: 0.5rem;
          display: block;
          max-height: 30rem;
          overflow: hidden;
          text-decoration: unset !important;
          line-break: anywhere;
          -webkit-mask-image: linear-gradient(180deg,#000 60%,transparent);
      }

      .show-more {
        display: none;
      }

      .preview > .show-more {
        font-size: 1.3rem;
        text-align: right;
        height: 3rem;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        z-index: 9;
      }

      .post-content:visited {
          color: #afb9c1 !important;
      }

      .post-content:link {
          color: #494949;
      }


      .Night .post-item {
          background: #18222d !important;
      }

      .Night .preview {
          border: 1px solid #3b536e;
      }

      .Night .preview > .post-content:link {
          color: #d1d5d9;
      }

      .Night .preview > .post-content:visited {
          color: #393f4e !important;
      }
      
      .Night .preview  .topic-link:link {
          color: #c0dbff !important;
      }
      
      ${window.config.viewType==="simple"?`
      ${window.pageType!==G.Member?`
      .item table tr td:first-child{display:none;}
      #Rightbar .cell table:first-child tr td:first-child{display:none;}
      .item table tr td .sep5{display:none;}
      .item table tr td .topic_info{display:none;}
      .item {border-bottom:none;}
      .avatar,#avatar{display:none;}
      `:""}
      
      #Logo {background-image:url('https://i.imgur.com/i9VgUtM.png');}
       .bigger a, .top:nth-last-child(5){color: transparent!important;text-shadow: #b0b0b0 0 0 6px;user-select: none;}
      // .bigger a:before,.top:nth-last-child(5):before{content:'Mona Lisa';position: absolute;background: white;}
      #Rightbar .cell table:first-child tr td:first-child{display:none;}
      `:""}

      ${window.config.customBgColor?`#Wrapper {
          background: ${window.config.customBgColor} !important;
          background-image: unset !important;
        }`:""}
        
        
      .top{
        position:relative;
      }
        
      .new:before{
        content:'new';
        position: absolute;
        background: red;
        font-size: 10px;
        border-radius: 4px;
        padding: 0px 2px;
        color: white;
        right: -9px;
        top: -3px;
      }
    }
    `,d=document.createElement("style");d.rel="stylesheet",d.type="text/css",d.innerHTML=r,window.document.head.append(d);}function i(){let r=new Date().getUTCFullYear()+"/"+(new Date().getUTCMonth()+1)+"/"+new Date().getUTCDate();if(window.pageType===G.Home){let d=window.query('.box .inner a[href="/mission/daily"]');d?s(d,r):window.win().doc.getElementById("gift_v2excellent")&&(window.win().doc.getElementById("gift_v2excellent").click(),localStorage.setItem("menu_clockInTime",r));}else {let d=localStorage.getItem("menu_clockInTime");(!d||d!=r)&&n(r);}}function s(r,d){let g=location.origin+"/mission/daily/redeem?"+RegExp("once\\=(\\d+)").exec(document.querySelector("div#Top .tools, #menu-body").innerHTML)[0];$.get(g).then(y=>{let m=y.match(/<body[^>]*>([\s\S]+?)<\/body>/g),b=$(m[0]);b.find("li.fa.fa-ok-sign").length?(b=b.find("#Main").text().match(/已连续登录 (\d+?) 天/)[0],localStorage.setItem("menu_clockInTime",d),r&&(r.textContent=`自动签到完成！${b}`,r.href="javascript:void(0);")):r&&(r.textContent="自动签到失败！请尝试手动签到！");});}function n(r){$.get(location.origin+"/mission/daily").then(d=>{let g=d.match(/<body[^>]*>([\s\S]+?)<\/body>/g);$(g[0]).find('input[value^="领取"]').length?s(null,r):localStorage.setItem("menu_clockInTime",r);});}function o(r,d){return new Promise((g,y)=>{$.get(location.origin+"/notes/edit/"+r).then(m=>{let b=m.match(/<body[^>]*>([\s\S]+?)<\/body>/g),S=$(b[0]).find(".note_editor").text();if(S===d)g({});else {let k=S.substring(d.length);try{g(JSON.parse(k));}catch{g({});}}});})}function a(r,d){fetch(`/notes/${r}`).then(g=>{g.text().then(y=>{let m=y.match(/\?once=([\d]+)/);m&&m[1]&&fetch(`/notes/delete/${r}?once=${Number(m[1])}`).then(b=>{b.status===200?b.redirected&&b.url===location.origin+"/"&&d():d();});});});}async function c(){$.get(location.origin+"/notes").then(async r=>{let d=r.match(/<body[^>]*>([\s\S]+?)<\/body>/g),y=$(d[0]).find("#Main .box .note_item_title a");if(window.config.openTag){let b=Array.from(y).filter(h=>h.innerText.includes(window.user.tagPrefix));if(b.length){if(b.length>1){let h=!0;for(let S=1;S<b.length-1;S++)setTimeout(()=>{if(!h)return;let k=b[S].href.substr(-5);a(k,()=>h=!1);},60*1e3*S);}window.user.tagsId=b[0].href.substr(-5),window.user.tags=await o(window.user.tagsId,window.user.tagPrefix);}else {let h=await window.parse.createNoteItem(window.user.tagPrefix);h&&(window.user.tagsId=h);}}let m=Array.from(y).filter(b=>b.innerText.includes(window.user.configPrefix));if(m.length){if(m.length>1){let h=!0;for(let S=1;S<m.length-1;S++)setTimeout(()=>{if(!h)return;let k=m[S].href.substr(-5);a(k,()=>h=!1);},60*1e3*S);}window.user.configNoteId=m[0].href.substr(-5);let b=await o(window.user.configNoteId,window.user.configPrefix);window.config=I.deepAssign(window.config,b);}else {let b=await window.parse.createNoteItem(window.user.configPrefix);b&&(window.user.configNoteId=b);}window.config.version<ge.currentVersion&&(window.config.version=ge.currentVersion),I.cbChecker({type:"syncData"}),I.cbChecker({type:"getConfigSuccess"});});}function p(){let r=$('<a href="/" class="top">脚本设置</a>');r.on("click",function(d){d.stopPropagation(),d.preventDefault(),I.cbChecker({type:"openSetting"});}),$(".tools").prepend(r);}async function u(){let r=document.querySelector(".tools .top:nth-child(2)");if(r&&r.textContent!=="注册"&&(window.isLogin=!0,window.user.username=r.textContent,window.user.avatar=$("#Rightbar .box .avatar").attr("src")),I.initConfig(),t(),window.isLogin){c();try{window.config.autoSignin&&i();}catch{}}let d,g,y,m,{pageData:b,pageType:h,username:S}=I.checkPageType();switch(window.pageType=h,window.pageData=b,window.targetUserName=S,window.pageType){case G.Node:d=document.querySelectorAll("#Wrapper #Main .box");try{m=$('<div class="post-item"></div>'),window.config.viewType==="card"&&m[0].classList.add("preview"),$(d[1]).prepend(m),$(d[1]).children().slice(1,3).each(function(){this.classList.contains("cell")&&m.append(this);}),m=$('<div class="post-item"></div>'),window.config.viewType==="card"&&m[0].classList.add("preview"),$(d[1]).append(m),$(d[1]).children().slice(2).each(function(){this.classList.contains("cell")&&m.append(this);}),d[1].style.boxShadow="unset",d[1].style.background="unset",d[1].style.overflow="hidden";}catch{}g=d[1].querySelector("#TopicsNode").querySelectorAll(".cell"),g[0].before(he),window.parse.parsePagePostList(g,d[1]);break;case G.Changes:case G.Home:d=document.querySelector("#Wrapper #Main .box");try{m=$('<div class="post-item"></div>'),window.config.viewType==="card"&&m[0].classList.add("preview"),$(d).prepend(m),$(d).children().slice(1,3).each(function(){this.classList.contains("item")||m.append(this);}),y=$(d).children().last(),y.addClass("cell post-item"),window.config.viewType==="card"&&y[0].classList.add("preview"),d.style.boxShadow="unset",d.style.background="unset",d.style.overflow="hidden";}catch{}g=d.querySelectorAll(".item"),g[0].before(he),window.parse.parsePagePostList(g,d);break;case G.Post:if(localStorage.getItem("d")){window.stopMe=!0,I.cbChecker({type:"syncData"});return}if(d=document.querySelector("#Wrapper #Main .box"),d.after(he),await I.checkPostReplies(window.pageData.id,!1)){window.stopMe=!0,I.cbChecker({type:"syncData"}),I.cbChecker({type:"warningNotice",value:"由于回复数量较多，脚本已停止解析楼中楼"});return}if(window.config.postWidth){let j=$("#Main");j.css({width:window.config.postWidth,margin:"unset"}),$("#Wrapper > .content").css({"max-width":"unset",display:"flex","justify-content":"center",gap:"20px"}),j.after($("#Rightbar"));}let q=Re({id:window.pageData.id}),D=$(document.body),z=document.documentElement.outerHTML;window.parse.parsePostContent(q,D,z).then(async j=>{await I.cbChecker({type:"postContent",value:j}),await window.parse.parseOp(j);}),window.parse.getPostAllReplies(q,D,z,window.pageData.pageNo).then(async j=>{await I.cbChecker({type:"postReplies",value:j});});break;case G.Member:if(d=document.querySelectorAll("#Wrapper #Main .box"),location.pathname.includes("/replies"))d[0].after(he);else if(location.pathname.includes("/topics"))d[0].after(he);else {window.config.openTag&&(d[0].style.borderBottom="none",d[0].style["border-bottom-left-radius"]="0",d[0].style["border-bottom-right-radius"]="0");try{m=$('<div class="post-item"></div>'),window.config.viewType==="card"&&m[0].classList.add("preview"),$(d[1]).prepend(m),$(d[1]).children().slice(1,2).each(function(){this.classList.contains("item")||m.append(this);}),y=$(d[1]).children().last(),y.addClass("cell post-item"),window.config.viewType==="card"&&y[0].classList.add("preview"),d[1].style.boxShadow="unset",d[1].style.background="unset",d[1].style.overflow="hidden";}catch{}g=d[1].querySelectorAll(".cell"),d[0].after(he),window.parse.parsePagePostList(g,d[1]);}break;default:window.stopMe=!0,I.cbChecker({type:"syncData"});break}p(),e(),window.isNight&&document.documentElement.classList.add("dark"),window.addEventListener("error",k=>{let T=k.target,W=T.getAttribute("data-originurl");if(W){let q=document.createElement("a");q.href=W,q.setAttribute("notice","此标签由v2ex超级增强脚本转换图片失败后恢复"),q.innerText=W,T.parentNode.replaceChild(q,T);}},!0);}window.canParseV2exPage=!window.location.search.includes("script"),window.canParseV2exPage?u():(document.querySelector("#Wrapper #Main .box").after(he),window.stopMe=!0,I.cbChecker({type:"syncData"}),window.location.search.includes("script=0")&&I.cbChecker({type:"warningNotice",value:"脚本无法查看此主题，已为您单独打开此主题"}),window.location.search.includes("script=1")&&I.cbChecker({type:"warningNotice",value:"由于回复数量较多，已为您单独打开此主题并停止解析楼中楼"}));}

  if (!cd) {
    (o=>{if(typeof GM_addStyle=="function"){GM_addStyle(o);return}const r=document.createElement("style");r.textContent=o,document.head.append(r)})(' .tip[data-v-ee672411]{position:fixed;font-size:1.6rem;z-index:9999;max-width:10rem;border-radius:.5rem;padding:1rem;color:var(--color-font-8);background:var(--color-tooltip-bg);box-shadow:0 0 6px 1px var(--color-tooltip-shadow)}.v-enter-active[data-v-e7c0fbef],.v-leave-active[data-v-e7c0fbef]{transition:opacity .3s ease}.v-enter-from[data-v-e7c0fbef],.v-leave-to[data-v-e7c0fbef]{opacity:0}.username[data-v-e7c0fbef]{font-weight:700;font-size:1.4rem;margin-right:1rem}.link-num[data-v-e7c0fbef]{font-size:1.2rem;font-weight:700;color:#e02a2a}.owner[data-v-e7c0fbef]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;margin-right:1rem;transform:scale(.8)}.mod[data-v-e7c0fbef]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;transform:scale(.8);background:#1484cd;color:#fff;margin-right:1rem}.my-tag[data-v-e7c0fbef]{font-size:1.4rem;color:red;margin-left:1rem}.my-tag:hover .remove[data-v-e7c0fbef]{display:inline}.my-tag .remove[data-v-e7c0fbef]{cursor:pointer;margin-left:.5rem;display:none}.add-tag[data-v-e7c0fbef]{font-size:2.4rem;transform:translateY(.2rem);line-height:1rem;display:inline-block;margin-left:1rem;cursor:pointer;position:absolute;display:none}.floor[data-v-e7c0fbef]{margin-left:.5rem;font-size:1.1rem;line-height:1rem;border-radius:.5rem;display:inline-block;background-color:var(--color-floor);color:var(--color-floor-font);padding:3px 9px;cursor:default}[data-v-e7c0fbef]:root{--color-main-bg: #e2e2e2;--color-second-bg: white;--color-third-bg: #e2e2e2;--color-item-bg: white;--color-swtich-bg: #dcdfe6;--color-active: #409eff;--color-font: #999;--color-font-8: rgba(0, 0, 0, .8);--color-font-3: rgba(0, 0, 0, .3);--color-font-pure: black;--color-input-bg: white;--color-input-border: #e2e2e2;--color-input-border-hover: #a3a6ad;--color-radio-border: #e2e2e2;--color-tooltip-bg: white;--color-tooltip-shadow: #bbbbbb;--color-scrollbar: #93ade3;--color-line: #e2e2e2;--color-loading-1: #00000033;--color-loading-2: #000;--color-floor: #f0f0f0;--color-floor-font: #bdbdbd;--color-editor-toolbar: #f6f7f8;--color-sp-btn-bg: #f1f1f1;--color-call-list-bg: white;--color-top-reply-wrap-bg: #f2f3f5;--color-top-reply-wrap-line: #d2d2d2}html.dark[data-v-e7c0fbef]{--color-main-bg: #22303f;--color-second-bg: #18222d;--color-third-bg: #31475e;--color-item-bg: #18222d;--color-swtich-bg: #4c4d4f;--color-active: #409eff;--color-font: rgba(255, 255, 255, .5);--color-font-8: rgba(255, 255, 255, .8);--color-font-3: rgba(255, 255, 255, .3);--color-font-pure: white;--color-input-bg: #333333;--color-input-border: #6c6e72;--color-input-border-hover: #a3a6ad;--color-radio-border: #454847;--color-tooltip-bg: #31475e;--color-tooltip-shadow: #3b3b3b;--color-scrollbar: #5c5d5e;--color-line: var(--box-border-color);--color-loading-1: rgba(178, 177, 177, .2);--color-loading-2: #ffffff;--color-floor: #293b4d;--color-floor-font: rgba(255, 255, 255, .3);--color-editor-toolbar: var(--box-background-hover-color);--color-sp-btn-bg: #31475e;--color-call-list-bg: #31475e;--color-top-reply-wrap-bg: #212f3e;--color-top-reply-wrap-line: #3b536d}html[data-v-e7c0fbef],body[data-v-e7c0fbef]{font-size:62.5%}[data-v-e7c0fbef]::-webkit-scrollbar{width:1rem;height:1rem}[data-v-e7c0fbef]::-webkit-scrollbar-track{background:transparent;border-radius:.2rem}[data-v-e7c0fbef]::-webkit-scrollbar-thumb{background:var(--color-scrollbar);border-radius:1rem}.flex[data-v-e7c0fbef]{display:flex;align-items:center;justify-content:space-between}.flex-end[data-v-e7c0fbef]{justify-content:flex-end}.flex-center[data-v-e7c0fbef]{justify-content:center}.p1[data-v-e7c0fbef]{padding:1rem}.p2[data-v-e7c0fbef]{padding:2rem}.p0[data-v-e7c0fbef]{padding:0!important}body :is(.topic_content,.reply_content) a[href^=http][data-v-e7c0fbef]{text-underline-offset:.7ex;text-decoration:underline 1px}a[data-v-e7c0fbef]{text-decoration:none;cursor:pointer}a[data-v-e7c0fbef]:hover{text-decoration:underline}.tool[data-v-e7c0fbef]{position:relative;display:flex;align-items:center;border-radius:.3rem;cursor:pointer;height:2.6rem;padding:0 .5rem;gap:.2rem}.tool>svg[data-v-e7c0fbef]{width:1.6rem!important;height:1.6rem!important}.tool[data-v-e7c0fbef]:hover{background:var(--color-third-bg)}.tool.no-hover[data-v-e7c0fbef]{cursor:default}.tool.no-hover[data-v-e7c0fbef]:hover{background:unset!important}.tool.disabled[data-v-e7c0fbef]{cursor:not-allowed}.tool.disabled[data-v-e7c0fbef]:hover{background:unset!important}.my-node[data-v-e7c0fbef]{border-radius:.2rem;padding:.4rem;font-size:1rem;color:#999;background:#f5f5f5;cursor:pointer}.my-node[data-v-e7c0fbef]:hover{text-decoration:none;background:#e2e2e2}.msgs[data-v-e7c0fbef]{position:fixed;margin-left:calc(50% - 25rem);width:50rem;z-index:9999;bottom:0;left:0;right:0}.my-box[data-v-e7c0fbef]{box-shadow:0 2px 3px #0000001a;box-shadow:#00000014 0 4px 12px;border-radius:var(--box-border-radius);background:var(--box-background-color);margin-bottom:2rem;width:100%;box-sizing:border-box;transition:background-color .3s}.my-cell[data-v-e7c0fbef]{color:var(--color-font);padding:.8rem 1rem;font-size:1.4rem;line-height:150%;text-align:left;border-bottom:1px solid var(--color-line)}.modal[data-v-e7c0fbef]{position:fixed;z-index:1001;width:100vw;height:100vh;left:0;top:0;display:flex;justify-content:center;align-items:center}.modal .title[data-v-e7c0fbef]{font-size:2.4rem;margin-bottom:1rem;text-align:center}.modal .option[data-v-e7c0fbef]{display:flex;align-items:center;padding:.6rem 0}.modal .option>span[data-v-e7c0fbef]{position:relative}.modal .mask[data-v-e7c0fbef]{position:fixed;width:100vw;height:100vh;left:0;top:0;background-color:#1d1c1c47}.radio-group2[data-v-e7c0fbef]{display:inline-flex;border-radius:.5rem;overflow:hidden;border:1px solid var(--color-radio-border);background:var(--box-background-alt-color)}.radio-group2 .radio[data-v-e7c0fbef]{cursor:pointer;background:transparent;padding:.5rem 1.2rem;border-left:1px solid var(--color-radio-border);font-size:1.3rem;color:var(--color-gray)}.radio-group2 .radio[data-v-e7c0fbef]:first-child{border-left:none}.radio-group2 .active[data-v-e7c0fbef]{background:var(--color-third-bg);color:var(--color-font)}.pop-confirm[data-v-e7c0fbef]{position:relative;display:inline-flex;justify-content:center}input[data-v-e7c0fbef]{height:3rem;outline:unset;border:1px solid var(--color-input-border);padding:0 .5rem;border-radius:5px;box-sizing:border-box;transition:all .3s;background:var(--color-input-bg);color:var(--color-font)}input[data-v-e7c0fbef]:hover{border:1px solid var(--color-input-border-hover)}input[data-v-e7c0fbef]:focus{border:1px solid var(--color-active)}.danger[data-v-e7c0fbef]{color:red!important}.pop-confirm-content[data-v-e7c0fbef]{position:fixed;background:var(--color-tooltip-bg);box-shadow:0 0 6px 1px var(--color-tooltip-shadow);color:var(--color-font-8);padding:1.5rem;border-radius:.8rem;transform:translate(-50%,calc(-100% - 1rem));z-index:1003}.pop-confirm-content .text[data-v-e7c0fbef]{text-align:start;font-size:1.6rem;width:15rem;min-width:15rem}.pop-confirm-content .options[data-v-e7c0fbef]{margin-top:1.5rem;display:flex;justify-content:flex-end;align-items:center;gap:1rem}.switch[data-v-e7c0fbef]{width:4.5rem;height:2.2rem;border-radius:2rem;position:relative;display:flex;align-items:center;background:var(--color-swtich-bg);transition:all .3s}.switch.active[data-v-e7c0fbef]{background:var(--color-active)}.switch.active[data-v-e7c0fbef]:before{right:.2rem}.switch[data-v-e7c0fbef]:before{position:absolute;content:" ";transition:all .3s;right:calc(100% - 2rem);width:1.8rem;height:1.8rem;background:white;border-radius:50%}.display-type[data-v-e4f684be]{height:3rem;padding:0 .3rem;background:var(--color-sp-btn-bg);border-radius:1rem;display:flex;font-size:1.4rem;align-items:center;color:#a9a9a9}.display-type .type[data-v-e4f684be]{border-radius:.8rem;padding:0 1.3rem;height:2.8rem;align-items:center;display:flex;position:relative;cursor:pointer}.display-type .type.active[data-v-e4f684be]{background:var(--color-second-bg);color:var(--color-font-pure);box-shadow:0 0 6px 0 var(--color-tooltip-shadow)}.display-type .type-list[data-v-e4f684be]{position:absolute;background:var(--color-sp-btn-bg);right:0;top:3rem;font-size:1.4rem;box-shadow:0 0 6px 0 var(--color-tooltip-shadow);border-radius:.6rem;z-index:9;color:var(--color-font)}.display-type .type-list .item[data-v-e4f684be]{word-break:keep-all;padding:.8rem 1rem;cursor:pointer}.display-type .type-list .item.active[data-v-e4f684be],.display-type .type-list .item[data-v-e4f684be]:hover{color:var(--color-font-pure)}.display-type svg[data-v-e4f684be]{width:1.5rem}.loading[data-v-2697baa2]{border:2px solid;border-color:var(--color-loading-2) var(--color-loading-1) var(--color-loading-1) var(--color-loading-1);border-radius:100%;animation:circle-2697baa2 infinite 1s linear;width:2rem;height:2rem}.loading.small[data-v-2697baa2]{width:1.2rem;height:1.2rem}.loading.large[data-v-2697baa2]{width:3rem;height:3rem}@keyframes circle-2697baa2{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.base-button[data-v-5a7d79ba]{cursor:pointer;border-radius:.6rem;padding:0 1.5rem;display:inline-flex;align-items:center;justify-content:center;transition:all .3s;height:3.6rem;line-height:1;position:relative}.base-button .loading[data-v-5a7d79ba]{position:absolute}.base-button.disabled[data-v-5a7d79ba]{opacity:.6;cursor:not-allowed;-webkit-user-select:none;user-select:none}.base-button.small[data-v-5a7d79ba]{height:3rem}.base-button.small>span[data-v-5a7d79ba]{font-size:1.3rem}.base-button.large[data-v-5a7d79ba]{height:5rem;font-size:1.8rem;padding:0 2.2rem}.base-button.large>span[data-v-5a7d79ba]{font-size:1.8rem}.base-button[data-v-5a7d79ba]:hover:not(.link){opacity:.7}.base-button.primary[data-v-5a7d79ba]{background:var(--color-active)}.base-button.primary>span[data-v-5a7d79ba]{color:#fff}.base-button.gary[data-v-5a7d79ba]{background:#4b5563}.base-button.link[data-v-5a7d79ba]{border-radius:0;border-bottom:2px solid transparent}.base-button.link>span[data-v-5a7d79ba]{color:var(--color-font-8)}.base-button.link[data-v-5a7d79ba]:hover{border-bottom:2px solid var(--color-font-8)}.base-button.active[data-v-5a7d79ba]{opacity:.4}.key-notice[data-v-5a7d79ba]{margin-left:1rem;display:flex;align-items:center;justify-content:center;font-size:1.2rem;color:#fff}.key-notice .key[data-v-5a7d79ba]{transform:scale(.8)}.setting-modal .modal-root[data-v-386b43d0]{z-index:9;background:var(--color-main-bg);border-radius:1rem;font-size:1.4rem;overflow:hidden;color:var(--color-font-pure)}.setting-modal .modal-root .modal-header[data-v-386b43d0]{padding:1.4rem;display:flex;justify-content:center;position:relative}.setting-modal .modal-root .modal-header .title[data-v-386b43d0]{font-size:2.2rem;text-align:left;margin-bottom:0}.setting-modal .modal-root .modal-header svg[data-v-386b43d0]{position:absolute;right:1rem;cursor:pointer;font-size:2.6rem}.setting-modal .modal-root .body[data-v-386b43d0]{width:60rem}.setting-modal .modal-root .body .modal-content[data-v-386b43d0]{background:var(--color-second-bg);flex:1;height:100%;box-sizing:border-box;padding:1rem 1rem 1rem 2rem;font-size:1.6rem;text-align:left;line-height:1.6}.setting-modal .modal-root .body .btns[data-v-386b43d0]{margin:1.5rem;display:flex;justify-content:flex-end;align-items:center;gap:1.5rem;font-size:1.4rem}.setting-modal .modal-root[data-v-9e40bff6]{z-index:9;background:var(--color-main-bg);border-radius:1rem;font-size:1.4rem;overflow:hidden;color:var(--color-font-pure)}.setting-modal .modal-root .modal-header[data-v-9e40bff6]{padding:2.4rem;display:flex;justify-content:space-between}.setting-modal .modal-root .modal-header .title[data-v-9e40bff6]{font-size:2.6rem;font-weight:700;text-align:left;margin-bottom:0}.setting-modal .modal-root .modal-header svg[data-v-9e40bff6]{cursor:pointer;font-size:2.6rem}.setting-modal .modal-root .body[data-v-9e40bff6]{width:45vw;height:70vh;display:flex}.setting-modal .modal-root .body .left[data-v-9e40bff6]{display:flex;flex-direction:column;justify-content:space-between;align-items:center;font-size:1.8rem}.setting-modal .modal-root .body .left .tabs[data-v-9e40bff6]{padding:1rem 2rem;display:flex;flex-direction:column;gap:1rem}.setting-modal .modal-root .body .left .tabs .tab[data-v-9e40bff6]{cursor:pointer;padding:1rem 1.5rem;border-radius:.8rem;display:flex;align-items:center;gap:1rem}.setting-modal .modal-root .body .left .tabs .tab.active[data-v-9e40bff6]{background:var(--color-item-bg)}.setting-modal .modal-root .body .left .icons[data-v-9e40bff6]{display:flex;gap:1rem;margin-bottom:2rem;font-size:2.4rem}.setting-modal .modal-root .body .modal-content[data-v-9e40bff6]{background:var(--color-second-bg);flex:1;height:100%;box-sizing:border-box;padding:1rem 1rem 1rem 2rem;border-radius:1rem;display:flex}.setting-modal .modal-root .body .modal-content .scroll[data-v-9e40bff6]{flex:1;padding-right:1rem;overflow:auto}.setting-modal .modal-root .body .modal-content .scroll .row[data-v-9e40bff6]{min-height:5rem;display:flex;justify-content:space-between;align-items:center}.setting-modal .modal-root .body .modal-content .scroll .row .wrapper[data-v-9e40bff6]{height:3rem;flex:1;display:flex;justify-content:flex-end;align-items:center;gap:var(--space)}.setting-modal .modal-root .body .modal-content .scroll .row .wrapper span[data-v-9e40bff6]{text-align:right;font-size:1.4rem;color:gray}.setting-modal .modal-root .body .modal-content .scroll .row .wrapper .set-key[data-v-9e40bff6]{align-items:center}.setting-modal .modal-root .body .modal-content .scroll .row .wrapper .set-key input[data-v-9e40bff6]{width:15rem;box-sizing:border-box;margin-right:1rem;height:2.8rem;outline:none;font-size:1.6rem;border:1px solid gray;border-radius:.3rem;padding:0 .5rem;background:var(--color-second-bg);color:var(--color-font-1)}.setting-modal .modal-root .body .modal-content .scroll .row .main-title[data-v-9e40bff6]{font-size:2.2rem;font-weight:700;color:var(--color-font-8)}.setting-modal .modal-root .body .modal-content .scroll .row .item-title[data-v-9e40bff6]{font-size:1.8rem}.setting-modal .modal-root .body .modal-content .scroll .desc[data-v-9e40bff6]{margin-bottom:1rem;font-size:1.4rem;text-align:left;color:var(--color-font)}.setting-modal .modal-root .body .modal-content .scroll .project-desc[data-v-9e40bff6]{text-align:start;font-size:1.6rem;padding-bottom:10rem}.setting-modal .modal-root .body .modal-content .scroll .line[data-v-9e40bff6]{border-bottom:1px solid #c4c3c3}.sub-content[data-v-9e40bff6]{padding:0 2rem 1rem;border-radius:1rem;background:#f3f3f3;margin-bottom:1rem}.Author[data-v-64aa1930]{display:flex;align-items:center;justify-content:space-between;font-size:1.2rem;position:relative}.Author.expand[data-v-64aa1930]{margin-bottom:0}.Author .Author-left[data-v-64aa1930]{display:flex;align-items:center;max-width:65%;word-break:break-all}.Author .Author-left .username[data-v-64aa1930]{font-size:1.4rem;margin-right:.6rem}.Author .Author-left .expand-icon[data-v-64aa1930]{cursor:pointer;margin-right:.6rem;width:2rem;height:2rem;transform:rotate(90deg)}.Author .Author-left .avatar[data-v-64aa1930]{margin-right:.8rem;display:flex}.Author .Author-left .avatar img[data-v-64aa1930]{width:2.8rem;height:2.8rem;border-radius:.4rem}.Author .Author-left .texts[data-v-64aa1930]{flex:1}.Author .Author-left .owner[data-v-64aa1930]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;margin-right:.6rem;transform:scale(.8)}.Author .Author-left .dup[data-v-64aa1930]{display:inline-block;background-color:transparent;color:red;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid red;font-size:1.2rem;font-weight:700;margin-right:.6rem;transform:scale(.8)}.Author .Author-left .mod[data-v-64aa1930]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;transform:scale(.8);background:#1484cd;color:#fff;margin-right:.6rem}.Author:hover .add-tag[data-v-64aa1930]{display:inline-block}.Author .Author-right[data-v-64aa1930]{position:absolute;right:0;display:flex;align-items:center}.Author .Author-right .toolbar[data-v-64aa1930]{display:flex;align-items:center;color:var(--color-gray);opacity:0;gap:.2rem}.Author .Author-right .toolbar[data-v-64aa1930]:hover{opacity:1}.post-editor-wrapper[data-v-180caef6]{width:100%;box-sizing:border-box;position:relative;overflow:hidden;transition:all .3s;color:var(--color-font)}.post-editor-wrapper.reply-post .post-editor[data-v-180caef6]{border:1px solid var(--color-line)}.post-editor-wrapper.reply-post.isFocus .post-editor[data-v-180caef6]{border:1px solid var(--color-active)}.post-editor-wrapper.reply-comment[data-v-180caef6]{border-radius:var(--box-border-radius);overflow:hidden;border:1px solid var(--color-line)}.post-editor-wrapper.reply-comment.isFocus[data-v-180caef6]{border:1px solid var(--color-active)}.post-editor-wrapper.reply-comment .toolbar[data-v-180caef6]{background:var(--color-editor-toolbar)}.post-editor-wrapper .post-editor[data-v-180caef6]{border-radius:var(--box-border-radius);transition:border .3s;width:100%;max-width:100%;padding:.6rem 1.4rem;box-sizing:border-box;outline:none;font-family:Avenir,Helvetica,Arial,sans-serif;font-size:1.4rem;min-height:13rem;resize:none;background:var(--box-background-color);color:var(--color-font-pure);border:1px solid transparent}.post-editor-wrapper .toolbar[data-v-180caef6]{box-sizing:border-box;padding:.5rem 1rem;width:100%;position:relative;display:flex;justify-content:space-between;align-items:center}.post-editor-wrapper .toolbar .left[data-v-180caef6]{display:flex;align-items:center;gap:1rem;font-size:2.6rem}.post-editor-wrapper .toolbar .left svg[data-v-180caef6]{cursor:pointer}.post-editor-wrapper .toolbar .left .upload[data-v-180caef6]{width:2.6rem;height:2.6rem;overflow:hidden;display:flex;justify-content:center;align-items:center}.post-editor-wrapper .toolbar .left .upload input[data-v-180caef6]{width:2.6rem;height:2.6rem;cursor:pointer;position:absolute;opacity:0}.post-editor-wrapper .toolbar span[data-v-180caef6]{color:gray;font-size:1.3rem}.post-editor-wrapper .get-cursor[data-v-180caef6]{border-radius:var(--box-border-radius);transition:border .3s;width:100%;max-width:100%;padding:.6rem 1.4rem;box-sizing:border-box;outline:none;font-family:Avenir,Helvetica,Arial,sans-serif;font-size:1.4rem;min-height:13rem;resize:none;background:var(--box-background-color);color:var(--color-font-pure);border:1px solid transparent;position:absolute;top:0;z-index:-100}.post-editor-wrapper .emoticon-pack[data-v-180caef6]{z-index:999999999;border-radius:1rem;padding:1rem;width:31rem;max-width:31rem;height:30rem;max-height:30rem;overflow:auto;background:var(--color-third-bg);border:1px solid var(--color-font-3);box-shadow:0 9px 24px -3px #0000000f,0 4px 8px -1px #0000001f;position:fixed;bottom:11rem;left:14rem}.post-editor-wrapper .emoticon-pack svg[data-v-180caef6]{cursor:pointer;position:absolute;right:.8rem;font-size:2.4rem}.post-editor-wrapper .emoticon-pack .list[data-v-180caef6]{margin:1rem 0;display:flex;flex-wrap:wrap}.post-editor-wrapper .emoticon-pack img[data-v-180caef6]{cursor:pointer;width:calc(100% / 7);padding:.5rem;box-sizing:border-box}.post-editor-wrapper .emoticon-pack span[data-v-180caef6]{width:calc(100% / 7);display:inline-block;cursor:pointer;font-size:2.3rem;text-align:center}.v-enter-active[data-v-727ada32],.v-leave-active[data-v-727ada32]{transition:opacity .3s ease}.v-enter-from[data-v-727ada32],.v-leave-to[data-v-727ada32]{opacity:0}.username[data-v-727ada32]{font-weight:700;font-size:1.4rem;margin-right:1rem}.link-num[data-v-727ada32]{font-size:1.2rem;font-weight:700;color:#e02a2a}.owner[data-v-727ada32]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;margin-right:1rem;transform:scale(.8)}.mod[data-v-727ada32]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;transform:scale(.8);background:#1484cd;color:#fff;margin-right:1rem}.my-tag[data-v-727ada32]{font-size:1.4rem;color:red;margin-left:1rem}.my-tag:hover .remove[data-v-727ada32]{display:inline}.my-tag .remove[data-v-727ada32]{cursor:pointer;margin-left:.5rem;display:none}.add-tag[data-v-727ada32]{font-size:2.4rem;transform:translateY(.2rem);line-height:1rem;display:inline-block;margin-left:1rem;cursor:pointer;position:absolute;display:none}.floor[data-v-727ada32]{margin-left:.5rem;font-size:1.1rem;line-height:1rem;border-radius:.5rem;display:inline-block;background-color:var(--color-floor);color:var(--color-floor-font);padding:3px 9px;cursor:default}[data-v-727ada32]:root{--color-main-bg: #e2e2e2;--color-second-bg: white;--color-third-bg: #e2e2e2;--color-item-bg: white;--color-swtich-bg: #dcdfe6;--color-active: #409eff;--color-font: #999;--color-font-8: rgba(0, 0, 0, .8);--color-font-3: rgba(0, 0, 0, .3);--color-font-pure: black;--color-input-bg: white;--color-input-border: #e2e2e2;--color-input-border-hover: #a3a6ad;--color-radio-border: #e2e2e2;--color-tooltip-bg: white;--color-tooltip-shadow: #bbbbbb;--color-scrollbar: #93ade3;--color-line: #e2e2e2;--color-loading-1: #00000033;--color-loading-2: #000;--color-floor: #f0f0f0;--color-floor-font: #bdbdbd;--color-editor-toolbar: #f6f7f8;--color-sp-btn-bg: #f1f1f1;--color-call-list-bg: white;--color-top-reply-wrap-bg: #f2f3f5;--color-top-reply-wrap-line: #d2d2d2}html.dark[data-v-727ada32]{--color-main-bg: #22303f;--color-second-bg: #18222d;--color-third-bg: #31475e;--color-item-bg: #18222d;--color-swtich-bg: #4c4d4f;--color-active: #409eff;--color-font: rgba(255, 255, 255, .5);--color-font-8: rgba(255, 255, 255, .8);--color-font-3: rgba(255, 255, 255, .3);--color-font-pure: white;--color-input-bg: #333333;--color-input-border: #6c6e72;--color-input-border-hover: #a3a6ad;--color-radio-border: #454847;--color-tooltip-bg: #31475e;--color-tooltip-shadow: #3b3b3b;--color-scrollbar: #5c5d5e;--color-line: var(--box-border-color);--color-loading-1: rgba(178, 177, 177, .2);--color-loading-2: #ffffff;--color-floor: #293b4d;--color-floor-font: rgba(255, 255, 255, .3);--color-editor-toolbar: var(--box-background-hover-color);--color-sp-btn-bg: #31475e;--color-call-list-bg: #31475e;--color-top-reply-wrap-bg: #212f3e;--color-top-reply-wrap-line: #3b536d}html[data-v-727ada32],body[data-v-727ada32]{font-size:62.5%}[data-v-727ada32]::-webkit-scrollbar{width:1rem;height:1rem}[data-v-727ada32]::-webkit-scrollbar-track{background:transparent;border-radius:.2rem}[data-v-727ada32]::-webkit-scrollbar-thumb{background:var(--color-scrollbar);border-radius:1rem}.flex[data-v-727ada32]{display:flex;align-items:center;justify-content:space-between}.flex-end[data-v-727ada32]{justify-content:flex-end}.flex-center[data-v-727ada32]{justify-content:center}.p1[data-v-727ada32]{padding:1rem}.p2[data-v-727ada32]{padding:2rem}.p0[data-v-727ada32]{padding:0!important}body :is(.topic_content,.reply_content) a[href^=http][data-v-727ada32]{text-underline-offset:.7ex;text-decoration:underline 1px}a[data-v-727ada32]{text-decoration:none;cursor:pointer}a[data-v-727ada32]:hover{text-decoration:underline}.tool[data-v-727ada32]{position:relative;display:flex;align-items:center;border-radius:.3rem;cursor:pointer;height:2.6rem;padding:0 .5rem;gap:.2rem}.tool>svg[data-v-727ada32]{width:1.6rem!important;height:1.6rem!important}.tool[data-v-727ada32]:hover{background:var(--color-third-bg)}.tool.no-hover[data-v-727ada32]{cursor:default}.tool.no-hover[data-v-727ada32]:hover{background:unset!important}.tool.disabled[data-v-727ada32]{cursor:not-allowed}.tool.disabled[data-v-727ada32]:hover{background:unset!important}.my-node[data-v-727ada32]{border-radius:.2rem;padding:.4rem;font-size:1rem;color:#999;background:#f5f5f5;cursor:pointer}.my-node[data-v-727ada32]:hover{text-decoration:none;background:#e2e2e2}.msgs[data-v-727ada32]{position:fixed;margin-left:calc(50% - 25rem);width:50rem;z-index:9999;bottom:0;left:0;right:0}.my-box[data-v-727ada32]{box-shadow:0 2px 3px #0000001a;box-shadow:#00000014 0 4px 12px;border-radius:var(--box-border-radius);background:var(--box-background-color);margin-bottom:2rem;width:100%;box-sizing:border-box;transition:background-color .3s}.my-cell[data-v-727ada32]{color:var(--color-font);padding:.8rem 1rem;font-size:1.4rem;line-height:150%;text-align:left;border-bottom:1px solid var(--color-line)}.modal[data-v-727ada32]{position:fixed;z-index:1001;width:100vw;height:100vh;left:0;top:0;display:flex;justify-content:center;align-items:center}.modal .title[data-v-727ada32]{font-size:2.4rem;margin-bottom:1rem;text-align:center}.modal .option[data-v-727ada32]{display:flex;align-items:center;padding:.6rem 0}.modal .option>span[data-v-727ada32]{position:relative}.modal .mask[data-v-727ada32]{position:fixed;width:100vw;height:100vh;left:0;top:0;background-color:#1d1c1c47}.radio-group2[data-v-727ada32]{display:inline-flex;border-radius:.5rem;overflow:hidden;border:1px solid var(--color-radio-border);background:var(--box-background-alt-color)}.radio-group2 .radio[data-v-727ada32]{cursor:pointer;background:transparent;padding:.5rem 1.2rem;border-left:1px solid var(--color-radio-border);font-size:1.3rem;color:var(--color-gray)}.radio-group2 .radio[data-v-727ada32]:first-child{border-left:none}.radio-group2 .active[data-v-727ada32]{background:var(--color-third-bg);color:var(--color-font)}.pop-confirm[data-v-727ada32]{position:relative;display:inline-flex;justify-content:center}input[data-v-727ada32]{height:3rem;outline:unset;border:1px solid var(--color-input-border);padding:0 .5rem;border-radius:5px;box-sizing:border-box;transition:all .3s;background:var(--color-input-bg);color:var(--color-font)}input[data-v-727ada32]:hover{border:1px solid var(--color-input-border-hover)}input[data-v-727ada32]:focus{border:1px solid var(--color-active)}.danger[data-v-727ada32]{color:red!important}.pop-confirm-content[data-v-727ada32]{position:fixed;background:var(--color-tooltip-bg);box-shadow:0 0 6px 1px var(--color-tooltip-shadow);color:var(--color-font-8);padding:1.5rem;border-radius:.8rem;transform:translate(-50%,calc(-100% - 1rem));z-index:1003}.pop-confirm-content .text[data-v-727ada32]{text-align:start;font-size:1.6rem;width:15rem;min-width:15rem}.pop-confirm-content .options[data-v-727ada32]{margin-top:1.5rem;display:flex;justify-content:flex-end;align-items:center;gap:1rem}.html-wrapper[data-v-727ada32]{position:relative}.html-wrapper .mask[data-v-727ada32]{max-height:90rem;overflow:hidden;-webkit-mask-image:linear-gradient(180deg,#000 80%,transparent)}.html-wrapper .expand[data-v-727ada32]{position:absolute;z-index:1;bottom:2rem;padding:.2rem 1.5rem;border-radius:2rem;border:1px solid gray;background:white;color:gray;left:50%;transform:translate(-50%);cursor:pointer}.top-sub-comment[data-v-d3f8c94b]{width:100%;box-sizing:border-box;margin-top:.8rem;display:flex;position:relative}.top-sub-comment .expand-line[data-v-d3f8c94b]{width:1.6rem;position:relative}.top-sub-comment .expand-line[data-v-d3f8c94b]:after{position:absolute;left:50%;top:2%;content:" ";height:98%;width:0;border-right:1px solid var(--color-top-reply-wrap-line)}.top-sub-comment .right[data-v-d3f8c94b]{flex:1;width:calc(100% - 3rem)}.top-sub-comment .right .w .post-editor-wrapper[data-v-d3f8c94b]{margin-top:1rem}.top-sub-comment[data-v-d3f8c94b] .avatar{display:none!important}.top-sub-comment.top-sub-reply[data-v-d3f8c94b]:first-child{margin-top:0}.top-sub-comment.top-sub-reply>.expand-line[data-v-d3f8c94b]{width:1rem}.top-sub-comment.top-sub-reply>.expand-line[data-v-d3f8c94b]:after{display:none}.comment[data-v-67fa2f3f]{width:100%;box-sizing:border-box;margin-top:.6rem}.comment.isLevelOne[data-v-67fa2f3f]{border-bottom:1px solid var(--color-line);padding:.8rem 1rem;margin-top:0}.comment.ding[data-v-67fa2f3f]{background:rgba(255,255,0,.3)!important}.comment.isSimple .avatar[data-v-67fa2f3f],.comment.isSimple .expand-line[data-v-67fa2f3f]{display:none}.comment.isSimple .simple-wrapper[data-v-67fa2f3f]{padding-left:2.8rem}.comment.isSimple .w[data-v-67fa2f3f]{padding-left:0!important;padding-top:.5rem}.comment .comment-content-w .more[data-v-67fa2f3f]{text-align:center;margin:2rem 0}.comment .comment-content[data-v-67fa2f3f]{display:flex;position:relative}.comment .comment-content .expand-line[data-v-67fa2f3f]{cursor:pointer;margin-top:.6rem;width:2rem;min-width:2rem;position:relative}.comment .comment-content .expand-line[data-v-67fa2f3f]:after{position:absolute;left:50%;content:" ";height:100%;width:0;border-right:1px solid var(--color-line)}.comment .comment-content .expand-line[data-v-67fa2f3f]:hover:after{border-right:2px solid var(--color-active)}.comment .comment-content .right[data-v-67fa2f3f]{flex:1;width:calc(100% - 3rem)}.comment .comment-content .right .w[data-v-67fa2f3f]{padding-left:1rem}.comment .comment-content .right .w .post-editor-wrapper[data-v-67fa2f3f]{margin-top:1rem}.wrong-wrapper[data-v-67fa2f3f]{font-size:1.4rem;margin-bottom:1rem}.wrong-wrapper span[data-v-67fa2f3f]{cursor:pointer}.wrong-wrapper .del-line[data-v-67fa2f3f]{text-decoration:line-through}.wrong-wrapper .wrong-icon[data-v-67fa2f3f]{margin-left:.5rem}.wrong-wrapper .warning[data-v-67fa2f3f]{border-top:1px solid #e1e1e1;border-bottom:1px solid #e1e1e1;padding:1rem 0;margin-top:1rem;font-size:1.2rem;color:red}.reply-count[data-v-67fa2f3f]{padding:.8rem 0 .4rem;border-radius:.2rem;font-size:1.3rem;display:flex;align-items:center;color:gray;gap:1rem;cursor:pointer}.reply-count .gang[data-v-67fa2f3f]{width:2rem;height:0;border-bottom:1px solid #d5d5d5}.reply-count svg[data-v-67fa2f3f]{font-size:1rem}.top-reply-wrap[data-v-67fa2f3f]{background:var(--color-top-reply-wrap-bg);border-radius:.8rem;padding:.6rem;padding-left:0;margin-left:1rem}.toolbar[data-v-e86785e8]{border-top:1px solid var(--color-line);height:3.8rem;padding-left:.6rem;display:flex;align-items:center;color:var(--color-gray);font-size:1.2rem;gap:.5rem}.comment[data-v-4a063111]{width:100%;box-sizing:border-box;display:flex;gap:1rem;padding:1rem;border-bottom:1px solid var(--color-line)}.comment.isSimple .avatar[data-v-4a063111]{display:none}.comment.isSimple .reply_content[data-v-4a063111]{margin-top:.5rem!important}.comment .avatar[data-v-4a063111]{display:flex}.comment .avatar img[data-v-4a063111]{width:3.8rem;height:3.8rem;border-radius:.3rem}.comment .comment-body[data-v-4a063111]{flex:1;display:flex;flex-direction:column}.comment .comment-body .texts[data-v-4a063111]{display:flex;align-items:center}.comment .comment-body .reply_content[data-v-4a063111]{margin-top:1rem;max-width:calc(100% - 5rem)}.comment .isRight[data-v-4a063111]{align-items:flex-end}.comment .isRight .owner[data-v-4a063111],.comment .isRight .mod[data-v-4a063111],.comment .isRight .username[data-v-4a063111]{margin:0 0 0 1rem}.comment .Author-right[data-v-4a063111]{display:flex;flex-direction:column;align-items:center}.comment .Author-right .floor[data-v-4a063111]{margin-left:0}.comment .Author-right .jump[data-v-4a063111]{color:#929596;margin-top:.4rem;font-size:1.4rem}.comment .point[data-v-4a063111]{margin:0 .5rem;font-size:1.6rem;display:flex;gap:.5rem;align-items:center;font-weight:700;color:#000}.sticky{position:sticky;bottom:-2px;z-index:2;background:var(--box-background-hover-color)!important}.sticky[stuck]{box-shadow:0 2px 20px #00000059!important}.preview-modal{position:fixed;width:100vw;height:100vh;left:0;top:-1000vh;z-index:9999}.preview-modal .close{font-size:2rem;color:#fff;position:absolute;right:2rem;top:2rem;cursor:pointer}.preview-modal .mask{position:absolute;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,.7);transition:all .3s}.v-enter-active[data-v-c29afc06],.v-leave-active[data-v-c29afc06]{transition:opacity .3s ease}.v-enter-from[data-v-c29afc06],.v-leave-to[data-v-c29afc06]{opacity:0}.username[data-v-c29afc06]{font-weight:700;font-size:1.4rem;margin-right:1rem}.link-num[data-v-c29afc06]{font-size:1.2rem;font-weight:700;color:#e02a2a}.owner[data-v-c29afc06]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;margin-right:1rem;transform:scale(.8)}.mod[data-v-c29afc06]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;transform:scale(.8);background:#1484cd;color:#fff;margin-right:1rem}.my-tag[data-v-c29afc06]{font-size:1.4rem;color:red;margin-left:1rem}.my-tag:hover .remove[data-v-c29afc06]{display:inline}.my-tag .remove[data-v-c29afc06]{cursor:pointer;margin-left:.5rem;display:none}.add-tag[data-v-c29afc06]{font-size:2.4rem;transform:translateY(.2rem);line-height:1rem;display:inline-block;margin-left:1rem;cursor:pointer;position:absolute;display:none}.floor[data-v-c29afc06]{margin-left:.5rem;font-size:1.1rem;line-height:1rem;border-radius:.5rem;display:inline-block;background-color:var(--color-floor);color:var(--color-floor-font);padding:3px 9px;cursor:default}[data-v-c29afc06]:root{--color-main-bg: #e2e2e2;--color-second-bg: white;--color-third-bg: #e2e2e2;--color-item-bg: white;--color-swtich-bg: #dcdfe6;--color-active: #409eff;--color-font: #999;--color-font-8: rgba(0, 0, 0, .8);--color-font-3: rgba(0, 0, 0, .3);--color-font-pure: black;--color-input-bg: white;--color-input-border: #e2e2e2;--color-input-border-hover: #a3a6ad;--color-radio-border: #e2e2e2;--color-tooltip-bg: white;--color-tooltip-shadow: #bbbbbb;--color-scrollbar: #93ade3;--color-line: #e2e2e2;--color-loading-1: #00000033;--color-loading-2: #000;--color-floor: #f0f0f0;--color-floor-font: #bdbdbd;--color-editor-toolbar: #f6f7f8;--color-sp-btn-bg: #f1f1f1;--color-call-list-bg: white;--color-top-reply-wrap-bg: #f2f3f5;--color-top-reply-wrap-line: #d2d2d2}html.dark[data-v-c29afc06]{--color-main-bg: #22303f;--color-second-bg: #18222d;--color-third-bg: #31475e;--color-item-bg: #18222d;--color-swtich-bg: #4c4d4f;--color-active: #409eff;--color-font: rgba(255, 255, 255, .5);--color-font-8: rgba(255, 255, 255, .8);--color-font-3: rgba(255, 255, 255, .3);--color-font-pure: white;--color-input-bg: #333333;--color-input-border: #6c6e72;--color-input-border-hover: #a3a6ad;--color-radio-border: #454847;--color-tooltip-bg: #31475e;--color-tooltip-shadow: #3b3b3b;--color-scrollbar: #5c5d5e;--color-line: var(--box-border-color);--color-loading-1: rgba(178, 177, 177, .2);--color-loading-2: #ffffff;--color-floor: #293b4d;--color-floor-font: rgba(255, 255, 255, .3);--color-editor-toolbar: var(--box-background-hover-color);--color-sp-btn-bg: #31475e;--color-call-list-bg: #31475e;--color-top-reply-wrap-bg: #212f3e;--color-top-reply-wrap-line: #3b536d}html[data-v-c29afc06],body[data-v-c29afc06]{font-size:62.5%}[data-v-c29afc06]::-webkit-scrollbar{width:1rem;height:1rem}[data-v-c29afc06]::-webkit-scrollbar-track{background:transparent;border-radius:.2rem}[data-v-c29afc06]::-webkit-scrollbar-thumb{background:var(--color-scrollbar);border-radius:1rem}.flex[data-v-c29afc06]{display:flex;align-items:center;justify-content:space-between}.flex-end[data-v-c29afc06]{justify-content:flex-end}.flex-center[data-v-c29afc06]{justify-content:center}.p1[data-v-c29afc06]{padding:1rem}.p2[data-v-c29afc06]{padding:2rem}.p0[data-v-c29afc06]{padding:0!important}body :is(.topic_content,.reply_content) a[href^=http][data-v-c29afc06]{text-underline-offset:.7ex;text-decoration:underline 1px}a[data-v-c29afc06]{text-decoration:none;cursor:pointer}a[data-v-c29afc06]:hover{text-decoration:underline}.tool[data-v-c29afc06]{position:relative;display:flex;align-items:center;border-radius:.3rem;cursor:pointer;height:2.6rem;padding:0 .5rem;gap:.2rem}.tool>svg[data-v-c29afc06]{width:1.6rem!important;height:1.6rem!important}.tool[data-v-c29afc06]:hover{background:var(--color-third-bg)}.tool.no-hover[data-v-c29afc06]{cursor:default}.tool.no-hover[data-v-c29afc06]:hover{background:unset!important}.tool.disabled[data-v-c29afc06]{cursor:not-allowed}.tool.disabled[data-v-c29afc06]:hover{background:unset!important}.my-node[data-v-c29afc06]{border-radius:.2rem;padding:.4rem;font-size:1rem;color:#999;background:#f5f5f5;cursor:pointer}.my-node[data-v-c29afc06]:hover{text-decoration:none;background:#e2e2e2}.msgs[data-v-c29afc06]{position:fixed;margin-left:calc(50% - 25rem);width:50rem;z-index:9999;bottom:0;left:0;right:0}.my-box[data-v-c29afc06]{box-shadow:0 2px 3px #0000001a;box-shadow:#00000014 0 4px 12px;border-radius:var(--box-border-radius);background:var(--box-background-color);margin-bottom:2rem;width:100%;box-sizing:border-box;transition:background-color .3s}.my-cell[data-v-c29afc06]{color:var(--color-font);padding:.8rem 1rem;font-size:1.4rem;line-height:150%;text-align:left;border-bottom:1px solid var(--color-line)}.modal[data-v-c29afc06]{position:fixed;z-index:1001;width:100vw;height:100vh;left:0;top:0;display:flex;justify-content:center;align-items:center}.modal .title[data-v-c29afc06]{font-size:2.4rem;margin-bottom:1rem;text-align:center}.modal .option[data-v-c29afc06]{display:flex;align-items:center;padding:.6rem 0}.modal .option>span[data-v-c29afc06]{position:relative}.modal .mask[data-v-c29afc06]{position:fixed;width:100vw;height:100vh;left:0;top:0;background-color:#1d1c1c47}.radio-group2[data-v-c29afc06]{display:inline-flex;border-radius:.5rem;overflow:hidden;border:1px solid var(--color-radio-border);background:var(--box-background-alt-color)}.radio-group2 .radio[data-v-c29afc06]{cursor:pointer;background:transparent;padding:.5rem 1.2rem;border-left:1px solid var(--color-radio-border);font-size:1.3rem;color:var(--color-gray)}.radio-group2 .radio[data-v-c29afc06]:first-child{border-left:none}.radio-group2 .active[data-v-c29afc06]{background:var(--color-third-bg);color:var(--color-font)}.pop-confirm[data-v-c29afc06]{position:relative;display:inline-flex;justify-content:center}input[data-v-c29afc06]{height:3rem;outline:unset;border:1px solid var(--color-input-border);padding:0 .5rem;border-radius:5px;box-sizing:border-box;transition:all .3s;background:var(--color-input-bg);color:var(--color-font)}input[data-v-c29afc06]:hover{border:1px solid var(--color-input-border-hover)}input[data-v-c29afc06]:focus{border:1px solid var(--color-active)}.danger[data-v-c29afc06]{color:red!important}.pop-confirm-content[data-v-c29afc06]{position:fixed;background:var(--color-tooltip-bg);box-shadow:0 0 6px 1px var(--color-tooltip-shadow);color:var(--color-font-8);padding:1.5rem;border-radius:.8rem;transform:translate(-50%,calc(-100% - 1rem));z-index:1003}.pop-confirm-content .text[data-v-c29afc06]{text-align:start;font-size:1.6rem;width:15rem;min-width:15rem}.pop-confirm-content .options[data-v-c29afc06]{margin-top:1.5rem;display:flex;justify-content:flex-end;align-items:center;gap:1rem}.Post[data-v-c29afc06]{position:unset!important;background:transparent!important;overflow:unset!important}.Post .main[data-v-c29afc06]{background:transparent!important;padding:unset!important;width:100%!important}.Post .close-btn[data-v-c29afc06]{display:none}.post-detail[data-v-c29afc06]{text-align:start;position:fixed;z-index:1002;left:0;right:0;bottom:0;top:0;background:rgba(46,47,48,.8);overflow:auto;font-size:1.4rem;display:flex;justify-content:center;flex-wrap:wrap}.post-detail[data-v-c29afc06] .subtle{background-color:#ecfdf5e6;border-left:4px solid #a7f3d0}.post-detail.isNight[data-v-c29afc06] .subtle{background-color:#1a3332;border-left:4px solid #047857}.post-detail .main[data-v-c29afc06]{display:flex;justify-content:flex-end;padding:3rem 8rem 15rem;background:var(--color-main-bg);position:relative;outline:none}.post-detail .main .main-wrapper[data-v-c29afc06]{width:77rem;padding-bottom:2rem;display:flex;flex-direction:column;align-items:center;position:relative}.post-detail .main .main-wrapper .post-wrapper .header:hover .add-tag[data-v-c29afc06]{display:inline-block}.post-detail .main .main-wrapper .loading-wrapper[data-v-c29afc06]{height:20rem;display:flex;justify-content:center;align-items:center}.post-detail .main .main-wrapper #no-comments-yet[data-v-c29afc06]{color:#a9a9a9;font-weight:700;text-align:center;width:100%;margin-bottom:2rem;box-sizing:border-box}.post-detail .main .relationReply[data-v-c29afc06]{position:fixed;width:25vw;top:6.5rem;bottom:15rem;z-index:100;transform:translate(calc(100% + 2rem));font-size:2rem;overflow:hidden}.post-detail .main .relationReply .my-cell[data-v-c29afc06]{background:var(--color-second-bg);border-radius:var(--box-border-radius) var(--box-border-radius) 0 0}.post-detail .main .relationReply .comments[data-v-c29afc06]{max-height:calc(100% - 4.2rem);overflow:auto;background:var(--color-second-bg);border-radius:0 0 var(--box-border-radius) var(--box-border-radius)}.post-detail .main .call-list[data-v-c29afc06]{z-index:9;position:absolute;top:12rem;border:1px solid var(--color-main-bg);background:var(--color-call-list-bg);box-shadow:0 5px 15px #0000001a;overflow:auto;max-height:30rem;border-radius:var(--box-border-radius);min-width:8rem;box-sizing:content-box}.post-detail .main .call-list .call-item[data-v-c29afc06]{border-top:1px solid var(--color-main-bg);height:3rem;display:flex;padding:0 1rem;align-items:center;cursor:pointer;font-size:14px;box-sizing:border-box}.post-detail .main .call-list .call-item .select[data-v-c29afc06],.post-detail .main .call-list .call-item[data-v-c29afc06]:hover,.post-detail .main .call-list .call-item.select[data-v-c29afc06]{background:var(--color-main-bg);text-decoration:none}.post-detail .main .call-list .call-item[data-v-c29afc06]:nth-child(1){border-top:1px solid transparent}@media screen and (max-width: 1500px){.post-detail .main-wrapper[data-v-c29afc06]{width:65vw!important}}@media screen and (max-width: 1280px){.post-detail .main-wrapper[data-v-c29afc06]{width:75vw!important}}@media screen and (max-width: 960px){.post-detail .main-wrapper[data-v-c29afc06]{width:100vw!important}}.post-detail .scroll-top[data-v-c29afc06]{cursor:pointer;position:fixed;border-radius:.6rem;display:flex;align-items:center;justify-content:center;bottom:10rem;z-index:99;padding:.8rem 0;gap:1rem;width:4.2rem;transform:translate(6rem);font-size:2rem;background:var(--color-sp-btn-bg);color:var(--color-font-3)}.post-detail .scroll-top svg[data-v-c29afc06]{font-size:2.4rem}.post-detail .refresh[data-v-c29afc06]{cursor:pointer;position:fixed;border-radius:.6rem;display:flex;align-items:center;justify-content:center;bottom:10rem;z-index:99;padding:.8rem 0;gap:1rem;width:4.2rem;transform:translate(6rem);font-size:2rem;background:var(--color-sp-btn-bg);color:var(--color-font-3);bottom:23.5rem}.post-detail .refresh svg[data-v-c29afc06]{font-size:2.4rem}.post-detail .scroll-to[data-v-c29afc06]{cursor:pointer;position:fixed;border-radius:.6rem;align-items:center;justify-content:center;bottom:10rem;z-index:99;padding:.8rem 0;gap:1rem;width:4.2rem;transform:translate(6rem);font-size:2rem;background:var(--color-sp-btn-bg);color:var(--color-font-3);bottom:15rem;display:flex;flex-direction:column}.post-detail .scroll-to svg[data-v-c29afc06]{font-size:2.4rem}.post-detail .scroll-to input[data-v-c29afc06]{height:2.6rem;width:3.6rem;font-size:1.4rem;text-align:center;color:gray}.post-detail .msg[data-v-c29afc06]{cursor:pointer;position:fixed;border-radius:.6rem;display:flex;align-items:center;justify-content:center;bottom:10rem;z-index:99;padding:.8rem 0;gap:1rem;width:4.2rem;transform:translate(6rem);font-size:2rem;background:var(--color-sp-btn-bg);color:var(--color-font-3);bottom:5rem}.post-detail .msg svg[data-v-c29afc06]{font-size:2.4rem}.post-detail .close-btn[data-v-c29afc06]{color:var(--color-font-3);cursor:pointer;position:fixed;top:3rem;transform:translate(4rem);font-size:1.6rem}.post-detail .top-reply[data-v-c29afc06]{color:var(--color-font-3);cursor:pointer;font-size:2rem;display:flex}.base64_tooltip[data-v-c50fb66c]{box-shadow:0 3px 6px -4px #0000001f,0 6px 16px #00000014,0 9px 28px 8px #0000000d;background:var(--color-third-bg);min-height:2.2rem;max-width:20rem;padding:1rem;position:fixed;z-index:9998;display:flex;align-items:center;border-radius:.5rem;cursor:pointer;line-break:anywhere;font-size:1.4rem;color:var(--color-font-8)}.base64_tooltip svg[data-v-c50fb66c]{margin-left:1rem;font-size:3rem;color:var(--color-gray)}.base64_tooltip[data-v-c50fb66c] .base-button{margin-left:1rem;margin-top:1rem}.msg[data-v-8bf692ea]{cursor:default;margin-bottom:2rem;display:flex;font-size:1.4rem;box-sizing:border-box;border-radius:var(--box-border-radius);color:var(--color-font-8);background:var(--color-tooltip-bg);box-shadow:0 0 6px 1px var(--color-tooltip-shadow)}.msg.success .left[data-v-8bf692ea]{background:var(--color-active)}.msg.warning .left[data-v-8bf692ea]{background:#c8c002}.msg.error .left[data-v-8bf692ea]{background:red}.msg .left[data-v-8bf692ea]{border-radius:var(--box-border-radius) 0 0 var(--box-border-radius);display:flex;align-items:center;background:var(--color-active);color:#fff;width:3.6rem;font-size:2.4rem;justify-content:center}.msg .left svg[data-v-8bf692ea]{cursor:pointer}.msg .right[data-v-8bf692ea]{flex:1;padding:1rem 2rem;display:flex;justify-content:space-between;align-items:center}.tag-modal .wrapper[data-v-93ba3f19]{z-index:9;background:var(--color-main-bg);color:var(--color-font-8);border-radius:1rem;font-size:1.4rem;padding:2rem 4rem;width:25rem}.tag-modal .wrapper .title[data-v-93ba3f19]{font-weight:700}.tag-modal .wrapper .btns[data-v-93ba3f19]{margin-top:1.5rem;display:flex;justify-content:flex-end;align-items:center;gap:1.5rem;font-size:1.4rem}.msgs[data-v-b73f4332]{position:fixed;margin-left:calc(50% - 25rem);width:50rem;z-index:9999;bottom:0;left:0;right:0}.NotificationModal .modal-root[data-v-77aa374e]{z-index:9;background:var(--color-second-bg);color:var(--color-font-8);border-radius:1rem;font-size:1.4rem;width:50vw;height:80vh;display:flex;flex-direction:column;padding:1.4rem;gap:1rem}.NotificationModal .modal-root .modal-header[data-v-77aa374e]{display:flex;justify-content:space-between}.NotificationModal .modal-root .modal-header .title[data-v-77aa374e]{font-size:2.6rem;font-weight:700;text-align:left;margin-bottom:0}.NotificationModal .modal-root .modal-header i[data-v-77aa374e]{cursor:pointer;font-size:2.2rem}.NotificationModal .modal-root .modal-body[data-v-77aa374e]{padding-top:0;flex:1;gap:1rem;display:flex;flex-direction:column;overflow:hidden}.NotificationModal .modal-root .modal-body .filter[data-v-77aa374e]{display:flex;gap:1rem}.NotificationModal .modal-root .modal-body .filter div[data-v-77aa374e]{border-radius:.4rem;padding:.4rem 1rem;background:gainsboro;cursor:pointer}.NotificationModal .modal-root .modal-body .filter div.active[data-v-77aa374e]{background:#445;color:#fff}.NotificationModal .modal-root .modal-body .list-wrap[data-v-77aa374e]{flex:1;position:relative;overflow:hidden}.NotificationModal .modal-root .modal-body .list-wrap .loading-wrap[data-v-77aa374e]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(255,255,255,.7)}.NotificationModal .modal-root .modal-body .list-wrap .notify-wrap[data-v-77aa374e]{overflow:auto;height:100%}.NotificationModal .modal-root .modal-body .list-wrap #notifications[data-v-77aa374e] .cell{display:none;padding:1.2rem 0}.NotificationModal .modal-root .modal-body .list-wrap #notifications[data-v-77aa374e] .cell a.node{padding:.6rem 1rem;border-radius:.4rem}.NotificationModal .modal-root .modal-body .list-wrap #notifications[data-v-77aa374e] .cell .payload{margin-top:.4rem;font-size:1.7rem}.NotificationModal .modal-root .modal-body #notifications.all[data-v-77aa374e] .cell,.NotificationModal .modal-root .modal-body #notifications.reply[data-v-77aa374e] .reply,.NotificationModal .modal-root .modal-body #notifications.star[data-v-77aa374e] .star,.NotificationModal .modal-root .modal-body #notifications.collect[data-v-77aa374e] .collect{display:block}.NotificationModal .modal-root .modal-body .footer[data-v-77aa374e]{width:100%;display:flex;align-items:center;gap:2rem}.NotificationModal .modal-root .modal-body .footer .pages[data-v-77aa374e]{flex:1}.NotificationModal .modal-root .modal-body .footer .total[data-v-77aa374e]{font-weight:700}.NotificationModal .modal-root .modal-body .footer .total span[data-v-77aa374e]{color:#d3d3d3;font-weight:400;margin-right:.4rem}.NotificationModal .modal-root .modal-body[data-v-77aa374e] .super.button{padding:0;background:unset;height:26px;width:37px}.NotificationModal .modal-root .modal-body[data-v-77aa374e] .super.button a{display:block}.NotificationModal .modal-root .modal-body[data-v-77aa374e] .super.button a:hover{text-decoration:none}.v-enter-active,.v-leave-active{transition:opacity .3s ease}.v-enter-from,.v-leave-to{opacity:0}.username{font-weight:700;font-size:1.4rem;margin-right:1rem}.link-num{font-size:1.2rem;font-weight:700;color:#e02a2a}.owner{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;margin-right:1rem;transform:scale(.8)}.mod{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;transform:scale(.8);background:#1484cd;color:#fff;margin-right:1rem}.my-tag{font-size:1.4rem;color:red;margin-left:1rem}.my-tag:hover .remove{display:inline}.my-tag .remove{cursor:pointer;margin-left:.5rem;display:none}.add-tag{font-size:2.4rem;transform:translateY(.2rem);line-height:1rem;display:inline-block;margin-left:1rem;cursor:pointer;position:absolute;display:none}.floor{margin-left:.5rem;font-size:1.1rem;line-height:1rem;border-radius:.5rem;display:inline-block;background-color:var(--color-floor);color:var(--color-floor-font);padding:3px 9px;cursor:default}:root{--color-main-bg: #e2e2e2;--color-second-bg: white;--color-third-bg: #e2e2e2;--color-item-bg: white;--color-swtich-bg: #dcdfe6;--color-active: #409eff;--color-font: #999;--color-font-8: rgba(0, 0, 0, .8);--color-font-3: rgba(0, 0, 0, .3);--color-font-pure: black;--color-input-bg: white;--color-input-border: #e2e2e2;--color-input-border-hover: #a3a6ad;--color-radio-border: #e2e2e2;--color-tooltip-bg: white;--color-tooltip-shadow: #bbbbbb;--color-scrollbar: #93ade3;--color-line: #e2e2e2;--color-loading-1: #00000033;--color-loading-2: #000;--color-floor: #f0f0f0;--color-floor-font: #bdbdbd;--color-editor-toolbar: #f6f7f8;--color-sp-btn-bg: #f1f1f1;--color-call-list-bg: white;--color-top-reply-wrap-bg: #f2f3f5;--color-top-reply-wrap-line: #d2d2d2}html.dark{--color-main-bg: #22303f;--color-second-bg: #18222d;--color-third-bg: #31475e;--color-item-bg: #18222d;--color-swtich-bg: #4c4d4f;--color-active: #409eff;--color-font: rgba(255, 255, 255, .5);--color-font-8: rgba(255, 255, 255, .8);--color-font-3: rgba(255, 255, 255, .3);--color-font-pure: white;--color-input-bg: #333333;--color-input-border: #6c6e72;--color-input-border-hover: #a3a6ad;--color-radio-border: #454847;--color-tooltip-bg: #31475e;--color-tooltip-shadow: #3b3b3b;--color-scrollbar: #5c5d5e;--color-line: var(--box-border-color);--color-loading-1: rgba(178, 177, 177, .2);--color-loading-2: #ffffff;--color-floor: #293b4d;--color-floor-font: rgba(255, 255, 255, .3);--color-editor-toolbar: var(--box-background-hover-color);--color-sp-btn-bg: #31475e;--color-call-list-bg: #31475e;--color-top-reply-wrap-bg: #212f3e;--color-top-reply-wrap-line: #3b536d}html,body{font-size:62.5%}::-webkit-scrollbar{width:1rem;height:1rem}::-webkit-scrollbar-track{background:transparent;border-radius:.2rem}::-webkit-scrollbar-thumb{background:var(--color-scrollbar);border-radius:1rem}.flex{display:flex;align-items:center;justify-content:space-between}.flex-end{justify-content:flex-end}.flex-center{justify-content:center}.p1{padding:1rem}.p2{padding:2rem}.p0{padding:0!important}body :is(.topic_content,.reply_content) a[href^=http]{text-underline-offset:.7ex;text-decoration:underline 1px}a{text-decoration:none;cursor:pointer}a:hover{text-decoration:underline}.tool{position:relative;display:flex;align-items:center;border-radius:.3rem;cursor:pointer;height:2.6rem;padding:0 .5rem;gap:.2rem}.tool>svg{width:1.6rem!important;height:1.6rem!important}.tool:hover{background:var(--color-third-bg)}.tool.no-hover{cursor:default}.tool.no-hover:hover{background:unset!important}.tool.disabled{cursor:not-allowed}.tool.disabled:hover{background:unset!important}.my-node{border-radius:.2rem;padding:.4rem;font-size:1rem;color:#999;background:#f5f5f5;cursor:pointer}.my-node:hover{text-decoration:none;background:#e2e2e2}.msgs{position:fixed;margin-left:calc(50% - 25rem);width:50rem;z-index:9999;bottom:0;left:0;right:0}.my-box{box-shadow:0 2px 3px #0000001a;box-shadow:#00000014 0 4px 12px;border-radius:var(--box-border-radius);background:var(--box-background-color);margin-bottom:2rem;width:100%;box-sizing:border-box;transition:background-color .3s}.my-cell{color:var(--color-font);padding:.8rem 1rem;font-size:1.4rem;line-height:150%;text-align:left;border-bottom:1px solid var(--color-line)}.modal{position:fixed;z-index:1001;width:100vw;height:100vh;left:0;top:0;display:flex;justify-content:center;align-items:center}.modal .title{font-size:2.4rem;margin-bottom:1rem;text-align:center}.modal .option{display:flex;align-items:center;padding:.6rem 0}.modal .option>span{position:relative}.modal .mask{position:fixed;width:100vw;height:100vh;left:0;top:0;background-color:#1d1c1c47}.radio-group2{display:inline-flex;border-radius:.5rem;overflow:hidden;border:1px solid var(--color-radio-border);background:var(--box-background-alt-color)}.radio-group2 .radio{cursor:pointer;background:transparent;padding:.5rem 1.2rem;border-left:1px solid var(--color-radio-border);font-size:1.3rem;color:var(--color-gray)}.radio-group2 .radio:first-child{border-left:none}.radio-group2 .active{background:var(--color-third-bg);color:var(--color-font)}.pop-confirm{position:relative;display:inline-flex;justify-content:center}input{height:3rem;outline:unset;border:1px solid var(--color-input-border);padding:0 .5rem;border-radius:5px;box-sizing:border-box;transition:all .3s;background:var(--color-input-bg);color:var(--color-font)}input:hover{border:1px solid var(--color-input-border-hover)}input:focus{border:1px solid var(--color-active)}.danger{color:red!important}.pop-confirm-content{position:fixed;background:var(--color-tooltip-bg);box-shadow:0 0 6px 1px var(--color-tooltip-shadow);color:var(--color-font-8);padding:1.5rem;border-radius:.8rem;transform:translate(-50%,calc(-100% - 1rem));z-index:1003}.pop-confirm-content .text{text-align:start;font-size:1.6rem;width:15rem;min-width:15rem}.pop-confirm-content .options{margin-top:1.5rem;display:flex;justify-content:flex-end;align-items:center;gap:1rem}.target-user-tags[data-v-33aaa53e]{background:var(--color-second-bg);color:var(--color-font);word-break:break-all;text-align:start;font-size:1.4rem;box-shadow:0 2px 3px #0000001a;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.target-user-tags .add-tag[data-v-33aaa53e]{display:inline-block}.loaded[data-v-33aaa53e]{font-size:1.4rem;display:flex;align-items:center;gap:1rem;color:var(--color-font-pure)} ');

    dd();
    let e = vue.createApp(ad);
    e.config.unwrapInjectedRef = !0, e.mount(he);
  }

})(Vue);